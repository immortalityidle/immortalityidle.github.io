<div class="equipmentContainer" cdkDropList cdkDropListSortingDisabled>
    <div style="grid-area: head;" class="itemSlot textOverflow" [ngClass]="{'highlightSlot': getSelectedItemSlot() === 'head'}"
      cdkDrag (cdkDragStarted)="dragStart()" (cdkDragEnded)="dragEnd()" (cdkDragMoved)="dragMoved($event)" (cdkDragReleased)="dragReleased($event)"
      [cdkDragData]="characterService.equipment.head" [cdkDragDisabled]="!characterService.equipment.head"    
      (dblclick)="slotDoubleClicked('head', $event)" tabindex="0"
      id="equipmentSlothead"
      tooltip="{{(characterService.equipment.head !== null) ? (characterService.equipment.head.name | titlecase) + '.<br>' + (characterService.equipment.head.description) : ''}}">
      @if (characterService.equipment.head?.imageFile){
        <div>
          <img src="assets/images/items/{{characterService.equipment.head?.imageFile}}.png" class="itemImage" 
            width="48" height="48"  alt="{{characterService.equipment.head?.name | titlecase}}"/>
        </div>
      }
      <div>
        {{characterService.equipment.head?.name | titlecase}}
      </div>
    </div>
    <div style="grid-area: right;" class="itemSlot textOverflow"
      [ngClass]="{'highlightSlot': getSelectedItemSlot() === 'rightHand'}"
      cdkDrag (cdkDragStarted)="dragStart()" (cdkDragEnded)="dragEnd()" (cdkDragMoved)="dragMoved($event)" (cdkDragReleased)="dragReleased($event)"
      [cdkDragData]="characterService.equipment.rightHand" [cdkDragDisabled]="!characterService.equipment.rightHand"    
      (dblclick)="slotDoubleClicked('rightHand', $event)" tabindex="0"
      id="equipmentSlotrightHand"
      tooltip="{{(characterService.equipment.rightHand !== null) ? (characterService.equipment.rightHand.name | titlecase) + '.<br>' + (characterService.equipment.rightHand.description) : ''}}">
      @if (characterService.equipment.rightHand?.imageFile){
        <div>
          <img src="assets/images/items/{{characterService.equipment.rightHand?.imageFile}}.png" class="itemImage" 
            width="48" height="48"  alt="{{characterService.equipment.rightHand?.name | titlecase}}"/>
        </div>
      }
      <div>
        {{characterService.equipment.rightHand?.name | titlecase}}
      </div>
    </div>
    <div style="grid-area: body;" class="itemSlot textOverflow" [ngClass]="{'highlightSlot': getSelectedItemSlot() === 'body'}"
      cdkDrag (cdkDragStarted)="dragStart()" (cdkDragEnded)="dragEnd()" (cdkDragMoved)="dragMoved($event)" (cdkDragReleased)="dragReleased($event)"
      [cdkDragData]="characterService.equipment.body" [cdkDragDisabled]="!characterService.equipment.body"    
      (dblclick)="slotDoubleClicked('body', $event)" tabindex="0"
      id="equipmentSlotbody"
      tooltip="{{(characterService.equipment.body !== null) ? (characterService.equipment.body.name | titlecase) + '.<br>' + (characterService.equipment.body.description) : ''}}">
      @if (characterService.equipment.body?.imageFile){
        <div>
          <img src="assets/images/items/{{characterService.equipment.body?.imageFile}}.png" class="itemImage" 
            width="48" height="48"  alt="{{characterService.equipment.body?.name | titlecase}}"/>
        </div>
      }
      <div>
        {{characterService.equipment.body?.name | titlecase}}
      </div>
    </div>
    <div style="grid-area: left;" class="itemSlot textOverflow" [ngClass]="{'highlightSlot': getSelectedItemSlot() === 'leftHand'}"
      cdkDrag (cdkDragStarted)="dragStart()" (cdkDragEnded)="dragEnd()" (cdkDragMoved)="dragMoved($event)" (cdkDragReleased)="dragReleased($event)"
      [cdkDragData]="characterService.equipment.leftHand" [cdkDragDisabled]="!characterService.equipment.leftHand"    
      (dblclick)="slotDoubleClicked('leftHand', $event)" tabindex="0"
      id="equipmentSlotleftHand"
      tooltip="{{(characterService.equipment.leftHand !== null) ? (characterService.equipment.leftHand.name | titlecase) + '.<br>' + (characterService.equipment.leftHand.description) : ''}}">
      @if (characterService.equipment.leftHand?.imageFile){
        <div>
          <img src="assets/images/items/{{characterService.equipment.leftHand?.imageFile}}.png" class="itemImage" 
            width="48" height="48"  alt="{{characterService.equipment.leftHand?.name | titlecase}}"/>
        </div>
      }
      <div>
        {{characterService.equipment.leftHand?.name | titlecase}}
      </div>
    </div>
    <div style="grid-area: stats;">
      <span tabindex="0" [ngClass]="{'highlightSpan': characterService.righteousWrathUnlocked}" tooltip="Defense.<br>Reduces damage when a monster hits you.<br>Based on your toughness and armor.{{characterService.righteousWrathUnlocked ? '<br>Doubled by the power of your righteous wrath.':''}}"><mat-icon>shield</mat-icon>{{characterService.defense | bigNumber}}</span>
    </div>
    <div style="grid-area: legs;" class="itemSlot textOverflow" [ngClass]="{'highlightSlot': getSelectedItemSlot() === 'legs'}"
      cdkDrag (cdkDragStarted)="dragStart()" (cdkDragEnded)="dragEnd()" (cdkDragMoved)="dragMoved($event)" (cdkDragReleased)="dragReleased($event)"
      [cdkDragData]="characterService.equipment.legs" [cdkDragDisabled]="!characterService.equipment.legs"    
      (dblclick)="slotDoubleClicked('legs', $event)" tabindex="0"
      id="equipmentSlotlegs"
      tooltip="{{(characterService.equipment.legs !== null) ? (characterService.equipment.legs.name | titlecase) + '.<br>' + (characterService.equipment.legs.description) : ''}}">
      @if (characterService.equipment.legs?.imageFile){
        <div>
          <img src="assets/images/items/{{characterService.equipment.legs?.imageFile}}.png" class="itemImage" 
            width="48" height="48"  alt="{{characterService.equipment.legs?.name | titlecase}}"/>
        </div>
      }
      <div>
        {{characterService.equipment.legs?.name | titlecase}}
      </div>
    </div>
    <div style="grid-area: pouch;">
      <div class="pouchGrid" cdkDropList cdkDropListSortingDisabled>
        @for (itemStack of characterService.itemPouches; track itemStack.id;) {
          <div>
            <div id="pouchIndex{{$index}}" >
              <div class="pouchSlot"  [ngClass]="{'cooldown': (itemStack?.item?.cooldown || 0) > 0}" [tabindex]="itemStack?.item ? '0' : '-1'" 
                cdkDrag (cdkDragStarted)="dragStart()" (cdkDragEnded)="dragEnd()" (cdkDragMoved)="dragMoved($event)" (cdkDragReleased)="dragReleased($event)"
                [cdkDragData]="itemStack" [cdkDragDisabled]="!itemStack?.item"
                (dblclick)="pouchDoubleClicked($index, $event)"
                tooltip="{{(itemStack?.item) ? (itemStack?.item?.name | titlecase) + '.<br>' + (itemStack?.item?.description) : ''}}">
                <div class="itemName textOverflow">
                  @if (itemStack?.item?.imageFile){
                    <img src="assets/images/items/{{itemStack?.item?.imageFile}}.png" class="itemImage" 
                      width="48" height="48"  alt="{{itemStack?.item?.name | titlecase}}"/>
                  }
                  @else {
                    {{itemStack?.item?.name | titlecase}}
                  }
                </div>
                <div class="itemQuantity">x{{(itemStack?.quantity || 0) | bigNumber}}</div>
              </div>
            </div>
          </div>
        }
      </div>
    </div>
    <div style="grid-area: feet;" class="itemSlot textOverflow" [ngClass]="{'highlightSlot': getSelectedItemSlot() === 'feet'}"
      cdkDrag (cdkDragStarted)="dragStart()" (cdkDragEnded)="dragEnd()" (cdkDragMoved)="dragMoved($event)" (cdkDragReleased)="dragReleased($event)"
      [cdkDragData]="characterService.equipment.feet" [cdkDragDisabled]="!characterService.equipment.feet"    
      (dblclick)="slotDoubleClicked('feet', $event)" tabindex="0"
      id="equipmentSlotfeet"
      tooltip="{{(characterService.equipment.feet !== null) ? (characterService.equipment.feet.name | titlecase) + '.<br>' + (characterService.equipment.feet.description) : ''}}">
      @if (characterService.equipment.feet?.imageFile){
        <div>
          <img src="assets/images/items/{{characterService.equipment.feet?.imageFile}}.png" class="itemImage" 
            width="48" height="48"  alt="{{characterService.equipment.feet?.name | titlecase}}"/>
        </div>
      }
      <div>
        {{characterService.equipment.feet?.name | titlecase}}
      </div>
  </div>
</div>
<br>