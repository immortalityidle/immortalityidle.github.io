"use strict";(self.webpackChunkimmortalityidle=self.webpackChunkimmortalityidle||[]).push([[792],{330:nc=>{nc.exports={rE:"2.0.0"}},502:(nc,hC,fC)=>{function Tg(t,i){return Object.is(t,i)}let Si=null,rc=!1,xg=1;const ci=Symbol("SIGNAL");function Ae(t){const i=Si;return Si=t,i}const ss={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function oc(t){if(rc)throw new Error("");if(null===Si)return;Si.consumerOnSignalRead(t);const i=Si.nextProducerIndex++;Ju(Si),i<Si.producerNode.length&&Si.producerNode[i]!==t&&cc(Si)&&Xu(Si.producerNode[i],Si.producerIndexOfThis[i]),Si.producerNode[i]!==t&&(Si.producerNode[i]=t,Si.producerIndexOfThis[i]=cc(Si)?vC(t,Si,i):0),Si.producerLastReadVersion[i]=t.version}function ac(t){if((!cc(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==xg)){if(!t.producerMustRecompute(t)&&!sc(t))return void Zu(t);t.producerRecomputeValue(t),Zu(t)}}function mC(t){if(void 0===t.liveConsumerNode)return;const i=rc;rc=!0;try{for(const e of t.liveConsumerNode)e.dirty||gC(e)}finally{rc=i}}function pC(){return!1!==Si?.consumerAllowSignalWrites}function gC(t){t.dirty=!0,mC(t),t.consumerMarkedDirty?.(t)}function Zu(t){t.dirty=!1,t.lastCleanEpoch=xg}function Jo(t){return t&&(t.nextProducerIndex=0),Ae(t)}function ls(t,i){if(Ae(i),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(cc(t))for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)Xu(t.producerNode[e],t.producerIndexOfThis[e]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function sc(t){Ju(t);for(let i=0;i<t.producerNode.length;i++){const e=t.producerNode[i],n=t.producerLastReadVersion[i];if(n!==e.version||(ac(e),n!==e.version))return!0}return!1}function lc(t){if(Ju(t),cc(t))for(let i=0;i<t.producerNode.length;i++)Xu(t.producerNode[i],t.producerIndexOfThis[i]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function vC(t,i,e){if(yC(t),0===t.liveConsumerNode.length&&_C(t))for(let n=0;n<t.producerNode.length;n++)t.producerIndexOfThis[n]=vC(t.producerNode[n],t,n);return t.liveConsumerIndexOfThis.push(e),t.liveConsumerNode.push(i)-1}function Xu(t,i){if(yC(t),1===t.liveConsumerNode.length&&_C(t))for(let n=0;n<t.producerNode.length;n++)Xu(t.producerNode[n],t.producerIndexOfThis[n]);const e=t.liveConsumerNode.length-1;if(t.liveConsumerNode[i]=t.liveConsumerNode[e],t.liveConsumerIndexOfThis[i]=t.liveConsumerIndexOfThis[e],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,i<t.liveConsumerNode.length){const n=t.liveConsumerIndexOfThis[i],r=t.liveConsumerNode[i];Ju(r),r.producerIndexOfThis[n]=i}}function cc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ju(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function yC(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function _C(t){return void 0!==t.producerNode}function bC(t){const i=Object.create(w2);i.computation=t;const e=()=>{if(ac(i),oc(i),i.value===bo)throw i.error;return i.value};return e[ci]=i,e}const ea=Symbol("UNSET"),cs=Symbol("COMPUTING"),bo=Symbol("ERRORED"),w2={...ss,value:ea,dirty:!0,error:null,equal:Tg,kind:"computed",producerMustRecompute:t=>t.value===ea||t.value===cs,producerRecomputeValue(t){if(t.value===cs)throw new Error("Detected cycle in computations.");const i=t.value;t.value=cs;const e=Jo(t);let n,r=!1;try{n=t.computation(),Ae(null),r=i!==ea&&i!==bo&&n!==bo&&t.equal(i,n)}catch(o){n=bo,t.error=o}finally{ls(t,e)}r?t.value=i:(t.value=n,t.version++)}};let SC=function C2(){throw new Error};function wC(t){SC(t)}function th(t,i){pC()||wC(t),t.equal(t.value,i)||(t.value=i,function T2(t){t.version++,function S2(){xg++}(),mC(t)}(t))}const Mg={...ss,equal:Tg,value:void 0,kind:"signal"};let Ig;function ih(){return Ig}function So(t){const i=Ig;return Ig=t,i}const Ag=Symbol("NotFound");function nt(t){return"function"==typeof t}function Pg(t){const e=t(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}Error;const Rg=Pg(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function dc(t,i){if(t){const e=t.indexOf(i);0<=e&&t.splice(e,1)}}class je{constructor(i){this.initialTeardown=i,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let i;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const o of e)o.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(nt(n))try{n()}catch(o){i=o instanceof Rg?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{EC(o)}catch(a){i=i??[],a instanceof Rg?i=[...i,...a.errors]:i.push(a)}}if(i)throw new Rg(i)}}add(i){var e;if(i&&i!==this)if(this.closed)EC(i);else{if(i instanceof je){if(i.closed||i._hasParent(this))return;i._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(i)}}_hasParent(i){const{_parentage:e}=this;return e===i||Array.isArray(e)&&e.includes(i)}_addParent(i){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(i),e):e?[e,i]:i}_removeParent(i){const{_parentage:e}=this;e===i?this._parentage=null:Array.isArray(e)&&dc(e,i)}remove(i){const{_finalizers:e}=this;e&&dc(e,i),i instanceof je&&i._removeParent(this)}}je.EMPTY=(()=>{const t=new je;return t.closed=!0,t})();const TC=je.EMPTY;function xC(t){return t instanceof je||t&&"closed"in t&&nt(t.remove)&&nt(t.add)&&nt(t.unsubscribe)}function EC(t){nt(t)?t():t.unsubscribe()}const ta={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},nh={setTimeout(t,i,...e){const{delegate:n}=nh;return n?.setTimeout?n.setTimeout(t,i,...e):setTimeout(t,i,...e)},clearTimeout(t){const{delegate:i}=nh;return(i?.clearTimeout||clearTimeout)(t)},delegate:void 0};function MC(t){nh.setTimeout(()=>{const{onUnhandledError:i}=ta;if(!i)throw t;i(t)})}function rh(){}const P2=Fg("C",void 0,void 0);function Fg(t,i,e){return{kind:t,value:i,error:e}}let ia=null;function oh(t){if(ta.useDeprecatedSynchronousErrorHandling){const i=!ia;if(i&&(ia={errorThrown:!1,error:null}),t(),i){const{errorThrown:e,error:n}=ia;if(ia=null,e)throw n}}else t()}class Og extends je{constructor(i){super(),this.isStopped=!1,i?(this.destination=i,xC(i)&&i.add(this)):this.destination=H2}static create(i,e,n){return new ah(i,e,n)}next(i){this.isStopped?Ng(function F2(t){return Fg("N",t,void 0)}(i),this):this._next(i)}error(i){this.isStopped?Ng(function R2(t){return Fg("E",void 0,t)}(i),this):(this.isStopped=!0,this._error(i))}complete(){this.isStopped?Ng(P2,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(i){this.destination.next(i)}_error(i){try{this.destination.error(i)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const L2=Function.prototype.bind;function Lg(t,i){return L2.call(t,i)}class N2{constructor(i){this.partialObserver=i}next(i){const{partialObserver:e}=this;if(e.next)try{e.next(i)}catch(n){sh(n)}}error(i){const{partialObserver:e}=this;if(e.error)try{e.error(i)}catch(n){sh(n)}else sh(i)}complete(){const{partialObserver:i}=this;if(i.complete)try{i.complete()}catch(e){sh(e)}}}class ah extends Og{constructor(i,e,n){let r;if(super(),nt(i)||!i)r={next:i??void 0,error:e??void 0,complete:n??void 0};else{let o;this&&ta.useDeprecatedNextContext?(o=Object.create(i),o.unsubscribe=()=>this.unsubscribe(),r={next:i.next&&Lg(i.next,o),error:i.error&&Lg(i.error,o),complete:i.complete&&Lg(i.complete,o)}):r=i}this.destination=new N2(r)}}function sh(t){ta.useDeprecatedSynchronousErrorHandling?function O2(t){ta.useDeprecatedSynchronousErrorHandling&&ia&&(ia.errorThrown=!0,ia.error=t)}(t):MC(t)}function Ng(t,i){const{onStoppedNotification:e}=ta;e&&nh.setTimeout(()=>e(t,i))}const H2={closed:!0,next:rh,error:function B2(t){throw t},complete:rh},Bg="function"==typeof Symbol&&Symbol.observable||"@@observable";function wo(t){return t}function IC(t){return 0===t.length?wo:1===t.length?t[0]:function(e){return t.reduce((n,r)=>r(n),e)}}let st=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(e,n,r){const o=function j2(t){return t&&t instanceof Og||function q2(t){return t&&nt(t.next)&&nt(t.error)&&nt(t.complete)}(t)&&xC(t)}(e)?e:new ah(e,n,r);return oh(()=>{const{operator:a,source:s}=this;o.add(a?a.call(o,s):s?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=AC(n))((r,o)=>{const a=new ah({next:s=>{try{e(s)}catch(l){o(l),a.unsubscribe()}},error:o,complete:r});this.subscribe(a)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[Bg](){return this}pipe(...e){return IC(e)(this)}toPromise(e){return new(e=AC(e))((n,r)=>{let o;this.subscribe(a=>o=a,a=>r(a),()=>n(o))})}}return t.create=i=>new t(i),t})();function AC(t){var i;return null!==(i=t??ta.Promise)&&void 0!==i?i:Promise}const U2=Pg(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Y=(()=>{class t extends st{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new PC(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new U2}next(e){oh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(e)}})}error(e){oh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){oh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:o}=this;return n||r?TC:(this.currentObservers=null,o.push(e),new je(()=>{this.currentObservers=null,dc(o,e)}))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:o}=this;n?e.error(r):o&&e.complete()}asObservable(){const e=new st;return e.source=this,e}}return t.create=(i,e)=>new PC(i,e),t})();class PC extends Y{constructor(i,e){super(),this.destination=i,this.source=e}next(i){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,i)}error(i){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,i)}complete(){var i,e;null===(e=null===(i=this.destination)||void 0===i?void 0:i.complete)||void 0===e||e.call(i)}_subscribe(i){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(i))&&void 0!==n?n:TC}}class Yi extends Y{constructor(i){super(),this._value=i}get value(){return this.getValue()}_subscribe(i){const e=super._subscribe(i);return!e.closed&&i.next(this._value),e}getValue(){const{hasError:i,thrownError:e,_value:n}=this;if(i)throw e;return this._throwIfClosed(),n}next(i){super.next(this._value=i)}}function RC(t){return nt(t?.lift)}function Bt(t){return i=>{if(RC(i))return i.lift(function(e){try{return t(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function wt(t,i,e,n,r){return new z2(t,i,e,n,r)}class z2 extends Og{constructor(i,e,n,r,o,a){super(i),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=e?function(s){try{e(s)}catch(l){i.error(l)}}:super._next,this._error=r?function(s){try{r(s)}catch(l){i.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(s){i.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(i=this.onFinalize)||void 0===i||i.call(this))}}}function me(t,i){return Bt((e,n)=>{let r=0;e.subscribe(wt(n,o=>{n.next(t.call(i,o,r++))}))})}const FC="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class N extends Error{code;constructor(i,e){super(function Co(t,i){return`NG0${Math.abs(t)}${i?": "+i:""}`}(i,e)),this.code=i}}const lh=Symbol("InputSignalNode#UNSET"),OC={...Mg,transformFn:void 0,applyValueToInputSignal(t,i){th(t,i)}};function LC(t,i){const e=Object.create(OC);function n(){if(oc(e),e.value===lh)throw new N(-950,!1);return e.value}return e.value=t,e.transformFn=i?.transform,n[ci]=e,n}function Kr(t){return{toString:t}.toString()}const us="__parameters__";function fs(t,i,e){return Kr(()=>{const n=function Hg(t){return function(...e){if(t){const n=t(...e);for(const r in n)this[r]=n[r]}}}(i);function r(...o){if(this instanceof r)return n.apply(this,o),this;const a=new r(...o);return s.annotation=a,s;function s(l,c,d){const u=l.hasOwnProperty(us)?l[us]:Object.defineProperty(l,us,{value:[]})[us];for(;u.length<=d;)u.push(null);return(u[d]=u[d]||[]).push(a),l}}return r.prototype.ngMetadataName=t,r.annotationCls=r,r})}const Qt=globalThis;function vt(t){for(let i in t)if(t[i]===vt)return i;throw Error("Could not find renamed property on target object.")}function $2(t,i){for(const e in i)i.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=i[e])}function wi(t){if("string"==typeof t)return t;if(Array.isArray(t))return`[${t.map(wi).join(", ")}]`;if(null==t)return""+t;const i=t.overriddenName||t.name;if(i)return`${i}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return n>=0?e.slice(0,n):e}function Vg(t,i){return t?i?`${t} ${i}`:t:i||""}const W2=vt({__forward_ref__:vt});function Pt(t){return t.__forward_ref__=Pt,t.toString=function(){return wi(this())},t}function De(t){return ch(t)?t():t}function ch(t){return"function"==typeof t&&t.hasOwnProperty(W2)&&t.__forward_ref__===Pt}function W(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function lt(t){return{providers:t.providers||[],imports:t.imports||[]}}function dh(t){return BC(t,hh)||BC(t,HC)}function BC(t,i){return t.hasOwnProperty(i)?t[i]:null}function uh(t){return t&&(t.hasOwnProperty(qg)||t.hasOwnProperty(X2))?t[qg]:null}const hh=vt({\u0275prov:vt}),qg=vt({\u0275inj:vt}),HC=vt({ngInjectableDef:vt}),X2=vt({ngInjectorDef:vt});class B{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(i,e){this._desc=i,this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=W({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function zg(t){return t&&!!t.\u0275providers}const ms=vt({\u0275cmp:vt}),$g=vt({\u0275dir:vt}),Wg=vt({\u0275pipe:vt}),qC=vt({\u0275mod:vt}),Qr=vt({\u0275fac:vt}),uc=vt({__NG_ELEMENT_ID__:vt}),jC=vt({__NG_ENV_ID__:vt});function Pe(t){return"string"==typeof t?t:null==t?"":String(t)}function UC(t,i){throw new N(-200,t)}function Gg(t,i){throw new N(-201,!1)}var Ue=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ue||{});let Yg;function zC(){return Yg}function vn(t){const i=Yg;return Yg=t,i}function $C(t,i,e){const n=dh(t);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&Ue.Optional?null:void 0!==i?i:void Gg()}const ra={},Kg="__NG_DI_FLAG__";class WC{injector;constructor(i){this.injector=i}retrieve(i,e){return this.injector.get(i,e.optional?Ag:ra,e)}}const ph="ngTempTokenPath",nB=/\n/gm,GC="__source";function oB(t,i=Ue.Default){if(void 0===ih())throw new N(-203,!1);if(null===ih())return $C(t,void 0,i);{const e=ih();let n;return n=e instanceof WC?e.injector:e,n.get(t,i&Ue.Optional?null:void 0,i)}}function P(t,i=Ue.Default){return(zC()||oB)(De(t),i)}function _(t,i=Ue.Default){return P(t,gh(i))}function gh(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Qg(t){const i=[];for(let e=0;e<t.length;e++){const n=De(t[e]);if(Array.isArray(n)){if(0===n.length)throw new N(900,!1);let r,o=Ue.Default;for(let a=0;a<n.length;a++){const s=n[a],l=aB(s);"number"==typeof l?-1===l?r=s.token:o|=l:r=s}i.push(P(r,o))}else i.push(P(n))}return i}function hc(t,i){return t[Kg]=i,t.prototype[Kg]=i,t}function aB(t){return t[Kg]}const ps=hc(fs("Optional"),8),vh=hc(fs("SkipSelf"),4);function oa(t,i){return t.hasOwnProperty(Qr)?t[Qr]:null}function gs(t,i){t.forEach(e=>Array.isArray(e)?gs(e,i):i(e))}function KC(t,i,e){i>=t.length?t.push(e):t.splice(i,0,e)}function yh(t,i){return i>=t.length-1?t.pop():t.splice(i,1)[0]}function Pn(t,i,e){let n=fc(t,i);return n>=0?t[1|n]=e:(n=~n,function ZC(t,i,e,n){let r=t.length;if(r==i)t.push(e,n);else if(1===r)t.push(n,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>i;)t[r]=t[r-2],r--;t[i]=e,t[i+1]=n}}(t,n,i,e)),n}function Zg(t,i){const e=fc(t,i);if(e>=0)return t[1|e]}function fc(t,i){return function fB(t,i,e){let n=0,r=t.length>>e;for(;r!==n;){const o=n+(r-n>>1),a=t[o<<e];if(i===a)return o<<e;a>i?r=o:n=o+1}return~(r<<e)}(t,i,1)}const ar={},rt=[],Kn=new B(""),XC=new B("",-1),Xg=new B("");class bh{get(i,e=ra){if(e===ra){const n=new Error(`NullInjectorError: No provider for ${wi(i)}!`);throw n.name="NullInjectorError",n}return e}}function Rn(t,i){const e=t[qC]||null;if(!e&&!0===i)throw new Error(`Type ${wi(t)} does not have '\u0275mod' property.`);return e}function ze(t){return t[ms]||null}function Fn(t){return t[Wg]||null}function JC(...t){return{\u0275providers:Jg(0,t),\u0275fromNgModule:!0}}function Jg(t,...i){const e=[],n=new Set;let r;const o=a=>{e.push(a)};return gs(i,a=>{const s=a;Sh(s,o,[],n)&&(r||=[],r.push(s))}),void 0!==r&&ek(r,o),e}function ek(t,i){for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ev(r,o=>{i(o,n)})}}function Sh(t,i,e,n){if(!(t=De(t)))return!1;let r=null,o=uh(t);const a=!o&&ze(t);if(o||a){if(a&&!a.standalone)return!1;r=t}else{const l=t.ngModule;if(o=uh(l),!o)return!1;r=l}const s=n.has(r);if(a){if(s)return!1;if(n.add(r),a.dependencies){const l="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const c of l)Sh(c,i,e,n)}}else{if(!o)return!1;{if(null!=o.imports&&!s){let c;n.add(r);try{gs(o.imports,d=>{Sh(d,i,e,n)&&(c||=[],c.push(d))})}finally{}void 0!==c&&ek(c,i)}if(!s){const c=oa(r)||(()=>new r);i({provide:r,useFactory:c,deps:rt},r),i({provide:Xg,useValue:r,multi:!0},r),i({provide:Kn,useValue:()=>P(r),multi:!0},r)}const l=o.providers;if(null!=l&&!s){const c=t;ev(l,d=>{i(d,c)})}}}return r!==t&&void 0!==t.providers}function ev(t,i){for(let e of t)zg(e)&&(e=e.\u0275providers),Array.isArray(e)?ev(e,i):i(e)}const mB=vt({provide:String,useValue:vt});function tv(t){return null!==t&&"object"==typeof t&&mB in t}function la(t){return"function"==typeof t}const iv=new B(""),wh={},nk={};let nv;function Ch(){return void 0===nv&&(nv=new bh),nv}class Fi{}class ca extends Fi{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(i,e,n,r){super(),this.parent=e,this.source=n,this.scopes=r,ov(i,a=>this.processProvider(a)),this.records.set(XC,vs(void 0,this)),r.has("environment")&&this.records.set(Fi,vs(void 0,this));const o=this.records.get(iv);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Xg,rt,Ue.Self))}retrieve(i,e){return this.get(i,e.optional?Ag:ra,e)}destroy(){mc(this),this._destroyed=!0;const i=Ae(null);try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ae(i)}}onDestroy(i){return mc(this),this._onDestroyHooks.push(i),()=>this.removeOnDestroy(i)}runInContext(i){mc(this);const e=So(this),n=vn(void 0);try{return i()}finally{So(e),vn(n)}}get(i,e=ra,n=Ue.Default){if(mc(this),i.hasOwnProperty(jC))return i[jC](this);n=gh(n);const o=So(this),a=vn(void 0);try{if(!(n&Ue.SkipSelf)){let l=this.records.get(i);if(void 0===l){const c=function bB(t){return"function"==typeof t||"object"==typeof t&&t instanceof B}(i)&&dh(i);l=c&&this.injectableDefInScope(c)?vs(rv(i),wh):null,this.records.set(i,l)}if(null!=l)return this.hydrate(i,l)}return(n&Ue.Self?Ch():this.parent).get(i,e=n&Ue.Optional&&e===ra?null:e)}catch(s){if("NullInjectorError"===s.name){if((s[ph]=s[ph]||[]).unshift(wi(i)),o)throw s;return function sB(t,i,e,n){const r=t[ph];throw i[GC]&&r.unshift(i[GC]),t.message=function lB(t,i,e,n=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=wi(i);if(Array.isArray(i))r=i.map(wi).join(" -> ");else if("object"==typeof i){let o=[];for(let a in i)if(i.hasOwnProperty(a)){let s=i[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):wi(s)))}r=`{${o.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${t.replace(nB,"\n  ")}`}("\n"+t.message,r,e,n),t.ngTokenPath=r,t[ph]=null,t}(s,i,"R3InjectorError",this.source)}throw s}finally{vn(a),So(o)}}resolveInjectorInitializers(){const i=Ae(null),e=So(this),n=vn(void 0);try{const o=this.get(Kn,rt,Ue.Self);for(const a of o)a()}finally{So(e),vn(n),Ae(i)}}toString(){const i=[],e=this.records;for(const n of e.keys())i.push(wi(n));return`R3Injector[${i.join(", ")}]`}processProvider(i){let e=la(i=De(i))?i:De(i&&i.provide);const n=function vB(t){return tv(t)?vs(void 0,t.useValue):vs(rk(t),wh)}(i);if(!la(i)&&!0===i.multi){let r=this.records.get(e);r||(r=vs(void 0,wh,!0),r.factory=()=>Qg(r.multi),this.records.set(e,r)),e=i,r.multi.push(i)}this.records.set(e,n)}hydrate(i,e){const n=Ae(null);try{return e.value===nk?UC(wi(i)):e.value===wh&&(e.value=nk,e.value=e.factory()),"object"==typeof e.value&&e.value&&function _B(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{Ae(n)}}injectableDefInScope(i){if(!i.providedIn)return!1;const e=De(i.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(i){const e=this._onDestroyHooks.indexOf(i);-1!==e&&this._onDestroyHooks.splice(e,1)}}function rv(t){const i=dh(t),e=null!==i?i.factory:oa(t);if(null!==e)return e;if(t instanceof B)throw new N(204,!1);if(t instanceof Function)return function gB(t){if(t.length>0)throw new N(204,!1);const e=function Z2(t){return t&&(t[hh]||t[HC])||null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new N(204,!1)}function rk(t,i,e){let n;if(la(t)){const r=De(t);return oa(r)||rv(r)}if(tv(t))n=()=>De(t.useValue);else if(function ik(t){return!(!t||!t.useFactory)}(t))n=()=>t.useFactory(...Qg(t.deps||[]));else if(function tk(t){return!(!t||!t.useExisting)}(t))n=()=>P(De(t.useExisting));else{const r=De(t&&(t.useClass||t.provide));if(!function yB(t){return!!t.deps}(t))return oa(r)||rv(r);n=()=>new r(...Qg(t.deps))}return n}function mc(t){if(t.destroyed)throw new N(205,!1)}function vs(t,i,e=!1){return{factory:t,value:i,multi:e?[]:void 0}}function ov(t,i){for(const e of t)Array.isArray(e)?ov(e,i):e&&zg(e)?ov(e.\u0275providers,i):i(e)}function sr(t,i){let e;t instanceof ca?(mc(t),e=t):e=new WC(t);const r=So(e),o=vn(void 0);try{return i()}finally{So(r),vn(o)}}function ok(){return void 0!==zC()||null!=ih()}function ys(t){if(!ok())throw new N(-203,!1)}function Zt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ki(t){return Array.isArray(t)&&!0===t[1]}function lv(t){return!!(4&t.flags)}function cr(t){return t.componentOffset>-1}function Eh(t){return!(1&~t.flags)}function Ln(t){return!!t.template}function Xr(t){return!!(512&t[2])}function Do(t){return!(256&~t[2])}class PB{previousValue;currentValue;firstChange;constructor(i,e,n){this.previousValue=i,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function fk(t,i,e,n){null!==i?i.applyValueToInputSignal(i,n):t[e]=n}const Oi=(()=>{const t=()=>mk;return t.ngInherit=!0,t})();function mk(t){return t.type.prototype.ngOnChanges&&(t.setInput=FB),RB}function RB(){const t=gk(this),i=t?.current;if(i){const e=t.previous;if(e===ar)t.previous=i;else for(let n in i)e[n]=i[n];t.current=null,this.ngOnChanges(i)}}function FB(t,i,e,n,r){const o=this.declaredInputs[n],a=gk(t)||function OB(t,i){return t[pk]=i}(t,{previous:ar,current:null}),s=a.current||(a.current={}),l=a.previous,c=l[o];s[o]=new PB(c&&c.currentValue,e,l===ar),fk(t,i,r,e)}const pk="__ngSimpleChanges__";function gk(t){return t[pk]||null}function Xe(t){for(;Array.isArray(t);)t=t[0];return t}function Ds(t,i){return Xe(i[t])}function tn(t,i){return Xe(i[t.index])}function fa(t,i){return t.data[i]}function ma(t,i){return t[i]}function nn(t,i){const e=i[t];return Zt(e)?e:e[0]}function uv(t){return!(128&~t[2])}function Qn(t,i){return null==i?null:t[i]}function _k(t){t[17]=0}function hv(t){1024&t[2]||(t[2]|=1024,uv(t)&&Ts(t))}function vc(t){return!!(9216&t[2]||t[24]?.dirty)}function fv(t){t[10].changeDetectionScheduler?.notify(8),64&t[2]&&(t[2]|=1024),vc(t)&&Ts(t)}function Ts(t){t[10].changeDetectionScheduler?.notify(0);let i=Jr(t);for(;null!==i&&!(8192&i[2])&&(i[2]|=8192,uv(i));)i=Jr(i)}function Ih(t,i){if(Do(t))throw new N(911,!1);null===t[21]&&(t[21]=[]),t[21].push(i)}function Jr(t){const i=t[3];return ki(i)?i[3]:i}function Sk(t){return t[7]??=[]}function wk(t){return t.cleanup??=[]}const Te={lFrame:Ak(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let gv=!1;function vv(){return Te.bindingsEnabled}function pa(){return null!==Te.skipHydrationRootTNode}function q(){return Te.lFrame.lView}function Ce(){return Te.lFrame.tView}function M(t){return Te.lFrame.contextLView=t,t[8]}function I(t){return Te.lFrame.contextLView=null,t}function Ve(){let t=Ck();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ck(){return Te.lFrame.currentTNode}function dr(t,i){const e=Te.lFrame;e.currentTNode=t,e.isParent=i}function yv(){return Te.lFrame.isParent}function _v(){Te.lFrame.isParent=!1}function kk(){return Te.lFrame.contextLView}function Tk(){return gv}function Ph(t){const i=gv;return gv=t,i}function rn(){const t=Te.lFrame;let i=t.bindingRootIndex;return-1===i&&(i=t.bindingRootIndex=t.tView.bindingStartIndex),i}function eo(){return Te.lFrame.bindingIndex}function Zn(){return Te.lFrame.bindingIndex++}function to(t){const i=Te.lFrame,e=i.bindingIndex;return i.bindingIndex=i.bindingIndex+t,e}function QB(t,i){const e=Te.lFrame;e.bindingIndex=e.bindingRootIndex=t,bv(i)}function bv(t){Te.lFrame.currentDirectiveIndex=t}function wv(){return Te.lFrame.currentQueryIndex}function Rh(t){Te.lFrame.currentQueryIndex=t}function XB(t){const i=t[1];return 2===i.type?i.declTNode:1===i.type?t[5]:null}function Mk(t,i,e){if(e&Ue.SkipSelf){let r=i,o=t;for(;!(r=r.parent,null!==r||e&Ue.Host||(r=XB(o),null===r||(o=o[14],10&r.type))););if(null===r)return!1;i=r,t=o}const n=Te.lFrame=Ik();return n.currentTNode=i,n.lView=t,!0}function Cv(t){const i=Ik(),e=t[1];Te.lFrame=i,i.currentTNode=e.firstChild,i.lView=t,i.tView=e,i.contextLView=t,i.bindingIndex=e.bindingStartIndex,i.inI18n=!1}function Ik(){const t=Te.lFrame,i=null===t?null:t.child;return null===i?Ak(t):i}function Ak(t){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=i),i}function Pk(){const t=Te.lFrame;return Te.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Rk=Pk;function kv(){const t=Pk();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Li(){return Te.lFrame.selectedIndex}function ga(t){Te.lFrame.selectedIndex=t}function Ct(){const t=Te.lFrame;return fa(t.tView,t.selectedIndex)}function Dv(){Te.lFrame.currentNamespace="svg"}let Ok=!0;function _c(){return Ok}function Mr(t){Ok=t}function Tv(t,i){for(let e=i.directiveStart,n=i.directiveEnd;e<n;e++){const o=t.data[e].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:s,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=o;a&&(t.contentHooks??=[]).push(-e,a),s&&((t.contentHooks??=[]).push(e,s),(t.contentCheckHooks??=[]).push(e,s)),l&&(t.viewHooks??=[]).push(-e,l),c&&((t.viewHooks??=[]).push(e,c),(t.viewCheckHooks??=[]).push(e,c)),null!=d&&(t.destroyHooks??=[]).push(e,d)}}function Fh(t,i,e){Lk(t,i,3,e)}function Oh(t,i,e,n){(3&t[2])===e&&Lk(t,i,e,n)}function xv(t,i){let e=t[2];(3&e)===i&&(e&=16383,e+=1,t[2]=e)}function Lk(t,i,e,n){const o=n??-1,a=i.length-1;let s=0;for(let l=void 0!==n?65535&t[17]:0;l<a;l++)if("number"==typeof i[l+1]){if(s=i[l],null!=n&&s>=n)break}else i[l]<0&&(t[17]+=65536),(s<o||-1==o)&&(rH(t,e,i,l),t[17]=(4294901760&t[17])+l+2),l++}function Nk(t,i){const e=Ae(null);try{i.call(t)}finally{Ae(e)}}function rH(t,i,e,n){const r=e[n]<0,o=e[n+1],s=t[r?-e[n]:e[n]];r?t[2]>>14<t[17]>>16&&(3&t[2])===i&&(t[2]+=16384,Nk(s,o)):Nk(s,o)}class bc{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(i,e,n){this.factory=i,this.canSeeViewProviders=e,this.injectImpl=n}}function Bk(t){return 3===t||4===t||6===t}function Hk(t){return 64===t.charCodeAt(0)}function Es(t,i){if(null!==i&&0!==i.length)if(null===t||0===t.length)t=i.slice();else{let e=-1;for(let n=0;n<i.length;n++){const r=i[n];"number"==typeof r?e=r:0===e||Vk(t,e,r,0,-1===e||2===e?i[++n]:null)}}return t}function Vk(t,i,e,n,r){let o=0,a=t.length;if(-1===i)a=-1;else for(;o<t.length;){const s=t[o++];if("number"==typeof s){if(s===i){a=-1;break}if(s>i){a=o-1;break}}}for(;o<t.length;){const s=t[o];if("number"==typeof s)break;if(s===e)return void(null!==r&&(t[o+1]=r));o++,null!==r&&o++}-1!==a&&(t.splice(a,0,i),o=a+1),t.splice(o++,0,e),null!==r&&t.splice(o++,0,r)}const Iv={};class va{injector;parentInjector;constructor(i,e){this.injector=i,this.parentInjector=e}get(i,e,n){n=gh(n);const r=this.injector.get(i,Iv,n);return r!==Iv||e===Iv?r:this.parentInjector.get(i,e,n)}}function Av(t){return-1!==t}function Sc(t){return 32767&t}function wc(t,i){let e=function cH(t){return t>>16}(t),n=i;for(;e>0;)n=n[14],e--;return n}let Pv=!0;function Lh(t){const i=Pv;return Pv=t,i}let uH=0;const Ir={};function Nh(t,i){const e=Uk(t,i);if(-1!==e)return e;const n=i[1];n.firstCreatePass&&(t.injectorIndex=i.length,Rv(n.data,t),Rv(i,null),Rv(n.blueprint,null));const r=Bh(t,i),o=t.injectorIndex;if(Av(r)){const a=Sc(r),s=wc(r,i),l=s[1].data;for(let c=0;c<8;c++)i[o+c]=s[a+c]|l[a+c]}return i[o+8]=r,o}function Rv(t,i){t.push(0,0,0,0,0,0,0,0,i)}function Uk(t,i){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===i[t.injectorIndex+8]?-1:t.injectorIndex}function Bh(t,i){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,n=null,r=i;for(;null!==r;){if(n=Qk(r),null===n)return-1;if(e++,r=r[14],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return-1}function Fv(t,i,e){!function hH(t,i,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(uc)&&(n=e[uc]),null==n&&(n=e[uc]=uH++);const r=255&n;i.data[t+(r>>5)]|=1<<r}(t,i,e)}function zk(t,i,e){if(e&Ue.Optional||void 0!==t)return t;Gg()}function $k(t,i,e,n){if(e&Ue.Optional&&void 0===n&&(n=null),!(e&(Ue.Self|Ue.Host))){const r=t[9],o=vn(void 0);try{return r?r.get(i,n,e&Ue.Optional):$C(i,n,e&Ue.Optional)}finally{vn(o)}}return zk(n,0,e)}function Wk(t,i,e,n=Ue.Default,r){if(null!==t){if(2048&i[2]&&!(n&Ue.Self)){const a=function vH(t,i,e,n,r){let o=t,a=i;for(;null!==o&&null!==a&&2048&a[2]&&!Xr(a);){const s=Gk(o,a,e,n|Ue.Self,Ir);if(s!==Ir)return s;let l=o.parent;if(!l){const c=a[20];if(c){const d=c.get(e,Ir,n);if(d!==Ir)return d}l=Qk(a),a=a[14]}o=l}return r}(t,i,e,n,Ir);if(a!==Ir)return a}const o=Gk(t,i,e,n,Ir);if(o!==Ir)return o}return $k(i,e,n,r)}function Gk(t,i,e,n,r){const o=function pH(t){if("string"==typeof t)return t.charCodeAt(0)||0;const i=t.hasOwnProperty(uc)?t[uc]:void 0;return"number"==typeof i?i>=0?255&i:gH:i}(e);if("function"==typeof o){if(!Mk(i,t,n))return n&Ue.Host?zk(r,0,n):$k(i,e,n,r);try{let a;if(a=o(n),null!=a||n&Ue.Optional)return a;Gg()}finally{Rk()}}else if("number"==typeof o){let a=null,s=Uk(t,i),l=-1,c=n&Ue.Host?i[15][5]:null;for((-1===s||n&Ue.SkipSelf)&&(l=-1===s?Bh(t,i):i[s+8],-1!==l&&Kk(n,!1)?(a=i[1],s=Sc(l),i=wc(l,i)):s=-1);-1!==s;){const d=i[1];if(Yk(o,s,d.data)){const u=mH(s,i,e,a,n,c);if(u!==Ir)return u}l=i[s+8],-1!==l&&Kk(n,i[1].data[s+8]===c)&&Yk(o,s,i)?(a=d,s=Sc(l),i=wc(l,i)):s=-1}}return r}function mH(t,i,e,n,r,o){const a=i[1],s=a.data[t+8],d=Hh(s,a,e,null==n?cr(s)&&Pv:n!=a&&!!(3&s.type),r&Ue.Host&&o===s);return null!==d?Cc(i,a,d,s):Ir}function Hh(t,i,e,n,r){const o=t.providerIndexes,a=i.data,s=1048575&o,l=t.directiveStart,d=o>>20,p=r?s+d:t.directiveEnd;for(let g=n?s:s+d;g<p;g++){const m=a[g];if(g<l&&e===m||g>=l&&m.type===e)return g}if(r){const g=a[l];if(g&&Ln(g)&&g.type===e)return l}return null}function Cc(t,i,e,n){let r=t[e];const o=i.data;if(r instanceof bc){const a=r;a.resolving&&UC(function ct(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Pe(t)}(o[e]));const s=Lh(a.canSeeViewProviders);a.resolving=!0;const c=a.injectImpl?vn(a.injectImpl):null;Mk(t,n,Ue.Default);try{r=t[e]=a.factory(void 0,o,t,n),i.firstCreatePass&&e>=n.directiveStart&&function nH(t,i,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:o}=i.type.prototype;if(n){const a=mk(i);(e.preOrderHooks??=[]).push(t,a),(e.preOrderCheckHooks??=[]).push(t,a)}r&&(e.preOrderHooks??=[]).push(0-t,r),o&&((e.preOrderHooks??=[]).push(t,o),(e.preOrderCheckHooks??=[]).push(t,o))}(e,o[e],i)}finally{null!==c&&vn(c),Lh(s),a.resolving=!1,Rk()}}return r}function Yk(t,i,e){return!!(e[i+(t>>5)]&1<<t)}function Kk(t,i){return!(t&Ue.Self||t&Ue.Host&&i)}class Xt{_tNode;_lView;constructor(i,e){this._tNode=i,this._lView=e}get(i,e,n){return Wk(this._tNode,this._lView,i,gh(n),e)}}function gH(){return new Xt(Ve(),q())}function xt(t){return Kr(()=>{const i=t.prototype.constructor,e=i[Qr]||Ov(i),n=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==n;){const o=r[Qr]||Ov(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Ov(t){return ch(t)?()=>{const i=Ov(De(t));return i&&i()}:oa(t)}function Qk(t){const i=t[1],e=i.type;return 2===e?i.declTNode:1===e?t[5]:null}function t1(t,i=null,e=null,n){const r=n1(t,i,e,n);return r.resolveInjectorInitializers(),r}function n1(t,i=null,e=null,n,r=new Set){const o=[e||rt,JC(t)];return n=n||("object"==typeof t?void 0:wi(t)),new ca(o,i||Ch(),n||null,r)}class we{static THROW_IF_NOT_FOUND=ra;static NULL=new bh;static create(i,e){if(Array.isArray(i))return t1({name:""},e,i,"");{const n=i.name??"";return t1({name:n},i.parent,i.providers,n)}}static \u0275prov=W({token:we,providedIn:"any",factory:()=>P(XC)});static __NG_ELEMENT_ID__=-1}class r1{attributeName;constructor(i){this.attributeName=i}__NG_ELEMENT_ID__=()=>function kc(t){return function fH(t,i){if("class"===i)return t.classes;if("style"===i)return t.styles;const e=t.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const o=e[r];if(Bk(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(o===i)return e[r+1];r+=2}}}return null}(Ve(),t)}(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}}new B("").__NG_ELEMENT_ID__=t=>{const i=Ve();if(null===i)throw new N(204,!1);if(2&i.type)return i.value;if(t&Ue.Optional)return null;throw new N(204,!1)};const o1=!1;let io=(()=>class t{static __NG_ELEMENT_ID__=TH;static __NG_ENV_ID__=e=>e})();class a1 extends io{_lView;constructor(i){super(),this._lView=i}onDestroy(i){return Ih(this._lView,i),()=>function mv(t,i){if(null===t[21])return;const e=t[21].indexOf(i);-1!==e&&t[21].splice(e,1)}(this._lView,i)}}function TH(){return new a1(q())}class no{}const Dc=new B("",{providedIn:"root",factory:()=>!1}),s1=new B(""),Nv=new B("");let xo=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Yi(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=W({token:t,providedIn:"root",factory:()=>new t})}return t})();const le=class EH extends Y{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(i=!1){super(),this.__isAsync=i,ok()&&(this.destroyRef=_(io,{optional:!0})??void 0,this.pendingTasks=_(xo,{optional:!0})??void 0)}emit(i){const e=Ae(null);try{super.next(i)}finally{Ae(e)}}subscribe(i,e,n){let r=i,o=e||(()=>null),a=n;if(i&&"object"==typeof i){const l=i;r=l.next?.bind(l),o=l.error?.bind(l),a=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),a&&(a=this.wrapInTimeout(a)));const s=super.subscribe({next:r,error:o,complete:a});return i instanceof je&&i.add(s),s}wrapInTimeout(i){return e=>{const n=this.pendingTasks?.add();setTimeout(()=>{i(e),void 0!==n&&this.pendingTasks?.remove(n)})}}};function Tc(...t){}function l1(t){let i,e;function n(){t=Tc;try{void 0!==e&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(e),void 0!==i&&clearTimeout(i)}catch{}}return i=setTimeout(()=>{t(),n()}),"function"==typeof requestAnimationFrame&&(e=requestAnimationFrame(()=>{t(),n()})),()=>n()}function c1(t){return queueMicrotask(()=>t()),()=>{t=Tc}}const Bv="isAngularZone",qh=Bv+"_ID";let MH=0;class ce{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new le(!1);onMicrotaskEmpty=new le(!1);onStable=new le(!1);onError=new le(!1);constructor(i){const{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=o1}=i;if(typeof Zone>"u")throw new N(908,!1);Zone.assertZonePatched();const a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!r&&n,a.shouldCoalesceRunChangeDetection=r,a.callbackScheduled=!1,a.scheduleInRootZone=o,function PH(t){const i=()=>{!function AH(t){function i(){l1(()=>{t.callbackScheduled=!1,Vv(t),t.isCheckStableRunning=!0,Hv(t),t.isCheckStableRunning=!1})}t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,t.scheduleInRootZone?Zone.root.run(()=>{i()}):t._outer.run(()=>{i()}),Vv(t))}(t)},e=MH++;t._inner=t._inner.fork({name:"angular",properties:{[Bv]:!0,[qh]:e,[qh+e]:!0},onInvokeTask:(n,r,o,a,s,l)=>{if(function RH(t){return h1(t,"__ignore_ng_zone__")}(l))return n.invokeTask(o,a,s,l);try{return d1(t),n.invokeTask(o,a,s,l)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||t.shouldCoalesceRunChangeDetection)&&i(),u1(t)}},onInvoke:(n,r,o,a,s,l,c)=>{try{return d1(t),n.invoke(o,a,s,l,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function FH(t){return h1(t,"__scheduler_tick__")}(l)&&i(),u1(t)}},onHasTask:(n,r,o,a)=>{n.hasTask(o,a),r===o&&("microTask"==a.change?(t._hasPendingMicrotasks=a.microTask,Vv(t),Hv(t)):"macroTask"==a.change&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(n,r,o,a)=>(n.handleError(o,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}(a)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(Bv)}static assertInAngularZone(){if(!ce.isInAngularZone())throw new N(909,!1)}static assertNotInAngularZone(){if(ce.isInAngularZone())throw new N(909,!1)}run(i,e,n){return this._inner.run(i,e,n)}runTask(i,e,n,r){const o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+r,i,IH,Tc,Tc);try{return o.runTask(a,e,n)}finally{o.cancelTask(a)}}runGuarded(i,e,n){return this._inner.runGuarded(i,e,n)}runOutsideAngular(i){return this._outer.run(i)}}const IH={};function Hv(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Vv(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function d1(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function u1(t){t._nesting--,Hv(t)}class qv{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new le;onMicrotaskEmpty=new le;onStable=new le;onError=new le;run(i,e,n){return i.apply(e,n)}runGuarded(i,e,n){return i.apply(e,n)}runOutsideAngular(i){return i()}runTask(i,e,n,r){return i.apply(e,n)}}function h1(t,i){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[i]}class Nn{_console=console;handleError(i){this._console.error("ERROR",i)}}const LH=new B("",{providedIn:"root",factory:()=>{const t=_(ce),i=_(Nn);return e=>t.runOutsideAngular(()=>i.handleError(e))}});function m1(t,i){return LC(t,i)}const jv=(m1.required=function NH(t){return LC(lh,t)},m1);function BH(){return Ms(Ve(),q())}function Ms(t,i){return new xe(tn(t,i))}let xe=(()=>class t{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=BH})();function p1(t){return t instanceof xe?t.nativeElement:t}function xc(t){return"function"==typeof t&&void 0!==t[ci]}function $(t,i){const e=function D2(t){const i=Object.create(Mg);i.value=t;const e=()=>(oc(i),i.value);return e[ci]=i,e}(t),n=e[ci];return i?.equal&&(n.equal=i.equal),e.set=r=>th(n,r),e.update=r=>function CC(t,i){pC()||wC(t),th(t,i(t.value))}(n,r),e.asReadonly=jh.bind(e),e}function jh(){const t=this[ci];if(void 0===t.readonlyFn){const i=()=>this();i[ci]=t,t.readonlyFn=i}return t.readonlyFn}function g1(t){return xc(t)&&"function"==typeof t.set}function HH(){return this._results[Symbol.iterator]()}class Is{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Y}constructor(i=!1){this._emitDistinctChangesOnly=i}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,e){return this._results.reduce(i,e)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,e){this.dirty=!1;const n=function yn(t){return t.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function hB(t,i,e){if(t.length!==i.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],o=i[n];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}(this._results,n,e))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(i){this._onDirty=i}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=HH}function Mc(t){return!(128&~t.flags)}var Uh=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Uh||{});const zh=new Map;let qH=0;function zv(t){zh.delete(t[19])}const Wv="__ngContext__";function bn(t,i){Zt(i)?(t[Wv]=i[19],function UH(t){zh.set(t[19],t)}(i)):t[Wv]=i}function D1(t){return x1(t[12])}function T1(t){return x1(t[4])}function x1(t){for(;null!==t&&!ki(t);)t=t[4];return t}let Yv;function Ar(){if(void 0!==Yv)return Yv;if(typeof document<"u")return document;throw new N(210,!1)}const Eo=new B("",{providedIn:"root",factory:()=>lV}),lV="ng",Kv=new B(""),Wh=new B("",{providedIn:"platform",factory:()=>"unknown"}),Sn=new B(""),Qv=new B("",{providedIn:"root",factory:()=>Ar().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),N1=new B("",{providedIn:"root",factory:()=>!1});var sy=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(sy||{});const Ps=new B(""),q1=new Set;function wn(t){q1.has(t)||(q1.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}let Zh=(()=>class t{view;node;constructor(e,n){this.view=e,this.node=n}static __NG_ELEMENT_ID__=fV})();function fV(){return new Zh(q(),Ve())}var Rs=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Rs||{});let ly=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=W({token:t,providedIn:"root",factory:()=>new t})}return t})();const j1=[Rs.EarlyRead,Rs.Write,Rs.MixedReadWrite,Rs.Read];let U1=(()=>{class t{ngZone=_(ce);scheduler=_(no);errorHandler=_(Nn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){_(Ps,{optional:!0})}execute(){this.executing=!0;for(const n of j1)for(const r of this.sequences)if(!r.erroredOrDestroyed&&r.hooks[n])try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>(0,r.hooks[n])(r.pipelinedValue),r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(const n of this.sequences)n.afterRun(),n.once&&(this.sequences.delete(n),n.destroy());for(const n of this.deferredRegistrations)this.sequences.add(n);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){const{view:n}=e;void 0!==n?((n[25]??=[]).push(e),Ts(n),n[2]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,n){return n?n.run(sy.AFTER_NEXT_RENDER,e):e()}static \u0275prov=W({token:t,providedIn:"root",factory:()=>new t})}return t})();class z1{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(i,e,n,r,o,a=null){this.impl=i,this.hooks=e,this.view=n,this.once=r,this.snapshot=a,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();const i=this.view?.[25];i&&(this.view[25]=i.filter(e=>e!==this))}}function Xh(t,i){!i?.injector&&ys();const e=i?.injector??_(we);return wn("NgAfterRender"),$1(t,e,i,!1)}function Xn(t,i){!i?.injector&&ys();const e=i?.injector??_(we);return wn("NgAfterNextRender"),$1(t,e,i,!0)}function $1(t,i,e,n){const r=i.get(ly);r.impl??=i.get(U1);const o=i.get(Ps,null,{optional:!0}),a=e?.phase??Rs.MixedReadWrite,s=!0!==e?.manualCleanup?i.get(io):null,l=i.get(Zh,null,{optional:!0}),c=new z1(r.impl,function mV(t,i){if(t instanceof Function){const e=[void 0,void 0,void 0,void 0];return e[i]=t,e}return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}(t,a),l?.view,n,s,o?.snapshot(null));return r.impl.register(c),c}function mD(t,i){const e=t.contentQueries;if(null!==e){const n=Ae(null);try{for(let r=0;r<e.length;r+=2){const a=e[r+1];if(-1!==a){const s=t.data[a];Rh(e[r]),s.contentQueries(2,i[a],a)}}}finally{Ae(n)}}}function by(t,i,e){Rh(0);const n=Ae(null);try{i(t,e)}finally{Ae(n)}}function Sy(t,i,e){if(lv(i)){const n=Ae(null);try{const o=i.directiveEnd;for(let a=i.directiveStart;a<o;a++){const s=t.data[a];s.contentQueries&&s.contentQueries(1,e[a],a)}}finally{Ae(n)}}}var Jn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Jn||{});let cf,df;function qs(t){return function pD(){if(void 0===cf&&(cf=null,Qt.trustedTypes))try{cf=Qt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return cf}()?.createHTML(t)||t}function gD(t){return function wy(){if(void 0===df&&(df=null,Qt.trustedTypes))try{df=Qt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return df}()?.createHTML(t)||t}class Sa{changingThisBreaksApplicationSecurity;constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${FC})`}}class KV extends Sa{getTypeName(){return"HTML"}}class QV extends Sa{getTypeName(){return"Style"}}class ZV extends Sa{getTypeName(){return"Script"}}class XV extends Sa{getTypeName(){return"URL"}}class JV extends Sa{getTypeName(){return"ResourceURL"}}function Bn(t){return t instanceof Sa?t.changingThisBreaksApplicationSecurity:t}function Pr(t,i){const e=function e3(t){return t instanceof Sa&&t.getTypeName()||null}(t);if(null!=e&&e!==i){if("ResourceURL"===e&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${e} (see ${FC})`)}return e===i}class a3{inertDocumentHelper;constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const e=(new window.DOMParser).parseFromString(qs(i),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(i):(e.firstChild?.remove(),e)}catch{return null}}}class s3{defaultDoc;inertDocument;constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const e=this.inertDocument.createElement("template");return e.innerHTML=qs(i),e}}const c3=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function uf(t){return(t=String(t)).match(c3)?t:"unsafe:"+t}function ao(t){const i={};for(const e of t.split(","))i[e]=!0;return i}function jc(...t){const i={};for(const e of t)for(const n in e)e.hasOwnProperty(n)&&(i[n]=!0);return i}const bD=ao("area,br,col,hr,img,wbr"),SD=ao("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),wD=ao("rp,rt"),Cy=jc(bD,jc(SD,ao("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),jc(wD,ao("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),jc(wD,SD)),ky=ao("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),CD=jc(ky,ao("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ao("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),d3=ao("script,style,template");class u3{sanitizedSomething=!1;buf=[];sanitizeChildren(i){let e=i.firstChild,n=!0,r=[];for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)r.push(e),e=m3(e);else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=f3(e);if(o){e=o;break}e=r.pop()}return this.buf.join("")}startElement(i){const e=kD(i).toLowerCase();if(!Cy.hasOwnProperty(e))return this.sanitizedSomething=!0,!d3.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=i.attributes;for(let r=0;r<n.length;r++){const o=n.item(r),a=o.name,s=a.toLowerCase();if(!CD.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let l=o.value;ky[s]&&(l=uf(l)),this.buf.push(" ",a,'="',TD(l),'"')}return this.buf.push(">"),!0}endElement(i){const e=kD(i).toLowerCase();Cy.hasOwnProperty(e)&&!bD.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(i){this.buf.push(TD(i))}}function f3(t){const i=t.nextSibling;if(i&&t!==i.previousSibling)throw DD(i);return i}function m3(t){const i=t.firstChild;if(i&&function h3(t,i){return(t.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(t,i))throw DD(i);return i}function kD(t){const i=t.nodeName;return"string"==typeof i?i:"FORM"}function DD(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}const p3=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g3=/([^\#-~ |!])/g;function TD(t){return t.replace(/&/g,"&amp;").replace(p3,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(g3,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let hf;function xD(t,i){let e=null;try{hf=hf||function _D(t){const i=new s3(t);return function l3(){try{return!!(new window.DOMParser).parseFromString(qs(""),"text/html")}catch{return!1}}()?new a3(i):i}(t);let n=i?String(i):"";e=hf.getInertBodyElement(n);let r=5,o=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=o,o=e.innerHTML,e=hf.getInertBodyElement(n)}while(n!==o);return qs((new u3).sanitizeChildren(Dy(e)||e))}finally{if(e){const n=Dy(e)||e;for(;n.firstChild;)n.firstChild.remove()}}}function Dy(t){return"content"in t&&function v3(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Ni=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Ni||{});function ff(t){const i=Uc();return i?gD(i.sanitize(Ni.HTML,t)||""):Pr(t,"HTML")?gD(Bn(t)):xD(Ar(),Pe(t))}function Bi(t){const i=Uc();return i?i.sanitize(Ni.URL,t)||"":Pr(t,"URL")?Bn(t):uf(Pe(t))}function Uc(){const t=q();return t&&t[10].sanitizer}function FD(t){return t.ownerDocument}function Rr(t){return t instanceof Function?t():t}function O3(t,i,e){let n=t.length;for(;;){const r=t.indexOf(i,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const o=i.length;if(r+o===n||t.charCodeAt(r+o)<=32)return r}e=r+1}}const HD="ng-template";function L3(t,i,e,n){let r=0;if(n){for(;r<i.length&&"string"==typeof i[r];r+=2)if("class"===i[r]&&-1!==O3(i[r+1].toLowerCase(),e,0))return!0}else if(Ey(t))return!1;if(r=i.indexOf(1,r),r>-1){let o;for(;++r<i.length&&"string"==typeof(o=i[r]);)if(o.toLowerCase()===e)return!0}return!1}function Ey(t){return 4===t.type&&t.value!==HD}function N3(t,i,e){return i===(4!==t.type||e?t.value:HD)}function B3(t,i,e){let n=4;const r=t.attrs,o=null!==r?function q3(t){for(let i=0;i<t.length;i++)if(Bk(t[i]))return i;return t.length}(r):0;let a=!1;for(let s=0;s<i.length;s++){const l=i[s];if("number"!=typeof l){if(!a)if(4&n){if(n=2|1&n,""!==l&&!N3(t,l,e)||""===l&&1===i.length){if(ur(n))return!1;a=!0}}else if(8&n){if(null===r||!L3(t,r,l,e)){if(ur(n))return!1;a=!0}}else{const c=i[++s],d=H3(l,r,Ey(t),e);if(-1===d){if(ur(n))return!1;a=!0;continue}if(""!==c){let u;if(u=d>o?"":r[d+1].toLowerCase(),2&n&&c!==u){if(ur(n))return!1;a=!0}}}}else{if(!a&&!ur(n)&&!ur(l))return!1;if(a&&ur(l))continue;a=!1,n=l|1&n}}return ur(n)||a}function ur(t){return!(1&t)}function H3(t,i,e,n){if(null===i)return-1;let r=0;if(n||!e){let o=!1;for(;r<i.length;){const a=i[r];if(a===t)return r;if(3===a||6===a)o=!0;else{if(1===a||2===a){let s=i[++r];for(;"string"==typeof s;)s=i[++r];continue}if(4===a)break;if(0===a){r+=4;continue}}r+=o?1:2}return-1}return function j3(t,i){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const n=t[e];if("number"==typeof n)return-1;if(n===i)return e;e++}return-1}(i,t)}function VD(t,i,e=!1){for(let n=0;n<i.length;n++)if(B3(t,i[n],e))return!0;return!1}function U3(t,i){e:for(let e=0;e<i.length;e++){const n=i[e];if(t.length===n.length){for(let r=0;r<t.length;r++)if(t[r]!==n[r])continue e;return!0}}return!1}function qD(t,i){return t?":not("+i.trim()+")":i}function z3(t){let i=t[0],e=1,n=2,r="",o=!1;for(;e<t.length;){let a=t[e];if("string"==typeof a)if(2&n){const s=t[++e];r+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else 8&n?r+="."+a:4&n&&(r+=" "+a);else""!==r&&!ur(a)&&(i+=qD(o,r),r=""),n=a,o=o||!ur(n);e++}return""!==r&&(i+=qD(o,r)),i}const Re={};function gf(t,i,e){return t.createElement(i,e)}function wa(t,i,e,n,r){t.insertBefore(i,e,n,r)}function UD(t,i,e){t.appendChild(i,e)}function zD(t,i,e,n,r){null!==n?wa(t,i,e,n,r):UD(t,i,e)}function WD(t,i,e){const{mergedAttrs:n,classes:r,styles:o}=e;null!==n&&function lH(t,i,e){let n=0;for(;n<e.length;){const r=e[n];if("number"==typeof r){if(0!==r)break;n++;const o=e[n++],a=e[n++],s=e[n++];t.setAttribute(i,a,s,o)}else{const o=r,a=e[++n];Hk(o)?t.setProperty(i,o,a):t.setAttribute(i,o,a),n++}}}(t,i,n),null!==r&&function Y3(t,i,e){""===e?t.removeAttribute(i,"class"):t.setAttribute(i,"class",e)}(t,i,r),null!==o&&function G3(t,i,e){t.setAttribute(i,"style",e)}(t,i,o)}function Ay(t,i,e,n,r,o,a,s,l,c,d){const u=26+n,p=u+r,g=function K3(t,i){const e=[];for(let n=0;n<i;n++)e.push(n<t?null:Re);return e}(u,p),m="function"==typeof c?c():c;return g[1]={type:t,blueprint:g,template:e,queries:null,viewQuery:s,declTNode:i,data:g.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:d}}function vf(t,i,e,n,r,o,a,s,l,c,d){const u=i.blueprint.slice();return u[0]=r,u[2]=1228|n,(null!==c||t&&2048&t[2])&&(u[2]|=2048),_k(u),u[3]=u[14]=t,u[8]=e,u[10]=a||t&&t[10],u[11]=s||t&&t[11],u[9]=l||t&&t[9]||null,u[5]=o,u[19]=function jH(){return qH++}(),u[6]=d,u[20]=c,u[15]=2==i.type?t[15]:u,u}function Py(t){let i=16;return t.signals?i=4096:t.onPush&&(i=64),i}function $c(t,i,e,n){if(0===e)return-1;const r=i.length;for(let o=0;o<e;o++)i.push(n),t.blueprint.push(n),t.data.push(null);return r}function Ry(t,i){return t[12]?t[13][4]=i:t[12]=i,t[13]=i,i}function v(t=1){YD(Ce(),q(),Li()+t,!1)}function YD(t,i,e,n){if(!n)if(3&~i[2]){const o=t.preOrderHooks;null!==o&&Oh(i,o,0,e)}else{const o=t.preOrderCheckHooks;null!==o&&Fh(i,o,e)}ga(e)}var yf=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(yf||{});function Fy(t,i,e,n){const r=Ae(null);try{const[o,a,s]=t.inputs[e];let l=null;!!(a&yf.SignalBased)&&(l=i[o][ci]),null!==l&&void 0!==l.transformFn?n=l.transformFn(n):null!==s&&(n=s.call(i,n)),null!==t.setInput?t.setInput(i,l,n,e,o):fk(i,l,o,n)}finally{Ae(r)}}function KD(t,i,e,n,r){const o=Li(),a=2&n;try{ga(-1),a&&i.length>26&&YD(t,i,26,!1),e(n,r)}finally{ga(o)}}function _f(t,i,e){(function nq(t,i,e){const n=e.directiveStart,r=e.directiveEnd;cr(e)&&function Q3(t,i,e){const n=tn(i,t),r=function GD(t){const i=t.tView;return null===i||i.incompleteFirstPass?t.tView=Ay(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):i}(e),o=t[10].rendererFactory,a=Ry(t,vf(t,r,null,Py(e),n,i,null,o.createRenderer(n,e),null,null,null));t[i.index]=a}(i,e,t.data[n+e.componentOffset]),t.firstCreatePass||Nh(e,i);const o=e.initialInputs;for(let a=n;a<r;a++){const s=t.data[a],l=Cc(i,t,a,e);bn(l,i),null!==o&&aq(0,a-n,l,s,0,o),Ln(s)&&(nn(e.index,i)[8]=Cc(i,t,a,e))}})(t,i,e),!(64&~e.flags)&&function rq(t,i,e){const n=e.directiveStart,r=e.directiveEnd,o=e.index,a=function ZB(){return Te.lFrame.currentDirectiveIndex}();try{ga(o);for(let s=n;s<r;s++){const l=t.data[s],c=i[s];bv(s),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&oq(l,c)}}finally{ga(-1),bv(a)}}(t,i,e)}function Oy(t,i,e=tn){const n=i.localNames;if(null!==n){let r=i.index+1;for(let o=0;o<n.length;o+=2){const a=n[o+1],s=-1===a?e(i,t):t[a];t[r++]=s}}}let QD=()=>null;function Cn(t,i,e,n,r,o,a,s){if(s||!By(i,t,e,n,r)){if(3&i.type){const l=tn(i,e);n=function tq(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(n),r=null!=a?a(r,i.value||"",n):r,o.setProperty(l,n,r)}}else cr(i)&&function iq(t,i){const e=nn(i,t);16&e[2]||(e[2]|=64)}(e,i.index)}function oq(t,i){null!==t.hostBindings&&t.hostBindings(1,i)}function Ly(t,i){const e=t.directiveRegistry;let n=null;if(e)for(let r=0;r<e.length;r++){const o=e[r];VD(i,o.selectors,!1)&&(n??=[],Ln(o)?n.unshift(o):n.push(o))}return n}function Fr(t,i,e,n,r,o){const a=tn(t,i);!function Ny(t,i,e,n,r,o,a){if(null==o)t.removeAttribute(i,r,e);else{const s=null==a?Pe(o):a(o,n||"",r);t.setAttribute(i,r,s,e)}}(i[11],a,o,t.value,e,n,r)}function aq(t,i,e,n,r,o){const a=o[i];if(null!==a)for(let s=0;s<a.length;s+=2)Fy(n,e,a[s],a[s+1])}function bf(t,i){const e=t[9],n=e?e.get(Nn,null):null;n&&n.handleError(i)}function By(t,i,e,n,r){const o=t.inputs?.[n],a=t.hostDirectiveInputs?.[n];let s=!1;if(a)for(let l=0;l<a.length;l+=2){const c=a[l];Fy(i.data[c],e[c],a[l+1],r),s=!0}if(o)for(const l of o)Fy(i.data[l],e[l],n,r),s=!0;return s}function sq(t,i){const e=nn(i,t),n=e[1];!function lq(t,i){for(let e=i.length;e<t.blueprint.length;e++)i.push(t.blueprint[e])}(n,e);const r=e[0];null!==r&&null===e[6]&&(e[6]=null),Sf(n,e,e[8])}function Sf(t,i,e){Cv(i);try{const n=t.viewQuery;null!==n&&by(1,n,e);const r=t.template;null!==r&&KD(t,i,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),i[18]?.finishViewCreation(t),t.staticContentQueries&&mD(t,i),t.staticViewQueries&&by(2,t.viewQuery,e);const o=t.components;null!==o&&function cq(t,i){for(let e=0;e<i.length;e++)sq(t,i[e])}(i,o)}catch(n){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),n}finally{i[2]&=-5,kv()}}function Us(t,i,e,n){const r=Ae(null);try{const o=i.tView,l=vf(t,o,e,4096&t[2]?4096:16,null,i,null,null,n?.injector??null,n?.embeddedViewInjector??null,n?.dehydratedView??null);l[16]=t[i.index];const d=t[18];return null!==d&&(l[18]=d.createEmbeddedView(o)),Sf(o,l,e),l}finally{Ae(r)}}function Ca(t,i){return!i||null===i.firstChild||Mc(t)}function Vy(t,i){return undefined(t,i)}var Io=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Io||{});function Ao(t){return!(32&~t.flags)}function zs(t,i,e,n,r){if(null!=n){let o,a=!1;ki(n)?o=n:Zt(n)&&(a=!0,n=n[0]);const s=Xe(n);0===t&&null!==e?null==r?UD(i,e,s):wa(i,e,s,r||null,!0):1===t&&null!==e?wa(i,e,s,r||null,!0):2===t?function zc(t,i,e){t.removeChild(null,i,e)}(i,s,a):3===t&&i.destroyNode(s),null!=o&&function gq(t,i,e,n,r){const o=e[7];o!==Xe(e)&&zs(i,t,n,o,r);for(let s=10;s<e.length;s++){const l=e[s];Cf(l[1],l,t,i,n,o)}}(i,t,o,e,r)}}function eT(t,i){i[10].changeDetectionScheduler?.notify(9),Cf(t,i,i[11],2,null,null)}function qy(t,i){const e=t[9],n=e.indexOf(i);e.splice(n,1)}function Wc(t,i){if(Do(i))return;const e=i[11];e.destroyNode&&Cf(t,i,e,3,null,null),function hq(t){let i=t[12];if(!i)return jy(t[1],t);for(;i;){let e=null;if(Zt(i))e=i[12];else{const n=i[10];n&&(e=n)}if(!e){for(;i&&!i[4]&&i!==t;)Zt(i)&&jy(i[1],i),i=i[3];null===i&&(i=t),Zt(i)&&jy(i[1],i),e=i&&i[4]}i=e}}(i)}function jy(t,i){if(Do(i))return;const e=Ae(null);try{i[2]&=-129,i[2]|=256,i[24]&&lc(i[24]),function mq(t,i){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let n=0;n<e.length;n+=2){const r=i[e[n]];if(!(r instanceof bc)){const o=e[n+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){const s=r[o[a]],l=o[a+1];try{l.call(s)}finally{}}else try{o.call(r)}finally{}}}}(t,i),function fq(t,i){const e=t.cleanup,n=i[7];if(null!==e)for(let a=0;a<e.length-1;a+=2)if("string"==typeof e[a]){const s=e[a+3];s>=0?n[s]():n[-s].unsubscribe(),a+=2}else e[a].call(n[e[a+1]]);null!==n&&(i[7]=null);const r=i[21];if(null!==r){i[21]=null;for(let a=0;a<r.length;a++)(0,r[a])()}const o=i[23];if(null!==o){i[23]=null;for(const a of o)a.destroy()}}(t,i),1===i[1].type&&i[11].destroy();const n=i[16];if(null!==n&&ki(i[3])){n!==i[3]&&qy(n,i);const r=i[18];null!==r&&r.detachView(t)}zv(i)}finally{Ae(e)}}function Uy(t,i,e){return function tT(t,i,e){let n=i;for(;null!==n&&168&n.type;)n=(i=n).parent;if(null===n)return e[0];if(cr(n)){const{encapsulation:r}=t.data[n.directiveStart+n.componentOffset];if(r===Jn.None||r===Jn.Emulated)return null}return tn(n,e)}(t,i.parent,e)}function iT(t,i,e){return rT(t,i,e)}let rT=function nT(t,i,e){return 40&t.type?tn(t,e):null};function wf(t,i,e,n){const r=Uy(t,n,i),o=i[11],s=iT(n.parent||i[5],n,i);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)zD(o,r,e[l],s,!1);else zD(o,r,e,s,!1)}function ka(t,i){if(null!==i){const e=i.type;if(3&e)return tn(i,t);if(4&e)return $y(-1,t[i.index]);if(8&e){const n=i.child;if(null!==n)return ka(t,n);{const r=t[i.index];return ki(r)?$y(-1,r):Xe(r)}}if(128&e)return ka(t,i.next);if(32&e)return Vy(i,t)()||Xe(t[i.index]);{const n=aT(t,i);return null!==n?Array.isArray(n)?n[0]:ka(Jr(t[15]),n):ka(t,i.next)}}return null}function aT(t,i){return null!==i?t[15][5].projection[i.projection]:null}function $y(t,i){const e=10+t+1;if(e<i.length){const n=i[e],r=n[1].firstChild;if(null!==r)return ka(n,r)}return i[7]}function Wy(t,i,e,n,r,o,a){for(;null!=e;){if(128===e.type){e=e.next;continue}const s=n[e.index],l=e.type;if(a&&0===i&&(s&&bn(Xe(s),n),e.flags|=2),!Ao(e))if(8&l)Wy(t,i,e.child,n,r,o,!1),zs(i,t,r,s,o);else if(32&l){const c=Vy(e,n);let d;for(;d=c();)zs(i,t,r,d,o);zs(i,t,r,s,o)}else 16&l?sT(t,i,n,e,r,o):zs(i,t,r,s,o);e=a?e.projectionNext:e.next}}function Cf(t,i,e,n,r,o){Wy(e,n,t.firstChild,i,r,o,!1)}function sT(t,i,e,n,r,o){const a=e[15],l=a[5].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)zs(i,t,r,l[c],o);else{let c=l;const d=a[3];Mc(n)&&(c.flags|=128),Wy(t,i,c,d,r,o,!0)}}function $s(t,i,e,n,r=!1){for(;null!==e;){if(128===e.type){e=r?e.projectionNext:e.next;continue}const o=i[e.index];null!==o&&n.push(Xe(o)),ki(o)&&Gy(o,n);const a=e.type;if(8&a)$s(t,i,e.child,n);else if(32&a){const s=Vy(e,i);let l;for(;l=s();)n.push(l)}else if(16&a){const s=aT(i,e);if(Array.isArray(s))n.push(...s);else{const l=Jr(i[15]);$s(l[1],l,s,n,!0)}}e=r?e.projectionNext:e.next}return n}function Gy(t,i){for(let e=10;e<t.length;e++){const n=t[e],r=n[1].firstChild;null!==r&&$s(n[1],n,r,i)}t[7]!==t[0]&&i.push(t[7])}function lT(t){if(null!==t[25]){for(const i of t[25])i.impl.addSequence(i);t[25].length=0}}let cT=[];const Sq={...ss,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Ts(t.lView)},consumerOnSignalRead(){this.lView[24]=this}},Cq={...ss,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let i=Jr(t.lView);for(;i&&!dT(i[1]);)i=Jr(i);i&&hv(i)},consumerOnSignalRead(){this.lView[24]=this}};function dT(t){return 2!==t.type}function uT(t){if(null===t[23])return;let i=!0;for(;i;){let e=!1;for(const n of t[23])n.dirty&&(e=!0,null===n.zone||Zone.current===n.zone?n.run():n.zone.run(()=>n.run()));i=e&&!!(8192&t[2])}}function kf(t,i=!0,e=0){const r=t[10].rendererFactory;r.begin?.();try{!function Dq(t,i){const e=Tk();try{Ph(!0),Yy(t,i);let n=0;for(;vc(t);){if(100===n)throw new N(103,!1);n++,Yy(t,1)}}finally{Ph(e)}}(t,e)}catch(a){throw i&&bf(t,a),a}finally{r.end?.()}}function fT(t,i,e,n){if(Do(i))return;const r=i[2];Cv(i);let s=!0,l=null,c=null;dT(t)?(c=function yq(t){return t[24]??function _q(t){const i=cT.pop()??Object.create(Sq);return i.lView=t,i}(t)}(i),l=Jo(c)):null===function Eg(){return Si}()?(s=!1,c=function wq(t){const i=t[24]??Object.create(Cq);return i.lView=t,i}(i),l=Jo(c)):i[24]&&(lc(i[24]),i[24]=null);try{_k(i),function xk(t){return Te.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&KD(t,i,e,2,n);const d=!(3&~r);if(d){const g=t.preOrderCheckHooks;null!==g&&Fh(i,g,null)}else{const g=t.preOrderHooks;null!==g&&Oh(i,g,0,null),xv(i,0)}if(function Tq(t){for(let i=D1(t);null!==i;i=T1(i)){if(!(2&i[2]))continue;const e=i[9];for(let n=0;n<e.length;n++)hv(e[n])}}(i),uT(i),mT(i,0),null!==t.contentQueries&&mD(t,i),d){const g=t.contentCheckHooks;null!==g&&Fh(i,g)}else{const g=t.contentHooks;null!==g&&Oh(i,g,1),xv(i,1)}!function Eq(t,i){const e=t.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)ga(~r);else{const o=r,a=e[++n],s=e[++n];QB(a,o);const l=i[o];s(2,l)}}}finally{ga(-1)}}(t,i);const u=t.components;null!==u&&gT(i,u,0);const p=t.viewQuery;if(null!==p&&by(2,p,n),d){const g=t.viewCheckHooks;null!==g&&Fh(i,g)}else{const g=t.viewHooks;null!==g&&Oh(i,g,2),xv(i,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),i[22]){for(const g of i[22])g();i[22]=null}lT(i),i[2]&=-73}catch(d){throw Ts(i),d}finally{null!==c&&(ls(c,l),s&&function bq(t){t.lView[24]!==t&&(t.lView=null,cT.push(t))}(c)),kv()}}function mT(t,i){for(let e=D1(t);null!==e;e=T1(e))for(let n=10;n<e.length;n++)pT(e[n],i)}function xq(t,i,e){const n=nn(i,t);pT(n,e)}function pT(t,i){uv(t)&&Yy(t,i)}function Yy(t,i){const n=t[1],r=t[2],o=t[24];let a=!!(0===i&&16&r);if(a||=!!(64&r&&0===i),a||=!!(1024&r),a||=!(!o?.dirty||!sc(o)),a||=!1,o&&(o.dirty=!1),t[2]&=-9217,a)fT(n,t,n.template,t[8]);else if(8192&r){uT(t),mT(t,1);const s=n.components;null!==s&&gT(t,s,1),lT(t)}}function gT(t,i,e){for(let n=0;n<i.length;n++)xq(t,i[n],e)}function Gc(t,i){const e=Tk()?64:1088;for(t[10].changeDetectionScheduler?.notify(i);t;){t[2]|=e;const n=Jr(t);if(Xr(t)&&!n)return t;t=n}return null}function vT(t,i,e,n){return[t,!0,0,i,null,n,null,e,null,null]}function yT(t,i){const e=10+i;if(e<t.length)return t[e]}function Ws(t,i,e,n=!0){const r=i[1];if(function Mq(t,i,e,n){const r=10+n,o=e.length;n>0&&(e[r-1][4]=i),n<o-10?(i[4]=e[r],KC(e,10+n,i)):(e.push(i),i[4]=null),i[3]=e;const a=i[16];null!==a&&e!==a&&_T(a,i);const s=i[18];null!==s&&s.insertView(t),fv(i),i[2]|=128}(r,i,t,e),n){const a=$y(e,t),s=i[11],l=s.parentNode(t[7]);null!==l&&function uq(t,i,e,n,r,o){n[0]=r,n[5]=i,Cf(t,n,e,1,r,o)}(r,t[5],s,i,l,a)}const o=i[6];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function Ky(t,i){const e=Yc(t,i);return void 0!==e&&Wc(e[1],e),e}function Yc(t,i){if(t.length<=10)return;const e=10+i,n=t[e];if(n){const r=n[16];null!==r&&r!==t&&qy(r,n),i>0&&(t[e-1][4]=n[4]);const o=yh(t,10+i);!function JD(t,i){eT(t,i),i[0]=null,i[5]=null}(n[1],n);const a=o[18];null!==a&&a.detachView(o[1]),n[3]=null,n[4]=null,n[2]&=-129}return n}function _T(t,i){const e=t[9],n=i[3];(Zt(n)||i[15]!==n[3][15])&&(t[2]|=2),null===e?t[9]=[i]:e.push(i)}let Kc=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){const i=this._lView,e=i[1];return $s(e,i,e.firstChild,[])}constructor(i,e,n=!0){this._lView=i,this._cdRefInjectingView=e,this.notifyErrorHandler=n}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return Do(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(ki(i)){const e=i[8],n=e?e.indexOf(this):-1;n>-1&&(Yc(i,n),yh(e,n))}this._attachedToViewContainer=!1}Wc(this._lView[1],this._lView)}onDestroy(i){Ih(this._lView,i)}markForCheck(){Gc(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){fv(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,kf(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new N(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const i=Xr(this._lView),e=this._lView[16];null!==e&&!i&&qy(e,this._lView),eT(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new N(902,!1);this._appRef=i;const e=Xr(this._lView),n=this._lView[16];null!==n&&!e&&_T(n,this._lView),fv(this._lView)}},Ii=(()=>class t{static __NG_ELEMENT_ID__=Pq})();const Iq=Ii,Aq=class extends Iq{_declarationLView;_declarationTContainer;elementRef;constructor(i,e,n){super(),this._declarationLView=i,this._declarationTContainer=e,this.elementRef=n}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(i,e){return this.createEmbeddedViewImpl(i,e)}createEmbeddedViewImpl(i,e,n){const r=Us(this._declarationLView,this._declarationTContainer,i,{embeddedViewInjector:e,dehydratedView:n});return new Kc(r)}};function Pq(){return Df(Ve(),q())}function Df(t,i){return 4&t.type?new Aq(i,t,Ms(t,i)):null}function Gs(t,i,e,n,r){let o=t.data[i];if(null===o)o=function Jy(t,i,e,n,r){const o=Ck(),a=yv(),l=t.data[i]=function jq(t,i,e,n,r,o){let a=i?i.injectorIndex:-1,s=0;return pa()&&(s|=128),{type:e,index:n,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:s,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,e,i,n,r);return function qq(t,i,e,n){null===t.firstChild&&(t.firstChild=i),null!==e&&(n?null==e.child&&null!==i.parent&&(e.child=i):null===e.next&&(e.next=i,i.prev=e))}(t,l,o,a),l}(t,i,e,n,r),function KB(){return Te.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=e,o.value=n,o.attrs=r;const a=function yc(){const t=Te.lFrame,i=t.currentTNode;return t.isParent?i:i.parent}();o.injectorIndex=null===a?-1:a.injectorIndex}return dr(o,!0),o}let Ej=class{},jT=class{};class Mj{resolveComponentFactory(i){throw Error(`No component factory found for ${wi(i)}.`)}}let Pf=class{static NULL=new Mj};class Hn{}let Hi=(()=>class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>function Ij(){const t=q(),e=nn(Ve().index,t);return(Zt(e)?e:t)[11]}()})(),Aj=(()=>{class t{static \u0275prov=W({token:t,providedIn:"root",factory:()=>null})}return t})();function l_(t,i,e){let n=e?t.styles:null,r=e?t.classes:null,o=0;if(null!==i)for(let a=0;a<i.length;a++){const s=i[a];"number"==typeof s?o=s:1==o?r=Vg(r,s):2==o&&(n=Vg(n,s+": "+i[++a]+";"))}e?t.styles=n:t.stylesWithoutHost=n,e?t.classes=r:t.classesWithoutHost=r}function T(t,i=Ue.Default){const e=q();return null===e?P(t,i):Wk(Ve(),e,De(t),i)}function c_(t,i,e,n,r){const o=null===n?null:{"":-1},a=r(t,e);if(null!==a){let s,l=null,c=null;const d=function Lj(t){let i=null,e=!1;for(let a=0;a<t.length;a++){const s=t[a];if(0===a&&Ln(s)&&(i=s),null!==s.findHostDirectiveDefs){e=!0;break}}if(!e)return null;let n=null,r=null,o=null;for(const a of t)null!==a.findHostDirectiveDefs&&(n??=[],r??=new Map,o??=new Map,Nj(a,n,o,r)),a===i&&(n??=[],n.push(a));return null!==n?(n.push(...null===i?t:t.slice(1)),[n,r,o]):null}(a);null===d?s=a:[s,l,c]=d,function Hj(t,i,e,n,r,o,a){const s=n.length;let l=!1;for(let p=0;p<s;p++){const g=n[p];!l&&Ln(g)&&(l=!0,Bj(t,e,p)),Fv(Nh(e,i),t,g.type)}!function $j(t,i,e){t.flags|=1,t.directiveStart=i,t.directiveEnd=i+e,t.providerIndexes=i}(e,t.data.length,s);for(let p=0;p<s;p++){const g=n[p];g.providersResolver&&g.providersResolver(g)}let c=!1,d=!1,u=$c(t,i,s,null);s>0&&(e.directiveToIndex=new Map);for(let p=0;p<s;p++){const g=n[p];if(e.mergedAttrs=Es(e.mergedAttrs,g.hostAttrs),qj(t,e,i,u,g),zj(u,g,r),null!==a&&a.has(g)){const[b,C]=a.get(g);e.directiveToIndex.set(g.type,[u,b+e.directiveStart,C+e.directiveStart])}else(null===o||!o.has(g))&&e.directiveToIndex.set(g.type,u);null!==g.contentQueries&&(e.flags|=4),(null!==g.hostBindings||null!==g.hostAttrs||0!==g.hostVars)&&(e.flags|=64);const m=g.type.prototype;!c&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),c=!0),!d&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),d=!0),u++}!function Vj(t,i,e){for(let n=i.directiveStart;n<i.directiveEnd;n++){const r=t.data[n];if(null!==e&&e.has(r)){const o=e.get(r);WT(0,i,o,n),WT(1,i,o,n),YT(i,n,!0)}else $T(0,i,r,n),$T(1,i,r,n),YT(i,n,!1)}}(t,e,o)}(t,i,e,s,o,l,c)}null!==o&&null!==n&&function Oj(t,i,e){const n=t.localNames=[];for(let r=0;r<i.length;r+=2){const o=e[i[r+1]];if(null==o)throw new N(-301,!1);n.push(i[r],o)}}(e,n,o)}function Nj(t,i,e,n){const r=i.length;t.findHostDirectiveDefs(t,i,n),e.set(t,[r,i.length-1])}function Bj(t,i,e){i.componentOffset=e,(t.components??=[]).push(i.index)}function $T(t,i,e,n){const r=0===t?e.inputs:e.outputs;for(const o in r)if(r.hasOwnProperty(o)){let a;a=0===t?i.inputs??={}:i.outputs??={},a[o]??=[],a[o].push(n),GT(i,o)}}function WT(t,i,e,n){const r=0===t?e.inputs:e.outputs;for(const o in r)if(r.hasOwnProperty(o)){const a=r[o];let s;s=0===t?i.hostDirectiveInputs??={}:i.hostDirectiveOutputs??={},s[a]??=[],s[a].push(n,o),GT(i,a)}}function GT(t,i){"class"===i?t.flags|=8:"style"===i&&(t.flags|=16)}function YT(t,i,e){const{attrs:n,inputs:r,hostDirectiveInputs:o}=t;if(null===n||!e&&null===r||e&&null===o||Ey(t))return t.initialInputs??=[],void t.initialInputs.push(null);let a=null,s=0;for(;s<n.length;){const l=n[s];if(0!==l)if(5!==l){if("number"==typeof l)break;if(!e&&r.hasOwnProperty(l)){const c=r[l];for(const d of c)if(d===i){a??=[],a.push(l,n[s+1]);break}}else if(e&&o.hasOwnProperty(l)){const c=o[l];for(let d=0;d<c.length;d+=2)if(c[d]===i){a??=[],a.push(c[d+1],n[s+1]);break}}s+=2}else s+=2;else s+=4}t.initialInputs??=[],t.initialInputs.push(a)}function qj(t,i,e,n,r){t.data[n]=r;const o=r.factory||(r.factory=oa(r.type)),a=new bc(o,Ln(r),T);t.blueprint[n]=a,e[n]=a,function jj(t,i,e,n,r){const o=r.hostBindings;if(o){let a=t.hostBindingOpCodes;null===a&&(a=t.hostBindingOpCodes=[]);const s=~i.index;(function Uj(t){let i=t.length;for(;i>0;){const e=t[--i];if("number"==typeof e&&e<0)return e}return 0})(a)!=s&&a.push(s),a.push(e,n,o)}}(t,i,n,$c(t,e,r.hostVars,Re),r)}function zj(t,i,e){if(e){if(i.exportAs)for(let n=0;n<i.exportAs.length;n++)e[i.exportAs[n]]=t;Ln(i)&&(e[""]=t)}}function KT(t,i,e,n,r,o,a,s){const l=i.consts,d=Gs(i,t,2,n,Qn(l,a));return o&&c_(i,e,d,Qn(l,s),r),d.mergedAttrs=Es(d.mergedAttrs,d.attrs),null!==d.attrs&&l_(d,d.attrs,!1),null!==d.mergedAttrs&&l_(d,d.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,d),d}function QT(t,i){Tv(t,i),lv(i)&&t.queries.elementEnd(i)}class ZT extends Pf{ngModule;constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const e=ze(i);return new od(e,this.ngModule)}}class od extends jT{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function Wj(t){return Object.keys(t).map(i=>{const[e,n,r]=t[i],o={propName:e,templateName:i,isSignal:!!(n&yf.SignalBased)};return r&&(o.transform=r),o})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function Gj(t){return Object.keys(t).map(i=>({propName:t[i],templateName:i}))}(this.componentDef.outputs),this.cachedOutputs}constructor(i,e){super(),this.componentDef=i,this.ngModule=e,this.componentType=i.type,this.selector=function $3(t){return t.map(z3).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors??[],this.isBoundToModule=!!e}create(i,e,n,r){const o=Ae(null);try{const a=this.componentDef,s=n?["ng-version","19.2.2"]:function W3(t){const i=[],e=[];let n=1,r=2;for(;n<t.length;){let o=t[n];if("string"==typeof o)2===r?""!==o&&i.push(o,t[++n]):8===r&&e.push(o);else{if(!ur(r))break;r=o}n++}return e.length&&i.push(1,...e),i}(this.componentDef.selectors[0]),l=Ay(0,null,null,1,0,null,null,null,null,[s],null),c=function Yj(t,i,e){let n=i instanceof Fi?i:i?.injector;return n&&null!==t.getStandaloneInjector&&(n=t.getStandaloneInjector(n)||n),n?new va(e,n):e}(a,r||this.ngModule,i),d=function Kj(t){const i=t.get(Hn,null);if(null===i)throw new N(407,!1);return{rendererFactory:i,sanitizer:t.get(Aj,null),changeDetectionScheduler:t.get(no,null)}}(c),u=d.rendererFactory.createRenderer(null,a),p=n?function Z3(t,i,e,n){const o=n.get(N1,!1)||e===Jn.ShadowDom,a=t.selectRootElement(i,o);return function X3(t){QD(t)}(a),a}(u,n,a.encapsulation,c):function Qj(t,i){const e=(t.selectors[0][0]||"div").toLowerCase();return gf(i,e,"svg"===e?"svg":"math"===e?"math":null)}(a,u),g=vf(null,l,null,512|Py(a),null,null,d,u,c,null,null);g[26]=p,Cv(g);let m=null;try{const b=KT(26,l,g,"#host",()=>[this.componentDef],!0,0);p&&(WD(u,p,b),bn(p,g)),_f(l,g,b),Sy(l,b,g),QT(l,b),void 0!==e&&function Xj(t,i,e){const n=t.projection=[];for(let r=0;r<i.length;r++){const o=e[r];n.push(null!=o&&o.length?Array.from(o):null)}}(b,this.ngContentSelectors,e),m=nn(b.index,g),g[8]=m[8],Sf(l,g,null)}catch(b){throw null!==m&&zv(m),zv(g),b}finally{kv()}return new Zj(this.componentType,g)}finally{Ae(o)}}}class Zj extends Ej{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(i,e){super(),this._rootLView=e,this._tNode=fa(e[1],26),this.location=Ms(this._tNode,e),this.instance=nn(this._tNode.index,e)[8],this.hostView=this.changeDetectorRef=new Kc(e,void 0,!1),this.componentType=i}setInput(i,e){const n=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(i)&&Object.is(this.previousInputValues.get(i),e))return;const r=this._rootLView;By(n,r[1],r,i,e),this.previousInputValues.set(i,e),Gc(nn(n.index,r),1)}get injector(){return new Xt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}let Vi=(()=>class t{static __NG_ELEMENT_ID__=Jj})();function Jj(){return ex(Ve(),q())}const eU=Vi,XT=class extends eU{_lContainer;_hostTNode;_hostLView;constructor(i,e,n){super(),this._lContainer=i,this._hostTNode=e,this._hostLView=n}get element(){return Ms(this._hostTNode,this._hostLView)}get injector(){return new Xt(this._hostTNode,this._hostLView)}get parentInjector(){const i=Bh(this._hostTNode,this._hostLView);if(Av(i)){const e=wc(i,this._hostLView),n=Sc(i);return new Xt(e[1].data[n+8],e)}return new Xt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const e=JT(this._lContainer);return null!==e&&e[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,e,n){let r,o;"number"==typeof n?r=n:null!=n&&(r=n.index,o=n.injector);const s=i.createEmbeddedViewImpl(e||{},o,null);return this.insertImpl(s,r,Ca(this._hostTNode,null)),s}createComponent(i,e,n,r,o){const a=i&&!function pc(t){return"function"==typeof t}(i);let s;if(a)s=e;else{const m=e||{};s=m.index,n=m.injector,r=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}const l=a?i:new od(ze(i)),c=n||this.parentInjector;if(!o&&null==l.ngModule){const b=(a?c:this.parentInjector).get(Fi,null);b&&(o=b)}ze(l.componentType??{});const g=l.create(c,r,null,o);return this.insertImpl(g.hostView,s,Ca(this._hostTNode,null)),g}insert(i,e){return this.insertImpl(i,e,!0)}insertImpl(i,e,n){const r=i._lView;if(function HB(t){return ki(t[3])}(r)){const s=this.indexOf(i);if(-1!==s)this.detach(s);else{const l=r[3],c=new XT(l,l[5],l[3]);c.detach(c.indexOf(i))}}const o=this._adjustIndex(e),a=this._lContainer;return Ws(a,r,o,n),i.attachToViewContainerRef(),KC(d_(a),o,i),i}move(i,e){return this.insert(i,e)}indexOf(i){const e=JT(this._lContainer);return null!==e?e.indexOf(i):-1}remove(i){const e=this._adjustIndex(i,-1),n=Yc(this._lContainer,e);n&&(yh(d_(this._lContainer),e),Wc(n[1],n))}detach(i){const e=this._adjustIndex(i,-1),n=Yc(this._lContainer,e);return n&&null!=yh(d_(this._lContainer),e)?new Kc(n):null}_adjustIndex(i,e=0){return i??this.length+e}};function JT(t){return t[8]}function d_(t){return t[8]||(t[8]=[])}function ex(t,i){let e;const n=i[t.index];return ki(n)?e=n:(e=vT(n,i,null,t),i[t.index]=e,Ry(i,e)),tx(e,i,t,n),new XT(e,t,i)}let tx=function nx(t,i,e,n){if(t[7])return;let r;r=8&e.type?Xe(n):function tU(t,i){const e=t[11],n=e.createComment(""),r=tn(i,t),o=e.parentNode(r);return wa(e,o,n,e.nextSibling(r),!1),n}(i,e),t[7]=r};class h_{queryList;matches=null;constructor(i){this.queryList=i}clone(){return new h_(this.queryList)}setDirty(){this.queryList.setDirty()}}class f_{queries;constructor(i=[]){this.queries=i}createEmbeddedView(i){const e=i.queries;if(null!==e){const n=null!==i.contentQueries?i.contentQueries[0]:e.length,r=[];for(let o=0;o<n;o++){const a=e.getByIndex(o);r.push(this.queries[a.indexInDeclarationView].clone())}return new f_(r)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}finishViewCreation(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let e=0;e<this.queries.length;e++)null!==y_(i,e).matches&&this.queries[e].setDirty()}}class rx{flags;read;predicate;constructor(i,e,n=null){this.flags=e,this.read=n,this.predicate="string"==typeof i?function cU(t){return t.split(",").map(i=>i.trim())}(i):i}}class m_{queries;constructor(i=[]){this.queries=i}elementStart(i,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(i,e)}elementEnd(i){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(i)}embeddedTView(i){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,o=this.getByIndex(n).embeddedTView(i,r);o&&(o.indexInDeclarationView=n,null!==e?e.push(o):e=[o])}return null!==e?new m_(e):null}template(i,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(i,e)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class p_{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(i,e=-1){this.metadata=i,this._declarationNodeIndex=e}elementStart(i,e){this.isApplyingToNode(e)&&this.matchTNode(i,e)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,e){this.elementStart(i,e)}embeddedTView(i,e){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,e),new p_(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1&~this.metadata.flags){const e=this._declarationNodeIndex;let n=i.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(i,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const o=n[r];this.matchTNodeWithReadOption(i,e,oU(e,o)),this.matchTNodeWithReadOption(i,e,Hh(e,i,o,!1,!1))}else n===Ii?4&e.type&&this.matchTNodeWithReadOption(i,e,-1):this.matchTNodeWithReadOption(i,e,Hh(e,i,n,!1,!1))}matchTNodeWithReadOption(i,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===xe||r===Vi||r===Ii&&4&e.type)this.addMatch(e.index,-2);else{const o=Hh(e,i,r,!1,!1);null!==o&&this.addMatch(e.index,o)}else this.addMatch(e.index,n)}}addMatch(i,e){null===this.matches?this.matches=[i,e]:this.matches.push(i,e)}}function oU(t,i){const e=t.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===i)return e[n+1];return null}function sU(t,i,e,n){return-1===e?function aU(t,i){return 11&t.type?Ms(t,i):4&t.type?Df(t,i):null}(i,t):-2===e?function lU(t,i,e){return e===xe?Ms(i,t):e===Ii?Df(i,t):e===Vi?ex(i,t):void 0}(t,i,n):Cc(t,t[1],e,i)}function ox(t,i,e,n){const r=i[18].queries[n];if(null===r.matches){const o=t.data,a=e.matches,s=[];for(let l=0;null!==a&&l<a.length;l+=2){const c=a[l];s.push(c<0?null:sU(i,o[c],a[l+1],e.metadata.read))}r.matches=s}return r.matches}function g_(t,i,e,n){const r=t.queries.getByIndex(e),o=r.matches;if(null!==o){const a=ox(t,i,r,e);for(let s=0;s<o.length;s+=2){const l=o[s];if(l>0)n.push(a[s/2]);else{const c=o[s+1],d=i[-l];for(let u=10;u<d.length;u++){const p=d[u];p[16]===p[3]&&g_(p[1],p,c,n)}if(null!==d[9]){const u=d[9];for(let p=0;p<u.length;p++){const g=u[p];g_(g[1],g,c,n)}}}}}return n}function v_(t,i){return t[18].queries[i].queryList}function ax(t,i,e){const n=new Is(!(4&~e));return function VB(t,i,e,n){const r=Sk(i);r.push(e),t.firstCreatePass&&wk(t).push(n,r.length-1)}(t,i,n,n.destroy),(i[18]??=new f_).queries.push(new h_(n))-1}function sx(t,i,e){const n=Ce();return n.firstCreatePass&&(cx(n,new rx(t,i,e),-1),!(2&~i)&&(n.staticViewQueries=!0)),ax(n,q(),i)}function cx(t,i,e){null===t.queries&&(t.queries=new m_),t.queries.track(new p_(i,e))}function y_(t,i){return t.queries.getByIndex(i)}function dx(t,i){const e=t[1],n=y_(e,i);return n.crossesNgTemplate?g_(e,t,i,[]):ox(e,t,n,i)}function __(t,i,e){let n;const r=bC(()=>{n._dirtyCounter();const o=function uU(t,i){const e=t._lView,n=t._queryIndex;if(void 0===e||void 0===n||4&e[2])return i?void 0:rt;const r=v_(e,n),o=dx(e,n);return r.reset(o,p1),i?r.first:r._changesDetected||void 0===t._flatValue?t._flatValue=r.toArray():t._flatValue}(n,t);if(i&&void 0===o)throw new N(-951,!1);return o});return n=r[ci],n._dirtyCounter=$(0),n._flatValue=void 0,r}function px(t,i){return function ux(t){return __(!0,!1)}()}const b_=(px.required=function hU(t,i){return function hx(t){return __(!0,!0)}()},px);let so=class{},wx=class{};class w_ extends so{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ZT(this);constructor(i,e,n,r=!0){super(),this.ngModuleType=i,this._parent=e;const o=Rn(i);this._bootstrapComponents=Rr(o.bootstrap),this._r3Injector=n1(i,e,[{provide:so,useValue:this},{provide:Pf,useValue:this.componentFactoryResolver},...n],wi(i),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class C_ extends wx{moduleType;constructor(i){super(),this.moduleType=i}create(i){return new w_(this.moduleType,i,[])}}class Cx extends so{injector;componentFactoryResolver=new ZT(this);instance=null;constructor(i){super();const e=new ca([...i.providers,{provide:so,useValue:this},{provide:Pf,useValue:this.componentFactoryResolver}],i.parent||Ch(),i.debugName,new Set(["environment"]));this.injector=e,i.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Ff(t,i,e=null){return new Cx({providers:t,parent:i,debugName:e,runEnvironmentInitializers:!0}).injector}let CU=(()=>{class t{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const n=Jg(0,e.type),r=n.length>0?Ff([n],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=W({token:t,providedIn:"environment",factory:()=>new t(P(Fi))})}return t})();function ne(t){return Kr(()=>{const i=kx(t),e={...i,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Uh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&t.dependencies||null,getStandaloneInjector:i.standalone?r=>r.get(CU).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Jn.Emulated,styles:t.styles||rt,_:null,schemas:t.schemas||null,tView:null,id:""};i.standalone&&wn("NgStandalone"),Dx(e);const n=t.dependencies;return e.directiveDefs=Of(n,!1),e.pipeDefs=Of(n,!0),e.id=function MU(t){let i=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,"function"==typeof t.consts?"":t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(const o of n.join("|"))i=Math.imul(31,i)+o.charCodeAt(0)|0;return i+=2147483648,"c"+i}(e),e})}function kU(t){return ze(t)||function Ri(t){return t[$g]||null}(t)}function DU(t){return null!==t}function mt(t){return Kr(()=>({type:t.type,bootstrap:t.bootstrap||rt,declarations:t.declarations||rt,imports:t.imports||rt,exports:t.exports||rt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function TU(t,i){if(null==t)return ar;const e={};for(const n in t)if(t.hasOwnProperty(n)){const r=t[n];let o,a,s,l;Array.isArray(r)?(s=r[0],o=r[1],a=r[2]??o,l=r[3]||null):(o=r,a=r,s=yf.None,l=null),e[o]=[n,s,l],i[o]=a}return e}function xU(t){if(null==t)return ar;const i={};for(const e in t)t.hasOwnProperty(e)&&(i[t[e]]=e);return i}function ie(t){return Kr(()=>{const i=kx(t);return Dx(i),i})}function Qi(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function kx(t){const i={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:i,inputConfig:t.inputs||ar,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:!0===t.signals,selectors:t.selectors||rt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:TU(t.inputs,i),outputs:xU(t.outputs),debugInfo:null}}function Dx(t){t.features?.forEach(i=>i(t))}function Of(t,i){if(!t)return null;const e=i?Fn:kU;return()=>("function"==typeof t?t():t).map(n=>e(n)).filter(DU)}function Le(t){let i=function Tx(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const n=[t];for(;i;){let r;if(Ln(t))r=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new N(903,!1);r=i.\u0275dir}if(r){if(e){n.push(r);const a=t;a.inputs=k_(t.inputs),a.declaredInputs=k_(t.declaredInputs),a.outputs=k_(t.outputs);const s=r.hostBindings;s&&FU(t,s);const l=r.viewQuery,c=r.contentQueries;if(l&&PU(t,l),c&&RU(t,c),IU(t,r),$2(t.outputs,r.outputs),Ln(r)&&r.data.animation){const d=t.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let a=0;a<o.length;a++){const s=o[a];s&&s.ngInherit&&s(t),s===Le&&(e=!1)}}i=Object.getPrototypeOf(i)}!function AU(t){let i=0,e=null;for(let n=t.length-1;n>=0;n--){const r=t[n];r.hostVars=i+=r.hostVars,r.hostAttrs=Es(r.hostAttrs,e=Es(e,r.hostAttrs))}}(n)}function IU(t,i){for(const e in i.inputs){if(!i.inputs.hasOwnProperty(e)||t.inputs.hasOwnProperty(e))continue;const n=i.inputs[e];void 0!==n&&(t.inputs[e]=n,t.declaredInputs[e]=i.declaredInputs[e])}}function k_(t){return t===ar?{}:t===rt?[]:t}function PU(t,i){const e=t.viewQuery;t.viewQuery=e?(n,r)=>{i(n,r),e(n,r)}:i}function RU(t,i){const e=t.contentQueries;t.contentQueries=e?(n,r,o)=>{i(n,r,o),e(n,r,o)}:i}function FU(t,i){const e=t.hostBindings;t.hostBindings=e?(n,r)=>{i(n,r),e(n,r)}:i}function T_(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Or(t,i,e){return t[i]=e}function Jt(t,i,e){return!Object.is(t[i],e)&&(t[i]=e,!0)}function xa(t,i,e,n){const r=Jt(t,i,e);return Jt(t,i+1,n)||r}function er(t,i,e,n,r,o){const a=xa(t,i,e,n);return xa(t,i+2,r,o)||a}function ld(t,i,e,n,r,o,a,s,l,c){const d=e+26,u=i.firstCreatePass?function jU(t,i,e,n,r,o,a,s,l){const c=i.consts,d=Gs(i,t,4,a||null,s||null);vv()&&c_(i,e,d,Qn(c,l),Ly),d.mergedAttrs=Es(d.mergedAttrs,d.attrs),Tv(i,d);const u=d.tView=Ay(2,d,n,r,o,i.directiveRegistry,i.pipeRegistry,null,i.schemas,c,null);return null!==i.queries&&(i.queries.template(i,d),u.queries=i.queries.embeddedTView(d)),d}(d,i,t,n,r,o,a,s,l):i.data[d];dr(u,!1);const p=Px(i,t,u,e);_c()&&wf(i,t,p,u),bn(p,t);const g=vT(p,t,p,u);return t[d]=g,Ry(t,g),Eh(u)&&_f(i,t,u),null!=l&&Oy(t,u,c),u}function H(t,i,e,n,r,o,a,s){const l=q(),c=Ce();return ld(l,c,t,i,e,n,r,Qn(c.consts,o),a,s),H}let Px=function Rx(t,i,e,n){return Mr(!0),i[11].createComment("")};let Vx=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Gx=new B(""),qf=new B("");let F_,P_=(()=>{class t{_ngZone;registry;_isZoneStable=!0;_callbacks=[];taskTrackingZone=null;constructor(e,n,r){this._ngZone=e,this.registry=n,F_||(function V5(t){F_=t}(r),r.addToWindow(n)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ce.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let o=-1;n&&n>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),e()},n)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,n,r){return[]}static \u0275fac=function(n){return new(n||t)(P(ce),P(R_),P(qf))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})(),R_=(()=>{class t{_applications=new Map;registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return F_?.findTestabilityInTree(this,e,n)??null}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),O_=(()=>{class t{static \u0275prov=W({token:t,providedIn:"root",factory:()=>new q5})}return t})();class q5{queuedEffectCount=0;queues=new Map;schedule(i){this.enqueue(i)}remove(i){const n=this.queues.get(i.zone);n.has(i)&&(n.delete(i),this.queuedEffectCount--)}enqueue(i){const e=i.zone;this.queues.has(e)||this.queues.set(e,new Set);const n=this.queues.get(e);n.has(i)||(this.queuedEffectCount++,n.add(i))}flush(){for(;this.queuedEffectCount>0;)for(const[i,e]of this.queues)null===i?this.flushQueue(e):i.run(()=>this.flushQueue(e))}flushQueue(i){for(const e of i)i.delete(e),this.queuedEffectCount--,e.run()}}function dd(t){return!!t&&"function"==typeof t.then}function Yx(t){return!!t&&"function"==typeof t.subscribe}const jf=new B("");let Kx=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,n)=>{this.resolve=e,this.reject=n});appInits=_(jf,{optional:!0})??[];injector=_(we);constructor(){}runInitializers(){if(this.initialized)return;const e=[];for(const r of this.appInits){const o=sr(this.injector,r);if(dd(o))e.push(o);else if(Yx(o)){const a=new Promise((s,l)=>{o.subscribe({complete:s,error:l})});e.push(a)}}const n=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ud=new B("");let an=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=_(LH);afterRenderManager=_(ly);zonelessEnabled=_(Dc);rootEffectScheduler=_(O_);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Y;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=_(xo).hasPendingTasks.pipe(me(e=>!e));constructor(){_(Ps,{optional:!0})}whenStable(){let e;return new Promise(n=>{e=this.isStable.subscribe({next:r=>{r&&n()}})}).finally(()=>{e.unsubscribe()})}_injector=_(Fi);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,n){const r=e instanceof jT;if(!this._injector.get(Kx).done)throw new N(405,"");let a;a=r?e:this._injector.get(Pf).resolveComponentFactory(e),this.componentTypes.push(a.componentType);const s=function j5(t){return t.isBoundToModule}(a)?void 0:this._injector.get(so),c=a.create(we.NULL,[],n||a.selector,s),d=c.location.nativeElement,u=c.injector.get(Gx,null);return u?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),Uf(this.components,c),u?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){null!==this.tracingSnapshot?this.tracingSnapshot.run(sy.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new N(101,!1);const e=Ae(null);try{this._runningTick=!0,this.synchronize()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ae(e),this.afterTick.next()}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Hn,null,{optional:!0}));let e=0;for(;0!==this.dirtyFlags&&e++<10;)this.synchronizeOnce()}synchronizeOnce(){if(16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),7&this.dirtyFlags){const e=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:n,notifyErrorHandler:r}of this.allViews)z5(n,r,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:e})=>vc(e))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;Uf(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(ud,[]).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Uf(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new N(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Uf(t,i){const e=t.indexOf(i);e>-1&&t.splice(e,1)}function z5(t,i,e,n){(e||vc(t))&&kf(t,i,e&&!n?0:1)}function Me(t,i,e,n){const r=q();return Jt(r,Zn(),i)&&(Ce(),Fr(Ct(),r,t,i,e,n)),Me}function el(t,i,e,n){return Jt(t,Zn(),e)?i+Pe(e)+n:Re}function tl(t,i,e,n,r,o){const s=xa(t,eo(),e,r);return to(2),s?i+Pe(e)+n+Pe(r)+o:Re}function il(t,i,e,n,r,o,a,s){const c=function Nf(t,i,e,n,r){const o=xa(t,i,e,n);return Jt(t,i+2,r)||o}(t,eo(),e,r,a);return to(3),c?i+Pe(e)+n+Pe(r)+o+Pe(a)+s:Re}function zf(t,i){return t<<17|i<<2}function Ma(t){return t>>17&32767}function V_(t){return 2|t}function ll(t){return(131068&t)>>2}function q_(t,i){return-131069&t|i<<2}function j_(t){return 1|t}function mE(t,i,e,n){const r=t[e+1],o=null===i;let a=n?Ma(r):ll(r),s=!1;for(;0!==a&&(!1===s||o);){const c=t[a+1];I4(t[a],i)&&(s=!0,t[a+1]=n?j_(c):V_(c)),a=n?Ma(c):ll(c)}s&&(t[e+1]=n?V_(r):j_(r))}function I4(t,i){return null===t||null==i||(Array.isArray(t)?t[1]:t)===i||!(!Array.isArray(t)||"string"!=typeof i)&&fc(t,i)>=0}const Di={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function pE(t){return t.substring(Di.key,Di.keyEnd)}function A4(t){return t.substring(Di.value,Di.valueEnd)}function gE(t,i){const e=Di.textEnd;return e===i?-1:(i=Di.keyEnd=function F4(t,i,e){for(;i<e&&t.charCodeAt(i)>32;)i++;return i}(t,Di.key=i,e),cl(t,i,e))}function vE(t,i){const e=Di.textEnd;let n=Di.key=cl(t,i,e);return e===n?-1:(n=Di.keyEnd=function O4(t,i,e){let n;for(;i<e&&(45===(n=t.charCodeAt(i))||95===n||(-33&n)>=65&&(-33&n)<=90||n>=48&&n<=57);)i++;return i}(t,n,e),n=_E(t,n,e),n=Di.value=cl(t,n,e),n=Di.valueEnd=function L4(t,i,e){let n=-1,r=-1,o=-1,a=i,s=a;for(;a<e;){const l=t.charCodeAt(a++);if(59===l)return s;34===l||39===l?s=a=bE(t,l,a,e):i===a-4&&85===o&&82===r&&76===n&&40===l?s=a=bE(t,41,a,e):l>32&&(s=a),o=r,r=n,n=-33&l}return s}(t,n,e),_E(t,n,e))}function yE(t){Di.key=0,Di.keyEnd=0,Di.value=0,Di.valueEnd=0,Di.textEnd=t.length}function cl(t,i,e){for(;i<e&&t.charCodeAt(i)<=32;)i++;return i}function _E(t,i,e,n){return(i=cl(t,i,e))<e&&i++,i}function bE(t,i,e,n){let r=-1,o=e;for(;o<n;){const a=t.charCodeAt(o++);if(a==i&&92!==r)return o;r=92==a&&92===r?0:a}throw new Error}function z(t,i,e){const n=q();return Jt(n,Zn(),i)&&Cn(Ce(),Ct(),n,t,i,n[11],e,!1),z}function U_(t,i,e,n,r){By(i,t,e,r?"class":"style",n)}function Dt(t,i,e){return fr(t,i,e,!1),Dt}function ot(t,i){return fr(t,i,null,!0),ot}function N4(t,i){for(let e=function R4(t){return yE(t),vE(t,cl(t,0,Di.textEnd))}(i);e>=0;e=vE(i,e))CE(t,pE(i),A4(i))}function Ia(t){mr(U4,Lr,t,!0)}function Lr(t,i){for(let e=function P4(t){return yE(t),gE(t,cl(t,0,Di.textEnd))}(i);e>=0;e=gE(i,e))Pn(t,pE(i),!0)}function fr(t,i,e,n){const r=q(),o=Ce(),a=to(2);o.firstUpdatePass&&wE(o,t,a,n),i!==Re&&Jt(r,a,i)&&kE(o,o.data[Li()],r,r[11],t,r[a+1]=function $4(t,i){return null==t||""===t||("string"==typeof i?t+=i:"object"==typeof t&&(t=wi(Bn(t)))),t}(i,e),n,a)}function mr(t,i,e,n){const r=Ce(),o=to(2);r.firstUpdatePass&&wE(r,null,o,n);const a=q();if(e!==Re&&Jt(a,o,e)){const s=r.data[Li()];if(TE(s,n)&&!SE(r,o)){let l=n?s.classesWithoutHost:s.stylesWithoutHost;null!==l&&(e=Vg(l,e||"")),U_(r,s,a,e,n)}else!function z4(t,i,e,n,r,o,a,s){r===Re&&(r=rt);let l=0,c=0,d=0<r.length?r[0]:null,u=0<o.length?o[0]:null;for(;null!==d||null!==u;){const p=l<r.length?r[l+1]:void 0,g=c<o.length?o[c+1]:void 0;let b,m=null;d===u?(l+=2,c+=2,p!==g&&(m=u,b=g)):null===u||null!==d&&d<u?(l+=2,m=d):(c+=2,m=u,b=g),null!==m&&kE(t,i,e,n,m,b,a,s),d=l<r.length?r[l]:null,u=c<o.length?o[c]:null}}(r,s,a,a[11],a[o+1],a[o+1]=function j4(t,i,e){if(null==e||""===e)return rt;const n=[],r=Bn(e);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(n,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&t(n,o,r[o]);else"string"==typeof r&&i(n,r);return n}(t,i,e),n,o)}}function SE(t,i){return i>=t.expandoStartIndex}function wE(t,i,e,n){const r=t.data;if(null===r[e+1]){const o=r[Li()],a=SE(t,e);TE(o,n)&&null===i&&!a&&(i=!1),i=function B4(t,i,e,n){const r=function Sv(t){const i=Te.lFrame.currentDirectiveIndex;return-1===i?null:t[i]}(t);let o=n?i.residualClasses:i.residualStyles;if(null===r)0===(n?i.classBindings:i.styleBindings)&&(e=fd(e=z_(null,t,i,e,n),i.attrs,n),o=null);else{const a=i.directiveStylingLast;if(-1===a||t[a]!==r)if(e=z_(r,t,i,e,n),null===o){let l=function H4(t,i,e){const n=e?i.classBindings:i.styleBindings;if(0!==ll(n))return t[Ma(n)]}(t,i,n);void 0!==l&&Array.isArray(l)&&(l=z_(null,t,i,l[1],n),l=fd(l,i.attrs,n),function V4(t,i,e,n){t[Ma(e?i.classBindings:i.styleBindings)]=n}(t,i,n,l))}else o=function q4(t,i,e){let n;const r=i.directiveEnd;for(let o=1+i.directiveStylingLast;o<r;o++)n=fd(n,t[o].hostAttrs,e);return fd(n,i.attrs,e)}(t,i,n)}return void 0!==o&&(n?i.residualClasses=o:i.residualStyles=o),e}(r,o,i,n),function E4(t,i,e,n,r,o){let a=o?i.classBindings:i.styleBindings,s=Ma(a),l=ll(a);t[n]=e;let d,c=!1;if(Array.isArray(e)?(d=e[1],(null===d||fc(e,d)>0)&&(c=!0)):d=e,r)if(0!==l){const p=Ma(t[s+1]);t[n+1]=zf(p,s),0!==p&&(t[p+1]=q_(t[p+1],n)),t[s+1]=function T4(t,i){return 131071&t|i<<17}(t[s+1],n)}else t[n+1]=zf(s,0),0!==s&&(t[s+1]=q_(t[s+1],n)),s=n;else t[n+1]=zf(l,0),0===s?s=n:t[l+1]=q_(t[l+1],n),l=n;c&&(t[n+1]=V_(t[n+1])),mE(t,d,n,!0),mE(t,d,n,!1),function M4(t,i,e,n,r){const o=r?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof i&&fc(o,i)>=0&&(e[n+1]=j_(e[n+1]))}(i,d,t,n,o),a=zf(s,l),o?i.classBindings=a:i.styleBindings=a}(r,o,i,e,a,n)}}function z_(t,i,e,n,r){let o=null;const a=e.directiveEnd;let s=e.directiveStylingLast;for(-1===s?s=e.directiveStart:s++;s<a&&(o=i[s],n=fd(n,o.hostAttrs,r),o!==t);)s++;return null!==t&&(e.directiveStylingLast=s),n}function fd(t,i,e){const n=e?1:2;let r=-1;if(null!==i)for(let o=0;o<i.length;o++){const a=i[o];"number"==typeof a?r=a:r===n&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Pn(t,a,!!e||i[++o]))}return void 0===t?null:t}function CE(t,i,e){Pn(t,i,Bn(e))}function U4(t,i,e){const n=String(i);""!==n&&!n.includes(" ")&&Pn(t,n,e)}function kE(t,i,e,n,r,o,a,s){if(!(3&i.type))return;const l=t.data,c=l[s+1],d=function x4(t){return!(1&~t)}(c)?DE(l,i,e,r,ll(c),a):void 0;$f(d)||($f(o)||function D4(t){return!(2&~t)}(c)&&(o=DE(l,null,e,r,s,a)),function vq(t,i,e,n,r){if(i)r?t.addClass(e,n):t.removeClass(e,n);else{let o=-1===n.indexOf("-")?void 0:Io.DashCase;null==r?t.removeStyle(e,n,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Io.Important),t.setStyle(e,n,r,o))}}(n,a,Ds(Li(),e),r,o))}function DE(t,i,e,n,r,o){const a=null===i;let s;for(;r>0;){const l=t[r],c=Array.isArray(l),d=c?l[1]:l,u=null===d;let p=e[r+1];p===Re&&(p=u?rt:void 0);let g=u?Zg(p,n):d===n?p:void 0;if(c&&!$f(g)&&(g=Zg(l,n)),$f(g)&&(s=g,a))return s;const m=t[r+1];r=a?Ma(m):ll(m)}if(null!==i){let l=o?i.residualClasses:i.residualStyles;null!=l&&(s=Zg(l,n))}return s}function $f(t){return void 0!==t}function TE(t,i){return!!(t.flags&(i?8:16))}class tz{destroy(i){}updateValue(i,e){}swap(i,e){const n=Math.min(i,e),r=Math.max(i,e),o=this.detach(r);if(r-n>1){const a=this.detach(n);this.attach(n,o),this.attach(r,a)}else this.attach(n,o)}move(i,e){this.attach(e,this.detach(i))}}function $_(t,i,e,n,r){return t===e&&Object.is(i,n)?1:Object.is(r(t,i),r(e,n))?-1:0}function W_(t,i,e,n){return!(void 0===i||!i.has(n)||(t.attach(e,i.get(n)),i.delete(n),0))}function EE(t,i,e,n,r){if(W_(t,i,n,e(n,r)))t.updateValue(n,r);else{const o=t.create(n,r);t.attach(n,o)}}function ME(t,i,e,n){const r=new Set;for(let o=i;o<=e;o++)r.add(n(o,t.at(o)));return r}class IE{kvMap=new Map;_vMap=void 0;has(i){return this.kvMap.has(i)}delete(i){if(!this.has(i))return!1;const e=this.kvMap.get(i);return void 0!==this._vMap&&this._vMap.has(e)?(this.kvMap.set(i,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(i),!0}get(i){return this.kvMap.get(i)}set(i,e){if(this.kvMap.has(i)){let n=this.kvMap.get(i);void 0===this._vMap&&(this._vMap=new Map);const r=this._vMap;for(;r.has(n);)n=r.get(n);r.set(n,e)}else this.kvMap.set(i,e)}forEach(i){for(let[e,n]of this.kvMap)if(i(n,e),void 0!==this._vMap){const r=this._vMap;for(;r.has(n);)n=r.get(n),i(n,e)}}}function A(t,i){wn("NgControlFlow");const e=q(),n=Zn(),r=e[n]!==Re?e[n]:-1,o=-1!==r?Wf(e,26+r):void 0;if(Jt(e,n,t)){const s=Ae(null);try{if(void 0!==o&&Ky(o,0),-1!==t){const l=26+t,c=Wf(e,l),d=G_(e[1],l),u=null;Ws(c,Us(e,d,i,{dehydratedView:u}),0,Ca(d,u))}}finally{Ae(s)}}else if(void 0!==o){const s=yT(o,0);void 0!==s&&(s[8]=i)}}class nz{lContainer;$implicit;$index;constructor(i,e,n){this.lContainer=i,this.$implicit=e,this.$index=n}get $count(){return this.lContainer.length-10}}function _t(t,i){return i}class oz{hasEmptyBlock;trackByFn;liveCollection;constructor(i,e,n){this.hasEmptyBlock=i,this.trackByFn=e,this.liveCollection=n}}function be(t,i,e,n,r,o,a,s,l,c,d,u,p){wn("NgControlFlow");const g=q(),m=Ce(),b=void 0!==l,C=q(),w=s?a.bind(C[15][8]):a,k=new oz(b,w);C[26+t]=k,ld(g,m,t+1,i,e,n,r,Qn(m.consts,o)),b&&ld(g,m,t+2,l,c,d,u,Qn(m.consts,p))}class az extends tz{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(i,e,n){super(),this.lContainer=i,this.hostLView=e,this.templateTNode=n}get length(){return this.lContainer.length-10}at(i){return this.getLView(i)[8].$implicit}attach(i,e){const n=e[6];this.needsIndexUpdate||=i!==this.length,Ws(this.lContainer,e,i,Ca(this.templateTNode,n))}detach(i){return this.needsIndexUpdate||=i!==this.length-1,function sz(t,i){return Yc(t,i)}(this.lContainer,i)}create(i,e){const r=Us(this.hostLView,this.templateTNode,new nz(this.lContainer,e,i),{dehydratedView:null});return this.operationsCounter?.recordCreate(),r}destroy(i){Wc(i[1],i),this.operationsCounter?.recordDestroy()}updateValue(i,e){this.getLView(i)[8].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let i=0;i<this.length;i++)this.getLView(i)[8].$index=i}getLView(i){return function lz(t,i){return yT(t,i)}(this.lContainer,i)}}function Se(t){const i=Ae(null),e=Li();try{const n=q(),r=n[1],o=n[e],a=e+1,s=Wf(n,a);if(void 0===o.liveCollection){const c=G_(r,a);o.liveCollection=new az(s,n,c)}else o.liveCollection.reset();const l=o.liveCollection;if(function iz(t,i,e){let n,r,o=0,a=t.length-1;if(Array.isArray(i)){let l=i.length-1;for(;o<=a&&o<=l;){const c=t.at(o),d=i[o],u=$_(o,c,o,d,e);if(0!==u){u<0&&t.updateValue(o,d),o++;continue}const p=t.at(a),g=i[l],m=$_(a,p,l,g,e);if(0!==m){m<0&&t.updateValue(a,g),a--,l--;continue}const b=e(o,c),C=e(a,p),w=e(o,d);if(Object.is(w,C)){const k=e(l,g);Object.is(k,b)?(t.swap(o,a),t.updateValue(a,g),l--,a--):t.move(a,o),t.updateValue(o,d),o++}else if(n??=new IE,r??=ME(t,o,a,e),W_(t,n,o,w))t.updateValue(o,d),o++,a++;else if(r.has(w))n.set(b,t.detach(o)),a--;else{const k=t.create(o,i[o]);t.attach(o,k),o++,a++}}for(;o<=l;)EE(t,n,e,o,i[o]),o++}else if(null!=i){const l=i[Symbol.iterator]();let c=l.next();for(;!c.done&&o<=a;){const d=t.at(o),u=c.value,p=$_(o,d,o,u,e);if(0!==p)p<0&&t.updateValue(o,u),o++,c=l.next();else{n??=new IE,r??=ME(t,o,a,e);const g=e(o,u);if(W_(t,n,o,g))t.updateValue(o,u),o++,a++,c=l.next();else if(r.has(g)){const m=e(o,d);n.set(m,t.detach(o)),a--}else t.attach(o,t.create(o,u)),o++,a++,c=l.next()}}for(;!c.done;)EE(t,n,e,t.length,c.value),c=l.next()}for(;o<=a;)t.destroy(t.detach(a--));n?.forEach(l=>{t.destroy(l)})}(l,t,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){const c=Zn(),d=0===l.length;if(Jt(n,c,d)){const u=e+2,p=Wf(n,u);if(d){const g=G_(r,u),m=null;Ws(p,Us(n,g,void 0,{dehydratedView:m}),0,Ca(g,m))}else Ky(p,0)}}}finally{Ae(i)}}function Wf(t,i){return t[i]}function G_(t,i){return fa(t,i)}function h(t,i,e,n){const r=q(),o=Ce(),a=26+t,s=r[11],l=o.firstCreatePass?KT(a,o,r,i,Ly,vv(),e,n):o.data[a],c=AE(o,r,l,s,i,t);r[a]=c;const d=Eh(l);return dr(l,!0),WD(s,c,l),!Ao(l)&&_c()&&wf(o,r,c,l),(0===function qB(){return Te.lFrame.elementDepthCount}()||d)&&bn(c,r),function jB(){Te.lFrame.elementDepthCount++}(),d&&(_f(o,r,l),Sy(o,l,r)),null!==n&&Oy(r,l),h}function f(){let t=Ve();yv()?_v():(t=t.parent,dr(t,!1));const i=t;(function zB(t){return Te.skipHydrationRootTNode===t})(i)&&function YB(){Te.skipHydrationRootTNode=null}(),function UB(){Te.lFrame.elementDepthCount--}();const e=Ce();return e.firstCreatePass&&QT(e,i),null!=i.classesWithoutHost&&function aH(t){return!!(8&t.flags)}(i)&&U_(e,i,q(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function sH(t){return!!(16&t.flags)}(i)&&U_(e,i,q(),i.stylesWithoutHost,!1),f}function L(t,i,e,n){return h(t,i,e,n),f(),L}let AE=(t,i,e,n,r,o)=>(Mr(!0),gf(n,r,function Fk(){return Te.lFrame.currentNamespace}()));function G(){return q()}function md(t,i,e){const n=q();return Jt(n,Zn(),i)&&Cn(Ce(),Ct(),n,t,i,n[11],e,!0),md}const Aa=void 0;var pz=["en",[["a","p"],["AM","PM"],Aa],[["AM","PM"],Aa,Aa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Aa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Aa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Aa,"{1} 'at' {0}",Aa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function mz(t){const i=Math.floor(Math.abs(t)),e=t.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===e?1:5}];let dl={};function sn(t){const i=function gz(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=LE(i);if(e)return e;const n=i.split("-")[0];if(e=LE(n),e)return e;if("en"===n)return pz;throw new N(701,!1)}function LE(t){return t in dl||(dl[t]=Qt.ng&&Qt.ng.common&&Qt.ng.common.locales&&Qt.ng.common.locales[t]),dl[t]}var Rt=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Rt||{});const Gf="en-US";let NE=Gf;function x(t,i,e,n){const r=q(),o=Ce(),a=Ve();return X_(o,r,r[11],a,t,i,n),x}function X_(t,i,e,n,r,o,a){const s=Eh(n),c=t.firstCreatePass?wk(t):null,d=i[8],u=Sk(i);let p=!0;if(3&n.type||a){const g=tn(n,i),m=a?a(g):g,b=u.length,C=a?k=>a(Xe(k[n.index])):n.index;let w=null;if(!a&&s&&(w=function r8(t,i,e,n){const r=t.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const a=r[o];if(a===e&&r[o+1]===n){const s=i[7],l=r[o+2];return s.length>l?s[l]:null}"string"==typeof a&&(o+=2)}return null}(t,i,r,n.index)),null!==w)(w.__ngLastListenerFn__||w).__ngNextListenerFn__=o,w.__ngLastListenerFn__=o,p=!1;else{o=aM(n,i,d,o);const k=e.listen(m,r,o);u.push(o,k),c&&c.push(r,C,b,b+1)}}else o=aM(n,i,d,o);if(p){const g=n.outputs?.[r],m=n.hostDirectiveOutputs?.[r];if(m&&m.length)for(let b=0;b<m.length;b+=2)rM(n,t,i,m[b],m[b+1],r,o,u,c);if(g&&g.length)for(const b of g)rM(n,t,i,b,r,r,o,u,c)}}function rM(t,i,e,n,r,o,a,s,l){const g=e[n][i.data[n].outputs[r]].subscribe(a),m=s.length;s.push(a,g),l&&l.push(o,t.index,m,-(m+1))}function oM(t,i,e,n){const r=Ae(null);try{return!1!==e(n)}catch(o){return bf(t,o),!1}finally{Ae(r)}}function aM(t,i,e,n){return function r(o){if(o===Function)return n;Gc(cr(t)?nn(t.index,i):i,5);let s=oM(i,0,n,o),l=r.__ngNextListenerFn__;for(;l;)s=oM(i,0,l,o)&&s,l=l.__ngNextListenerFn__;return s}}function S(t=1){return function JB(t){return(Te.lFrame.contextLView=function bk(t,i){for(;t>0;)i=i[14],t--;return i}(t,Te.lFrame.contextLView))[8]}(t)}function o8(t,i){let e=null;const n=function V3(t){const i=t.attrs;if(null!=i){const e=i.indexOf(5);if(!(1&e))return i[e+1]}return null}(t);for(let r=0;r<i.length;r++){const o=i[r];if("*"!==o){if(null===n?VD(t,o,!0):U3(n,o))return r}else e=r}return e}function Dn(t){const i=q()[15][5];if(!i.projection){const n=i.projection=function _h(t,i){const e=[];for(let n=0;n<t;n++)e.push(i);return e}(t?t.length:1,null),r=n.slice();let o=i.child;for(;null!==o;){if(128!==o.type){const a=t?o8(o,t):0;null!==a&&(r[a]?r[a].projectionNext=o:n[a]=o,r[a]=o)}o=o.next}}}function di(t,i=0,e,n,r,o){const a=q(),s=Ce(),l=n?t+1:null;null!==l&&ld(a,s,l,n,r,o,null,e);const c=Gs(s,26+t,16,null,e||null);null===c.projection&&(c.projection=i),_v();const u=!a[6]||pa();null===a[15][5].projection[c.projection]&&null!==l?function a8(t,i,e){const n=26+e,r=i.data[n],o=t[n];Ws(o,Us(t,r,void 0,{dehydratedView:null}),0,Ca(r,null))}(a,s,l):u&&!Ao(c)&&function pq(t,i,e){sT(i[11],0,i,e,Uy(t,e,i),iT(e.parent||i[5],e,i))}(s,a,c)}function re(t,i,e){return pt(t,"",i,"",e),re}function pt(t,i,e,n,r){const o=q(),a=el(o,i,e,n);return a!==Re&&Cn(Ce(),Ct(),o,t,a,o[11],r,!1),pt}function Lo(t,i,e,n,r,o,a){const s=q(),l=tl(s,i,e,n,r,o);return l!==Re&&Cn(Ce(),Ct(),s,t,l,s[11],a,!1),Lo}function Zf(t,i,e,n,r,o,a,s,l){const c=q(),d=il(c,i,e,n,r,o,a,s);return d!==Re&&Cn(Ce(),Ct(),c,t,d,c[11],l,!1),Zf}function Xf(t,i,e,n,r,o,a,s,l,c,d,u,p,g,m,b,C,w,k){const F=q(),U=function sl(t,i,e,n,r,o,a,s,l,c,d,u,p,g,m,b,C,w){const k=eo();let F=er(t,k,e,r,a,l);return F=er(t,k+4,d,p,m,C)||F,to(8),F?i+Pe(e)+n+Pe(r)+o+Pe(a)+s+Pe(l)+c+Pe(d)+u+Pe(p)+g+Pe(m)+b+Pe(C)+w:Re}(F,i,e,n,r,o,a,s,l,c,d,u,p,g,m,b,C,w);return U!==Re&&Cn(Ce(),Ct(),F,t,U,F[11],k,!1),Xf}function ln(t,i,e,n){!function lx(t,i,e,n){const r=Ce();if(r.firstCreatePass){const o=Ve();cx(r,new rx(i,e,n),o.index),function dU(t,i){const e=t.contentQueries||(t.contentQueries=[]);i!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,i)}(r,t),!(2&~e)&&(r.staticContentQueries=!0)}return ax(r,q(),e)}(t,i,e,n)}function ti(t,i,e){sx(t,i,e)}function Ye(t){const i=q(),e=Ce(),n=wv();Rh(n+1);const r=y_(e,n);if(t.dirty&&function BB(t){return!(4&~t[2])}(i)===!(2&~r.metadata.flags)){if(null===r.matches)t.reset([]);else{const o=dx(i,n);t.reset(o,p1),t.notifyOnChanges()}return!0}return!1}function Ke(){return v_(q(),wv())}function Jf(t,i,e,n){!function mx(t,i){const e=t[ci];e._lView=q(),e._queryIndex=i,e._queryList=v_(e._lView,i),e._queryList.onDirty(()=>e._dirtyCounter.update(n=>n+1))}(t,sx(i,e,n))}function J_(t=1){Rh(wv()+t)}function eb(t,i,e,n){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),i[e]=n}function Pa(t){return ma(kk(),26+t)}function y(t,i=""){const e=q(),n=Ce(),r=t+26,o=n.firstCreatePass?Gs(n,r,1,i,null):n.data[r],a=SM(n,e,o,i,t);e[r]=a,_c()&&wf(n,e,a,o),dr(o,!1)}let SM=(t,i,e,n,r)=>(Mr(!0),function My(t,i){return t.createText(i)}(i[11],n));function Fe(t){return j("",t,""),Fe}function j(t,i,e){const n=q(),r=el(n,t,i,e);return r!==Re&&lo(n,Li(),r),j}function qi(t,i,e,n,r){const o=q(),a=tl(o,t,i,e,n,r);return a!==Re&&lo(o,Li(),a),qi}function No(t,i,e,n,r,o,a){const s=q(),l=il(s,t,i,e,n,r,o,a);return l!==Re&&lo(s,Li(),l),No}function lo(t,i,e){const n=Ds(i,t);!function jD(t,i,e){t.setValue(i,e)}(t[11],n,e)}function ul(t,i,e){g1(i)&&(i=i());const n=q();return Jt(n,Zn(),i)&&Cn(Ce(),Ct(),n,t,i,n[11],e,!1),ul}function bd(t,i){const e=g1(t);return e&&t.set(i),e}function hl(t,i){const e=q(),n=Ce(),r=Ve();return X_(n,e,e[11],r,t,i),hl}const EM={};function tb(t){const i=Ce(),e=q(),n=t+26;return dr(Gs(i,n,128,null,null),!1),eb(i,e,n,EM),tb}function ib(t){const e=ma(kk(),26+t);if(e===EM)throw new N(314,!1);return e}function nb(t,i,e,n,r){if(t=De(t),Array.isArray(t))for(let o=0;o<t.length;o++)nb(t[o],i,e,n,r);else{const o=Ce(),a=q(),s=Ve();let l=la(t)?t:De(t.provide);const c=rk(t),d=1048575&s.providerIndexes,u=s.directiveStart,p=s.providerIndexes>>20;if(la(t)||!t.multi){const g=new bc(c,r,T),m=ob(l,i,r?d:d+p,u);-1===m?(Fv(Nh(s,a),o,l),rb(o,t,i.length),i.push(l),s.directiveStart++,s.directiveEnd++,r&&(s.providerIndexes+=1048576),e.push(g),a.push(g)):(e[m]=g,a[m]=g)}else{const g=ob(l,i,d+p,u),m=ob(l,i,d,d+p),C=m>=0&&e[m];if(r&&!C||!r&&!(g>=0&&e[g])){Fv(Nh(s,a),o,l);const w=function C8(t,i,e,n,r){const o=new bc(t,e,T);return o.multi=[],o.index=i,o.componentProviders=0,IM(o,r,n&&!e),o}(r?w8:S8,e.length,r,n,c);!r&&C&&(e[m].providerFactory=w),rb(o,t,i.length,0),i.push(l),s.directiveStart++,s.directiveEnd++,r&&(s.providerIndexes+=1048576),e.push(w),a.push(w)}else rb(o,t,g>-1?g:m,IM(e[r?m:g],c,!r&&n));!r&&n&&C&&e[m].componentProviders++}}}function rb(t,i,e,n){const r=la(i),o=function pB(t){return!!t.useClass}(i);if(r||o){const l=(o?De(i.useClass):i).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&i.multi){const d=c.indexOf(e);-1===d?c.push(e,[n,l]):c[d+1].push(n,l)}else c.push(e,l)}}}function IM(t,i,e){return e&&t.componentProviders++,t.multi.push(i)-1}function ob(t,i,e,n){for(let r=e;r<n;r++)if(i[r]===t)return r;return-1}function S8(t,i,e,n){return ab(this.multi,[])}function w8(t,i,e,n){const r=this.multi;let o;if(this.providerFactory){const a=this.providerFactory.componentProviders,s=Cc(e,e[1],this.providerFactory.index,n);o=s.slice(0,a),ab(r,o);for(let l=a;l<s.length;l++)o.push(s[l])}else o=[],ab(r,o);return o}function ab(t,i){for(let e=0;e<t.length;e++)i.push((0,t[e])());return i}function qe(t,i=[]){return e=>{e.providersResolver=(n,r)=>function b8(t,i,e){const n=Ce();if(n.firstCreatePass){const r=Ln(t);nb(e,n.data,n.blueprint,r,!0),nb(i,n.data,n.blueprint,r,!1)}}(n,r?r(t):t,i)}}function sb(t,i,e){const n=rn()+t,r=q();return r[n]===Re?Or(r,n,e?i.call(e):i()):function sd(t,i){return t[i]}(r,n)}function dt(t,i,e,n){return PM(q(),rn(),t,i,e,n)}function Tn(t,i,e,n,r){return RM(q(),rn(),t,i,e,n,r)}function Sd(t,i){const e=t[i];return e===Re?void 0:e}function PM(t,i,e,n,r,o){const a=i+e;return Jt(t,a,r)?Or(t,a+1,o?n.call(o,r):n(r)):Sd(t,a+1)}function RM(t,i,e,n,r,o,a){const s=i+e;return xa(t,s,r,o)?Or(t,s+2,a?n.call(a,r,o):n(r,o)):Sd(t,s+2)}function O(t,i){const e=Ce();let n;const r=t+26;e.firstCreatePass?(n=function F8(t,i){if(i)for(let e=i.length-1;e>=0;e--){const n=i[e];if(t===n.name)return n}}(i,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks??=[]).push(r,n.onDestroy)):n=e.data[r];const o=n.factory||(n.factory=oa(n.type)),s=vn(T);try{const l=Lh(!1),c=o();return Lh(l),eb(e,q(),r,c),c}finally{vn(s)}}function V(t,i,e){const n=t+26,r=q(),o=ma(r,n);return wd(r,n)?PM(r,rn(),i,o.transform,e,o):o.transform(e)}function pr(t,i,e,n){const r=t+26,o=q(),a=ma(o,r);return wd(o,r)?RM(o,rn(),i,a.transform,e,n,a):a.transform(e,n)}function wd(t,i){return t[1].data[i].pure}class ml{full;major;minor;patch;constructor(i){this.full=i;const e=i.split(".");this.major=e[0],this.minor=e[1],this.patch=e.slice(2).join(".")}}const eI=new ml("19.2.2");class u${ngModuleFactory;componentFactories;constructor(i,e){this.ngModuleFactory=i,this.componentFactories=e}}let tI=(()=>{class t{compileModuleSync(e){return new C_(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),o=Rr(Rn(e).declarations).reduce((a,s)=>{const l=ze(s);return l&&a.push(new od(l)),a},[]);return new u$(n,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),m$=(()=>{class t{zone=_(ce);changeDetectionScheduler=_(no);applicationRef=_(an);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function hb({ngZoneFactory:t,ignoreChangesOutsideZone:i,scheduleInRootZone:e}){return t??=()=>new ce({...fb(),scheduleInRootZone:e}),[{provide:ce,useFactory:t},{provide:Kn,multi:!0,useFactory:()=>{const n=_(m$,{optional:!0});return()=>n.initialize()}},{provide:Kn,multi:!0,useFactory:()=>{const n=_(g$);return()=>{n.initialize()}}},!0===i?{provide:s1,useValue:!0}:[],{provide:Nv,useValue:e??o1}]}function fb(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let g$=(()=>{class t{subscription=new je;initialized=!1;zone=_(ce);pendingTasks=_(xo);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ce.assertNotInAngularZone(),queueMicrotask(()=>{null!==e&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ce.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kd=(()=>{class t{appRef=_(an);taskService=_(xo);ngZone=_(ce);zonelessEnabled=_(Dc);tracing=_(Ps,{optional:!0});disableScheduling=_(s1,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(qh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(_(Nv,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof qv||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&5===e)return;let n=!1;switch(e){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,n=!0;break;case 12:this.appRef.dirtyFlags|=16,n=!0;break;case 11:n=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(n))return;const r=this.useMicrotaskScheduler?c1:l1;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick())):this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(qh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(n){throw this.taskService.remove(e),n}finally{this.cleanup()}this.useMicrotaskScheduler=!0,c1(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const co=new B("",{providedIn:"root",factory:()=>_(co,Ue.Optional|Ue.SkipSelf)||function v$(){return typeof $localize<"u"&&$localize.locale||Gf}()}),nm=new B(""),C$=new B("");function Dd(t){return!t.moduleRef}let Bo=null;let ji=(()=>class t{static __NG_ELEMENT_ID__=M$})();function M$(t){return function I$(t,i,e){if(cr(t)&&!e){const n=nn(t.index,i);return new Kc(n,n)}return 175&t.type?new Kc(i[15],i):null}(Ve(),q(),!(16&~t))}class yI{constructor(){}supports(i){return i instanceof Map||T_(i)}create(){return new B$}}class B${_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let e;for(e=this._mapHead;null!==e;e=e._next)i(e)}forEachPreviousItem(i){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)i(e)}forEachChangedItem(i){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)i(e)}forEachAddedItem(i){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)i(e)}forEachRemovedItem(i){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)i(e)}diff(i){if(i){if(!(i instanceof Map||T_(i)))throw new N(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(i,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const o=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,e){if(i){const n=i._prev;return e._next=i,e._prev=n,i._prev=e,n&&(n._next=e),i===this._mapHead&&(this._mapHead=e),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(i,e){if(this._records.has(i)){const r=this._records.get(i);this._maybeAddToChanges(r,e);const o=r._prev,a=r._next;return o&&(o._next=a),a&&(a._prev=o),r._next=null,r._prev=null,r}const n=new H$(i);return this._records.set(i,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,e){Object.is(e,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=e,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,e){i instanceof Map?i.forEach(e):Object.keys(i).forEach(n=>e(i[n],n))}}class H${key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(i){this.key=i}}function bI(){return new am([new yI])}let am=(()=>{class t{static \u0275prov=W({token:t,providedIn:"root",factory:bI});factories;constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||bI()),deps:[[t,new vh,new ps]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(n)return n;throw new N(901,!1)}}return t})(),j$=(()=>{class t{constructor(e){}static \u0275fac=function(n){return new(n||t)(P(an))};static \u0275mod=mt({type:t});static \u0275inj=lt({})}return t})();function U$(t){try{const{rootComponent:i,appProviders:e,platformProviders:n}=t,r=function E$(t=[]){if(Bo)return Bo;const i=function cI(t=[],i){return we.create({name:i,providers:[{provide:iv,useValue:"platform"},{provide:nm,useValue:new Set([()=>Bo=null])},...t]})}(t);return Bo=i,function Qx(){!function k2(t){SC=t}(()=>{throw new N(600,!1)})}(),function dI(t){const i=t.get(Kv,null);sr(t,()=>{i?.forEach(e=>e())})}(i),i}(n),o=[hb({}),{provide:no,useExisting:kd},...e||[]];return function aI(t){const i=Dd(t)?t.r3Injector:t.moduleRef.injector,e=i.get(ce);return e.run(()=>{Dd(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();const n=i.get(Nn,null);let r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:o=>{n.handleError(o)}})}),Dd(t)){const o=()=>i.destroy(),a=t.platformInjector.get(nm);a.add(o),i.onDestroy(()=>{r.unsubscribe(),a.delete(o)})}else{const o=()=>t.moduleRef.destroy(),a=t.platformInjector.get(nm);a.add(o),t.moduleRef.onDestroy(()=>{Uf(t.allPlatformModules,t.moduleRef),r.unsubscribe(),a.delete(o)})}return function D$(t,i,e){try{const n=e();return dd(n)?n.catch(r=>{throw i.runOutsideAngular(()=>t.handleError(r)),r}):n}catch(n){throw i.runOutsideAngular(()=>t.handleError(n)),n}}(n,e,()=>{const o=i.get(Kx);return o.runInitializers(),o.donePromise.then(()=>{if(function bz(t){"string"==typeof t&&(NE=t.toLowerCase().replace(/_/g,"-"))}(i.get(co,Gf)||Gf),!i.get(C$,!0))return Dd(t)?i.get(an):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Dd(t)){const l=i.get(an);return void 0!==t.rootComponent&&l.bootstrap(t.rootComponent),l}return function k$(t,i){const e=t.injector.get(an);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(n=>e.bootstrap(n));else{if(!t.instance.ngDoBootstrap)throw new N(-403,!1);t.instance.ngDoBootstrap(e)}i.push(t)}(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}({r3Injector:new Cx({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:r,rootComponent:i})}catch(i){return Promise.reject(i)}}function Oe(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function pl(t,i=NaN){return isNaN(parseFloat(t))||isNaN(Number(t))?i:Number(t)}function si(t){const i=Ae(null);try{return t()}finally{Ae(i)}}function gr(t,i){const e=bC(t);return i?.equal&&(e[ci].equal=i.equal),e}class g6{[ci];constructor(i){this[ci]=i}destroy(){this[ci].destroy()}}const FI={...ss,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:Tc,run(){if(this.dirty=!1,this.hasRun&&!sc(this))return;this.hasRun=!0;const t=n=>(this.cleanupFns??=[]).push(n),i=Jo(this),e=Ph(!1);try{this.maybeCleanup(),this.fn(t)}finally{Ph(e),ls(this,i)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}},v6={...FI,consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){lc(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}},y6={...FI,consumerMarkedDirty(){this.view[2]|=8192,Ts(this.view),this.notifier.notify(13)},destroy(){lc(this),this.onDestroyFn(),this.maybeCleanup(),this.view[23]?.delete(this)}};function HI(t,i){const e=ze(t),n=i.elementInjector||Ch();return new od(e).create(n,i.projectableNodes,i.hostElement,i.environmentInjector)}const um={appVersion:fC(330).rE,production:!0};let VI=null;function Ho(){return VI}class R6{}const Ge=new B("");let kb=(()=>{class t{historyGo(e){throw new Error("")}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:()=>_(O6),providedIn:"platform"})}return t})();const F6=new B("");let O6=(()=>{class t extends kb{_location;_history;_doc=_(Ge);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ho().getBaseHref(this._doc)}onPopState(e){const n=Ho().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Ho().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,n,r){this._history.pushState(e,n,r)}replaceState(e,n,r){this._history.replaceState(e,n,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Db(t,i){return t?i?t.endsWith("/")?i.startsWith("/")?t+i.slice(1):t+i:i.startsWith("/")?t+i:`${t}/${i}`:t:i}function qI(t){const i=t.search(/#|\?|$/);return"/"===t[i-1]?t.slice(0,i-1)+t.slice(i):t}function uo(t){return t&&"?"!==t[0]?`?${t}`:t}let Fa=(()=>{class t{historyGo(e){throw new Error("")}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:()=>_(UI),providedIn:"root"})}return t})();const jI=new B("");let UI=(()=>{class t extends Fa{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,n){super(),this._platformLocation=e,this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??_(Ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Db(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+uo(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,o){const a=this.prepareExternalUrl(r+uo(o));this._platformLocation.pushState(e,n,a)}replaceState(e,n,r,o){const a=this.prepareExternalUrl(r+uo(o));this._platformLocation.replaceState(e,n,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(n){return new(n||t)(P(kb),P(jI,8))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),L6=(()=>{class t extends Fa{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,n){super(),this._platformLocation=e,null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){const n=this._platformLocation.hash??"#";return n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=Db(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,o){const a=this.prepareExternalUrl(r+uo(o))||this._platformLocation.pathname;this._platformLocation.pushState(e,n,a)}replaceState(e,n,r,o){const a=this.prepareExternalUrl(r+uo(o))||this._platformLocation.pathname;this._platformLocation.replaceState(e,n,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(n){return new(n||t)(P(kb),P(jI,8))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})(),gl=(()=>{class t{_subject=new Y;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;const n=this._locationStrategy.getBaseHref();this._basePath=function H6(t){if(new RegExp("^(https?:)?//").test(t)){const[,e]=t.split(/\/\/[^\/]+/);return e}return t}(qI(zI(n))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+uo(n))}normalize(e){return t.stripTrailingSlash(function B6(t,i){if(!t||!i.startsWith(t))return i;const e=i.substring(t.length);return""===e||["/",";","?","#"].includes(e[0])?e:i}(this._basePath,zI(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._locationStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+uo(n)),r)}replaceState(e,n="",r=null){this._locationStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+uo(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}),()=>{const n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n??void 0,complete:r??void 0})}static normalizeQueryParams=uo;static joinWithSlash=Db;static stripTrailingSlash=qI;static \u0275fac=function(n){return new(n||t)(P(Fa))};static \u0275prov=W({token:t,factory:()=>function N6(){return new gl(P(Fa))}(),providedIn:"root"})}return t})();function zI(t){return t.replace(/\/index.html$/,"")}var hm=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(hm||{});function tr(t,i){const e=sn(t),n=e[Rt.NumberSymbols][i];if(typeof n>"u"){if(12===i)return e[Rt.NumberSymbols][0];if(13===i)return e[Rt.NumberSymbols][1]}return n}function Tb(t,i){return sn(t)[Rt.NumberFormats][i]}const hW=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Ab(t,i,e,n,r,o,a=!1){let s="",l=!1;if(isFinite(t)){let c=function bW(t){let n,r,o,a,s,i=Math.abs(t)+"",e=0;for((r=i.indexOf("."))>-1&&(i=i.replace(".","")),(o=i.search(/e/i))>0?(r<0&&(r=o),r+=+i.slice(o+1),i=i.substring(0,o)):r<0&&(r=i.length),o=0;"0"===i.charAt(o);o++);if(o===(s=i.length))n=[0],r=1;else{for(s--;"0"===i.charAt(s);)s--;for(r-=o,n=[],a=0;o<=s;o++,a++)n[a]=Number(i.charAt(o))}return r>22&&(n=n.splice(0,21),e=r-1,r=1),{digits:n,exponent:e,integerLen:r}}(t);a&&(c=function _W(t){if(0===t.digits[0])return t;const i=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===i?t.digits.push(0,0):1===i&&t.digits.push(0),t.integerLen+=2),t}(c));let d=i.minInt,u=i.minFrac,p=i.maxFrac;if(o){const k=o.match(hW);if(null===k)throw new Error(`${o} is not a valid digit info`);const F=k[1],U=k[3],X=k[5];null!=F&&(d=Rb(F)),null!=U&&(u=Rb(U)),null!=X?p=Rb(X):null!=U&&u>p&&(p=u)}!function SW(t,i,e){if(i>e)throw new Error(`The minimum number of digits after fraction (${i}) is higher than the maximum (${e}).`);let n=t.digits,r=n.length-t.integerLen;const o=Math.min(Math.max(i,r),e);let a=o+t.integerLen,s=n[a];if(a>0){n.splice(Math.max(t.integerLen,a));for(let u=a;u<n.length;u++)n[u]=0}else{r=Math.max(0,r),t.integerLen=1,n.length=Math.max(1,a=o+1),n[0]=0;for(let u=1;u<a;u++)n[u]=0}if(s>=5)if(a-1<0){for(let u=0;u>a;u--)n.unshift(0),t.integerLen++;n.unshift(1),t.integerLen++}else n[a-1]++;for(;r<Math.max(0,o);r++)n.push(0);let l=0!==o;const c=i+t.integerLen,d=n.reduceRight(function(u,p,g,m){return m[g]=(p+=u)<10?p:p-10,l&&(0===m[g]&&g>=c?m.pop():l=!1),p>=10?1:0},0);d&&(n.unshift(d),t.integerLen++)}(c,u,p);let g=c.digits,m=c.integerLen;const b=c.exponent;let C=[];for(l=g.every(k=>!k);m<d;m++)g.unshift(0);for(;m<0;m++)g.unshift(0);m>0?C=g.splice(m,g.length):(C=g,g=[0]);const w=[];for(g.length>=i.lgSize&&w.unshift(g.splice(-i.lgSize,g.length).join(""));g.length>i.gSize;)w.unshift(g.splice(-i.gSize,g.length).join(""));g.length&&w.unshift(g.join("")),s=w.join(tr(e,n)),C.length&&(s+=tr(e,r)+C.join("")),b&&(s+=tr(e,6)+"+"+b)}else s=tr(e,9);return s=t<0&&!l?i.negPre+s+i.negSuf:i.posPre+s+i.posSuf,s}function Pb(t,i="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=t.split(";"),r=n[0],o=n[1],a=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],s=a[0],l=a[1]||"";e.posPre=s.substring(0,s.indexOf("#"));for(let d=0;d<l.length;d++){const u=l.charAt(d);"0"===u?e.minFrac=e.maxFrac=d+1:"#"===u?e.maxFrac=d+1:e.posSuf+=u}const c=s.split(",");if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){const d=r.length-e.posPre.length-e.posSuf.length,u=o.indexOf("#");e.negPre=o.substring(0,u).replace(/'/g,""),e.negSuf=o.slice(u+d).replace(/'/g,"")}else e.negPre=i+e.posPre,e.negSuf=e.posSuf;return e}function Rb(t){const i=parseInt(t);if(isNaN(i))throw new Error("Invalid integer literal when parsing "+t);return i}const Ob=/\s+/,JI=[];let fi=(()=>{class t{_ngEl;_renderer;initialClasses=JI;rawClass;stateMap=new Map;constructor(e,n){this._ngEl=e,this._renderer=n}set klass(e){this.initialClasses=null!=e?e.trim().split(Ob):JI}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(Ob):e}ngDoCheck(){for(const n of this.initialClasses)this._updateState(n,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const n of e)this._updateState(n,!0);else if(null!=e)for(const n of Object.keys(e))this._updateState(n,!!e[n]);this._applyStateDiff()}_updateState(e,n){const r=this.stateMap.get(e);void 0!==r?(r.enabled!==n&&(r.changed=!0,r.enabled=n),r.touched=!0):this.stateMap.set(e,{enabled:n,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const n=e[0],r=e[1];r.changed?(this._toggleClass(n,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(n,!1),this.stateMap.delete(n)),r.touched=!1}}_toggleClass(e,n){(e=e.trim()).length>0&&e.split(Ob).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(n){return new(n||t)(T(xe),T(Hi))};static \u0275dir=ie({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();function yr(t,i){return new N(2100,!1)}const NW=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let Ai=(()=>{class t{transform(e){if(null==e)return null;if("string"!=typeof e)throw yr();return e.replace(NW,n=>n[0].toUpperCase()+n.slice(1).toLowerCase())}static \u0275fac=function(n){return new(n||t)};static \u0275pipe=Qi({name:"titlecase",type:t,pure:!0})}return t})(),Cm=(()=>{class t{differs;constructor(e){this.differs=e}differ;keyValues=[];compareFn=rA;transform(e,n=rA){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ??=this.differs.find(e).create();const r=this.differ.diff(e),o=n!==this.compareFn;return r&&(this.keyValues=[],r.forEachItem(a=>{this.keyValues.push(function GW(t,i){return{key:t,value:i}}(a.key,a.currentValue))})),(r||o)&&(n&&this.keyValues.sort(n),this.compareFn=n),this.keyValues}static \u0275fac=function(n){return new(n||t)(T(am,16))};static \u0275pipe=Qi({name:"keyvalue",type:t,pure:!1})}return t})();function rA(t,i){const e=t.key,n=i.key;if(e===n)return 0;if(null==e)return 1;if(null==n)return-1;if("string"==typeof e&&"string"==typeof n)return e<n?-1:1;if("number"==typeof e&&"number"==typeof n)return e-n;if("boolean"==typeof e&&"boolean"==typeof n)return e<n?-1:1;const r=String(e),o=String(n);return r==o?0:r<o?-1:1}let yl=(()=>{class t{_locale;constructor(e){this._locale=e}transform(e,n,r){if(!Bb(e))return null;r||=this._locale;try{return function yW(t,i,e){return Ab(t,Pb(Tb(i,hm.Decimal),tr(i,5)),i,1,0,e)}(Hb(e),r,n)}catch(o){throw yr()}}static \u0275fac=function(n){return new(n||t)(T(co,16))};static \u0275pipe=Qi({name:"number",type:t,pure:!0})}return t})(),oA=(()=>{class t{_locale;constructor(e){this._locale=e}transform(e,n,r){if(!Bb(e))return null;r||=this._locale;try{return function vW(t,i,e){return Ab(t,Pb(Tb(i,hm.Percent),tr(i,5)),i,1,0,e,!0).replace(new RegExp("%","g"),tr(i,3))}(Hb(e),r,n)}catch(o){throw yr()}}static \u0275fac=function(n){return new(n||t)(T(co,16))};static \u0275pipe=Qi({name:"percent",type:t,pure:!0})}return t})();function Bb(t){return!(null==t||""===t||t!=t)}function Hb(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}let Vo=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({})}return t})();const aA="browser";function sA(t){return"server"===t}let ZW=(()=>{class t{static \u0275prov=W({token:t,providedIn:"root",factory:()=>new XW(_(Ge),window)})}return t})();class XW{document;window;offset=()=>[0,0];constructor(i,e){this.document=i,this.window=e}setOffset(i){this.offset=Array.isArray(i)?()=>i:i}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(i){this.window.scrollTo(i[0],i[1])}scrollToAnchor(i){const e=function JW(t,i){const e=t.getElementById(i)||t.getElementsByName(i)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const o=r.shadowRoot;if(o){const a=o.getElementById(i)||o.querySelector(`[name="${i}"]`);if(a)return a}r=n.nextNode()}}return null}(this.document,i);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(i){this.window.history.scrollRestoration=i}scrollToElement(i){const e=i.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(n-o[0],r-o[1])}}function qo(t){return this instanceof qo?(this.v=t,this):new qo(t)}function SA(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t=function Wb(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=t[o]&&function(a){return new Promise(function(s,l){!function r(o,a,s,l){Promise.resolve(l).then(function(c){o({value:c,done:s})},a)}(s,l,(a=t[o](a)).done,a.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Yb=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function wA(t){return nt(t?.then)}function CA(t){return nt(t[Bg])}function kA(t){return Symbol.asyncIterator&&nt(t?.[Symbol.asyncIterator])}function DA(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const TA=function eY(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function xA(t){return nt(t?.[TA])}function EA(t){return function bA(t,i,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(t,i||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function a(g){return function(m){return Promise.resolve(m).then(g,u)}}),r[Symbol.asyncIterator]=function(){return this},r;function s(g,m){n[g]&&(r[g]=function(b){return new Promise(function(C,w){o.push([g,b,C,w])>1||l(g,b)})},m&&(r[g]=m(r[g])))}function l(g,m){try{!function c(g){g.value instanceof qo?Promise.resolve(g.value.v).then(d,u):p(o[0][2],g)}(n[g](m))}catch(b){p(o[0][3],b)}}function d(g){l("next",g)}function u(g){l("throw",g)}function p(g,m){g(m),o.shift(),o.length&&l(o[0][0],o[0][1])}}(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:n,done:r}=yield qo(e.read());if(r)return yield qo(void 0);yield yield qo(n)}}finally{e.releaseLock()}})}function MA(t){return nt(t?.getReader)}function un(t){if(t instanceof st)return t;if(null!=t){if(CA(t))return function tY(t){return new st(i=>{const e=t[Bg]();if(nt(e.subscribe))return e.subscribe(i);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Yb(t))return function iY(t){return new st(i=>{for(let e=0;e<t.length&&!i.closed;e++)i.next(t[e]);i.complete()})}(t);if(wA(t))return function nY(t){return new st(i=>{t.then(e=>{i.closed||(i.next(e),i.complete())},e=>i.error(e)).then(null,MC)})}(t);if(kA(t))return IA(t);if(xA(t))return function rY(t){return new st(i=>{for(const e of t)if(i.next(e),i.closed)return;i.complete()})}(t);if(MA(t))return function oY(t){return IA(EA(t))}(t)}throw DA(t)}function IA(t){return new st(i=>{(function aY(t,i){var e,n,r,o;return function yA(t,i,e,n){return new(e||(e=Promise))(function(o,a){function s(d){try{c(n.next(d))}catch(u){a(u)}}function l(d){try{c(n.throw(d))}catch(u){a(u)}}function c(d){d.done?o(d.value):function r(o){return o instanceof e?o:new e(function(a){a(o)})}(d.value).then(s,l)}c((n=n.apply(t,i||[])).next())})}(this,void 0,void 0,function*(){try{for(e=SA(t);!(n=yield e.next()).done;)if(i.next(n.value),i.closed)return}catch(a){r={error:a}}finally{try{n&&!n.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}i.complete()})})(t,i).catch(e=>i.error(e))})}function _r(t,i,e,n=0,r=!1){const o=i.schedule(function(){e(),r?t.add(this.schedule(null,n)):this.unsubscribe()},n);if(t.add(o),!r)return o}function Ui(t,i,e=1/0){return nt(i)?Ui((n,r)=>me((o,a)=>i(n,o,r,a))(un(t(n,r))),e):("number"==typeof i&&(e=i),Bt((n,r)=>function sY(t,i,e,n,r,o,a,s){const l=[];let c=0,d=0,u=!1;const p=()=>{u&&!l.length&&!c&&i.complete()},g=b=>c<n?m(b):l.push(b),m=b=>{o&&i.next(b),c++;let C=!1;un(e(b,d++)).subscribe(wt(i,w=>{r?.(w),o?g(w):i.next(w)},()=>{C=!0},void 0,()=>{if(C)try{for(c--;l.length&&c<n;){const w=l.shift();a?_r(i,a,()=>m(w)):m(w)}p()}catch(w){i.error(w)}}))};return t.subscribe(wt(i,g,()=>{u=!0,p()})),()=>{s?.()}}(n,r,t,e)))}function _l(t=1/0){return Ui(wo,t)}const qn=new st(t=>t.complete());function AA(t){return t&&nt(t.schedule)}function Kb(t){return t[t.length-1]}function PA(t){return nt(Kb(t))?t.pop():void 0}function bl(t){return AA(Kb(t))?t.pop():void 0}function RA(t,i=0){return Bt((e,n)=>{e.subscribe(wt(n,r=>_r(n,t,()=>n.next(r),i),()=>_r(n,t,()=>n.complete(),i),r=>_r(n,t,()=>n.error(r),i)))})}function FA(t,i=0){return Bt((e,n)=>{n.add(t.schedule(()=>e.subscribe(n),i))})}function OA(t,i){if(!t)throw new Error("Iterable cannot be null");return new st(e=>{_r(e,i,()=>{const n=t[Symbol.asyncIterator]();_r(e,i,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function mi(t,i){return i?function pY(t,i){if(null!=t){if(CA(t))return function dY(t,i){return un(t).pipe(FA(i),RA(i))}(t,i);if(Yb(t))return function hY(t,i){return new st(e=>{let n=0;return i.schedule(function(){n===t.length?e.complete():(e.next(t[n++]),e.closed||this.schedule())})})}(t,i);if(wA(t))return function uY(t,i){return un(t).pipe(FA(i),RA(i))}(t,i);if(kA(t))return OA(t,i);if(xA(t))return function fY(t,i){return new st(e=>{let n;return _r(e,i,()=>{n=t[TA](),_r(e,i,()=>{let r,o;try{({value:r,done:o}=n.next())}catch(a){return void e.error(a)}o?e.complete():e.next(r)},0,!0)}),()=>nt(n?.return)&&n.return()})}(t,i);if(MA(t))return function mY(t,i){return OA(EA(t),i)}(t,i)}throw DA(t)}(t,i):un(t)}function Ti(...t){const i=bl(t),e=function cY(t,i){return"number"==typeof Kb(t)?t.pop():i}(t,1/0),n=t;return n.length?1===n.length?un(n[0]):_l(e)(mi(n,i)):qn}const{isArray:gY}=Array;function Qb(t){return me(i=>function vY(t,i){return gY(i)?t(...i):t(i)}(t,i))}const yY=["addListener","removeListener"],_Y=["addEventListener","removeEventListener"],bY=["on","off"];function Zi(t,i,e,n){if(nt(e)&&(n=e,e=void 0),n)return Zi(t,i,e).pipe(Qb(n));const[r,o]=function CY(t){return nt(t.addEventListener)&&nt(t.removeEventListener)}(t)?_Y.map(a=>s=>t[a](i,s,e)):function SY(t){return nt(t.addListener)&&nt(t.removeListener)}(t)?yY.map(LA(t,i)):function wY(t){return nt(t.on)&&nt(t.off)}(t)?bY.map(LA(t,i)):[];if(!r&&Yb(t))return Ui(a=>Zi(a,i,e))(un(t));if(!r)throw new TypeError("Invalid event target");return new st(a=>{const s=(...l)=>a.next(1<l.length?l:l[0]);return r(s),()=>o(s)})}function LA(t,i){return e=>n=>t[e](i,n)}class kY extends je{constructor(i,e){super()}schedule(i,e=0){return this}}const xm={setInterval(t,i,...e){const{delegate:n}=xm;return n?.setInterval?n.setInterval(t,i,...e):setInterval(t,i,...e)},clearInterval(t){const{delegate:i}=xm;return(i?.clearInterval||clearInterval)(t)},delegate:void 0};class Zb extends kY{constructor(i,e){super(i,e),this.scheduler=i,this.work=e,this.pending=!1}schedule(i,e=0){if(this.closed)return this;this.state=i;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(i,e,n=0){return xm.setInterval(i.flush.bind(i,this),n)}recycleAsyncId(i,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;xm.clearInterval(e)}execute(i,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(i,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(i,e){let r,n=!1;try{this.work(i)}catch(o){n=!0,r=o||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:i,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,dc(n,this),null!=i&&(this.id=this.recycleAsyncId(e,i,null)),this.delay=null,super.unsubscribe()}}}const Xb={now:()=>(Xb.delegate||Date).now(),delegate:void 0};class Pd{constructor(i,e=Pd.now){this.schedulerActionCtor=i,this.now=e}schedule(i,e=0,n){return new this.schedulerActionCtor(this,i).schedule(n,e)}}Pd.now=Xb.now;class Jb extends Pd{constructor(i,e=Pd.now){super(i,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(i){const{actions:e}=this;if(this._active)return void e.push(i);let n;this._active=!0;do{if(n=i.execute(i.state,i.delay))break}while(i=e.shift());if(this._active=!1,n){for(;i=e.shift();)i.unsubscribe();throw n}}}const Sl=new Jb(Zb),DY=Sl;function wl(t,i=Sl){return Bt((e,n)=>{let r=null,o=null,a=null;const s=()=>{if(r){r.unsubscribe(),r=null;const c=o;o=null,n.next(c)}};function l(){const c=a+t,d=i.now();if(d<c)return r=this.schedule(void 0,c-d),void n.add(r);s()}e.subscribe(wt(n,c=>{o=c,a=i.now(),r||(r=i.schedule(l,t),n.add(r))},()=>{s(),n.complete()},void 0,()=>{o=r=null}))})}var ke=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(ke||{});const fo="*";function Em(t,i){return{type:ke.Trigger,name:t,definitions:i,options:{}}}function Rd(t,i=null){return{type:ke.Animate,styles:i,timings:t}}function jn(t){return{type:ke.Style,styles:t,offset:null}}function e0(t,i,e){return{type:ke.State,name:t,styles:i,options:e}}function NA(t){return{type:ke.Keyframes,steps:t}}function Fd(t,i,e=null){return{type:ke.Transition,expr:t,animation:i,options:e}}class Od{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(i=0,e=0){this.totalTime=i+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}onStart(i){this._originalOnStartFns.push(i),this._onStartFns.push(i)}onDone(i){this._originalOnDoneFns.push(i),this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(i=>i()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(i){this._position=this.totalTime?i*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(i){const e="start"==i?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class BA{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(i){this.players=i;let e=0,n=0,r=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++e==o&&this._onFinish()}),a.onDestroy(()=>{++n==o&&this._onDestroy()}),a.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((a,s)=>Math.max(a,s.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this.players.forEach(i=>i.init())}onStart(i){this._onStartFns.push(i)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(i=>i()),this._onStartFns=[])}onDone(i){this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(i=>i.play())}pause(){this.players.forEach(i=>i.pause())}restart(){this.players.forEach(i=>i.restart())}finish(){this._onFinish(),this.players.forEach(i=>i.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(i=>i.destroy()),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}reset(){this.players.forEach(i=>i.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(i){const e=i*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){const i=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=i?i.getPosition():0}beforeDestroy(){this.players.forEach(i=>{i.beforeDestroy&&i.beforeDestroy()})}triggerCallback(i){const e="start"==i?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}function Nr(t,...i){return i.length?i.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}let o0;try{o0=typeof Intl<"u"&&Intl.v8BreakIterator}catch{o0=!1}let Nd,xi=(()=>{class t{_platformId=_(Wh);isBrowser=this._platformId?function QW(t){return t===aA}(this._platformId):"object"==typeof document&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!(!window.chrome&&!o0)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function a0(t){return function zY(){if(null==Nd&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Nd=!0}))}finally{Nd=Nd||!1}return Nd}()?t:!!t.capture}var Br=function(t){return t[t.NORMAL=0]="NORMAL",t[t.NEGATED=1]="NEGATED",t[t.INVERTED=2]="INVERTED",t}(Br||{});let Am,Oa,s0;function UA(){if(null==Oa){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Oa=!1,Oa;if("scrollBehavior"in document.documentElement.style)Oa=!0;else{const t=Element.prototype.scrollTo;Oa=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return Oa}function Bd(){if("object"!=typeof document||!document)return Br.NORMAL;if(null==Am){const t=document.createElement("div"),i=t.style;t.dir="rtl",i.width="1px",i.overflow="auto",i.visibility="hidden",i.pointerEvents="none",i.position="absolute";const e=document.createElement("div"),n=e.style;n.width="2px",n.height="1px",t.appendChild(e),document.body.appendChild(t),Am=Br.NORMAL,0===t.scrollLeft&&(t.scrollLeft=1,Am=0===t.scrollLeft?Br.NEGATED:Br.INVERTED),t.remove()}return Am}function Pm(t){if(function $Y(){if(null==s0){const t=typeof document<"u"?document.head:null;s0=!(!t||!t.createShadowRoot&&!t.attachShadow)}return s0}()){const i=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&i instanceof ShadowRoot)return i}return null}function l0(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const i=t.shadowRoot.activeElement;if(i===t)break;t=i}return t}function xn(t){return t.composedPath?t.composedPath()[0]:t.target}function zA(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function zi(t,i,e,n,r){const o=parseInt(eI.major),a=parseInt(eI.minor);return o>19||19===o&&a>0||0===o&&0===a?t.listen(i,e,n,r):(i.addEventListener(e,n,r),()=>{i.removeEventListener(e,n,r)})}function ue(...t){return mi(t,bl(t))}function ii(t,i,e){const n=nt(t)||i||e?{next:t,error:i,complete:e}:t;return n?Bt((r,o)=>{var a;null===(a=n.subscribe)||void 0===a||a.call(n);let s=!0;r.subscribe(wt(o,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),o.next(l)},()=>{var l;s=!1,null===(l=n.complete)||void 0===l||l.call(n),o.complete()},l=>{var c;s=!1,null===(c=n.error)||void 0===c||c.call(n,l),o.error(l)},()=>{var l,c;s&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):wo}function Qe(t,i){return Bt((e,n)=>{let r=0;e.subscribe(wt(n,o=>t.call(i,o,r++)&&n.next(o)))})}function pi(t){return t<=0?()=>qn:Bt((i,e)=>{let n=0;i.subscribe(wt(e,r=>{++n<=t&&(e.next(r),t<=n&&e.complete())}))})}function c0(t){return Qe((i,e)=>t<=e)}function $A(t,i=wo){return t=t??WY,Bt((e,n)=>{let r,o=!0;e.subscribe(wt(n,a=>{const s=i(a);(o||!t(r,s))&&(o=!1,r=s,n.next(a))}))})}function WY(t,i){return t===i}function at(t){return Bt((i,e)=>{un(t).subscribe(wt(e,()=>e.complete(),rh)),!e.closed&&i.subscribe(e)})}function La(t){return null!=t&&"false"!=`${t}`}function Hd(t,i=0){return function GY(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):2===arguments.length?i:0}function Vd(t){return Array.isArray(t)?t:[t]}function gi(t){return null==t?"":"string"==typeof t?t:`${t}px`}function En(t){return t instanceof xe?t.nativeElement:t}const{isArray:YY}=Array,{getPrototypeOf:KY,prototype:QY,keys:ZY}=Object;function WA(t){if(1===t.length){const i=t[0];if(YY(i))return{args:i,keys:null};if(function XY(t){return t&&"object"==typeof t&&KY(t)===QY}(i)){const e=ZY(i);return{args:e.map(n=>i[n]),keys:e}}}return{args:t,keys:null}}function GA(t,i){return t.reduce((e,n,r)=>(e[n]=i[r],e),{})}function qd(...t){const i=bl(t),e=PA(t),{args:n,keys:r}=WA(t);if(0===n.length)return mi([],i);const o=new st(function JY(t,i,e=wo){return n=>{YA(i,()=>{const{length:r}=t,o=new Array(r);let a=r,s=r;for(let l=0;l<r;l++)YA(i,()=>{const c=mi(t[l],i);let d=!1;c.subscribe(wt(n,u=>{o[l]=u,d||(d=!0,s--),s||n.next(e(o.slice()))},()=>{--a||n.complete()}))},n)},n)}}(n,i,r?a=>GA(r,a):wo));return e?o.pipe(Qb(e)):o}function YA(t,i,e){t?_r(e,t,i):i()}function Fm(...t){return function e9(){return _l(1)}()(mi(t,bl(t)))}function $i(...t){const i=bl(t);return Bt((e,n)=>{(i?Fm(t,e,i):Fm(t,e)).subscribe(n)})}const KA=new Set;let Na,t9=(()=>{class t{_platform=_(xi);_nonce=_(Qv,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):n9}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function i9(t,i){if(!KA.has(t))try{Na||(Na=document.createElement("style"),i&&Na.setAttribute("nonce",i),Na.setAttribute("type","text/css"),document.head.appendChild(Na)),Na.sheet&&(Na.sheet.insertRule(`@media ${t} {body{ }}`,0),KA.add(t))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function n9(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let QA=(()=>{class t{_mediaMatcher=_(t9);_zone=_(ce);_queries=new Map;_destroySubject=new Y;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return ZA(Vd(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let o=qd(ZA(Vd(e)).map(a=>this._registerQuery(a).observable));return o=Fm(o.pipe(pi(1)),o.pipe(c0(1),wl(0))),o.pipe(me(a=>{const s={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:c})=>{s.matches=s.matches||l,s.breakpoints[c]=l}),s}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const n=this._mediaMatcher.matchMedia(e),o={observable:new st(a=>{const s=l=>this._zone.run(()=>a.next(l));return n.addListener(s),()=>{n.removeListener(s)}}).pipe($i(n),me(({matches:a})=>({query:e,matches:a})),at(this._destroySubject)),mql:n};return this._queries.set(e,o),o}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ZA(t){return t.map(i=>i.split(",")).reduce((i,e)=>i.concat(e)).map(i=>i.trim())}const Om=new WeakMap;let jo=(()=>{class t{_appRef;_injector=_(we);_environmentInjector=_(Fi);load(e){const n=this._appRef=this._appRef||this._injector.get(an);let r=Om.get(n);r||(r={loaders:new Set,refs:[]},Om.set(n,r),n.onDestroy(()=>{Om.get(n)?.refs.forEach(o=>o.destroy()),Om.delete(n)})),r.loaders.has(e)||(r.loaders.add(e),r.refs.push(HI(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),XA=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(n,r){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],encapsulation:2,changeDetection:0})}return t})(),eP=(()=>{class t{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),a9=(()=>{class t{_mutationObserverFactory=_(eP);_observedElements=new Map;_ngZone=_(ce);constructor(){}ngOnDestroy(){this._observedElements.forEach((e,n)=>this._cleanupObserver(n))}observe(e){const n=En(e);return new st(r=>{const a=this._observeElement(n).pipe(me(s=>s.filter(l=>!function o9(t){if("characterData"===t.type&&t.target instanceof Comment)return!0;if("childList"===t.type){for(let i=0;i<t.addedNodes.length;i++)if(!(t.addedNodes[i]instanceof Comment))return!1;for(let i=0;i<t.removedNodes.length;i++)if(!(t.removedNodes[i]instanceof Comment))return!1;return!0}return!1}(l))),Qe(s=>!!s.length)).subscribe(s=>{this._ngZone.run(()=>{r.next(s)})});return()=>{a.unsubscribe(),this._unobserveElement(n)}})}_observeElement(e){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const n=new Y,r=this._mutationObserverFactory.create(o=>n.next(o));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:n,count:1})}return this._observedElements.get(e).stream})}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:n,stream:r}=this._observedElements.get(e);n&&n.disconnect(),r.complete(),this._observedElements.delete(e)}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),s9=(()=>{class t{_contentObserver=_(a9);_elementRef=_(xe);event=new le;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._disabled?this._unsubscribe():this._subscribe()}_disabled=!1;get debounce(){return this._debounce}set debounce(e){this._debounce=Hd(e),this._subscribe()}_debounce;_currentSubscription=null;constructor(){}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?e.pipe(wl(this.debounce)):e).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",Oe],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return t})(),tP=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({providers:[eP]})}return t})();function nP(t,i,e){const n=rP(t,i);e=e.trim();const r=n.filter(o=>o!==e);r.length?t.setAttribute(i,r.join(" ")):t.removeAttribute(i)}function rP(t,i){return t.getAttribute(i)?.match(/\S+/g)??[]}class oP{_letterKeyStream=new Y;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new Y;selectedItem=this._selectedItem;constructor(i,e){const n="number"==typeof e?.debounceInterval?e.debounceInterval:200;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(i),this._setupKeyHandler(n)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(i){this._selectedItemIndex=i}setItems(i){this._items=i}handleKey(i){const e=i.keyCode;i.key&&1===i.key.length?this._letterKeyStream.next(i.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(i){this._letterKeyStream.pipe(ii(e=>this._pressedLetters.push(e)),wl(i),Qe(()=>this._pressedLetters.length>0),me(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let n=1;n<this._items.length+1;n++){const o=this._items[(this._selectedItemIndex+n)%this._items.length];if(!this._skipPredicateFn?.(o)&&0===o.getLabel?.().toLocaleUpperCase().trim().indexOf(e)){this._selectedItem.next(o);break}}this._pressedLetters=[]})}}class aP{_items;_activeItemIndex=-1;_activeItem=$(null);_wrap=!1;_typeaheadSubscription=je.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=i=>i.disabled;constructor(i,e){this._items=i,i instanceof Is?this._itemChangesSubscription=i.changes.subscribe(n=>this._itemsChanged(n.toArray())):xc(i)&&(this._effectRef=function Sb(t,i){!i?.injector&&ys();const e=i?.injector??_(we);let r,n=!0!==i?.manualCleanup?e.get(io):null;const o=e.get(Zh,null,{optional:!0}),a=e.get(no);return null===o||i?.forceRoot?r=function b6(t,i,e){const n=Object.create(v6);return n.fn=t,n.scheduler=i,n.notifier=e,n.zone=typeof Zone<"u"?Zone.current:null,n.scheduler.schedule(n),n.notifier.notify(12),n}(t,e.get(O_),a):(r=function _6(t,i,e){const n=Object.create(y6);return n.view=t,n.zone=typeof Zone<"u"?Zone.current:null,n.notifier=i,n.fn=e,t[23]??=new Set,t[23].add(n),n.consumerMarkedDirty(n),n}(o.view,a,t),n instanceof a1&&n._lView===o.view&&(n=null)),r.injector=e,null!==n&&(r.onDestroyFn=n.onDestroy(()=>r.destroy())),new g6(r)}(()=>this._itemsChanged(i()),{injector:e}))}tabOut=new Y;change=new Y;skipPredicate(i){return this._skipPredicateFn=i,this}withWrap(i=!0){return this._wrap=i,this}withVerticalOrientation(i=!0){return this._vertical=i,this}withHorizontalOrientation(i){return this._horizontal=i,this}withAllowedModifierKeys(i){return this._allowedModifierKeys=i,this}withTypeAhead(i=200){this._typeaheadSubscription.unsubscribe();const e=this._getItemsArray();return this._typeahead=new oP(e,{debounceInterval:"number"==typeof i?i:void 0,skipPredicate:n=>this._skipPredicateFn(n)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(n=>{this.setActiveItem(n)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(i=!0){return this._homeAndEnd=i,this}withPageUpDown(i=!0,e=10){return this._pageUpAndDown={enabled:i,delta:e},this}setActiveItem(i){const e=this._activeItem();this.updateActiveItem(i),this._activeItem()!==e&&this.change.next(this._activeItemIndex)}onKeydown(i){const e=i.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!i[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const o=this._activeItemIndex+this._pageUpAndDown.delta,a=this._getItemsArray().length;this._setActiveItemByIndex(o<a?o:a-1,-1);break}return;default:return void((r||Nr(i,"shiftKey"))&&this._typeahead?.handleKey(i))}this._typeahead?.reset(),i.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(i){const e=this._getItemsArray(),n="number"==typeof i?i:e.indexOf(i);this._activeItem.set(e[n]??null),this._activeItemIndex=n,this._typeahead?.setCurrentSelectedItemIndex(n)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(i){this._wrap?this._setActiveInWrapMode(i):this._setActiveInDefaultMode(i)}_setActiveInWrapMode(i){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const r=(this._activeItemIndex+i*n+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(i){this._setActiveItemByIndex(this._activeItemIndex+i,i)}_setActiveItemByIndex(i,e){const n=this._getItemsArray();if(n[i]){for(;this._skipPredicateFn(n[i]);)if(!n[i+=e])return;this.setActiveItem(i)}}_getItemsArray(){return xc(this._items)?this._items():this._items instanceof Is?this._items.toArray():this._items}_itemsChanged(i){this._typeahead?.setItems(i);const e=this._activeItem();if(e){const n=i.indexOf(e);n>-1&&n!==this._activeItemIndex&&(this._activeItemIndex=n,this._typeahead?.setCurrentSelectedItemIndex(n))}}}class h9 extends aP{setActiveItem(i){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(i),this.activeItem&&this.activeItem.setActiveStyles()}}class f9 extends aP{_origin="program";setFocusOrigin(i){return this._origin=i,this}setActiveItem(i){super.setActiveItem(i),this.activeItem&&this.activeItem.focus(this._origin)}}let d0=(()=>{class t{_platform=_(xi);constructor(){}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function y9(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const n=function v9(t){try{return t.frameElement}catch{return null}}(function T9(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(e));if(n&&(-1===dP(n)||!this.isVisible(n)))return!1;let r=e.nodeName.toLowerCase(),o=dP(e);return e.hasAttribute("contenteditable")?-1!==o:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function k9(t){let i=t.nodeName.toLowerCase(),e="input"===i&&t.type;return"text"===e||"password"===e||"select"===i||"textarea"===i}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==o:"video"===r?-1!==o&&(null!==o||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,n){return function D9(t){return!function b9(t){return function w9(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function _9(t){let i=t.nodeName.toLowerCase();return"input"===i||"select"===i||"button"===i||"textarea"===i}(t)||function S9(t){return function C9(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||cP(t))}(e)&&!this.isDisabled(e)&&(n?.ignoreVisibility||this.isVisible(e))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function cP(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let i=t.getAttribute("tabindex");return!(!i||isNaN(parseInt(i,10)))}function dP(t){if(!cP(t))return null;const i=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(i)?-1:i}class uP{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(i){this._enabled=i,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(i,this._startAnchor),this._toggleAnchorTabIndex(i,this._endAnchor))}_enabled=!0;constructor(i,e,n,r,o=!1,a){this._element=i,this._checker=e,this._ngZone=n,this._document=r,this._injector=a,o||this.attachAnchors()}destroy(){const i=this._startAnchor,e=this._endAnchor;i&&(i.removeEventListener("focus",this.startAnchorListener),i.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(i){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(i)))})}focusFirstTabbableElementWhenReady(i){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(i)))})}focusLastTabbableElementWhenReady(i){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(i)))})}_getRegionBoundary(i){const e=this._element.querySelectorAll(`[cdk-focus-region-${i}], [cdkFocusRegion${i}], [cdk-focus-${i}]`);return"start"==i?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(i){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return n?.focus(i),!!n}return e.focus(i),!0}return this.focusFirstTabbableElement(i)}focusFirstTabbableElement(i){const e=this._getRegionBoundary("start");return e&&e.focus(i),!!e}focusLastTabbableElement(i){const e=this._getRegionBoundary("end");return e&&e.focus(i),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(i){if(this._checker.isFocusable(i)&&this._checker.isTabbable(i))return i;const e=i.children;for(let n=0;n<e.length;n++){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(r)return r}return null}_getLastTabbableElement(i){if(this._checker.isFocusable(i)&&this._checker.isTabbable(i))return i;const e=i.children;for(let n=e.length-1;n>=0;n--){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(r)return r}return null}_createAnchor(){const i=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,i),i.classList.add("cdk-visually-hidden"),i.classList.add("cdk-focus-trap-anchor"),i.setAttribute("aria-hidden","true"),i}_toggleAnchorTabIndex(i,e){i?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(i){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(i,this._startAnchor),this._toggleAnchorTabIndex(i,this._endAnchor))}_executeOnStable(i){this._injector?Xn(i,{injector:this._injector}):setTimeout(i)}}let hP=(()=>{class t{_checker=_(d0);_ngZone=_(ce);_document=_(Ge);_injector=_(we);constructor(){_(jo).load(XA)}create(e,n=!1){return new uP(e,this._checker,this._ngZone,this._document,n,this._injector)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function u0(t){return 0===t.buttons||0===t.detail}function h0(t){const i=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!i||-1!==i.identifier||null!=i.radiusX&&1!==i.radiusX||null!=i.radiusY&&1!==i.radiusY)}const x9=new B("cdk-input-modality-detector-options"),E9={ignoreKeys:[18,17,224,91,16]},f0={passive:!0,capture:!0};let M9=(()=>{class t{_platform=_(xi);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Yi(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(n=>n===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=xn(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<650||(this._modality.next(u0(e)?"keyboard":"mouse"),this._mostRecentTarget=xn(e))};_onTouchstart=e=>{h0(e)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=xn(e))};constructor(){const e=_(ce),n=_(Ge),r=_(x9,{optional:!0});if(this._options={...E9,...r},this.modalityDetected=this._modality.pipe(c0(1)),this.modalityChanged=this.modalityDetected.pipe($A()),this._platform.isBrowser){const o=_(Hn).createRenderer(null,null);this._listenerCleanups=e.runOutsideAngular(()=>[zi(o,n,"keydown",this._onKeydown,f0),zi(o,n,"mousedown",this._onMousedown,f0),zi(o,n,"touchstart",this._onTouchstart,f0)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(e=>e())}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const I9=new B("liveAnnouncerElement",{providedIn:"root",factory:function A9(){return null}}),P9=new B("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let R9=0,mP=(()=>{class t{_ngZone=_(ce);_defaultOptions=_(P9,{optional:!0});_liveElement;_document=_(Ge);_previousTimeout;_currentPromise;_currentResolve;constructor(){const e=_(I9,{optional:!0});this._liveElement=e||this._createLiveElement()}announce(e,...n){const r=this._defaultOptions;let o,a;return 1===n.length&&"number"==typeof n[0]?a=n[0]:[o,a]=n,this.clear(),clearTimeout(this._previousTimeout),o||(o=r&&r.politeness?r.politeness:"polite"),null==a&&r&&(a=r.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(s=>this._currentResolve=s)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof a&&(this._previousTimeout=setTimeout(()=>this.clear(),a)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",n=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let o=0;o<n.length;o++)n[o].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id="cdk-live-announcer-"+R9++,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(e){const n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){const o=n[r],a=o.getAttribute("aria-owns");a?-1===a.indexOf(e)&&o.setAttribute("aria-owns",a+" "+e):o.setAttribute("aria-owns",e)}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Lm=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(Lm||{});const F9=new B("cdk-focus-monitor-default-options"),Nm=a0({passive:!0,capture:!0});let Bm=(()=>{class t{_ngZone=_(ce);_platform=_(xi);_inputModalityDetector=_(M9);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=_(Ge,{optional:!0});_stopInputModalityDetector=new Y;constructor(){const e=_(F9,{optional:!0});this._detectionMode=e?.detectionMode||Lm.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{for(let r=xn(e);r;r=r.parentElement)"focus"===e.type?this._onFocus(e,r):this._onBlur(e,r)};monitor(e,n=!1){const r=En(e);if(!this._platform.isBrowser||1!==r.nodeType)return ue();const o=Pm(r)||this._getDocument(),a=this._elementInfo.get(r);if(a)return n&&(a.checkChildren=!0),a.subject;const s={checkChildren:n,subject:new Y,rootNode:o};return this._elementInfo.set(r,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(e){const n=En(e),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(e,n,r){const o=En(e);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([s,l])=>this._originChanged(s,n,l)):(this._setOrigin(n),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===Lm.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused","touch"===n),e.classList.toggle("cdk-keyboard-focused","keyboard"===n),e.classList.toggle("cdk-mouse-focused","mouse"===n),e.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&n,this._detectionMode===Lm.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,n){const r=this._elementInfo.get(n),o=xn(e);!r||!r.checkChildren&&n!==o||this._originChanged(n,this._getFocusOrigin(o),r)}_onBlur(e,n){const r=this._elementInfo.get(n);!r||r.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(e,n){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const n=e.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,Nm),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,Nm)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(at(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){const n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Nm),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Nm),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,r){this._setClasses(e,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){const n=[];return this._elementInfo.forEach((r,o)=>{(o===e||r.checkChildren&&o.contains(e))&&n.push([o,r])}),n}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!n||n===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const o=e.labels;if(o)for(let a=0;a<o.length;a++)if(o[a].contains(n))return!0;return!1}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),O9=(()=>{class t{_elementRef=_(xe);_focusMonitor=_(Bm);_monitorSubscription;_focusOrigin=null;cdkFocusChange=new le;constructor(){}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){const e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,1===e.nodeType&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(n=>{this._focusOrigin=n,this.cdkFocusChange.emit(n)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]})}return t})();var Ba=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(Ba||{});const pP="cdk-high-contrast-black-on-white",gP="cdk-high-contrast-white-on-black",m0="cdk-high-contrast-active";let vP=(()=>{class t{_platform=_(xi);_hasCheckedHighContrastMode;_document=_(Ge);_breakpointSubscription;constructor(){this._breakpointSubscription=_(QA).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Ba.NONE;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(e):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Ba.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Ba.BLACK_ON_WHITE}return Ba.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(m0,pP,gP),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();n===Ba.BLACK_ON_WHITE?e.add(m0,pP):n===Ba.WHITE_ON_BLACK&&e.add(m0,gP)}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),L9=(()=>{class t{constructor(){_(vP)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({imports:[tP]})}return t})();const p0={};let mo=(()=>{class t{_appId=_(Eo);getId(e){return"ng"!==this._appId&&(e+=this._appId),p0.hasOwnProperty(e)||(p0[e]=0),`${e}${p0[e]++}`}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const N9=new B("cdk-dir-doc",{providedIn:"root",factory:function B9(){return _(Ge)}}),H9=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let br=(()=>{class t{value="ltr";change=new le;constructor(){const e=_(N9,{optional:!0});e&&(this.value=function V9(t){const i=t?.toLowerCase()||"";return"auto"===i&&typeof navigator<"u"&&navigator?.language?H9.test(navigator.language)?"rtl":"ltr":"rtl"===i?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),jd=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({})}return t})();const q9=["text"],j9=[[["mat-icon"]],"*"],U9=["mat-icon","*"];function z9(t,i){if(1&t&&L(0,"mat-pseudo-checkbox",1),2&t){const e=S();z("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function $9(t,i){1&t&&L(0,"mat-pseudo-checkbox",3),2&t&&z("disabled",S().disabled)}function W9(t,i){if(1&t&&(h(0,"span",4),y(1),f()),2&t){const e=S();v(),j("(",e.group.label,")")}}let vi=(()=>{class t{constructor(){_(vP)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({imports:[jd,jd]})}return t})();class G9{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(i,e,n,r,o){this._defaultMatcher=i,this.ngControl=e,this._parentFormGroup=n,this._parentForm=r,this._stateChanges=o}updateErrorState(){const i=this.errorState,e=this._parentFormGroup||this._parentForm,n=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,o=n?.isErrorState(r,e)??!1;o!==i&&(this.errorState=o,this._stateChanges.next())}}let J9=(()=>{class t{isErrorState(e,n){return!!(e&&e.invalid&&(e.touched||n&&n.submitted))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),g0=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["structural-styles"]],decls:0,vars:0,template:function(n,r){},styles:['.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}'],encapsulation:2,changeDetection:0})}return t})();var nr=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(nr||{});class e7{_renderer;element;config;_animationForciblyDisabledThroughCss;state=nr.HIDDEN;constructor(i,e,n,r=!1){this._renderer=i,this.element=e,this.config=n,this._animationForciblyDisabledThroughCss=r}fadeOut(){this._renderer.fadeOutRipple(this)}}const yP=a0({passive:!0,capture:!0});class t7{_events=new Map;addHandler(i,e,n,r){const o=this._events.get(e);if(o){const a=o.get(n);a?a.add(r):o.set(n,new Set([r]))}else this._events.set(e,new Map([[n,new Set([r])]])),i.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,yP)})}removeHandler(i,e,n){const r=this._events.get(i);if(!r)return;const o=r.get(e);o&&(o.delete(n),0===o.size&&r.delete(e),0===r.size&&(this._events.delete(i),document.removeEventListener(i,this._delegateEventHandler,yP)))}_delegateEventHandler=i=>{const e=xn(i);e&&this._events.get(i.type)?.forEach((n,r)=>{(r===e||r.contains(e))&&n.forEach(o=>o.handleEvent(i))})}}const Hm={enterDuration:225,exitDuration:150},_P=a0({passive:!0,capture:!0}),bP=["mousedown","touchstart"],SP=["mouseup","mouseleave","touchend","touchcancel"];let n7=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(n,r){},styles:[".mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}"],encapsulation:2,changeDetection:0})}return t})();class zd{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new t7;constructor(i,e,n,r,o){this._target=i,this._ngZone=e,this._platform=r,r.isBrowser&&(this._containerElement=En(n)),o&&o.get(jo).load(n7)}fadeInRipple(i,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...Hm,...n.animation};n.centered&&(i=r.left+r.width/2,e=r.top+r.height/2);const a=n.radius||function r7(t,i,e){const n=Math.max(Math.abs(t-e.left),Math.abs(t-e.right)),r=Math.max(Math.abs(i-e.top),Math.abs(i-e.bottom));return Math.sqrt(n*n+r*r)}(i,e,r),s=i-r.left,l=e-r.top,c=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=s-a+"px",d.style.top=l-a+"px",d.style.height=2*a+"px",d.style.width=2*a+"px",null!=n.color&&(d.style.backgroundColor=n.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d);const u=window.getComputedStyle(d),g=u.transitionDuration,m="none"===u.transitionProperty||"0s"===g||"0s, 0s"===g||0===r.width&&0===r.height,b=new e7(this,d,n,m);d.style.transform="scale3d(1, 1, 1)",b.state=nr.FADING_IN,n.persistent||(this._mostRecentTransientRipple=b);let C=null;return!m&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const w=()=>{C&&(C.fallbackTimer=null),clearTimeout(F),this._finishRippleTransition(b)},k=()=>this._destroyRipple(b),F=setTimeout(k,c+100);d.addEventListener("transitionend",w),d.addEventListener("transitioncancel",k),C={onTransitionEnd:w,onTransitionCancel:k,fallbackTimer:F}}),this._activeRipples.set(b,C),(m||!c)&&this._finishRippleTransition(b),b}fadeOutRipple(i){if(i.state===nr.FADING_OUT||i.state===nr.HIDDEN)return;const e=i.element,n={...Hm,...i.config.animation};e.style.transitionDuration=`${n.exitDuration}ms`,e.style.opacity="0",i.state=nr.FADING_OUT,(i._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(i)}fadeOutAll(){this._getActiveRipples().forEach(i=>i.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(i=>{i.config.persistent||i.fadeOut()})}setupTriggerEvents(i){const e=En(i);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,bP.forEach(n=>{zd._eventManager.addHandler(this._ngZone,n,e,this)}))}handleEvent(i){"mousedown"===i.type?this._onMousedown(i):"touchstart"===i.type?this._onTouchStart(i):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{SP.forEach(e=>{this._triggerElement.addEventListener(e,this,_P)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(i){i.state===nr.FADING_IN?this._startFadeOutTransition(i):i.state===nr.FADING_OUT&&this._destroyRipple(i)}_startFadeOutTransition(i){const e=i===this._mostRecentTransientRipple,{persistent:n}=i.config;i.state=nr.VISIBLE,!n&&(!e||!this._isPointerDown)&&i.fadeOut()}_destroyRipple(i){const e=this._activeRipples.get(i)??null;this._activeRipples.delete(i),this._activeRipples.size||(this._containerRect=null),i===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),i.state=nr.HIDDEN,null!==e&&(i.element.removeEventListener("transitionend",e.onTransitionEnd),i.element.removeEventListener("transitioncancel",e.onTransitionCancel),null!==e.fallbackTimer&&clearTimeout(e.fallbackTimer)),i.element.remove()}_onMousedown(i){const e=u0(i),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(i.clientX,i.clientY,this._target.rippleConfig))}_onTouchStart(i){if(!this._target.rippleDisabled&&!h0(i)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=i.changedTouches;if(e)for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(i=>{!i.config.persistent&&(i.state===nr.VISIBLE||i.config.terminateOnPointerUp&&i.state===nr.FADING_IN)&&i.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const i=this._triggerElement;i&&(bP.forEach(e=>zd._eventManager.removeHandler(e,i,this)),this._pointerUpEventsRegistered&&(SP.forEach(e=>i.removeEventListener(e,this,_P)),this._pointerUpEventsRegistered=!1))}}const wP=new B("mat-ripple-global-options");let v0=(()=>{class t{_elementRef=_(xe);_animationMode=_(Sn,{optional:!0});color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){const e=_(ce),n=_(xi),r=_(wP,{optional:!0}),o=_(we);this._globalOptions=r||{},this._rippleRenderer=new zd(this,e,this._elementRef,n,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,n,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,r){2&n&&ot("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return t})(),CP=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({imports:[vi,vi]})}return t})(),o7=(()=>{class t{_animationMode=_(Sn,{optional:!0});state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(n,r){2&n&&ot("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal","minimal"===r.appearance)("mat-pseudo-checkbox-full","full"===r.appearance)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(n,r){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return t})(),a7=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({imports:[vi]})}return t})();const kP=new B("MAT_OPTION_PARENT_COMPONENT"),DP=new B("MatOptgroup");class s7{source;isUserInput;constructor(i,e=!1){this.source=i,this.isUserInput=e}}let y0=(()=>{class t{_element=_(xe);_changeDetectorRef=_(ji);_parent=_(kP,{optional:!0});group=_(DP,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_disabled=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=_(mo).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=e}get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}onSelectionChange=new le;_text;_stateChanges=new Y;constructor(){const e=_(jo);e.load(g0),e.load(XA),this._signalDisableRipple=!!this._parent&&xc(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,n){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!Nr(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new s7(this,e))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["mat-option"]],viewQuery:function(n,r){if(1&n&&ti(q9,7),2&n){let o;Ye(o=Ke())&&(r._text=o.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(n,r){1&n&&x("click",function(){return r._selectViaInteraction()})("keydown",function(a){return r._handleKeydown(a)}),2&n&&(md("id",r.id),Me("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),ot("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",Oe]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],ngContentSelectors:U9,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(n,r){1&n&&(Dn(j9),H(0,z9,1,2,"mat-pseudo-checkbox",1),di(1),h(2,"span",2,0),di(4,1),f(),H(5,$9,1,1,"mat-pseudo-checkbox",3)(6,W9,2,1,"span",4),L(7,"div",5)),2&n&&(A(r.multiple?0:-1),v(5),A(r.multiple||!r.selected||r.hideSingleSelectionIndicator?-1:5),v(),A(r.group&&r.group._inert?6:-1),v(),z("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[o7,v0],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})(),TP=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({imports:[CP,vi,a7]})}return t})();const d7={capture:!0},u7=["focus","mousedown","mouseenter","touchstart"],_0="mat-ripple-loader-uninitialized",b0="mat-ripple-loader-class-name",xP="mat-ripple-loader-centered",Vm="mat-ripple-loader-disabled";let h7=(()=>{class t{_document=_(Ge);_animationMode=_(Sn,{optional:!0});_globalRippleOptions=_(wP,{optional:!0});_platform=_(xi);_ngZone=_(ce);_injector=_(we);_eventCleanups;_hosts=new Map;constructor(){const e=_(Hn).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>u7.map(n=>zi(e,this._document,n,this._onInteraction,d7)))}ngOnDestroy(){const e=this._hosts.keys();for(const n of e)this.destroyRipple(n);this._eventCleanups.forEach(n=>n())}configureRipple(e,n){e.setAttribute(_0,this._globalRippleOptions?.namespace??""),(n.className||!e.hasAttribute(b0))&&e.setAttribute(b0,n.className||""),n.centered&&e.setAttribute(xP,""),n.disabled&&e.setAttribute(Vm,"")}setDisabled(e,n){const r=this._hosts.get(e);r?(r.target.rippleDisabled=n,!n&&!r.hasSetUpEvents&&(r.hasSetUpEvents=!0,r.renderer.setupTriggerEvents(e))):n?e.setAttribute(Vm,""):e.removeAttribute(Vm)}_onInteraction=e=>{const n=xn(e);if(n instanceof HTMLElement){const r=n.closest(`[${_0}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}};_createRipple(e){if(!this._document||this._hosts.has(e))return;e.querySelector(".mat-ripple")?.remove();const n=this._document.createElement("span");n.classList.add("mat-ripple",e.getAttribute(b0)),e.append(n);const r="NoopAnimations"===this._animationMode,o=this._globalRippleOptions,a=r?0:o?.animation?.enterDuration??Hm.enterDuration,s=r?0:o?.animation?.exitDuration??Hm.exitDuration,l={rippleDisabled:r||o?.disabled||e.hasAttribute(Vm),rippleConfig:{centered:e.hasAttribute(xP),terminateOnPointerUp:o?.terminateOnPointerUp,animation:{enterDuration:a,exitDuration:s}}},c=new zd(l,this._ngZone,n,this._platform,this._injector),d=!l.rippleDisabled;d&&c.setupTriggerEvents(e),this._hosts.set(e,{target:l,renderer:c,hasSetUpEvents:d}),e.removeAttribute(_0)}destroyRipple(e){const n=this._hosts.get(e);n&&(n.renderer._removeTriggerEvents(),this._hosts.delete(e))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $d(t,i){const e=nt(t)?t:()=>t,n=r=>r.error(e());return new st(i?r=>i.schedule(n,0,r):n)}function EP(...t){const i=PA(t),{args:e,keys:n}=WA(t),r=new st(o=>{const{length:a}=e;if(!a)return void o.complete();const s=new Array(a);let l=a,c=a;for(let d=0;d<a;d++){let u=!1;un(e[d]).subscribe(wt(o,p=>{u||(u=!0,c--),s[d]=p},()=>l--,void 0,()=>{(!l||!u)&&(c||o.next(n?GA(n,s):s),o.complete())}))}});return i?r.pipe(Qb(i)):r}function Ha(t){return Bt((i,e)=>{let o,n=null,r=!1;n=i.subscribe(wt(e,void 0,void 0,a=>{o=un(t(a,Ha(t)(i))),n?(n.unsubscribe(),n=null,o.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,o.subscribe(e))})}function qm(t){return Bt((i,e)=>{try{i.subscribe(e)}finally{e.add(t)}})}function MP(t={}){const{connector:i=()=>new Y,resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=t;return o=>{let a=null,s=null,l=null,c=0,d=!1,u=!1;const p=()=>{s?.unsubscribe(),s=null},g=()=>{p(),a=l=null,d=u=!1},m=()=>{const b=a;g(),b?.unsubscribe()};return Bt((b,C)=>{c++,!u&&!d&&p();const w=l=l??i();C.add(()=>{c--,0===c&&!u&&!d&&(s=S0(m,r))}),w.subscribe(C),a||(a=new ah({next:k=>w.next(k),error:k=>{u=!0,p(),s=S0(g,e,k),w.error(k)},complete:()=>{d=!0,p(),s=S0(g,n),w.complete()}}),mi(b).subscribe(a))})(o)}}function S0(t,i,...e){return!0===i?(t(),null):!1===i?null:i(...e).pipe(pi(1)).subscribe(()=>t())}function Dl(t,i){return nt(i)?Ui(t,i,1):Ui(t,1)}class w0{}class Sr{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(i){i?"string"==typeof i?this.lazyInit=()=>{this.headers=new Map,i.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const r=e.slice(0,n),o=e.slice(n+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&i instanceof Headers?(this.headers=new Map,i.forEach((e,n)=>{this.addHeaderEntry(n,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(i).forEach(([e,n])=>{this.setHeaderEntries(e,n)})}:this.headers=new Map}has(i){return this.init(),this.headers.has(i.toLowerCase())}get(i){this.init();const e=this.headers.get(i.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(i){return this.init(),this.headers.get(i.toLowerCase())||null}append(i,e){return this.clone({name:i,value:e,op:"a"})}set(i,e){return this.clone({name:i,value:e,op:"s"})}delete(i,e){return this.clone({name:i,value:e,op:"d"})}maybeSetNormalizedName(i,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,i)}init(){this.lazyInit&&(this.lazyInit instanceof Sr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(i=>this.applyUpdate(i)),this.lazyUpdate=null))}copyFrom(i){i.init(),Array.from(i.headers.keys()).forEach(e=>{this.headers.set(e,i.headers.get(e)),this.normalizedNames.set(e,i.normalizedNames.get(e))})}clone(i){const e=new Sr;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Sr?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([i]),e}applyUpdate(i){const e=i.name.toLowerCase();switch(i.op){case"a":case"s":let n=i.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(i.name,e);const r=("a"===i.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const o=i.value;if(o){let a=this.headers.get(e);if(!a)return;a=a.filter(s=>-1===o.indexOf(s)),0===a.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}else this.headers.delete(e),this.normalizedNames.delete(e)}}addHeaderEntry(i,e){const n=i.toLowerCase();this.maybeSetNormalizedName(i,n),this.headers.has(n)?this.headers.get(n).push(e):this.headers.set(n,[e])}setHeaderEntries(i,e){const n=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=i.toLowerCase();this.headers.set(r,n),this.maybeSetNormalizedName(i,r)}forEach(i){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>i(this.normalizedNames.get(e),this.headers.get(e)))}}class f7{encodeKey(i){return IP(i)}encodeValue(i){return IP(i)}decodeKey(i){return decodeURIComponent(i)}decodeValue(i){return decodeURIComponent(i)}}const p7=/%(\d[a-f0-9])/gi,g7={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function IP(t){return encodeURIComponent(t).replace(p7,(i,e)=>g7[e]??i)}function jm(t){return`${t}`}class Hr{map;encoder;updates=null;cloneFrom=null;constructor(i={}){if(this.encoder=i.encoder||new f7,i.fromString){if(i.fromObject)throw new N(2805,!1);this.map=function m7(t,i){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[a,s]=-1==o?[i.decodeKey(r),""]:[i.decodeKey(r.slice(0,o)),i.decodeValue(r.slice(o+1))],l=e.get(a)||[];l.push(s),e.set(a,l)}),e}(i.fromString,this.encoder)}else i.fromObject?(this.map=new Map,Object.keys(i.fromObject).forEach(e=>{const n=i.fromObject[e],r=Array.isArray(n)?n.map(jm):[jm(n)];this.map.set(e,r)})):this.map=null}has(i){return this.init(),this.map.has(i)}get(i){this.init();const e=this.map.get(i);return e?e[0]:null}getAll(i){return this.init(),this.map.get(i)||null}keys(){return this.init(),Array.from(this.map.keys())}append(i,e){return this.clone({param:i,value:e,op:"a"})}appendAll(i){const e=[];return Object.keys(i).forEach(n=>{const r=i[n];Array.isArray(r)?r.forEach(o=>{e.push({param:n,value:o,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(i,e){return this.clone({param:i,value:e,op:"s"})}delete(i,e){return this.clone({param:i,value:e,op:"d"})}toString(){return this.init(),this.keys().map(i=>{const e=this.encoder.encodeKey(i);return this.map.get(i).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(i=>""!==i).join("&")}clone(i){const e=new Hr({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(i),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(i=>this.map.set(i,this.cloneFrom.map.get(i))),this.updates.forEach(i=>{switch(i.op){case"a":case"s":const e=("a"===i.op?this.map.get(i.param):void 0)||[];e.push(jm(i.value)),this.map.set(i.param,e);break;case"d":if(void 0===i.value){this.map.delete(i.param);break}{let n=this.map.get(i.param)||[];const r=n.indexOf(jm(i.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(i.param,n):this.map.delete(i.param)}}}),this.cloneFrom=this.updates=null)}}class v7{map=new Map;set(i,e){return this.map.set(i,e),this}get(i){return this.map.has(i)||this.map.set(i,i.defaultValue()),this.map.get(i)}delete(i){return this.map.delete(i),this}has(i){return this.map.has(i)}keys(){return this.map.keys()}}function AP(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function PP(t){return typeof Blob<"u"&&t instanceof Blob}function RP(t){return typeof FormData<"u"&&t instanceof FormData}class Tl{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(i,e,n,r){let o;if(this.url=e,this.method=i.toUpperCase(),function y7(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,o=r):o=n,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Sr,this.context??=new v7,this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=e;else{const s=e.indexOf("?");this.urlWithParams=e+(-1===s?"?":s<e.length-1?"&":"")+a}}else this.params=new Hr,this.urlWithParams=e}serializeBody(){return null===this.body?null:"string"==typeof this.body||AP(this.body)||PP(this.body)||RP(this.body)||function _7(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Hr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||RP(this.body)?null:PP(this.body)?this.body.type||null:AP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Hr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(i={}){const e=i.method||this.method,n=i.url||this.url,r=i.responseType||this.responseType,o=i.transferCache??this.transferCache,a=void 0!==i.body?i.body:this.body,s=i.withCredentials??this.withCredentials,l=i.reportProgress??this.reportProgress;let c=i.headers||this.headers,d=i.params||this.params;const u=i.context??this.context;return void 0!==i.setHeaders&&(c=Object.keys(i.setHeaders).reduce((p,g)=>p.set(g,i.setHeaders[g]),c)),i.setParams&&(d=Object.keys(i.setParams).reduce((p,g)=>p.set(g,i.setParams[g]),d)),new Tl(e,n,a,{params:d,headers:c,context:u,reportProgress:l,responseType:r,withCredentials:s,transferCache:o})}}var Wd=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Wd||{});class k0{headers;status;statusText;url;ok;type;constructor(i,e=200,n="OK"){this.headers=i.headers||new Sr,this.status=void 0!==i.status?i.status:e,this.statusText=i.statusText||n,this.url=i.url||null,this.ok=this.status>=200&&this.status<300}}class Gd extends k0{body;constructor(i={}){super(i),this.body=void 0!==i.body?i.body:null}type=Wd.Response;clone(i={}){return new Gd({body:void 0!==i.body?i.body:this.body,headers:i.headers||this.headers,status:void 0!==i.status?i.status:this.status,statusText:i.statusText||this.statusText,url:i.url||this.url||void 0})}}function D0(t,i){return{body:i,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}let Um=(()=>{class t{handler;constructor(e){this.handler=e}request(e,n,r={}){let o;if(e instanceof Tl)o=e;else{let l,c;l=r.headers instanceof Sr?r.headers:new Sr(r.headers),r.params&&(c=r.params instanceof Hr?r.params:new Hr({fromObject:r.params})),o=new Tl(e,n,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}const a=ue(o).pipe(Dl(l=>this.handler.handle(l)));if(e instanceof Tl||"events"===r.observe)return a;const s=a.pipe(Qe(l=>l instanceof Gd));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return s.pipe(me(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new N(2806,!1);return l.body}));case"blob":return s.pipe(me(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new N(2807,!1);return l.body}));case"text":return s.pipe(me(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new N(2808,!1);return l.body}));default:return s.pipe(me(l=>l.body))}case"response":return s;default:throw new N(2809,!1)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new Hr).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,D0(r,n))}post(e,n,r={}){return this.request("POST",e,D0(r,n))}put(e,n,r={}){return this.request("PUT",e,D0(r,n))}static \u0275fac=function(n){return new(n||t)(P(w0))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})();class J7 extends R6{supportsDOMEvents=!0}class M0 extends J7{static makeCurrent(){!function P6(t){VI??=t}(new M0)}onAndCancel(i,e,n,r){return i.addEventListener(e,n,r),()=>{i.removeEventListener(e,n,r)}}dispatchEvent(i,e){i.dispatchEvent(e)}remove(i){i.remove()}createElement(i,e){return(e=e||this.getDefaultDocument()).createElement(i)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(i){return i.nodeType===Node.ELEMENT_NODE}isShadowRoot(i){return i instanceof DocumentFragment}getGlobalEventTarget(i,e){return"window"===e?window:"document"===e?i:"body"===e?i.body:null}getBaseHref(i){const e=function eK(){return Yd=Yd||document.querySelector("base"),Yd?Yd.getAttribute("href"):null}();return null==e?null:function tK(t){return new URL(t,document.baseURI).pathname}(e)}resetBaseElement(){Yd=null}getUserAgent(){return window.navigator.userAgent}getCookie(i){return function CW(t,i){i=encodeURIComponent(i);for(const e of t.split(";")){const n=e.indexOf("="),[r,o]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===i)return decodeURIComponent(o)}return null}(document.cookie,i)}}let Yd=null,nK=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})();const I0=new B("");let $P=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,n){this._zone=n,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,r,o){return this._findPluginFor(n).addEventListener(e,n,r,o)}getZone(){return this._zone}_findPluginFor(e){let n=this._eventNameToPlugin.get(e);if(n)return n;if(n=this._plugins.find(o=>o.supports(e)),!n)throw new N(5101,!1);return this._eventNameToPlugin.set(e,n),n}static \u0275fac=function(n){return new(n||t)(P(I0),P(ce))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})();class WP{_doc;constructor(i){this._doc=i}manager}const $m="ng-app-id";function GP(t){for(const i of t)i.remove()}function YP(t,i){const e=i.createElement("style");return e.textContent=t,e}function A0(t,i){const e=i.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),e}let KP=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,n,r,o={}){this.doc=e,this.appId=n,this.nonce=r,this.isServer=sA(o),function rK(t,i,e,n){const r=t.head?.querySelectorAll(`style[${$m}="${i}"],link[${$m}="${i}"]`);if(r)for(const o of r)o.removeAttribute($m),o instanceof HTMLLinkElement?n.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}(e,n,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,n){for(const r of e)this.addUsage(r,this.inline,YP);n?.forEach(r=>this.addUsage(r,this.external,A0))}removeStyles(e,n){for(const r of e)this.removeUsage(r,this.inline);n?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,n,r){const o=n.get(e);o?o.usage++:n.set(e,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,r(e,this.doc)))})}removeUsage(e,n){const r=n.get(e);r&&(r.usage--,r.usage<=0&&(GP(r.elements),n.delete(e)))}ngOnDestroy(){for(const[,{elements:e}]of[...this.inline,...this.external])GP(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(const[n,{elements:r}]of this.inline)r.push(this.addElement(e,YP(n,this.doc)));for(const[n,{elements:r}]of this.external)r.push(this.addElement(e,A0(n,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,n){return this.nonce&&n.setAttribute("nonce",this.nonce),this.isServer&&n.setAttribute($m,this.appId),e.appendChild(n)}static \u0275fac=function(n){return new(n||t)(P(Ge),P(Eo),P(Qv,8),P(Wh))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})();const P0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},R0=/%COMP%/g,dK=new B("",{providedIn:"root",factory:()=>!0});function ZP(t,i){return i.map(e=>e.replace(R0,t))}let F0=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,n,r,o,a,s,l,c=null,d=null){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=s,this.ngZone=l,this.nonce=c,this.tracingService=d,this.platformIsServer=sA(s),this.defaultRenderer=new O0(e,a,l,this.platformIsServer,this.tracingService)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===Jn.ShadowDom&&(n={...n,encapsulation:Jn.Emulated});const r=this.getOrCreateRenderer(e,n);return r instanceof JP?r.applyToHost(e):r instanceof L0&&r.applyStyles(),r}getOrCreateRenderer(e,n){const r=this.rendererByCompId;let o=r.get(n.id);if(!o){const a=this.doc,s=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,u=this.platformIsServer,p=this.tracingService;switch(n.encapsulation){case Jn.Emulated:o=new JP(l,c,n,this.appId,d,a,s,u,p);break;case Jn.ShadowDom:return new mK(l,c,e,n,a,s,this.nonce,u,p);default:o=new L0(l,c,n,d,a,s,u,p)}r.set(n.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(n){return new(n||t)(P($P),P(KP),P(Eo),P(dK),P(Ge),P(Wh),P(ce),P(Qv),P(Ps,8))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})();class O0{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(i,e,n,r,o){this.eventManager=i,this.doc=e,this.ngZone=n,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(i,e){return e?this.doc.createElementNS(P0[e]||e,i):this.doc.createElement(i)}createComment(i){return this.doc.createComment(i)}createText(i){return this.doc.createTextNode(i)}appendChild(i,e){(XP(i)?i.content:i).appendChild(e)}insertBefore(i,e,n){i&&(XP(i)?i.content:i).insertBefore(e,n)}removeChild(i,e){e.remove()}selectRootElement(i,e){let n="string"==typeof i?this.doc.querySelector(i):i;if(!n)throw new N(-5104,!1);return e||(n.textContent=""),n}parentNode(i){return i.parentNode}nextSibling(i){return i.nextSibling}setAttribute(i,e,n,r){if(r){e=r+":"+e;const o=P0[r];o?i.setAttributeNS(o,e,n):i.setAttribute(e,n)}else i.setAttribute(e,n)}removeAttribute(i,e,n){if(n){const r=P0[n];r?i.removeAttributeNS(r,e):i.removeAttribute(`${n}:${e}`)}else i.removeAttribute(e)}addClass(i,e){i.classList.add(e)}removeClass(i,e){i.classList.remove(e)}setStyle(i,e,n,r){r&(Io.DashCase|Io.Important)?i.style.setProperty(e,n,r&Io.Important?"important":""):i.style[e]=n}removeStyle(i,e,n){n&Io.DashCase?i.style.removeProperty(e):i.style[e]=""}setProperty(i,e,n){null!=i&&(i[e]=n)}setValue(i,e){i.nodeValue=e}listen(i,e,n,r){if("string"==typeof i&&!(i=Ho().getGlobalEventTarget(this.doc,i)))throw new N(5102,!1);let o=this.decoratePreventDefault(n);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(i,e,o)),this.eventManager.addEventListener(i,e,o,r)}decoratePreventDefault(i){return e=>{if("__ngUnwrap__"===e)return i;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>i(e)):i(e))&&e.preventDefault()}}}function XP(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class mK extends O0{sharedStylesHost;hostEl;shadowRoot;constructor(i,e,n,r,o,a,s,l,c){super(i,o,a,l,c),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=ZP(r.id,d);for(const p of d){const g=document.createElement("style");s&&g.setAttribute("nonce",s),g.textContent=p,this.shadowRoot.appendChild(g)}const u=r.getExternalStyles?.();if(u)for(const p of u){const g=A0(p,o);s&&g.setAttribute("nonce",s),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(i){return i===this.hostEl?this.shadowRoot:i}appendChild(i,e){return super.appendChild(this.nodeOrShadowRoot(i),e)}insertBefore(i,e,n){return super.insertBefore(this.nodeOrShadowRoot(i),e,n)}removeChild(i,e){return super.removeChild(null,e)}parentNode(i){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(i)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class L0 extends O0{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(i,e,n,r,o,a,s,l,c){super(i,o,a,s,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let d=n.styles;this.styles=c?ZP(c,d):d,this.styleUrls=n.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class JP extends L0{contentAttr;hostAttr;constructor(i,e,n,r,o,a,s,l,c){const d=r+"-"+n.id;super(i,e,n,o,a,s,l,c,d),this.contentAttr=function uK(t){return"_ngcontent-%COMP%".replace(R0,t)}(d),this.hostAttr=function hK(t){return"_nghost-%COMP%".replace(R0,t)}(d)}applyToHost(i){this.applyStyles(),this.setAttribute(i,this.hostAttr,"")}createElement(i,e){const n=super.createElement(i,e);return super.setAttribute(n,this.contentAttr,""),n}}let pK=(()=>{class t extends WP{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r,o){return e.addEventListener(n,r,o),()=>this.removeEventListener(e,n,r,o)}removeEventListener(e,n,r,o){return e.removeEventListener(n,r,o)}static \u0275fac=function(n){return new(n||t)(P(Ge))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})();const eR=["alt","control","meta","shift"],gK={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vK={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let yK=(()=>{class t extends WP{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r,o){const a=t.parseEventName(n),s=t.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ho().onAndCancel(e,a.domEventName,s,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const o=t._normalizeKey(n.pop());let a="",s=n.indexOf("code");if(s>-1&&(n.splice(s,1),a="code."),eR.forEach(c=>{const d=n.indexOf(c);d>-1&&(n.splice(d,1),a+=c+".")}),a+=o,0!=n.length||0===o.length)return null;const l={};return l.domEventName=r,l.fullKey=a,l}static matchEventFullKeyCode(e,n){let r=gK[e.key]||e.key,o="";return n.indexOf("code.")>-1&&(r=e.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),eR.forEach(a=>{a!==r&&(0,vK[a])(e)&&(o+=a+".")}),o+=r,o===n)}static eventCallback(e,n,r){return o=>{t.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>n(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}static \u0275fac=function(n){return new(n||t)(P(Ge))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})();function tR(t){return{appProviders:[...nR,...t?.providers??[]],platformProviders:CK}}const CK=[{provide:Wh,useValue:aA},{provide:Kv,useValue:function bK(){M0.makeCurrent()},multi:!0},{provide:Ge,useFactory:function wK(){return function sV(t){Yv=t}(document),document},deps:[]}],iR=[{provide:qf,useClass:class iK{addToWindow(i){Qt.getAngularTestability=(n,r=!0)=>{const o=i.findTestabilityInTree(n,r);if(null==o)throw new N(5103,!1);return o},Qt.getAllAngularTestabilities=()=>i.getAllTestabilities(),Qt.getAllAngularRootElements=()=>i.getAllRootElements(),Qt.frameworkStabilizers||(Qt.frameworkStabilizers=[]),Qt.frameworkStabilizers.push(n=>{const r=Qt.getAllAngularTestabilities();let o=r.length;const a=function(){o--,0==o&&n()};r.forEach(s=>{s.whenStable(a)})})}findTestabilityInTree(i,e,n){return null==e?null:i.getTestability(e)??(n?Ho().isShadowRoot(e)?this.findTestabilityInTree(i,e.host,!0):this.findTestabilityInTree(i,e.parentElement,!0):null)}},deps:[]},{provide:Gx,useClass:P_,deps:[ce,R_,qf]},{provide:P_,useClass:P_,deps:[ce,R_,qf]}],nR=[{provide:iv,useValue:"root"},{provide:Nn,useFactory:function SK(){return new Nn},deps:[]},{provide:I0,useClass:pK,multi:!0,deps:[Ge]},{provide:I0,useClass:yK,multi:!0,deps:[Ge]},F0,KP,$P,{provide:Hn,useExisting:F0},{provide:class eG{},useClass:nK,deps:[]},[]];let kK=(()=>{class t{constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({providers:[...nR,...iR],imports:[Vo,j$]})}return t})(),DK=(()=>{class t{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(n){return new(n||t)(P(Ge))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),N0=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:function(n){let r=null;return r=n?new(n||t):P(MK),r},providedIn:"root"})}return t})(),MK=(()=>{class t extends N0{_doc;constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case Ni.NONE:return n;case Ni.HTML:return Pr(n,"HTML")?Bn(n):xD(this._doc,String(n)).toString();case Ni.STYLE:return Pr(n,"Style")?Bn(n):n;case Ni.SCRIPT:if(Pr(n,"Script"))return Bn(n);throw new N(5200,!1);case Ni.URL:return Pr(n,"URL")?Bn(n):uf(String(n));case Ni.RESOURCE_URL:if(Pr(n,"ResourceURL"))return Bn(n);throw new N(5201,!1);default:throw new N(5202,!1)}}bypassSecurityTrustHtml(e){return function t3(t){return new KV(t)}(e)}bypassSecurityTrustStyle(e){return function i3(t){return new QV(t)}(e)}bypassSecurityTrustScript(e){return function n3(t){return new ZV(t)}(e)}bypassSecurityTrustUrl(e){return function r3(t){return new XV(t)}(e)}bypassSecurityTrustResourceUrl(e){return function o3(t){return new JV(t)}(e)}static \u0275fac=function(n){return new(n||t)(P(Ge))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const IK=["*"];let Wm;function Qd(t){return function AK(){if(void 0===Wm&&(Wm=null,typeof window<"u")){const t=window;void 0!==t.trustedTypes&&(Wm=t.trustedTypes.createPolicy("angular#components",{createHTML:i=>i}))}return Wm}()?.createHTML(t)||t}function aR(t){return Error(`Unable to find icon with the name "${t}"`)}function sR(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function lR(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class qa{url;svgText;options;svgElement;constructor(i,e,n){this.url=i,this.svgText=e,this.options=n}}let Gm=(()=>{class t{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,n,r,o){this._httpClient=e,this._sanitizer=n,this._errorHandler=o,this._document=r}addSvgIcon(e,n,r){return this.addSvgIconInNamespace("",e,n,r)}addSvgIconLiteral(e,n,r){return this.addSvgIconLiteralInNamespace("",e,n,r)}addSvgIconInNamespace(e,n,r,o){return this._addSvgIconConfig(e,n,new qa(r,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,r,o){const a=this._sanitizer.sanitize(Ni.HTML,r);if(!a)throw lR(r);const s=Qd(a);return this._addSvgIconConfig(e,n,new qa("",s,o))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,r){return this._addSvgIconSetConfig(e,new qa(n,null,r))}addSvgIconSetLiteralInNamespace(e,n,r){const o=this._sanitizer.sanitize(Ni.HTML,n);if(!o)throw lR(n);const a=Qd(o);return this._addSvgIconSetConfig(e,new qa("",a,r))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const n=this._sanitizer.sanitize(Ni.RESOURCE_URL,e);if(!n)throw sR(e);const r=this._cachedIconsByUrl.get(n);return r?ue(Ym(r)):this._loadSvgIconFromConfig(new qa(e,null)).pipe(ii(o=>this._cachedIconsByUrl.set(n,o)),me(o=>Ym(o)))}getNamedSvgIcon(e,n=""){const r=cR(n,e);let o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(n,e),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);const a=this._iconSetConfigs.get(n);return a?this._getSvgFromIconSetConfigs(e,a):$d(aR(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?ue(Ym(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(me(n=>Ym(n)))}_getSvgFromIconSetConfigs(e,n){const r=this._extractIconWithNameFromAnySet(e,n);return r?ue(r):EP(n.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(Ha(s=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Ni.RESOURCE_URL,a.url)} failed: ${s.message}`;return this._errorHandler.handleError(new Error(c)),ue(null)})))).pipe(me(()=>{const a=this._extractIconWithNameFromAnySet(e,n);if(!a)throw aR(e);return a}))}_extractIconWithNameFromAnySet(e,n){for(let r=n.length-1;r>=0;r--){const o=n[r];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){const a=this._svgElementFromConfig(o),s=this._extractSvgIconFromSet(a,e,o.options);if(s)return s}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(ii(n=>e.svgText=n),me(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?ue(null):this._fetchIcon(e).pipe(ii(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,r){const o=e.querySelector(`[id="${n}"]`);if(!o)return null;const a=o.cloneNode(!0);if(a.removeAttribute("id"),"svg"===a.nodeName.toLowerCase())return this._setSvgAttributes(a,r);if("symbol"===a.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(a),r);const s=this._svgElementFromString(Qd("<svg></svg>"));return s.appendChild(a),this._setSvgAttributes(s,r)}_svgElementFromString(e){const n=this._document.createElement("DIV");n.innerHTML=e;const r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const n=this._svgElementFromString(Qd("<svg></svg>")),r=e.attributes;for(let o=0;o<r.length;o++){const{name:a,value:s}=r[o];"id"!==a&&n.setAttribute(a,s)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[o].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){const{url:n,options:r}=e,o=r?.withCredentials??!1;if(!this._httpClient)throw function PK(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}();if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const a=this._sanitizer.sanitize(Ni.RESOURCE_URL,n);if(!a)throw sR(n);const s=this._inProgressUrlFetches.get(a);if(s)return s;const l=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(me(c=>Qd(c)),qm(()=>this._inProgressUrlFetches.delete(a)),MP());return this._inProgressUrlFetches.set(a,l),l}_addSvgIconConfig(e,n,r){return this._svgIconConfigs.set(cR(e,n),r),this}_addSvgIconSetConfig(e,n){const r=this._iconSetConfigs.get(e);return r?r.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){const n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let r=0;r<this._resolvers.length;r++){const o=this._resolvers[r](n,e);if(o)return FK(o)?new qa(o.url,null,o.options):new qa(o,null)}}static \u0275fac=function(n){return new(n||t)(P(Um,8),P(N0),P(Ge,8),P(Nn))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ym(t){return t.cloneNode(!0)}function cR(t,i){return t+":"+i}function FK(t){return!(!t.url||!t.options)}const OK=new B("MAT_ICON_DEFAULT_OPTIONS"),LK=new B("mat-icon-location",{providedIn:"root",factory:function NK(){const t=_(Ge),i=t?t.location:null;return{getPathname:()=>i?i.pathname+i.search:""}}}),dR=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],BK=dR.map(t=>`[${t}]`).join(", "),HK=/^url\(['"]?#(.*?)['"]?\)$/;let Lt=(()=>{class t{_elementRef=_(xe);_iconRegistry=_(Gm);_location=_(LK);_errorHandler=_(Nn);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){const n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){const n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=je.EMPTY;constructor(){const e=_(new r1("aria-hidden"),{optional:!0}),n=_(OK,{optional:!0});n&&(n.color&&(this.color=this._defaultColor=n.color),n.fontSet&&(this.fontSet=n.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];const n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const r=e.childNodes[n];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),n.forEach(r=>e.classList.add(r)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const n=this._elementsWithExternalReferences;n&&n.forEach((r,o)=>{r.forEach(a=>{o.setAttribute(a.name,`url('${e}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(e){const n=e.querySelectorAll(BK),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<n.length;o++)dR.forEach(a=>{const s=n[o],l=s.getAttribute(a),c=l?l.match(HK):null;if(c){let d=r.get(s);d||(d=[],r.set(s,d)),d.push({name:a,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[n,r]=this._splitIconName(e);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(pi(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${r}! ${o.message}`))})}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(n,r){2&n&&(Me("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Ia(r.color?"mat-"+r.color:""),ot("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:[2,"inline","inline",Oe],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:IK,decls:1,vars:0,template:function(n,r){1&n&&(Dn(),di(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return t})(),$o=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({imports:[vi,vi]})}return t})();var Q=function(t){return t[t.Yin=0]="Yin",t[t.Yang=1]="Yang",t[t.Balance=2]="Balance",t[t.None=3]="None",t}(Q||{}),R=function(t){return t[t.OddJobs=0]="OddJobs",t[t.Resting=1]="Resting",t[t.GatherHerbs=2]="GatherHerbs",t[t.ChopWood=3]="ChopWood",t[t.Begging=4]="Begging",t[t.Cooking=5]="Cooking",t[t.Blacksmithing=6]="Blacksmithing",t[t.Woodworking=7]="Woodworking",t[t.Leatherworking=8]="Leatherworking",t[t.FormationCreation=9]="FormationCreation",t[t.Plowing=10]="Plowing",t[t.Clearing=11]="Clearing",t[t.Farming=12]="Farming",t[t.Mining=13]="Mining",t[t.Smelting=14]="Smelting",t[t.Hunting=15]="Hunting",t[t.Fishing=16]="Fishing",t[t.Alchemy=17]="Alchemy",t[t.Burning=18]="Burning",t[t.BalanceChi=19]="BalanceChi",t[t.BodyCultivation=20]="BodyCultivation",t[t.MindCultivation=21]="MindCultivation",t[t.CoreCultivation=22]="CoreCultivation",t[t.SoulCultivation=23]="SoulCultivation",t[t.InfuseBody=24]="InfuseBody",t[t.InfuseEquipment=25]="InfuseEquipment",t[t.ExtendLife=26]="ExtendLife",t[t.Recruiting=27]="Recruiting",t[t.TrainingFollowers=28]="TrainingFollowers",t[t.Swim=29]="Swim",t[t.ForgeChains=30]="ForgeChains",t[t.AttachChains=31]="AttachChains",t[t.MakeBrick=32]="MakeBrick",t[t.MakeMortar=33]="MakeMortar",t[t.MakeScaffold=34]="MakeScaffold",t[t.BuildTower=35]="BuildTower",t[t.ResearchWind=36]="ResearchWind",t[t.TameWinds=37]="TameWinds",t[t.LearnToFly=38]="LearnToFly",t[t.OfferDragonFood=39]="OfferDragonFood",t[t.OfferDragonWealth=40]="OfferDragonWealth",t[t.TalkToDragon=41]="TalkToDragon",t[t.GatherArmies=42]="GatherArmies",t[t.ConquerTheNation=43]="ConquerTheNation",t[t.MoveStars=44]="MoveStars",t[t.Taunting=45]="Taunting",t[t.EscapeHell=46]="EscapeHell",t[t.HellRecruiting=47]="HellRecruiting",t[t.BurnMoney=48]="BurnMoney",t[t.HonorAncestors=49]="HonorAncestors",t[t.CombatTraining=50]="CombatTraining",t[t.Rehabilitation=51]="Rehabilitation",t[t.CopperMining=52]="CopperMining",t[t.ForgeHammer=53]="ForgeHammer",t[t.ClimbMountain=54]="ClimbMountain",t[t.AttackClimbers=55]="AttackClimbers",t[t.MeltMountain=56]="MeltMountain",t[t.HealAnimals=57]="HealAnimals",t[t.PetRecruiting=58]="PetRecruiting",t[t.PetTraining=59]="PetTraining",t[t.LiftBoulder=60]="LiftBoulder",t[t.SearchForExit=61]="SearchForExit",t[t.TeachTheWay=62]="TeachTheWay",t[t.Interrogate=63]="Interrogate",t[t.RecoverTreasure=64]="RecoverTreasure",t[t.ReplaceTreasure=65]="ReplaceTreasure",t[t.PurifyGems=66]="PurifyGems",t[t.Endure=67]="Endure",t[t.FreezeMountain=68]="FreezeMountain",t[t.ExamineContracts=69]="ExamineContracts",t[t.FinishHell=70]="FinishHell",t[t.Hell=71]="Hell",t}(R||{}),E=function(t){return t.Self="Self",t.SmallTown="SmallTown",t.LargeCity="LargeCity",t.SmallPond="SmallPond",t.Forest="Forest",t.Mine="Mine",t.Desert="Desert",t.Jungle="Jungle",t.Dungeon="Dungeon",t.Beach="Beach",t.DeepSea="DeepSea",t.MountainTops="MountainTops",t.Hell="Hell",t}(E||{});const uR=["Abbas","Abdel","Abdo","Abdoulaye","Abdul","Abdullah","Abdullahi","Abel","Abraham","Abubakar","Adam","Adama","Adamu","Adel","Adrian","Adriana","Agnes","Agus","Ahmad","Ahmed","Ahmet","Ai","Aicha","Aida","Aisha","Ajay","Alaa","Alain","Alan","Albert","Alberto","Alejandro","Aleksandr","Aleksandra","Aleksey","Alex","Alexander","Alexandra","Alexandre","Alexey","Alfred","Alfredo","Ali","Alice","Alicia","Alina","Aliyu","Alma","Amadou","Amal","Amanda","Amar","Amin","Amina","Aminata","Amir","Amit","Amy","An","Ana","Anastasia","Anastasiya","Andre","Andrea","Andreas","Andrei","Andres","Andrew","Andrey","Angel","Angela","Angelica","Angelina","Angelo","Anh","Anil","Anita","Ann","Anna","Anne","Annie","Anthony","Anton","Antonia","Antonio","Anwar","Arif","Arjun","Armando","Arthur","Artur","Arturo","Artyom","Arun","Asha","Ashok","Ashraf","Asma","Asmaa","Aung","Aya","Ayesha","Ay\u015fe","Aziz","Babu","Barbara","Basanti","Bashir","Beatrice","Beatriz","Bekele","Benjamin","Bernadette","Bernard","Betty","Bharat","Bibi","Bin","Blanca","Blessing","Bob","Brenda","Brian","Brigitte","Bruno","Ca","Carla","Carlos","Carmen","Carol","Carolina","Caroline","Catherine","Cecilia","Cesar","Chandra","Chantal","Chao","Charles","Charlotte","Chen","Cheng","Cheryl","Chi","Chris","Christian","Christina","Christine","Christophe","Christopher","Chun","Chunhua","Chunyan","Clara","Claude","Claudia","Claudio","Cong","Cristian","Cristina","Cynthia","Dan","Daniel","Daniela","Darya","David","Deborah","Deepak","Denis","Denise","Dennis","Di","Diana","Diane","Diego","Dilip","Dina","Dinesh","Dipak","Dmitriy","Dmitry","Dolores","Dominique","Donald","Dongmei","Donna","Dora","Doris","Dorothy","Douglas","Dung","Durga","Edgar","Edith","Eduardo","Edward","Edwin","Ei","Ekaterina","Elaine","Elena","Elias","Elisabeth","Elizabeth","Ellen","Elsa","Elvira","Eman","Emily","Emine","Emma","Emmanuel","Enrique","Eric","Erika","Ernest","Ernesto","Ester","Esther","Eunice","Eva","Evelyn","Evgeniy","Fabio","Faisal","Faith","Farida","Farzana","Fatemeh","Fatima","Fatma","Fatoumata","Felipe","Felix","Fernando","Florence","Francesco","Francis","Francisca","Francisco","Francois","Frank","Fred","Gabriel","Gabriela","Galina","Ganesh","Gang","Ganga","Gary","George","Gerald","Gerardo","Gerhard","Gesha","Ghulam","Gilbert","Gilberto","Giovanni","Gita","Giuseppe","Gladys","Gloria","Gopal","Grace","Gregory","Guadalupe","Guillermo","Gul","Guohua","Guoliang","Guoqiang","Gustavo","Guy","Ha","Habib","Habiba","Hai","Haibo","Haitao","Haiyan","Haiying","Haji","Halima","Halyna","Hamid","Hamza","Han","Hana","Hanan","Hang","Hans","Hari","Hasan","Hassan","Hatice","Hawa","Heather","Heba","Hector","Heinz","Helen","Helena","Helga","Henry","Herbert","Hieu","Hilda","Hiroshi","Hoa","Hoang","Hong","Hongmei","Hongwei","Hongyan","Hossein","Huan","Hugo","Hui","Huimin","Hung","Huong","Hussein","Huy","Ian","Ibrahim","Ida","Igor","Ilya","Iman","Imran","Ingrid","Irene","Irina","Irma","Isa","Isaac","Isabel","Isabelle","Ismail","Issa","Ivan","Jack","Jacob","Jacqueline","Jacques","Jaime","Jamal","James","Jamila","Jan","Jane","Janet","Jason","Javier","Jay","Jean","Jeanne","Jeff","Jeffrey","Jennifer","Jenny","Jerry","Jessica","Jesus","Jianfeng","Jianguo","Jianhua","Jianhui","Jianjun","Jianmin","Jianming","Jianping","Jianwei","Jianxin","Jianzhong","Jim","Jimmy","Jin","Jingjing","Jinhua","Jitendra","Joan","Joanna","Joao","Joaquim","Joe","Joel","John","Jonathan","Jorge","Jose","Jos\xe9","Josef","Josefa","Josefina","Joseph","Josephine","Joshua","Joy","Joyce","Juan","Juana","Judith","Judy","Julia","Juliana","Julie","Julio","Julius","Junjie","Justin","Jyoti","Ka","Kai","Kailash","Kalpana","Kamal","Kamala","Kamla","Karen","Karim","Karin","Karina","Karl","Kassa","Katarzyna","Kathleen","Kathy","Katsumi","Kavita","Keith","Kelly","Ken","Kenji","Kenneth","Kevin","Khadija","Khaled","Khalid","Kim","Kimberly","Kiran","Kirill","Klaus","Konstantin","Krishna","Kristina","Krzysztof","Kseniya","Kun","Kyaw","Laila","Lakshmi","Laksmi","Lal","Lalita","Lan","Laoshi","Larry","Laura","Lawrence","Laxmi","Le","Lee","Lei","Leila","Leonard","Leonardo","Leticia","Li","Lidia","Lihong","Lihua","Lijuan","Lijun","Lila","Lilian","Liliana","Liming","Lin","Lina","Linda","Ling","Lingling","Linh","Liping","Lisa","Lixin","Liying","Long","Lorena","Louis","Louise","Lucas","Lucia","Luciano","Lucy","Luis","Luisa","Luiz","Luz","Lwin","Lydia","Lyubov","Lyudmila","Lyudmyla","Ma","Madina","Magdalena","Maha","Mahdi","Mahendra","Mahesh","Mahmoud","Mai","Maksim","Mamadou","Mamta","Man","Manfred","Manju","Manoel","Manoj","Manuel","Manuela","Marc","Marcel","Marcelo","Marcia","Marcin","Marco","Marcos","Margaret","Margarita","Maria","M\xe1ria","Mariam","Mariama","Mariana","Marianne","Marie","Marilyn","Marina","Mario","Mariya","Mark","Marlene","Marta","Martha","Martin","Martina","Martine","Marwa","Mary","Maryam","Maryia","Masako","Masmaat","Masoumeh","Matthew","Maurice","Maya","Mehmet","Mei","Melanie","Melissa","Meng","Mercedes","Mercy","Mi","Michael","Michel","Michele","Michelle","Miguel","Mike","Mikhail","Min","Mina","Ming","Minh","Mira","Miriam","Mo","Mohamad","Mohammed","Mohan","Mohsen","Mona","Monica","Monika","Monique","Moses","Mostafa","Moussa","Muhamad","Muhammed","Mukesh","Munni","Musa","Mustafa","Mustapha","Myat","Na","Nabil","Nada","Nadezhda","Nadia","Nam","Nan","Nana","Nancy","Narayan","Naresh","Naseem","Nasir","Nasreen","Nasrin","Natalia","Natalya","Nathalie","Nelson","Nestor","Nga","Ngoc","Nguyen","Ni","Nicholas","Nicolas","Nicole","Nikita","Nikolay","Nina","Ning","Nirmala","Noel","Noor","Nora","Norma","Nour","Nur","Nurul","Nushi","Nusrat","Nykolai","Oksana","Oleg","Olga","Olha","Olivier","Om","Omar","Orlando","Oscar","Osman","Pa","Pablo","Pamela","Pankaj","Paola","Parvati","Pascal","Patricia","Patrick","Paul","Paula","Paulina","Pauline","Paulo","Pavel","Pedro","Pei","Peng","Peter","Petr","Petra","Philip","Philippe","Phuong","Phyo","Pierre","Ping","Piotr","Pradip","Prakash","Pramila","Pramod","Prem","Priyanka","Punam","Pushpa","Qiang","Qing","Qinghua","Qiong","Quan","Qun","Rabia","Rachel","Radha","Rafael","Rahul","Raimundo","Raj","Raja","Rajendra","Rajesh","Raju","Rakesh","Ram","Rama","Ramesh","Ramon","Ran","Rana","Rani","Ranjit","Raquel","Rashid","Raul","Ravi","Ravindra","Raymond","Rebecca","Regina","Rekha","Rene","Renu","Reza","Ricardo","Richard","Rina","Rita","Robert","Roberto","Robin","Rodolfo","Rodrigo","Roger","Roland","Roman","Ronald","Rong","Rosa","Rosario","Rose","Rosemary","Roy","Ruben","Ruslan","Rustam","Ruth","Ryan","Sabina","Sabine","Sabrina","Sachiko","Sadia","Saeed","Sai","Said","Sakina","Salah","Saleh","Salim","Salma","Salvador","Sam","Samia","Samina","Samir","Samira","Samuel","Sandeep","Sandra","Sangeeta","Sangita","Sani","Sanjay","Santos","Santosh","Sara","Sarah","Saraswati","Sarita","Saroj","Satish","Savita","Savitri","Sayed","Scott","Sebastian","Sergey","Sergio","Serhei","Seyyed","Shah","Shahid","Shakuntala","Shan","Shankar","Shanshan","Shanti","Sharmin","Sharon","Sheikh","Sheila","Shigeru","Shila","Shirley","Shiv","Shobha","Shu","Shuang","Shyam","Silvia","Sima","Simon","Simone","Sita","Siti","Smt","Sofia","Solomon","Son","Song","Sonia","Sophie","Sri","Stefan","Stella","Stephanie","Stephen","Steven","Subhash","Sultan","Suman","Sumitra","Sunday","Sunil","Sunita","Surendra","Suresh","Susan","Susana","Sushila","Svetlana","Syed","Sylvia","Sylvie","Ta","Tadesse","Tamara","Tania","Tara","Tatiana","Tatyana","Teresa","Terry","Than","Thanh","Thao","Theresa","Therese","Thierry","Thomas","Thu","Thuy","Tian","Tien","Tim","Timothy","Tina","Tingting","Tomas","Tomasz","Tong","Tony","Trang","Tu","Tuan","Tun","Uma","Umar","Umesh","Urmila","Ursula","Usha","Usman","Valentina","Valentyna","Valerie","Van","Vanessa","Vasylyi","Vera","Veronica","Vicente","Victor","Victoria","Vijay","Viktor","Viktoriya","Vincent","Vinod","Virginia","Vladimir","Vladymyr","Wai","Walter","Wei","Weidong","Weihua","Weimin","Weiming","Weiping","Weiwei","Wendy","Wenjie","Wenjing","Wenjun","Werner","William","Wilson","Wolfgang","Xian","Xiang","Xiaodong","Xiaofeng","Xiaohong","Xiaohua","Xiaohui","Xiaojun","Xiaoli","Xiaolin","Xiaoling","Xiaomei","Xiaomin","Xiaoming","Xiaoping","Xiaoqing","Xiaowei","Xiaoxia","Xiaoyan","Xiaoying","Xiaoyu","Xin","Xing","Xuan","Xuemei","Yan","Yanhong","Yanhua","Yanling","Yanping","Yanyan","Yasmin","Yen","Yin","Ying","Yingying","Yoko","Yolanda","Yong","Yousef","Yu","Yuanyuan","Yue","Yuhua","Yuliya","Yumei","Yun","Yuping","Yuriy","Yusuf","Yvan","Yvonne","Zahra","Zainab","Zaw","Zhen","Zhenhua","Zhi","Zhigang","Zhihong","Zhihua","Zhihui","Zhijian","Zhijun","Zhiming","Zhiping","Zhiqiang","Zhiwei","Zhiyong","Zin"];let Vr=(()=>{class t{transform(e){return(e=e.split(/(?=[A-Z])/).join(" "))[0].toUpperCase()+e.slice(1)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275pipe=Qi({name:"camelToTitle",type:t,pure:!0})}}return t})(),It=(()=>{class t{constructor(e){this.mainLoopService=e}transform(e){if(this.mainLoopService.scientificNotation)return e.toPrecision(3);{let n=e,r="";e<0&&(n=0-e);const o=["","k","M","B","T","q","Q","s"];if(n<100&&!Number.isInteger(n))r=n.toFixed(2)+"";else if(n<1e4)r=Math.round(n)+"";else if(n>=Math.pow(10,3*o.length))r=n.toPrecision(3);else{const a=Math.floor(Math.log10(n));r=Math.floor(n/Math.pow(10,a-a%3-2))/100+o[Math.floor(a/3)]}return e<0?"-"+r:r}}static{this.\u0275fac=function(n){return new(n||t)(T(tt,16))}}static{this.\u0275pipe=Qi({name:"bigNumber",type:t,pure:!0})}}return t})();const hR=["adze","ahlspiess","aikuchi","aklys","arbir","arit","aruval","atgeir","axe","backsword","bakatwa","balisong","bardiche","barong","baselard","baton","battle-axe","bhuj","bichuwa","bilbo","bill","bisento","bludgeon","bokken","bolo","boomerang","brandistock","broadaxe","bo","cambuk","cestus","changdao","chigiriki","chokuto","cinquedea","claw","claymore","club","colichemarde","crop","crowbill","cumberjung","cutlass","dadao","dagger","dao","doloire","dory","dotanuki","dussack","eku","emeici","estoc","falcata","falchion","falx","fan","fauchard","firangi","flail","flamberge","flyssa","fork","fu","gada","gauntlet","gladius","glaive","goad","goedendag","golok","guan","guisarme","gurz","hachiwara","hakapik","haladie","halberd","hammer","handaxe","harpe","hasta","hatchet","hwando","hwandudaedo","ida","iklwa","jambiya","jawbone","ji","jian","jukjangchangbo","jutte","kaiken","kalis","kama","kampilan","karabela","karambit","kard","kaskara","kastane","katana","katar","katzbalger","kerala","khanda","khanjali","khanjar","khopesh","kila","kilij","kirpan","klewang","knife","knives","knobkierrie","ko","kodachi","kopis","kora","kotiate","krabi","kris","kudi","kujang","kukri","kurunthadi","kusari-gama","kyoketsu-shoge","labrys","lance","lathi","liuyedao","longsword","luwuk","macana","mace","machete","macuahuitl","maduvu","mallet","mameluke","man-catcher","mandau","manriki","masakari","mattock","maul","menavlion","mere","messer","misericorde","moplah","morning-star","morningstar","mubuchae","mughal","naboot","nagamaki","naginata","nair","nandao","ngao","nihonto","nimcha","ninjato","nodachi","nulbjakchang","nunchaku","nyepel","ono","palstave","panabas","partisan","pata","patag","patu","piandao","pichangatti","pick","pickaxe","pike","pinuti","pitchfork","planson","pudao","pulwar","punyal","qama","qiang","quarterstaff","ranseur","rapier","romphea","roundhead","rungu","saber","sabre","sagaris","sai","saif","saingeom","saintie","sang","sarissa","sasumata","scepter","scimitar","scythe","seax","shamshir","shareeravadi","shashka","shestopyor","shikomizue","shillelagh","shortsword","shuckra","sibat","sickle","sledgehammer","sodegarami","sovnya","spade","spadroon","spatha","spear","spetum","ssangsudo","staff","stick","suburito","surik","surujin","sword","swordstaff","szabla","tabak-toyok","tabarzin","taiaha","takoba","talibon","talwar","tambo","tanto","tekkan","tekko","tekpi","tepoztopilli","tewhatewha","tibetan","tlaximaltepoztli","tomahawk","tonfa","tongi","trident","trishula","tsurugi","ulfberht","vechevoral","vettukathi","voulge","waddy","waki","wheel","wodao","wrench","xiphos","yanmaodao","yari","yatagan","yawara","yoroi-do","yubi-bo","zanbato","zhanmadao","zhua","zweihander"],VK=["jacket","coat","breastplate","jerkin","hauberk","vest","tunic","chestguard"],qK=["pants","greaves","shinguards","trousers","shorts","leggings","skirt"],jK=["helmet","helm","mask","faceguard","cap","hat","hood"],UK=["sandals","boots","shoes","footwear","slippers"],qr=["atrocious","awful","dreadful","cheap","crummy","lousy","poor","abominable","rough","sad","gross","stinking","imperfect","flimsy","shoddy","inferior","bad","junky","unusual","aberrant","deviant","careless","cheesy","crappy","cruddy","defective","deficient","abnormal","dissatisfactory","erroneous","faulty","grungy","icky","inadequate","incorrect","slipshod","substandard","unsatisfactory","mediocre","inconsistent","anomalous","atypical","strange","ordinary","regular","common","fair","moderate","humdrum","intermediate","peculiar","medium","middling","standard","customary","everyday","passable","so-so","tolerable","undistinguished","unexceptional","decent","usual","green","blue","red","puce","mauve","scarlet","purple","acceptable","excellent","exceptional","familiar","favorable","positive","satisfactory","satisfying","nice","congenial","pleasing","sneaky","agreeable","polished","commendable","great","marvelous","superb","valuable","wonderful","boss","choice","prime","radical","superior","worthy","admirable","deluxe","first-class","first-rate","gnarly","honorable","neat","uncommon","precious","reputable","shipshape","splendid","stupendous","eminent","excellent","tiptop","odd","big","considerable","enormous","extreme","huge","immense","notable","strong","tremendous","vast","fat","husky","large","mammoth","ample","bulky","extended","rare","lovely","extensive","feral","howling","extravagant","gigantic","grievous","humongous","inordinate","jumbo","lengthy","long","oversize","malignant","fantastic","beautiful","magical","enchanted","prodigious","stupendous","titanic","towering","colossal","extraordinary","noteworthy","phenomenal","remarkable","singular","special","super","unique","unprecedented","unimaginable","unthinkable","heavenly","divine"],xl=["irritation","annoyance","embarassment","confusion","frostbite","flames","wounding","crushing","draining","bloodthirst","light","darkness","power","blasting","decimation","destruction","supremacy","obliteration","annihilation"],Km=["weak","boring","partial","limited","adequate","medium","substantial","blinding","complete","burning","total","explosive","poisonous","ethereal","overwhelming","incalculable","unfathomable","obliterating","limitless","infinite","eternal","supreme","perfect"],El=["comfort","screening","safety","cover","shelter","protection","happiness","security","defense","light","darkness","immunity","power","inviolability","supremacy","invulnerability","invincibility"],Qm=["weak","scant","boring","limited","partial","adequate","medium","substantial","complete","total","overwhelming","incalculable","unfathomable","limitless","infinite","eternal","supreme","perfect"],zK=[{name:"patchouli",attribute:"toughness",locations:[E.SmallTown,E.Forest,E.Jungle]},{name:"alangium",attribute:"speed",locations:[E.Forest,E.Jungle]},{name:"lobelia",attribute:"charisma",locations:[E.SmallTown,E.Forest]},{name:"lovage",attribute:"charisma",locations:[E.Forest]},{name:"anemone",attribute:"intelligence",locations:[E.Forest]},{name:"kudzu",attribute:"strength",locations:[E.Forest,E.SmallTown]},{name:"marlberry",attribute:"toughness",locations:[E.Beach,E.SmallPond]},{name:"aster",attribute:"toughness",locations:[E.Forest,E.SmallTown,E.SmallPond]},{name:"milkvetch",attribute:"strength",locations:[E.Desert]},{name:"safflower",attribute:"strength",locations:[E.Desert]},{name:"cinnamon",attribute:"intelligence",locations:[E.Jungle]},{name:"velvetleaf",attribute:"toughness",locations:[E.Forest,E.SmallTown]},{name:"goldthread",attribute:"charisma",locations:[E.SmallPond,E.Forest,E.MountainTops]},{name:"lilac",attribute:"intelligence",locations:[E.Forest,E.SmallTown]},{name:"jimson",attribute:"speed",locations:[E.SmallTown,E.Forest]},{name:"dendrobium",attribute:"charisma",locations:[E.Jungle,E.MountainTops,E.Forest]},{name:"ephedra",attribute:"speed",locations:[E.Desert]},{name:"forsythia",attribute:"speed",locations:[E.Forest,E.LargeCity]},{name:"honeylocust",attribute:"toughness",locations:[E.SmallPond,E.Forest]},{name:"licorice",attribute:"strength",locations:[E.SmallTown]},{name:"holly",attribute:"strength",locations:[E.Forest]},{name:"motherwort",attribute:"charisma",locations:[E.Forest,E.SmallTown]},{name:"arborvitae",attribute:"intelligence",locations:[E.SmallPond,E.Forest]},{name:"snakeroot",attribute:"intelligence",locations:[E.Forest]},{name:"foxglove",attribute:"toughness",locations:[E.SmallTown]},{name:"stringbush",attribute:"charisma",locations:[E.MountainTops]},{name:"ginger",attribute:"speed",locations:[E.Forest,E.Jungle]},{name:"ginkgo",attribute:"intelligence",locations:[E.Forest,E.SmallTown,E.LargeCity,E.Desert]},{name:"ginseng",attribute:"strength",locations:[E.MountainTops,E.Forest]}],Zm=["rotten","wilted","tiny","poor","weak","low-grade","average","healthy","abundant","quality","great","huge","exceptional","amazing","exquisite","sublime","spiritual","divine"];let Ml=(()=>{class t{constructor(e,n,r,o,a,s){this.injector=e,this.activityService=n,this.mainLoopService=r,this.characterService=o,this.logService=a,this.hellService=s,this.troubleTarget=E.SmallTown,this.locationMap={[E.Self]:{name:"Your Very Self",description:"Your own physical and spiritual being.",unlock:()=>!0},[E.SmallTown]:{name:"Your Home Town",description:"A small village, the ancestral home of your family.",unlock:()=>!0},[E.LargeCity]:{name:"A Large City",description:"A bustling city. A thriving hub of crafts and trades.",unlock:()=>this.characterService.attributes.speed.value>50},[E.SmallPond]:{name:"A Lake",description:"A freshwater lake ideal for fishing.",unlock:()=>this.characterService.attributes.speed.value>100},[E.Forest]:{name:"A Forest",description:"A forest where you can chop wood or look for a wide variety of herbs.",unlock:()=>this.characterService.attributes.speed.value>200},[E.Mine]:{name:"A Mine",description:"A mine where you can find coal or metal ores.",unlock:()=>this.characterService.attributes.speed.value>500},[E.Desert]:{name:"A Desert",description:"A sandy desert wasteland.",unlock:()=>this.characterService.attributes.speed.value>2e3},[E.Jungle]:{name:"A Jungle",description:"A lush tropical jungle.",unlock:()=>this.characterService.attributes.speed.value>1e4},[E.Dungeon]:{name:"A Creepy Dungeon",description:"This dark and dank dungeon is full of monsters.",unlock:()=>this.characterService.attributes.speed.value>2e5},[E.Beach]:{name:"A Sunny Beach",description:"A beautiful beach where you can definitely relax without worrying about any monsters creeping from the waves to murder you.",unlock:()=>this.characterService.attributes.speed.value>1e6},[E.DeepSea]:{name:"The Deep Sea",description:"The depths of the sea.",unlock:()=>this.characterService.attributes.speed.value>1e8},[E.MountainTops]:{name:"The Mountain Tops",description:"The tops of the highest mountains.",unlock:()=>this.characterService.attributes.speed.value>1e10},[E.Hell]:{name:"Hell",description:"The depths of Hell.",unlock:()=>!1}},this.unlockedLocations=[],this.mainLoopService.longTickSubject.subscribe(()=>{this.checkForUnlocks()}),this.mainLoopService.reincarnateSubject.subscribe(()=>{this.unlockedLocations=[],this.checkForUnlocks(!1)})}checkForUnlocks(e=!0){if(this.hellService.inHell)this.unlockedLocations=[E.Hell],this.troubleTarget=E.Hell;else{this.unlockedLocations.includes(E.Hell)&&(this.unlockedLocations=[]);for(const n in E){const r=n;this.unlockedLocations.includes(r)||this.locationMap[r].unlock()&&(this.unlockedLocations.push(r),e&&r!==E.Self&&r!==E.SmallTown&&this.logService.log(D.EVENT,"You have expanded your available locations and can now explore "+this.locationMap[r].name))}}}setTroubleLocation(e){this.troubleTarget=null===e?this.hellService.inHell?E.Hell:E.SmallTown:e}getProperties(){return{unlockedLocations:this.unlockedLocations,troubleTarget:this.troubleTarget}}setProperties(e){this.unlockedLocations=e.unlockedLocations,this.troubleTarget=e.troubleTarget}static{this.\u0275fac=function(n){return new(n||t)(P(we),P(bt),P(tt),P(Ie),P(Xi),P(We))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var fe=function(t){return t[t.Swim=0]="Swim",t[t.RaiseIsland=1]="RaiseIsland",t[t.BuildTower=2]="BuildTower",t[t.TameWinds=3]="TameWinds",t[t.LearnToFly=4]="LearnToFly",t[t.BefriendDragon=5]="BefriendDragon",t[t.ConquerTheNation=6]="ConquerTheNation",t[t.RearrangeTheStars=7]="RearrangeTheStars",t[t.OvercomeDeath=8]="OvercomeDeath",t}(fe||{});let ja=(()=>{class t{constructor(e,n,r,o,a,s){this.injector=e,this.logService=n,this.characterService=r,this.itemRepoService=o,this.battleService=s,this.impossibleTasksUnlocked=!1,this.activeTaskIndex=-1,this.nextTask=0,this.tasks=[{name:"Swim to the bottom of the ocean",description:"You find a scrap in an ancient text that leads you to believe that the secret of immortality lies buried deep beneath the ocean's currents.",taskType:fe.Swim,progressRequired:4e5},{name:"Raise an island from the sea",description:"At the bottom of the ocean you find a sunken island full of mystical wonders. Some of them will certainly help you in your quest for immortality, but they look too fragile to move by themselves. You'll need to pull the entire island to the surface.",taskType:fe.RaiseIsland,progressRequired:777},{name:"Build a tower past the heavens",description:"The undersea wonders point you to a secret shrine high above the clouds. You'll need to build an impossibly tall tower to reach it.",taskType:fe.BuildTower,progressRequired:1e3},{name:"Tame the winds",description:"The entrance to the shrine is sealed by a fierce hurricane that never stops blowing. You'll need to defeat the power of the storm to get in.",taskType:fe.TameWinds,progressRequired:1e3},{name:"Learn to fly",description:"A carving in the sky shrine shows you that the ancient dragons have the secret of immortality. The dragons never fly where mortals can reach them, but fortunately the shrine contains an inscription that teaches you the fundamentals of flight.",taskType:fe.LearnToFly,progressRequired:8888},{name:"Befriend a dragon",description:"You fly far and wide across the world and finally find an ancient dragon. You'll need to convince it to speak with you to get any secrets from it.",taskType:fe.BefriendDragon,progressRequired:5e3},{name:"Conquer the nation",description:"The dragon finally accepts you as a friend, but it isn't ready to help you achieve immortality yet. It shows you the fighting and suffering in the mortal realm and says the situation is most displeasing. Before it will help you, it wants you to solve the problem. Guess it's time to conquer the nation and set all things right.",taskType:fe.ConquerTheNation,progressRequired:300},{name:"Rearrange the stars",description:"The dragon smiles approvingly and teaches you the secrets of drawing power from the heavens. You could perform the ritual to achieve immortality now if the stars were properly aligned, but that won't happen again for billions of years. Maybe you could help it along.",taskType:fe.RearrangeTheStars,progressRequired:1e4},{name:"Overcome death itself",description:"The stars are aligned, the power to achieve immortality is finally within your grasp. The only thing you need to do now is use it to defeat death.",taskType:fe.OvercomeDeath,progressRequired:1}],this.taskProgress=[{progress:0,complete:!1},{progress:0,complete:!1},{progress:0,complete:!1},{progress:0,complete:!1},{progress:0,complete:!1},{progress:0,complete:!1},{progress:0,complete:!1},{progress:0,complete:!1},{progress:0,complete:!1}],setTimeout(()=>this.activityService=this.injector.get(bt)),a.longTickSubject.subscribe(()=>{if(!(this.nextTask>=this.tasks.length))for(let l=0;l<this.tasks.length;l++)if(this.taskProgress[l].complete&&this.tasks[l].taskType===this.nextTask)return void this.nextTask++}),a.reincarnateSubject.subscribe(()=>{this.reset()})}markPriorCompletions(){let e=!1;this.nextTask=-1;for(let n=this.tasks.length-1;n>=0;n--)(this.taskProgress[n].complete||e)&&(e=!0,this.taskProgress[n].progress=this.tasks[n].progressRequired,this.taskProgress[n].complete=!0),e&&this.nextTask<0?this.nextTask=n:0===n&&(this.nextTask=0)}reset(){this.markPriorCompletions();for(let e=this.tasks.length-1;e>=0;e--)this.taskProgress[e].progress<this.tasks[e].progressRequired&&(this.taskProgress[e].complete?this.taskProgress[e].progress=this.tasks[e].progressRequired:e!==fe.BuildTower&&(this.taskProgress[e].progress=0));this.activeTaskIndex=-1,this.activityService.checkRequirements(!0)}getProperties(){return{taskProgress:this.taskProgress,impossibleTasksUnlocked:this.impossibleTasksUnlocked,activeTaskIndex:this.activeTaskIndex}}setProperties(e){this.taskProgress=e.taskProgress||[{progress:0,complete:!1},{progress:0,complete:!1},{progress:0,complete:!1},{progress:0,complete:!1},{progress:0,complete:!1},{progress:0,complete:!1},{progress:0,complete:!1},{progress:0,complete:!1},{progress:0,complete:!1}],this.impossibleTasksUnlocked=e.impossibleTasksUnlocked,this.activeTaskIndex=void 0===e.activeTaskIndex?-1:e.activeTaskIndex,this.markPriorCompletions()}checkCompletion(){this.activeTaskIndex<0||this.taskProgress[this.activeTaskIndex].progress>=this.tasks[this.activeTaskIndex].progressRequired&&(this.taskProgress[this.activeTaskIndex].complete=!0,this.stopTask())}startTask(){this.activeTaskIndex=this.nextTask,this.activityService.checkRequirements(!0),this.activeTaskIndex===fe.OvercomeDeath&&this.battleService.addDeath()}stopTask(){this.activeTaskIndex===fe.Swim&&(this.taskProgress[this.activeTaskIndex].progress=0),this.activeTaskIndex=-1;for(let e=this.activityService.activityLoop.length-1;e>=0;e--)void 0!==this.activityService?.getActivityByType(this.activityService.activityLoop[e].activity)?.impossibleTaskIndex&&this.activityService.activityLoop.splice(e,1);this.activityService.checkRequirements(!0)}static{this.\u0275fac=function(n){return new(n||t)(P(we),P(Xi),P(Ie),P(Un),P(tt),P(Vt))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Zd={schedule(t){let i=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:n}=Zd;n&&(i=n.requestAnimationFrame,e=n.cancelAnimationFrame);const r=i(o=>{e=void 0,t(o)});return new je(()=>e?.(r))},requestAnimationFrame(...t){const{delegate:i}=Zd;return(i?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:i}=Zd;return(i?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0},B0=new class WK extends Jb{flush(i){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;i=i||n.shift();do{if(r=i.execute(i.state,i.delay))break}while((i=n[0])&&i.id===e&&n.shift());if(this._active=!1,r){for(;(i=n[0])&&i.id===e&&n.shift();)i.unsubscribe();throw r}}}(class $K extends Zb{constructor(i,e){super(i,e),this.scheduler=i,this.work=e}requestAsyncId(i,e,n=0){return null!==n&&n>0?super.requestAsyncId(i,e,n):(i.actions.push(this),i._scheduled||(i._scheduled=Zd.requestAnimationFrame(()=>i.flush(void 0))))}recycleAsyncId(i,e,n=0){if(null!=n&&n>0||null==n&&this.delay>0)return super.recycleAsyncId(i,e,n);i.actions.some(r=>r.id===e)||(Zd.cancelAnimationFrame(e),i._scheduled=void 0)}});let H0,GK=1;const Xm={};function fR(t){return t in Xm&&(delete Xm[t],!0)}const YK={setImmediate(t){const i=GK++;return Xm[i]=!0,H0||(H0=Promise.resolve()),H0.then(()=>fR(i)&&t()),i},clearImmediate(t){fR(t)}},{setImmediate:KK,clearImmediate:QK}=YK,Jm={setImmediate(...t){const{delegate:i}=Jm;return(i?.setImmediate||KK)(...t)},clearImmediate(t){const{delegate:i}=Jm;return(i?.clearImmediate||QK)(t)},delegate:void 0};new class XK extends Jb{flush(i){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;i=i||n.shift();do{if(r=i.execute(i.state,i.delay))break}while((i=n[0])&&i.id===e&&n.shift());if(this._active=!1,r){for(;(i=n[0])&&i.id===e&&n.shift();)i.unsubscribe();throw r}}}(class ZK extends Zb{constructor(i,e){super(i,e),this.scheduler=i,this.work=e}requestAsyncId(i,e,n=0){return null!==n&&n>0?super.requestAsyncId(i,e,n):(i.actions.push(this),i._scheduled||(i._scheduled=Jm.setImmediate(i.flush.bind(i,void 0))))}recycleAsyncId(i,e,n=0){if(null!=n&&n>0||null==n&&this.delay>0)return super.recycleAsyncId(i,e,n);i.actions.some(r=>r.id===e)||(Jm.clearImmediate(e),i._scheduled=void 0)}});function V0(t=0,i,e=DY){let n=-1;return null!=i&&(AA(i)?e=i:n=i),new st(r=>{let o=function tQ(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;o<0&&(o=0);let a=0;return e.schedule(function(){r.closed||(r.next(a++),0<=n?this.schedule(void 0,n):r.complete())},o)})}function mR(t,i=Sl){return function eQ(t){return Bt((i,e)=>{let n=!1,r=null,o=null,a=!1;const s=()=>{if(o?.unsubscribe(),o=null,n){n=!1;const c=r;r=null,e.next(c)}a&&e.complete()},l=()=>{o=null,a&&e.complete()};i.subscribe(wt(e,c=>{n=!0,r=c,o||un(t(c)).subscribe(o=wt(e,s,l))},()=>{a=!0,(!n||!o||o.closed)&&e.complete()}))})}(()=>V0(t,i))}let ep=(()=>{class t{_ngZone=_(ce);_platform=_(xi);_renderer=_(Hn).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new Y;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new st(n=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));const r=e>0?this._scrolled.pipe(mR(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):ue()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){const r=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(Qe(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(e){const n=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,e)&&n.push(o)}),n}_scrollableContainsElement(e,n){let r=En(n),o=e.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Xd=(()=>{class t{elementRef=_(xe);scrollDispatcher=_(ep);ngZone=_(ce);dir=_(br,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new Y;_renderer=_(Hi);_cleanupScroll;_elementScrolled=new Y;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",e=>this._elementScrolled.next(e))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const n=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=n.scrollHeight-n.clientHeight-e.bottom),r&&Bd()!=Br.NORMAL?(null!=e.left&&(e.right=n.scrollWidth-n.clientWidth-e.left),Bd()==Br.INVERTED?e.left=e.right:Bd()==Br.NEGATED&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=n.scrollWidth-n.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const n=this.elementRef.nativeElement;UA()?n.scrollTo(e):(null!=e.top&&(n.scrollTop=e.top),null!=e.left&&(n.scrollLeft=e.left))}measureScrollOffset(e){const n="left",r="right",o=this.elementRef.nativeElement;if("top"==e)return o.scrollTop;if("bottom"==e)return o.scrollHeight-o.clientHeight-o.scrollTop;const a=this.dir&&"rtl"==this.dir.value;return"start"==e?e=a?r:n:"end"==e&&(e=a?n:r),a&&Bd()==Br.INVERTED?e==n?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:a&&Bd()==Br.NEGATED?e==n?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:e==n?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return t})(),Il=(()=>{class t{_platform=_(xi);_listeners;_viewportSize;_change=new Y;_document=_(Ge,{optional:!0});constructor(){const e=_(ce),n=_(Hn).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){const r=o=>this._change.next(o);this._listeners=[n.listen("window","resize",r),n.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,n=this._getWindow(),r=e.documentElement,o=r.getBoundingClientRect();return{top:-o.top||e.body.scrollTop||n.scrollY||r.scrollTop||0,left:-o.left||e.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(mR(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Al=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({})}return t})(),pR=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({imports:[jd,Al,jd,Al]})}return t})();class q0{_attachedHost;attach(i){return this._attachedHost=i,i.attach(this)}detach(){let i=this._attachedHost;null!=i&&(this._attachedHost=null,i.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(i){this._attachedHost=i}}class Pl extends q0{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(i,e,n,r,o){super(),this.component=i,this.viewContainerRef=e,this.injector=n,this.projectableNodes=o}}class Rl extends q0{templateRef;viewContainerRef;context;injector;constructor(i,e,n,r){super(),this.templateRef=i,this.viewContainerRef=e,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(i,e=this.context){return this.context=e,super.attach(i)}detach(){return this.context=void 0,super.detach()}}class rQ extends q0{element;constructor(i){super(),this.element=i instanceof xe?i.nativeElement:i}}class tp{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(i){return i instanceof Pl?(this._attachedPortal=i,this.attachComponentPortal(i)):i instanceof Rl?(this._attachedPortal=i,this.attachTemplatePortal(i)):this.attachDomPortal&&i instanceof rQ?(this._attachedPortal=i,this.attachDomPortal(i)):void 0}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(i){this._disposeFn=i}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class oQ extends tp{outletElement;_appRef;_defaultInjector;_document;constructor(i,e,n,r,o){super(),this.outletElement=i,this._appRef=n,this._defaultInjector=r,this._document=o}attachComponentPortal(i){let e;if(i.viewContainerRef){const n=i.injector||i.viewContainerRef.injector,r=n.get(so,null,{optional:!0})||void 0;e=i.viewContainerRef.createComponent(i.component,{index:i.viewContainerRef.length,injector:n,ngModuleRef:r,projectableNodes:i.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else{const n=this._appRef,r=i.injector||this._defaultInjector||we.NULL,o=r.get(Fi,n.injector);e=HI(i.component,{elementInjector:r,environmentInjector:o,projectableNodes:i.projectableNodes||void 0}),n.attachView(e.hostView),this.setDisposeFn(()=>{n.viewCount>0&&n.detachView(e.hostView),e.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=i,e}attachTemplatePortal(i){let e=i.viewContainerRef,n=e.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(n);-1!==r&&e.remove(r)}),this._attachedPortal=i,n}attachDomPortal=i=>{const e=i.element,n=this._document.createComment("dom-portal");e.parentNode.insertBefore(n,e),this.outletElement.appendChild(e),this._attachedPortal=i,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(i){return i.hostView.rootNodes[0]}}let aQ=(()=>{class t extends Rl{constructor(){super(_(Ii),_(Vi))}static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[Le]})}return t})(),Ua=(()=>{class t extends tp{_moduleRef=_(so,{optional:!0});_document=_(Ge);_viewContainerRef=_(Vi);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}attached=new le;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const n=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,r=n.createComponent(e.component,{index:n.length,injector:e.injector||n.injector,projectableNodes:e.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return n!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(e){e.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}attachDomPortal=e=>{const n=e.element,r=this._document.createComment("dom-portal");e.setAttachedHost(this),n.parentNode.insertBefore(r,n),this._getRootNode().appendChild(n),this._attachedPortal=e,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(n,r)})};_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Le]})}return t})(),ip=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({})}return t})();const gR=UA();class lQ{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(i,e){this._viewportRuler=i,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const i=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=i.style.left||"",this._previousHTMLStyles.top=i.style.top||"",i.style.left=gi(-this._previousScrollPosition.left),i.style.top=gi(-this._previousScrollPosition.top),i.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const i=this._document.documentElement,n=i.style,r=this._document.body.style,o=n.scrollBehavior||"",a=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,i.classList.remove("cdk-global-scrollblock"),gR&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),gR&&(n.scrollBehavior=o,r.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}}class cQ{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(i,e,n,r){this._scrollDispatcher=i,this._ngZone=e,this._viewportRuler=n,this._config=r}attach(i){this._overlayRef=i}enable(){if(this._scrollSubscription)return;const i=this._scrollDispatcher.scrolled(0).pipe(Qe(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=i.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=i.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}class vR{enable(){}disable(){}attach(){}}function j0(t,i){return i.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function yR(t,i){return i.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class dQ{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(i,e,n,r){this._scrollDispatcher=i,this._viewportRuler=e,this._ngZone=n,this._config=r}attach(i){this._overlayRef=i}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();j0(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let uQ=(()=>{class t{_scrollDispatcher=_(ep);_viewportRuler=_(Il);_ngZone=_(ce);_document=_(Ge);constructor(){}noop=()=>new vR;close=e=>new cQ(this._scrollDispatcher,this._ngZone,this._viewportRuler,e);block=()=>new lQ(this._viewportRuler,this._document);reposition=e=>new dQ(this._scrollDispatcher,this._viewportRuler,this._ngZone,e);static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class np{positionStrategy;scrollStrategy=new vR;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(i){if(i){const e=Object.keys(i);for(const n of e)void 0!==i[n]&&(this[n]=i[n])}}}class hQ{connectionPair;scrollableViewProperties;constructor(i,e){this.connectionPair=i,this.scrollableViewProperties=e}}let _R=(()=>{class t{_attachedOverlays=[];_document=_(Ge);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),fQ=(()=>{class t extends _R{_ngZone=_(ce);_renderer=_(Hn).createRenderer(null,null);_cleanupKeydown;add(e){super.add(e),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=e=>{const n=this._attachedOverlays;for(let r=n.length-1;r>-1;r--)if(n[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>n[r]._keydownEvents.next(e));break}};static \u0275fac=(()=>{let e;return function(r){return(e||(e=xt(t)))(r||t)}})();static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mQ=(()=>{class t extends _R{_platform=_(xi);_ngZone=_(ce);_renderer=_(Hn).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(e){if(super.add(e),!this._isAttached){const n=this._document.body,r={capture:!0};this._cleanups=this._ngZone.runOutsideAngular(()=>[zi(this._renderer,n,"pointerdown",this._pointerDownListener,r),zi(this._renderer,n,"click",this._clickListener,r),zi(this._renderer,n,"auxclick",this._clickListener,r),zi(this._renderer,n,"contextmenu",this._clickListener,r)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(e=>e()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=e=>{this._pointerDownEventTarget=xn(e)};_clickListener=e=>{const n=xn(e),r="click"===e.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:n;this._pointerDownEventTarget=null;const o=this._attachedOverlays.slice();for(let a=o.length-1;a>-1;a--){const s=o[a];if(s._outsidePointerEvents.observers.length<1||!s.hasAttached())continue;if(bR(s.overlayElement,n)||bR(s.overlayElement,r))break;const l=s._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(e)):l.next(e)}};static \u0275fac=(()=>{let e;return function(r){return(e||(e=xt(t)))(r||t)}})();static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bR(t,i){const e=typeof ShadowRoot<"u"&&ShadowRoot;let n=i;for(;n;){if(n===t)return!0;n=e&&n instanceof ShadowRoot?n.host:n.parentNode}return!1}let SR=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(n,r){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return t})(),U0=(()=>{class t{_platform=_(xi);_containerElement;_document=_(Ge);_styleLoader=_(jo);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||zA()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const n=this._document.createElement("div");n.classList.add(e),zA()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}_loadStyles(){this._styleLoader.load(SR)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class pQ{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(i,e,n,r){this._renderer=e,this._ngZone=n,this.element=i.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=e.listen(this.element,"click",r)}detach(){this._ngZone.runOutsideAngular(()=>{const i=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(i,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),i.style.pointerEvents="none",i.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}}class z0{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new Y;_attachments=new Y;_detachments=new Y;_positionStrategy;_scrollStrategy;_locationChanges=je.EMPTY;_backdropRef=null;_previousHostParent;_keydownEvents=new Y;_outsidePointerEvents=new Y;_renders=new Y;_afterRenderRef;_afterNextRenderRef;constructor(i,e,n,r,o,a,s,l,c,d=!1,u,p){this._portalOutlet=i,this._host=e,this._pane=n,this._config=r,this._ngZone=o,this._keyboardDispatcher=a,this._document=s,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=d,this._injector=u,this._renderer=p,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=si(()=>Xh(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(i){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(i);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Xn(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const i=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),i}dispose(){const i=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,i&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(i){i!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=i,this.hasAttached()&&(i.attach(this),this.updatePosition()))}updateSize(i){this._config={...this._config,...i},this._updateElementSize()}setDirection(i){this._config={...this._config,direction:i},this._updateElementDirection()}addPanelClass(i){this._pane&&this._toggleClasses(this._pane,i,!0)}removePanelClass(i){this._pane&&this._toggleClasses(this._pane,i,!1)}getDirection(){const i=this._config.direction;return i?"string"==typeof i?i:i.value:"ltr"}updateScrollStrategy(i){i!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=i,this.hasAttached()&&(i.attach(this),i.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const i=this._pane.style;i.width=gi(this._config.width),i.height=gi(this._config.height),i.minWidth=gi(this._config.minWidth),i.minHeight=gi(this._config.minHeight),i.maxWidth=gi(this._config.maxWidth),i.maxHeight=gi(this._config.maxHeight)}_togglePointerEvents(i){this._pane.style.pointerEvents=i?"":"none"}_attachBackdrop(){const i="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new pQ(this._document,this._renderer,this._ngZone,e=>{this._backdropClick.next(e)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(i))}):this._backdropRef.element.classList.add(i)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(i,e,n){const r=Vd(e||[]).filter(o=>!!o);r.length&&(n?i.classList.add(...r):i.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{const i=this._renders.pipe(at(Ti(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),i.unsubscribe())})})}_disposeScrollStrategy(){const i=this._scrollStrategy;i?.disable(),i?.detach?.()}}const wR="cdk-overlay-connected-position-bounding-box",gQ=/([A-Za-z%]+)$/;class vQ{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new Y;_resizeSubscription=je.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(i,e,n,r,o){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=o,this.setOrigin(i)}attach(i){this._validatePositions(),i.hostElement.classList.add(wR),this._overlayRef=i,this._boundingBox=i.hostElement,this._pane=i.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const i=this._originRect,e=this._overlayRect,n=this._viewportRect,r=this._containerRect,o=[];let a;for(let s of this._preferredPositions){let l=this._getOriginPoint(i,r,s),c=this._getOverlayPoint(l,e,s),d=this._getOverlayFit(c,e,n,s);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,l);this._canFitWithFlexibleDimensions(d,c,n)?o.push({position:s,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,s)}):(!a||a.overlayFit.visibleArea<d.visibleArea)&&(a={overlayFit:d,overlayPoint:c,originPoint:l,position:s,overlayRect:e})}if(o.length){let s=null,l=-1;for(const c of o){const d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,s=c)}return this._isPushed=!1,void this._applyPosition(s.position,s.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(a.position,a.originPoint);this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&za(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(wR),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const i=this._lastPosition;if(i){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,i);this._applyPosition(i,e)}else this.apply()}withScrollableContainers(i){return this._scrollables=i,this}withPositions(i){return this._preferredPositions=i,-1===i.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(i){return this._viewportMargin=i,this}withFlexibleDimensions(i=!0){return this._hasFlexibleDimensions=i,this}withGrowAfterOpen(i=!0){return this._growAfterOpen=i,this}withPush(i=!0){return this._canPush=i,this}withLockedPosition(i=!0){return this._positionLocked=i,this}setOrigin(i){return this._origin=i,this}withDefaultOffsetX(i){return this._offsetX=i,this}withDefaultOffsetY(i){return this._offsetY=i,this}withTransformOriginOn(i){return this._transformOriginSelector=i,this}_getOriginPoint(i,e,n){let r,o;if("center"==n.originX)r=i.left+i.width/2;else{const a=this._isRtl()?i.right:i.left,s=this._isRtl()?i.left:i.right;r="start"==n.originX?a:s}return e.left<0&&(r-=e.left),o="center"==n.originY?i.top+i.height/2:"top"==n.originY?i.top:i.bottom,e.top<0&&(o-=e.top),{x:r,y:o}}_getOverlayPoint(i,e,n){let r,o;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,o="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:i.x+r,y:i.y+o}}_getOverlayFit(i,e,n,r){const o=kR(e);let{x:a,y:s}=i,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(a+=l),c&&(s+=c);let p=0-s,g=s+o.height-n.height,m=this._subtractOverflows(o.width,0-a,a+o.width-n.width),b=this._subtractOverflows(o.height,p,g),C=m*b;return{visibleArea:C,isCompletelyWithinViewport:o.width*o.height===C,fitsInViewportVertically:b===o.height,fitsInViewportHorizontally:m==o.width}}_canFitWithFlexibleDimensions(i,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,o=n.right-e.x,a=CR(this._overlayRef.getConfig().minHeight),s=CR(this._overlayRef.getConfig().minWidth);return(i.fitsInViewportVertically||null!=a&&a<=r)&&(i.fitsInViewportHorizontally||null!=s&&s<=o)}return!1}_pushOverlayOnScreen(i,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:i.x+this._previousPushAmount.x,y:i.y+this._previousPushAmount.y};const r=kR(e),o=this._viewportRect,a=Math.max(i.x+r.width-o.width,0),s=Math.max(i.y+r.height-o.height,0),l=Math.max(o.top-n.top-i.y,0),c=Math.max(o.left-n.left-i.x,0);let d=0,u=0;return d=r.width<=o.width?c||-a:i.x<this._viewportMargin?o.left-n.left-i.x:0,u=r.height<=o.height?l||-s:i.y<this._viewportMargin?o.top-n.top-i.y:0,this._previousPushAmount={x:d,y:u},{x:i.x+d,y:i.y+u}}_applyPosition(i,e){if(this._setTransformOrigin(i),this._setOverlayElementStyles(e,i),this._setBoundingBoxStyles(e,i),i.panelClass&&this._addPanelClasses(i.panelClass),this._positionChanges.observers.length){const n=this._getScrollVisibility();if(i!==this._lastPosition||!this._lastScrollVisibility||!function yQ(t,i){return t===i||t.isOriginClipped===i.isOriginClipped&&t.isOriginOutsideView===i.isOriginOutsideView&&t.isOverlayClipped===i.isOverlayClipped&&t.isOverlayOutsideView===i.isOverlayOutsideView}(this._lastScrollVisibility,n)){const r=new hQ(i,n);this._positionChanges.next(r)}this._lastScrollVisibility=n}this._lastPosition=i,this._isInitialRender=!1}_setTransformOrigin(i){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=i.overlayY;n="center"===i.overlayX?"center":this._isRtl()?"start"===i.overlayX?"right":"left":"start"===i.overlayX?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(i,e){const n=this._viewportRect,r=this._isRtl();let o,a,s,d,u,p;if("top"===e.overlayY)a=i.y,o=n.height-a+this._viewportMargin;else if("bottom"===e.overlayY)s=n.height-i.y+2*this._viewportMargin,o=n.height-s+this._viewportMargin;else{const g=Math.min(n.bottom-i.y+n.top,i.y),m=this._lastBoundingBoxSize.height;o=2*g,a=i.y-g,o>m&&!this._isInitialRender&&!this._growAfterOpen&&(a=i.y-m/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)p=n.width-i.x+2*this._viewportMargin,d=i.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)u=i.x,d=n.right-i.x;else{const g=Math.min(n.right-i.x+n.left,i.x),m=this._lastBoundingBoxSize.width;d=2*g,u=i.x-g,d>m&&!this._isInitialRender&&!this._growAfterOpen&&(u=i.x-m/2)}return{top:a,left:u,bottom:s,right:p,width:d,height:o}}_setBoundingBoxStyles(i,e){const n=this._calculateBoundingBoxRect(i,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;r.height=gi(n.height),r.top=gi(n.top),r.bottom=gi(n.bottom),r.width=gi(n.width),r.left=gi(n.left),r.right=gi(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=gi(o)),a&&(r.maxWidth=gi(a))}this._lastBoundingBoxSize=n,za(this._boundingBox.style,r)}_resetBoundingBoxStyles(){za(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){za(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(i,e){const n={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();za(n,this._getExactOverlayY(e,i,d)),za(n,this._getExactOverlayX(e,i,d))}else n.position="static";let s="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(s+=`translateX(${l}px) `),c&&(s+=`translateY(${c}px)`),n.transform=s.trim(),a.maxHeight&&(r?n.maxHeight=gi(a.maxHeight):o&&(n.maxHeight="")),a.maxWidth&&(r?n.maxWidth=gi(a.maxWidth):o&&(n.maxWidth="")),za(this._pane.style,n)}_getExactOverlayY(i,e,n){let r={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,i);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),"bottom"===i.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=gi(o.y),r}_getExactOverlayX(i,e,n){let a,r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,i);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),a=this._isRtl()?"end"===i.overlayX?"left":"right":"end"===i.overlayX?"right":"left","right"===a?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=gi(o.x),r}_getScrollVisibility(){const i=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:yR(i,n),isOriginOutsideView:j0(i,n),isOverlayClipped:yR(e,n),isOverlayOutsideView:j0(e,n)}}_subtractOverflows(i,...e){return e.reduce((n,r)=>n-Math.max(r,0),i)}_getNarrowedViewportRect(){const i=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+i-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:i-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(i,e){return"x"===e?null==i.offsetX?this._offsetX:i.offsetX:null==i.offsetY?this._offsetY:i.offsetY}_validatePositions(){}_addPanelClasses(i){this._pane&&Vd(i).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(i=>{this._pane.classList.remove(i)}),this._appliedPanelClasses=[])}_getOriginRect(){const i=this._origin;if(i instanceof xe)return i.nativeElement.getBoundingClientRect();if(i instanceof Element)return i.getBoundingClientRect();const e=i.width||0,n=i.height||0;return{top:i.y,bottom:i.y+n,left:i.x,right:i.x+e,height:n,width:e}}}function za(t,i){for(let e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t}function CR(t){if("number"!=typeof t&&null!=t){const[i,e]=t.split(gQ);return e&&"px"!==e?null:parseFloat(i)}return t||null}function kR(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const DR="cdk-global-overlay-wrapper";class _Q{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(i){const e=i.getConfig();this._overlayRef=i,this._width&&!e.width&&i.updateSize({width:this._width}),this._height&&!e.height&&i.updateSize({height:this._height}),i.hostElement.classList.add(DR),this._isDisposed=!1}top(i=""){return this._bottomOffset="",this._topOffset=i,this._alignItems="flex-start",this}left(i=""){return this._xOffset=i,this._xPosition="left",this}bottom(i=""){return this._topOffset="",this._bottomOffset=i,this._alignItems="flex-end",this}right(i=""){return this._xOffset=i,this._xPosition="right",this}start(i=""){return this._xOffset=i,this._xPosition="start",this}end(i=""){return this._xOffset=i,this._xPosition="end",this}width(i=""){return this._overlayRef?this._overlayRef.updateSize({width:i}):this._width=i,this}height(i=""){return this._overlayRef?this._overlayRef.updateSize({height:i}):this._height=i,this}centerHorizontally(i=""){return this.left(i),this._xPosition="center",this}centerVertically(i=""){return this.top(i),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const i=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:a,maxHeight:s}=n,l=!("100%"!==r&&"100vw"!==r||a&&"100%"!==a&&"100vw"!==a),c=!("100%"!==o&&"100vh"!==o||s&&"100%"!==s&&"100vh"!==s),d=this._xPosition,u=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let g="",m="",b="";l?b="flex-start":"center"===d?(b="center",p?m=u:g=u):p?"left"===d||"end"===d?(b="flex-end",g=u):("right"===d||"start"===d)&&(b="flex-start",m=u):"left"===d||"start"===d?(b="flex-start",g=u):("right"===d||"end"===d)&&(b="flex-end",m=u),i.position=this._cssPosition,i.marginLeft=l?"0":g,i.marginTop=c?"0":this._topOffset,i.marginBottom=this._bottomOffset,i.marginRight=l?"0":m,e.justifyContent=b,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const i=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(DR),n.justifyContent=n.alignItems=i.marginTop=i.marginBottom=i.marginLeft=i.marginRight=i.position="",this._overlayRef=null,this._isDisposed=!0}}let TR=(()=>{class t{_viewportRuler=_(Il);_document=_(Ge);_platform=_(xi);_overlayContainer=_(U0);constructor(){}global(){return new _Q}flexibleConnectedTo(e){return new vQ(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Mn=(()=>{class t{scrollStrategies=_(uQ);_overlayContainer=_(U0);_positionBuilder=_(TR);_keyboardDispatcher=_(fQ);_injector=_(we);_ngZone=_(ce);_document=_(Ge);_directionality=_(br);_location=_(gl);_outsideClickDispatcher=_(mQ);_animationsModuleType=_(Sn,{optional:!0});_idGenerator=_(mo);_renderer=_(Hn).createRenderer(null,null);_appRef;_styleLoader=_(jo);constructor(){}create(e){this._styleLoader.load(SR);const n=this._createHostElement(),r=this._createPaneElement(n),o=this._createPortalOutlet(r),a=new np(e);return a.direction=a.direction||this._directionality.value,new z0(o,n,r,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType,this._injector.get(Fi),this._renderer)}position(){return this._positionBuilder}_createPaneElement(e){const n=this._document.createElement("div");return n.id=this._idGenerator.getId("cdk-overlay-"),n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(an)),new oQ(e,null,this._appRef,this._injector,this._document)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const bQ=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],xR=new B("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const t=_(Mn);return()=>t.scrollStrategies.reposition()}});let rp=(()=>{class t{elementRef=_(xe);constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return t})(),ER=(()=>{class t{_overlay=_(Mn);_dir=_(br,{optional:!0});_overlayRef;_templatePortal;_backdropSubscription=je.EMPTY;_attachSubscription=je.EMPTY;_detachSubscription=je.EMPTY;_positionSubscription=je.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=_(xR);_disposeOnNavigation=!1;_ngZone=_(ce);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}backdropClick=new le;positionChange=new le;attach=new le;detach=new le;overlayKeydown=new le;overlayOutsideClick=new le;constructor(){const e=_(Ii),n=_(Vi);this._templatePortal=new Rl(e,n),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef?.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef?.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this.attachOverlay():this.detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=bQ);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),27===n.keyCode&&!this.disableClose&&!Nr(n)&&(n.preventDefault(),this.detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{const r=this._getOriginElement(),o=xn(n);(!r||r!==o&&!r.contains(o))&&this.overlayOutsideClick.next(n)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),n=new np({direction:this._dir||"ltr",positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||0===this.width)&&(n.width=this.width),(this.height||0===this.height)&&(n.height=this.height),(this.minWidth||0===this.minWidth)&&(n.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(e){const n=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof rp?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof rp?this.origin.elementRef.nativeElement:this.origin instanceof xe?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function sQ(t,i=!1){return Bt((e,n)=>{let r=0;e.subscribe(wt(n,o=>{const a=t(o,r++);(a||i)&&n.next(o),!a&&n.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()})),this.open=!0}detachOverlay(){this._overlayRef?.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.open=!1}static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",Oe],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",Oe],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",Oe],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",Oe],push:[2,"cdkConnectedOverlayPush","push",Oe],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",Oe]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Oi]})}return t})();const wQ={provide:xR,deps:[Mn],useFactory:function SQ(t){return()=>t.scrollStrategies.reposition()}};let $0=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({providers:[Mn,wQ],imports:[jd,ip,pR,pR]})}return t})();function Fl(t){return new st(i=>{un(t()).subscribe(i)})}function CQ(t,i){}class Jd{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext}let MR=(()=>{class t extends tp{_elementRef=_(xe);_focusTrapFactory=_(hP);_config;_interactivityChecker=_(d0);_ngZone=_(ce);_overlayRef=_(z0);_focusMonitor=_(Bm);_renderer=_(Hi);_platform=_(xi);_document=_(Ge,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=_(ji);_injector=_(we);_isDestroyed=!1;constructor(){super(),this._config=_(Jd,{optional:!0})||new Jd,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){const n=this._ariaLabelledByQueue.indexOf(e);n>-1&&(this._ariaLabelledByQueue.splice(n,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),n}attachTemplatePortal(e){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),n}attachDomPortal=e=>{this._portalOutlet.hasAttached();const n=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),n};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{o(),a(),e.removeAttribute("tabindex")},o=this._renderer.listen(e,"blur",r),a=this._renderer.listen(e,"mousedown",r)})),e.focus(n)}_focusByCssSelector(e,n){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,n)}_trapFocus(){this._isDestroyed||Xn(()=>{const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}},{injector:this._injector})}_restoreFocus(){const e=this._config.restoreFocus;let n=null;if("string"==typeof e?n=this._document.querySelector(e):"boolean"==typeof e?n=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(n=e),this._config.restoreFocus&&n&&"function"==typeof n.focus){const r=l0(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,n=l0();return e===n||e.contains(n)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=l0()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(n,r){if(1&n&&ti(Ua,7),2&n){let o;Ye(o=Ke())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(n,r){2&n&&Me("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[Le],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(n,r){1&n&&H(0,CQ,0,0,"ng-template",0)},dependencies:[Ua],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return t})();class W0{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new Y;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(i,e){this.overlayRef=i,this.config=e,this.disableClose=e.disableClose,this.backdropClick=i.backdropClick(),this.keydownEvents=i.keydownEvents(),this.outsidePointerEvents=i.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(n=>{27===n.keyCode&&!this.disableClose&&!Nr(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=i.detachments().subscribe(()=>{!1!==e.closeOnOverlayDetachments&&this.close()})}close(i,e){if(this.containerInstance){const n=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),n.next(i),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(i="",e=""){return this.overlayRef.updateSize({width:i,height:e}),this}addPanelClass(i){return this.overlayRef.addPanelClass(i),this}removePanelClass(i){return this.overlayRef.removePanelClass(i),this}}const IR=new B("DialogScrollStrategy",{providedIn:"root",factory:()=>{const t=_(Mn);return()=>t.scrollStrategies.block()}}),kQ=new B("DialogData"),DQ=new B("DefaultDialogConfig");let AR=(()=>{class t{_overlay=_(Mn);_injector=_(we);_defaultOptions=_(DQ,{optional:!0});_parentDialog=_(t,{optional:!0,skipSelf:!0});_overlayContainer=_(U0);_idGenerator=_(mo);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new Y;_afterOpenedAtThisLevel=new Y;_ariaHiddenElements=new Map;_scrollStrategy=_(IR);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=Fl(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe($i(void 0)));constructor(){}open(e,n){(n={...this._defaultOptions||new Jd,...n}).id=n.id||this._idGenerator.getId("cdk-dialog-"),n.id&&this.getDialogById(n.id);const o=this._getOverlayConfig(n),a=this._overlay.create(o),s=new W0(a,n),l=this._attachContainer(a,s,n);return s.containerInstance=l,this._attachDialogContent(e,s,l,n),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(s),s.closed.subscribe(()=>this._removeOpenDialog(s,!0)),this.afterOpened.next(s),s}closeAll(){G0(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){G0(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),G0(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const n=new np({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachContainer(e,n,r){const o=r.injector||r.viewContainerRef?.injector,a=[{provide:Jd,useValue:r},{provide:W0,useValue:n},{provide:z0,useValue:e}];let s;r.container?"function"==typeof r.container?s=r.container:(s=r.container.type,a.push(...r.container.providers(r))):s=MR;const l=new Pl(s,r.viewContainerRef,we.create({parent:o||this._injector,providers:a}));return e.attach(l).instance}_attachDialogContent(e,n,r,o){if(e instanceof Ii){const a=this._createInjector(o,n,r,void 0);let s={$implicit:o.data,dialogRef:n};o.templateContext&&(s={...s,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),r.attachTemplatePortal(new Rl(e,null,s,a))}else{const a=this._createInjector(o,n,r,this._injector),s=r.attachComponentPortal(new Pl(e,o.viewContainerRef,a));n.componentRef=s,n.componentInstance=s.instance}}_createInjector(e,n,r,o){const a=e.injector||e.viewContainerRef?.injector,s=[{provide:kQ,useValue:e.data},{provide:W0,useValue:n}];return e.providers&&("function"==typeof e.providers?s.push(...e.providers(n,e,r)):s.push(...e.providers)),e.direction&&(!a||!a.get(br,null,{optional:!0}))&&s.push({provide:br,useValue:{value:e.direction,change:ue()}}),we.create({parent:a||o,providers:s})}_removeOpenDialog(e,n){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const n=e.parentElement.children;for(let r=n.length-1;r>-1;r--){const o=n[r];o!==e&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function G0(t,i){let e=t.length;for(;e--;)i(t[e])}let xQ=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({providers:[AR],imports:[$0,ip,L9,ip]})}return t})();function EQ(t,i){}class PR{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration}const Y0="mdc-dialog--open",RR="mdc-dialog--opening",FR="mdc-dialog--closing";let OR=(()=>{class t extends MR{_animationMode=_(Sn,{optional:!0});_animationStateChanged=new le;_animationsEnabled="NoopAnimations"!==this._animationMode;_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?NR(this._config.enterAnimationDuration)??150:0;_exitAnimationDuration=this._animationsEnabled?NR(this._config.exitAnimationDuration)??75:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(LR,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(RR,Y0)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Y0),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Y0),this._animationsEnabled?(this._hostElement.style.setProperty(LR,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(FR)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(RR,FR)}_waitForAnimationToComplete(e,n){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(n,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(e){const n=super.attachComponentPortal(e);return n.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),n}static \u0275fac=(()=>{let e;return function(r){return(e||(e=xt(t)))(r||t)}})();static \u0275cmp=ne({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(n,r){2&n&&(md("id",r._config.id),Me("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),ot("_mat-animation-noopable",!r._animationsEnabled)("mat-mdc-dialog-container-with-actions",r._actionSectionCount>0))},features:[Le],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(n,r){1&n&&(h(0,"div",0)(1,"div",1),H(2,EQ,0,0,"ng-template",2),f()())},dependencies:[Ua],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}return t})();const LR="--mat-dialog-transition-duration";function NR(t){return null==t?null:"number"==typeof t?t:t.endsWith("ms")?Hd(t.substring(0,t.length-2)):t.endsWith("s")?1e3*Hd(t.substring(0,t.length-1)):"0"===t?0:null}var op=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(op||{});class ap{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new Y;_beforeClosed=new Y;_result;_closeFallbackTimeout;_state=op.OPEN;_closeInteractionType;constructor(i,e,n){this._ref=i,this._containerInstance=n,this.disableClose=e.disableClose,this.id=i.id,i.addPanelClass("mat-mdc-dialog-panel"),n._animationStateChanged.pipe(Qe(r=>"opened"===r.state),pi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(Qe(r=>"closed"===r.state),pi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),i.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Ti(this.backdropClick(),this.keydownEvents().pipe(Qe(r=>27===r.keyCode&&!this.disableClose&&!Nr(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function BR(t,i,e){return t._closeInteractionType=i,t.close(e)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(i){this._result=i,this._containerInstance._animationStateChanged.pipe(Qe(e=>"closing"===e.state),pi(1)).subscribe(e=>{this._beforeClosed.next(i),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=op.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(i){let e=this._ref.config.positionStrategy;return i&&(i.left||i.right)?i.left?e.left(i.left):e.right(i.right):e.centerHorizontally(),i&&(i.top||i.bottom)?i.top?e.top(i.top):e.bottom(i.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(i="",e=""){return this._ref.updateSize(i,e),this}addPanelClass(i){return this._ref.addPanelClass(i),this}removePanelClass(i){return this._ref.removePanelClass(i),this}getState(){return this._state}_finishDialogClose(){this._state=op.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const eu=new B("MatMdcDialogData"),AQ=new B("mat-mdc-dialog-default-options"),HR=new B("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const t=_(Mn);return()=>t.scrollStrategies.block()}});let Ht=(()=>{class t{_overlay=_(Mn);_defaultOptions=_(AQ,{optional:!0});_scrollStrategy=_(HR);_parentDialog=_(t,{optional:!0,skipSelf:!0});_idGenerator=_(mo);_dialog=_(AR);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new Y;_afterOpenedAtThisLevel=new Y;dialogConfigClass=PR;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=Fl(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe($i(void 0)));constructor(){this._dialogRefConstructor=ap,this._dialogContainerType=OR,this._dialogDataToken=eu}open(e,n){let r;(n={...this._defaultOptions||new PR,...n}).id=n.id||this._idGenerator.getId("mat-mdc-dialog-"),n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(e,{...n,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:n},{provide:Jd,useValue:n}]},templateContext:()=>({dialogRef:r}),providers:(a,s,l)=>(r=new this._dialogRefConstructor(a,n,l),r.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:s.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=o.componentRef,r.componentInstance=o.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const a=this.openDialogs.indexOf(r);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),NQ=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({providers:[Ht],imports:[xQ,$0,ip,vi,vi]})}return t})(),BQ=(()=>{class t{constructor(e){this.data=e}static{this.\u0275fac=function(n){return new(n||t)(T(eu))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-offline-modal"]],decls:3,vars:3,consts:[[1,"body"]],template:function(n,r){1&n&&(h(0,"div",0),y(1),O(2,"bigNumber"),f()),2&n&&(v(),j("While you were away you earned ",V(2,1,r.data.earnedTicks)," banked ticks."))},dependencies:()=>[It],styles:[".body[_ngcontent-%COMP%]{color:#cacaca}"]})}}return t})(),jr=(()=>{class t{constructor(e,n,r,o,a,s){this.logService=e,this.characterService=n,this.inventoryService=r,this.itemRepoService=o,this.homeService=a,this.dialog=s,this.soulCoreRank=0,this.meridianRank=0,this.bloodlineLabel="",this.bloodlineDescription="",this.bloodLineHomeRequirement=this.homeService.homesList[$e.Palace],this.storeOpened=!1,this.furnitureIndex=0,this.selectedItem=null,this.manuals=[],this.regularStoreItems=[this.itemRepoService.items.rice,this.itemRepoService.items.meat]}setFurnitureIndex(e){this.furnitureIndex=e,this.selectedItem=null}unlockManual(e){this.manuals.includes(e)||this.manuals.push(e)}buyManual(){this.selectedItem&&this.selectedItem.value<this.characterService.money&&(this.characterService.updateMoney(0-this.selectedItem.value),"manual"===this.selectedItem.type&&this.selectedItem.use?this.selectedItem.use():this.inventoryService.addItem(this.selectedItem))}isManualAvailable(){for(const e of this.manuals)if(e.owned&&!e.owned())return!0;return!1}buyFurniture(e){let n=e?.value;if(this.homeService.ownedFurniture.includes(e.id))n=0;else{if(!(this.characterService.money>=n))return;this.characterService.updateMoney(0-e.value),this.homeService.ownedFurniture.push(e.id)}const r=this.homeService.bedroomFurniture.findIndex(o=>e.id===o?.id);r>=0&&this.homeService.setFurniture(null,r),this.homeService.setFurniture(e,this.furnitureIndex)}updateAscensions(){this.soulCoreRank=this.characterService.soulCoreRank(),this.meridianRank=this.characterService.meridianRank(),this.bloodlineLabel=0===this.characterService.bloodlineRank?"Establish Bloodline":"Enhance Bloodline",0===this.characterService.bloodlineRank?(this.bloodlineDescription="End your current life, sacrifice all attributes and aptitudes that are not protected by the power of your previous soul core ascensions, and establish a bloodline. All of your future reincarnations will be born as your own descendants. Your weapons equipped on death will become family heirlooms and will be inherited by your future self.",this.bloodLineHomeRequirement=this.homeService.homesList[$e.Mansion]):1===this.characterService.bloodlineRank?(this.bloodlineDescription="End your current life, sacrifice all attributes and aptitudes that are not protected by the power of your previous soul core ascensions, and enhance your bloodline. Your armor and your weapons equipped on death will become family heirlooms and will be inherited by your future self.",this.bloodLineHomeRequirement=this.homeService.homesList[$e.Palace]):2===this.characterService.bloodlineRank?(this.bloodlineDescription="End your current life, sacrifice all attributes and aptitudes that are not protected by the power of your previous soul core ascensions, and enhance your bloodline. Your armor and your weapons equipped on death will become family heirlooms and will be inherited by your future self. You will also inherit some of your past self's money.",this.bloodLineHomeRequirement=this.homeService.homesList[$e.Castle]):3===this.characterService.bloodlineRank?(this.bloodlineDescription="End your current life, sacrifice all attributes and aptitudes that are not protected by the power of your previous soul core ascensions, and enhance your bloodline. Your armor and your weapons equipped on death will become family heirlooms and will be inherited by your future self. You will also inherit your past self's money plus interest.",this.bloodLineHomeRequirement=this.homeService.homesList[$e.Fortress]):4===this.characterService.bloodlineRank?(this.bloodlineDescription="End your current life, sacrifice all attributes and aptitudes that are not protected by the power of your previous soul core ascensions, and enhance your bloodline. Your armor and your weapons equipped on death will become family heirlooms and will be inherited by your future self. You will also inherit your past self's money plus interest. Your aptitudes extend your lifespan to a much greater degree.",this.bloodLineHomeRequirement=this.homeService.homesList[$e.Mountain]):5===this.characterService.bloodlineRank?(this.bloodlineDescription="End your current life, sacrifice all attributes and aptitudes that are not protected by the power of your previous soul core ascensions, and enhance your bloodline. You will keep your weapons, armor, and money with interest.",this.bloodLineHomeRequirement=this.homeService.homesList[$e.ForbiddenCity]):6===this.characterService.bloodlineRank?(this.bloodlineDescription="End your current life, sacrifice all attributes and aptitudes that are not protected by the power of your previous soul core ascensions, and enhance your bloodline. Your followers will have enhanced bloodlines and will follow you between incarnations. You will keep your weapons, armor, money with interest, and your Empire.",this.bloodLineHomeRequirement=this.homeService.homesList[$e.Capital]):7===this.characterService.bloodlineRank?(this.bloodlineDescription="End your current life, sacrifice all attributes and aptitudes that are not protected by the power of your previous soul core ascensions, and enhance your bloodline. Break through the limits of humanity. You will keep your weapons, armor, money with interest, and your Empire.",this.bloodLineHomeRequirement=this.homeService.homesList[$e.ImperialSeat]):8===this.characterService.bloodlineRank?(this.bloodlineDescription="End your current life, sacrifice all attributes and aptitudes that are not protected by the power of your previous soul core ascensions, and enhance your bloodline one last time. Finally, you will gain aptitudes every day from your current Attributes, improving constantly. You will keep your weapons, armor, money with interest, and your Empire.",this.bloodLineHomeRequirement=this.homeService.homesList[$e.Godthrone]):9===this.characterService.bloodlineRank&&(this.bloodlineDescription="You can't enhance your bloodline any further. Your armor and your weapons equipped on death will become family heirlooms and will be inherited by your future self. You will also inherit your past self's money plus interest. Your aptitudes extend your lifespan to a much greater degree. Your followers also have enhanced bloodlines and will follow you between incarnations. You will keep your Empire, and can break through the limits of humanity. Finally, you will gain aptitudes every day from your current Attributes.")}condenseSoulCore(){this.soulCoreRank>=9?this.logService.log(D.EVENT,"You can't condense your soul core any further."):this.characterService.attributes.spirituality.value<this.characterService.condenseSoulCoreCost?this.logService.log(D.EVENT,"You don't have the spirituality required to ascend."):this.gemRequirementsMet(this.soulCoreRank+12,this.soulCoreRank>2)?(this.characterService.condenseSoulCore(),this.dialog.closeAll()):this.logService.log(D.EVENT,"You don't have the gems required to ascend.")}reinforceMeridians(){this.meridianRank>=9?this.logService.log(D.EVENT,"You can't reinforce your meridians any further."):this.characterService.attributes.spirituality.value<this.characterService.reinforceMeridiansCost?this.logService.log(D.EVENT,"You don't have the spirituality required to ascend."):this.gemRequirementsMet(this.meridianRank+16,this.soulCoreRank>2)?(this.characterService.reinforceMeridians(),this.dialog.closeAll()):this.logService.log(D.EVENT,"You don't have the gems required to ascend.")}upgradeBloodline(){this.characterService.attributes.spirituality.value<this.characterService.bloodlineCost?this.logService.log(D.EVENT,"You don't have the spirituality required to ascend."):this.characterService.bloodlineRank>=9?this.logService.log(D.EVENT,"You can't enhance your bloodline any further."):this.homeService.home.type<this.bloodLineHomeRequirement.type?this.logService.log(D.EVENT,"You don't have a powerful enough home to ascend."):(this.characterService.upgradeBloodline(),this.dialog.closeAll())}gemRequirementsMet(e,n){const r=10*e;if(n){const o=this.inventoryService.itemStacks.find(d=>"gem"===d.item?.type&&"metal"===d.item.subtype&&d.item.value>=r),a=this.inventoryService.itemStacks.find(d=>"gem"===d.item?.type&&"earth"===d.item.subtype&&d.item.value>=r),s=this.inventoryService.itemStacks.find(d=>"gem"===d.item?.type&&"water"===d.item.subtype&&d.item.value>=r),l=this.inventoryService.itemStacks.find(d=>"gem"===d.item?.type&&"fire"===d.item.subtype&&d.item.value>=r),c=this.inventoryService.itemStacks.find(d=>"gem"===d.item?.type&&"wood"===d.item.subtype&&d.item.value>=r);return void 0!==o&&void 0!==a&&void 0!==s&&void 0!==l&&void 0!==c}return void 0!==this.inventoryService.itemStacks.find(a=>"gem"===a.item?.type&&a.item.value>=r)}static{this.\u0275fac=function(n){return new(n||t)(P(Xi),P(Ie),P(he),P(Un),P(zt),P(Ht))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),sp=(()=>{class t{constructor(e,n,r,o,a,s,l,c,d,u,p,g,m,b,C){this.mainLoopService=e,this.injector=n,this.logService=r,this.characterService=o,this.inventoryService=a,this.itemRepoService=s,this.storeService=l,this.battleService=c,this.homeService=d,this.farmService=u,this.activityService=p,this.followerService=g,this.impossibleTaskService=m,this.hellService=b,this.locationService=C,this.unlockedAchievements=[],this.achievements=[{name:"One Week",description:"You survived your first week of this game!",hint:"Try some activities.",check:()=>this.mainLoopService.totalTicks>7,effect:()=>{this.mainLoopService.timeUnlocked=!0,this.gameStateService.unlockPanel("timePanel"),this.gameStateService.addLayoutPanel("timePanel",0,8,30,6),this.gameStateService.unlockPanel("schedulePanel"),this.gameStateService.addLayoutPanel("schedulePanel",0,14,30,14)},unlocked:!1},{name:"Big Earner",description:"You earned your first few taels by working hard.<br>Maybe you should invest in some land and a better home.",hint:"Make some money.",check:()=>this.characterService.money>=100,effect:()=>{this.homeService.homeUnlocked=!0,this.gameStateService.unlockPanel("homePanel"),this.gameStateService.addLayoutPanel("homePanel",68,15,30,20)},unlocked:!1},{name:"Bookworm",description:"You opened the manuals shop and unlocked the "+this.itemRepoService.items.restartActivityManual.name,hint:"There are lots of buttons in this game, maybe an aspiring immortal should press a few.",check:()=>this.storeService.storeOpened,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.restartActivityManual)},unlocked:!1},{name:"Played a Bit",description:"You worked toward immortality for ten years across your lifetimes and unlocked the "+this.itemRepoService.items.fastPlayManual.name,hint:"Just keep playing. I'm sure this will come to an aspiring immortal eventually.",check:()=>this.mainLoopService.totalTicks>3650,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.fastPlayManual)},unlocked:!1},{name:"Basically an Expert",description:"You worked toward immortality for one hundred years across your lifetimes and unlocked the "+this.itemRepoService.items.fasterPlayManual.name,hint:"Just keep playing. I'm sure this will come to an aspiring immortal eventually.",check:()=>this.mainLoopService.totalTicks>36500,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.fasterPlayManual)},unlocked:!1},{name:"Farmer",description:"You plowed your first field!",hint:"Cultivation might be important for cultivation.",check:()=>this.farmService.fallowPlots>0,effect:()=>{this.gameStateService?.unlockPanel("farmPanel")},unlocked:!1},{name:"Gear Up!",description:"You created some equipment and now you can wear it.",hint:"Some jobs let you make stuff you can use.",check:()=>this.inventoryService.equipmentCreated>0||null!==this.characterService.equipment.head||null!==this.characterService.equipment.body||null!==this.characterService.equipment.leftHand||null!==this.characterService.equipment.rightHand||null!==this.characterService.equipment.legs||null!==this.characterService.equipment.feet,effect:()=>{this.inventoryService.equipmentUnlocked=!0,this.gameStateService.unlockPanel("equipmentPanel")},unlocked:!1},{name:"Stuff!",description:"You got your first item.",hint:"Find anything.",check:()=>this.inventoryService.totalItemsReceived>0,effect:()=>{this.gameStateService.unlockPanel("inventoryPanel")},unlocked:!1},{name:"Attack!",description:"You are under attack by an enemy.",hint:"They are coming for you.",check:()=>this.battleService.totalEnemies>0,effect:()=>{this.battleService.battlesUnlocked=!0,this.gameStateService.unlockPanel("battlePanel"),this.gameStateService.addLayoutPanel("battlePanel",68,35,30,20)},unlocked:!1},{name:"Persistent Reincarnator",description:"You lived one thousand years across your lifetimes and unlocked the "+this.itemRepoService.items.fastestPlayManual.name,hint:"The millennial.",check:()=>this.mainLoopService.totalTicks>365e3,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.fastestPlayManual)},unlocked:!1},{name:"Cabbage Stand",description:"You can now grow cabbage in your farm. Watch out for kids running by when you sell them.",hint:"Work that farm!",check:()=>this.characterService.attributes.woodLore.value>2,effect:()=>{this.farmService.unlockCrop("cabbage")},unlocked:!1},{name:"The Magical Fruit",description:"You can now grow beans in your farm.",hint:"They're not really a fruit.",check:()=>this.characterService.attributes.woodLore.value>5,effect:()=>{this.farmService.unlockCrop("beans")},unlocked:!1},{name:"Little Green Trees",description:"You can now grow broccoli in your farm.",hint:"Work that farm!",check:()=>this.characterService.attributes.woodLore.value>10,effect:()=>{this.farmService.unlockCrop("broccoli")},unlocked:!1},{name:"A Gourd You Might Not Know",description:"You can now grow calabash in your farm.",hint:"Work that farm!",check:()=>this.characterService.attributes.woodLore.value>50,effect:()=>{this.farmService.unlockCrop("calabash")},unlocked:!1},{name:"It's Not Just for Boba",description:"You can now grow taro in your farm.",hint:"Work that farm!",check:()=>this.characterService.attributes.woodLore.value>100,effect:()=>{this.farmService.unlockCrop("taro")},unlocked:!1},{name:"First Fruits",description:"You can now grow pears in your farm.",hint:"Work that farm!",check:()=>this.characterService.attributes.woodLore.value>1e3,effect:()=>{this.farmService.unlockCrop("pear")},unlocked:!1},{name:"They Come in Different Sizes",description:"You can now grow melons in your farm.",hint:"Work that farm!",check:()=>this.characterService.attributes.woodLore.value>1e4,effect:()=>{this.farmService.unlockCrop("melon")},unlocked:!1},{name:"Purple Sweet and Sour",description:"You can now grow plums in your farm.",hint:"Work that farm!",check:()=>this.characterService.attributes.woodLore.value>1e6,effect:()=>{this.farmService.unlockCrop("plum")},unlocked:!1},{name:"A Tiny Taste of Immortality",description:"You can now grow apricot in your farm.",hint:"Work that farm!",check:()=>this.characterService.attributes.woodLore.value>1e9,effect:()=>{this.farmService.unlockCrop("apricot")},unlocked:!1},{name:"Almost Eating Like an Immortal",description:"You can now grow peaches in your farm.",hint:"Work that farm!",check:()=>this.characterService.attributes.woodLore.value>1e12,effect:()=>{this.farmService.unlockCrop("peach")},unlocked:!1},{name:"Sweeter Still",description:"You can now grow Divine Peaches in your farm.",hint:"Descend to the depths and bring back the sweetest fruit.",check:()=>this.inventoryService.divinePeachesUnlocked,effect:()=>{this.farmService.unlockCrop("divinePeach")},unlocked:!1},{name:"Veteran Cultivator",description:"You lived ten thousand years across your lifetimes and unlocked the "+this.itemRepoService.items.totalPlaytimeManual.name,hint:"A long life. Myriad years.",check:()=>this.mainLoopService.totalTicks>365e4,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.totalPlaytimeManual)},unlocked:!1},{name:"Going Places",description:"You have reached beyond the confines of your home town and started to explore the wider world.",hint:"Run, Forrest, Run!",check:()=>this.locationService.unlockedLocations.length>2,effect:()=>{this.gameStateService?.unlockPanel("locationPanel")},unlocked:!1},{name:"Arts and Crafts",description:"You have unlocked your very own workstations to create your own gear, meals, potions, and pills. You can now access the crafting panel.",hint:"You need a big house for this.",check:()=>this.homeService.home.maxWorkstations>0,effect:()=>{this.gameStateService?.unlockPanel("craftingPanel")},unlocked:!1},{name:"Clang! Clang! Clang!",description:"You reached proficiency in blacksmithing and can now work as a Blacksmith without going through an apprenticeship (you still need the attributes for the Blacksmithing activity).",hint:"There are lots of activities an aspiring immortal can do on their way to immortality.<br>Maybe you should try getting good at a few of them.",check:()=>this.activityService.completedApprenticeships.includes(R.Blacksmithing),effect:()=>{},unlocked:!1},{name:"Bubble, Bubble",description:"You reached proficiency in alchemy and can now work as a Alchemist without going through an apprenticeship (you still need the attributes for the Alchemy activity).",hint:"There are lots of activities an aspiring immortal can do on their way to immortality.<br>Maybe you should try getting good at a few of them.",check:()=>this.activityService.completedApprenticeships.includes(R.Alchemy),effect:()=>{},unlocked:!1},{name:"Tanner",description:"You reached proficiency in leatherworking and can now work as a Leatherworker without going through an apprenticeship (you still need the attributes for the Leatherworking activity).",hint:"There are lots of activities an aspiring immortal can do on their way to immortality.<br>Maybe you should try getting good at a few of them.",check:()=>this.activityService.completedApprenticeships.includes(R.Leatherworking),effect:()=>{},unlocked:!1},{name:"Carpenter",description:"You reached proficiency in woodworking and can now work as a Woodworker without going through an apprenticeship (you still need the attributes for the Woodworking activity).",hint:"There are lots of activities an aspiring immortal can do on their way to immortality.<br>Maybe you should try getting good at a few of them.",check:()=>this.activityService.completedApprenticeships.includes(R.Woodworking),effect:()=>{},unlocked:!1},{name:"Just Put It Over There",description:"You have become an expert at loading inputs into your crafting workstations, and have unlocked a manual to automatically load workstations as you acquire more of the same ingredients.",hint:"It sure would be nice to have the ore just go right into the smelter.",check:()=>this.homeService.totalCrafts>888,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.perpetualCraftingManual)},unlocked:!1},{name:"Addict",description:"You got a taste of those sweet, sweet empowerment pills and want more.",hint:"Master of all.",check:()=>this.characterService.empowermentFactor>1,effect:()=>{},unlocked:!1},{name:"Habitual User",displayName:"Dope",description:"You got every last drop you could out of those pills and now you feel nothing from them.<br>At least they didn't kill you or do lasting harm, right?",hint:"D.A.R.E.",check:()=>this.characterService.empowermentFactor>=1953.65,effect:()=>{},unlocked:!1},{name:"Rice, Rice, Baby",description:"You've eaten healthy food 88 items and unlocked the "+this.itemRepoService.items.autoEatManual.name,hint:"Better than dumpster diving.",check:()=>this.inventoryService.lifetimeUsedFood>=88,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.autoEatManual)},unlocked:!1},{name:"This Sparks Joy",description:"You used 888 items and unlocked the "+this.itemRepoService.items.autoUseManual.name,hint:"Immortals should know the potential of the things they use.",check:()=>this.inventoryService.lifetimeUsedItems>=888,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.autoUseManual)},unlocked:!1},{name:"This Does Not Spark Joy",description:"You filled your entire inventory and unlocked the "+this.itemRepoService.items.autoSellManual.name,hint:"So much stuff.",check:()=>0===this.inventoryService.openInventorySlots(),effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.autoSellManual)},unlocked:!1},{name:"Waster",description:"You throw away 10,000 items and unlocked the "+this.itemRepoService.items.betterStorageManual.name,hint:"Too much stuff.",check:()=>this.inventoryService.thrownAwayItems>=1e4,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.betterStorageManual)},unlocked:!1},{name:"Landfill",description:"You throw away 100,000 items and unlocked the "+this.itemRepoService.items.evenBetterStorageManual.name,hint:"Way, way too much stuff.",check:()=>this.inventoryService.maxStackSize>=1e3&&this.inventoryService.thrownAwayItems>=1e5,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.evenBetterStorageManual)},unlocked:!1},{name:"Hoarder",description:"You really love holding vast amounts of materials and unlocked the "+this.itemRepoService.items.bestStorageManual.name,hint:"Just stop already, it's too much.<br>Why would an aspiring immortal need this much stuff?",check:()=>this.inventoryService.maxStackSize>=1e4&&this.inventoryService.thrownAwayItems>=1e6,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.bestStorageManual)},unlocked:!1},{name:"All Things In Moderation",hint:"Immortals know what to use and what to toss.",description:"You sold and used 8888 items and unlocked the "+this.itemRepoService.items.autoBalanceManual.name,check:()=>this.inventoryService.lifetimeUsedItems>=8888&&this.inventoryService.lifetimeSoldItems>=8888,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.autoBalanceManual)},unlocked:!1},{name:"Land Rush",description:"Your vast tracts of land make you the envy of all your neighbors",hint:"Immortals are known for their vast real estate holdings.",check:()=>this.homeService.land>=520,effect:()=>{},unlocked:!1},{name:"Real Housewives of Immortality",description:"You acquired a very fine home and will now start each life with additional stamina from the abundance available in your youth.<br>Did you just become the young master?",hint:"Immortals value a good home.",check:()=>this.homeService.homeValue>=$e.CourtyardHouse,effect:()=>{this.characterService.startingStaminaBoost=!0},unlocked:!1},{name:"Off to Ikea",description:"You set up some great furniture and can now better discern where furniture items should go to improve the flow of Qi in your home.",hint:"Immortals have discerning taste in furnishings.",check:()=>this.characterService.fengshuiScore>=5,effect:()=>{this.homeService.seeFurnitureEffects=!0},unlocked:!1},{name:"Don't Sell My Bed!",description:"Your taste in decor is so excellent that the furniture in your bedroom will be preserved untouched until your next reincarnation.",hint:"Strong family bonds mean more heirlooms.",check:()=>this.characterService.fengshuiScore>=10,effect:()=>{this.homeService.keepFurniture=!0},unlocked:!1},{name:"Time to Buy a Tractor",description:"You plowed 888 fields and unlocked the "+this.itemRepoService.items.basicHealthRegenerationManual.name,hint:"An aspiring immortal should have vast tracts of fertile land.",check:()=>this.farmService.fields.length+this.farmService.extraFields>=888,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.basicHealthRegenerationManual)},unlocked:!1},{name:"Industrial Revolution",description:"You've mastered many professions. Good job!",hint:"Hard work has many rewards.",check:()=>this.activityService.completedApprenticeships.includes(R.Blacksmithing)&&this.activityService.completedApprenticeships.includes(R.Alchemy)&&this.activityService.completedApprenticeships.includes(R.Leatherworking)&&this.activityService.completedApprenticeships.includes(R.Woodworking),effect:()=>{},unlocked:!1},{name:"First Sip",description:"You drank your first potions and unlocked a special equipment slot",hint:"Just take a taste. You'll like it.",check:()=>this.inventoryService.lifetimePotionsUsed>=1,effect:()=>{this.characterService.itemPouches.length<1&&this.characterService.itemPouches.push(this.inventoryService.getEmptyItemStack())},unlocked:!1},{name:"Guzzler",description:"You drank 888 potions and unlocked a second potion slot.",hint:"Glug, glug, glug.",check:()=>this.inventoryService.lifetimePotionsUsed>=88,effect:()=>{this.characterService.itemPouches.length<2&&this.characterService.itemPouches.push(this.inventoryService.getEmptyItemStack())},unlocked:!1},{name:"Junkie",description:"You took 88 pills in one lifetime and unlocked the "+this.itemRepoService.items.autoPillManual.name,hint:"An aspiring immortal should take the red one.<br>Take it over and over.",check:()=>this.inventoryService.lifetimePillsUsed>=88,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.autoPillManual)},unlocked:!1},{name:"Monster Slayer",description:"You fought 131 monsters and unlocked the "+this.itemRepoService.items.autoTroubleManual.name,hint:"An aspiring immortal bravely faces down their foes.",check:()=>this.battleService.totalKills>=131,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.autoTroubleManual)},unlocked:!1},{name:"Weapons Master",description:"You wielded powerful weapons of both metal and wood and unlocked the "+this.itemRepoService.items.autoWeaponMergeManual.name,hint:"Left and right.",check:()=>!!(this.characterService.equipment?.rightHand?.weaponStats&&this.characterService.equipment?.rightHand?.weaponStats.baseDamage>=60&&this.characterService.equipment?.leftHand?.weaponStats&&this.characterService.equipment?.leftHand?.weaponStats.baseDamage>=60),effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.autoWeaponMergeManual)},unlocked:!1},{name:"Practically Invincible",description:"You equipped yourself with powerful armor and unlocked the "+this.itemRepoService.items.autoArmorMergeManual.name,hint:"Suit up.",check:()=>!!(this.characterService.equipment?.head?.armorStats&&this.characterService.equipment?.head?.armorStats.defense>=60&&this.characterService.equipment?.body?.armorStats&&this.characterService.equipment?.body?.armorStats.defense>=60&&this.characterService.equipment?.legs?.armorStats&&this.characterService.equipment?.legs?.armorStats.defense>=60&&this.characterService.equipment?.feet?.armorStats&&this.characterService.equipment?.feet?.armorStats.defense>=60),effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.autoArmorMergeManual)},unlocked:!1},{name:"Gemologist",description:"You acquired 88 gems and unlocked the "+this.itemRepoService.items.useSpiritGemManual.name,hint:"Ooh, shiny.",check:()=>this.inventoryService.gemsAcquired>=88,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.useSpiritGemManual)},unlocked:!1},{name:"Ingredient Snob",description:"You achieved a deep understanding of herbs and unlocked the "+this.itemRepoService.items.bestHerbsManual.name,hint:"An aspiring immortal should take the red one. Take it over and over.",check:()=>this.characterService.attributes.woodLore.value>1024&&this.characterService.attributes.waterLore.value>1024,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.bestHerbsManual)},unlocked:!1},{name:"Wood Snob",description:"You achieved a deep understanding of wood and unlocked the "+this.itemRepoService.items.bestWoodManual.name,hint:"There are lots of activities an aspiring immortal can do on their way to immortality.<br>Maybe you should try getting good at a few of them.",check:()=>this.characterService.attributes.woodLore.value>1024&&this.characterService.attributes.intelligence.value>1024,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.bestWoodManual)},unlocked:!1},{name:"Ore Snob",displayName:"Smelting Snob",description:"You achieved a deep understanding of digging and smelting metal and unlocked the "+this.itemRepoService.items.bestOreManual.name,hint:"There are lots of activities an aspiring immortal can do on their way to immortality.<br>Maybe you should try getting good at a few of them.",check:()=>this.characterService.attributes.metalLore.value>1024&&this.characterService.attributes.earthLore.value>1024,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.bestOreManual)},unlocked:!1},{name:"Hide Snob",displayName:"Hunting Snob",description:"You achieved a deep understanding of hunting and gathering hides and unlocked the "+this.itemRepoService.items.bestHidesManual.name,hint:"There are lots of activities an aspiring immortal can do on their way to immortality.<br>Maybe you should try getting good at a few of them.",check:()=>this.characterService.attributes.animalHandling.value>1024&&this.characterService.attributes.speed.value>1024,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.bestHidesManual)},unlocked:!1},{name:"Gem Snob",description:"You have sold 888 gems and unlocked the "+this.itemRepoService.items.bestGemsManual.name,hint:"I hear the market for fine jewelry is so hot right now.",check:()=>this.inventoryService.lifetimeGemsSold>=888,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.bestGemsManual)},unlocked:!1},{name:"Unlimited Taels",description:"Your family has unlocked the secrets of compound interest.<br>You probably never have to worry about money again.",hint:"Family first. Especially in matters of money.",check:()=>this.characterService.bloodlineRank>=4,effect:()=>{},unlocked:!1},{name:"Not Unlimited Taels",description:"You filled up your purse, your wall safe, the box under your bed, and a giant money pit in the backyard.<br>You just can't hold any more money.",hint:"How rich can you get?",check:()=>this.characterService.money>=this.characterService.maxMoney-1e21,effect:()=>{},unlocked:!1},{name:"Grandpa's Old Tent",description:"You've gone through four cycles of reincarnation and come to understand the value of grandfathers.",hint:"Just keep playing. I'm sure this will come to an aspiring immortal eventually.",check:()=>this.characterService.totalLives>4,effect:()=>{this.homeService.grandfatherTent=!0},unlocked:!1},{name:"Paternal Pride",description:"You've worked 888 days of odd jobs and come to understand the value of fathers.",hint:"Just keep playing. I'm sure this will come to an aspiring immortal eventually.",check:()=>this.activityService.oddJobDays>888,effect:()=>{this.characterService.fatherGift=!0},unlocked:!1},{name:"Maternal Love",description:"You've done 888 days of begging and come to understand the value of mothers.",hint:"Just keep playing. I'm sure this will come to an aspiring immortal eventually.",check:()=>this.activityService.beggingDays>888,effect:()=>{this.inventoryService.motherGift=!0},unlocked:!1},{name:"Grandma's Stick",description:"You've developed spirituality and come to understand the value of grandmothers.",hint:"Just keep playing. I'm sure this will come to an aspiring immortal eventually.",check:()=>this.characterService.attributes.spirituality.value>0,effect:()=>{this.inventoryService.grandmotherGift=!0},unlocked:!1},{name:"Weapons Grandmaster",description:"You wielded epic weapons of both metal and wood and unlocked the "+this.itemRepoService.items.bestWeaponManual.name,hint:"Power level 10,000!",check:()=>!!(this.characterService.equipment?.rightHand?.weaponStats&&this.characterService.equipment?.rightHand?.weaponStats.baseDamage>=8888&&this.characterService.equipment?.leftHand?.weaponStats&&this.characterService.equipment?.leftHand?.weaponStats.baseDamage>=8888),effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.bestWeaponManual)},unlocked:!1},{name:"Tank!",description:"You armored yourself with epic defenses and unlocked the "+this.itemRepoService.items.bestArmorManual.name,hint:"Don't hurt me!",check:()=>!!(this.characterService.equipment?.head?.armorStats&&this.characterService.equipment?.head?.armorStats.defense>=8888&&this.characterService.equipment?.body?.armorStats&&this.characterService.equipment?.body?.armorStats.defense>=8888&&this.characterService.equipment?.legs?.armorStats&&this.characterService.equipment?.legs?.armorStats.defense>=8888&&this.characterService.equipment?.feet?.armorStats&&this.characterService.equipment?.feet?.armorStats.defense>=8888),effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.bestArmorManual)},unlocked:!1},{name:"You're a wizard now.",description:"Enlightenment!<br>You have achieved a permanent and deep understanding of elemental balance with your high, balanced levels of lore in each of the five elements.<br>Qi is now unlocked for all future lives.",hint:"Seek the balance of the dao.",check:()=>{const w=this.characterService.attributes.fireLore.value,k=this.characterService.attributes.earthLore.value,F=this.characterService.attributes.woodLore.value,U=this.characterService.attributes.waterLore.value,X=this.characterService.attributes.metalLore.value,J=Math.min(X,U,F,k,w),ee=Math.max(X,U,F,k,w);return J>=1e3&&ee<=1.21*J},effect:()=>{this.characterService.qiUnlocked=!0,0===this.characterService.status.qi.max&&(this.characterService.status.qi.max=1,this.characterService.status.qi.value=1),this.activityService.checkRequirements(!0)},unlocked:!1},{name:"Qi Infused",description:"You have saturated your body with qi energy and unlocked the "+this.itemRepoService.items.basicQiRegenerateManual.name,hint:"You'll need to infuse every last cell",check:()=>this.characterService.healthBonusMagic>=1e6,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.basicQiRegenerateManual)},unlocked:!1},{name:"Sect Leader",description:"You have become powerful enough that you may now start attracting followers.",hint:"Ascension has its privileges.",check:()=>this.characterService.soulCoreRank()>=1&&this.characterService.meridianRank()>=1&&this.characterService.bloodlineRank>=1,effect:()=>{this.followerService.followersUnlocked=!0,this.gameStateService.unlockPanel("followersPanel")},unlocked:!1},{name:"Animal Friend",description:"You have found your first pet and unlocked the Pets panel.",hint:"Not all followers are humans.",check:()=>this.followerService.pets.length>0,effect:()=>{this.gameStateService.unlockPanel("petsPanel")},unlocked:!1},{name:"Preserved Ingredients",description:"Your family has learned to keep their ancestors' workstations exactly as they left them.",hint:"A good family knows not to touch Grandpa's herb stash.",check:()=>this.characterService.bloodlineRank>=6,effect:()=>{this.homeService.keepWorkstationInputs=!0},unlocked:!1},{name:"Impossible",description:"You have achieved incredible power and are ready to begin taking on impossible tasks.",hint:"No one can exceed the limits of humanity. It can't be done.",check:()=>this.characterService.soulCoreRank()>=9&&this.characterService.meridianRank()>=9&&this.characterService.bloodlineRank>=5,effect:()=>{this.impossibleTaskService.impossibleTasksUnlocked=!0,this.gameStateService.unlockPanel("impossibleTasksPanel")},unlocked:!1},{name:"Ascended Techniques",description:"You have followed the path of immortality through your first ascension and can now start to develop special combat techniques that will be handed down through your family.",hint:"Ascension has its privileges.",check:()=>this.characterService.soulCoreRank()>=1||this.characterService.meridianRank()>=1||this.characterService.bloodlineRank>=1,effect:()=>{this.battleService.maxFamilyTechniques<1&&(this.battleService.maxFamilyTechniques=1)},unlocked:!1},{name:"Blazing Blood",description:"Your ascensions have led you to the secrets of maintaining a second family combat technique.",hint:"A strong family knows many techniques.",check:()=>this.characterService.soulCoreRank()>=5&&this.characterService.meridianRank()>=5&&this.characterService.bloodlineRank>=5,effect:()=>{this.battleService.maxFamilyTechniques<2&&(this.battleService.maxFamilyTechniques=2)},unlocked:!1},{name:"Dragon Blood",description:"Your ascensions have led you to the secrets of maintaining a third family combat technique.<br>Your descendants will curse you for all the training they will have to do.",hint:"An awe-inspiring family knows many techniques.",check:()=>this.characterService.soulCoreRank()>=9&&this.characterService.meridianRank()>=9&&this.characterService.bloodlineRank>=8,effect:()=>{this.battleService.maxFamilyTechniques<3&&(this.battleService.maxFamilyTechniques=3)},unlocked:!1},{name:"Bruce Is Proud of You",description:"You have developed your first family technique and unlocked the Combat Techniques Panel.",hint:"Train. Then train some more.",check:()=>this.battleService.techniques.length>3,effect:()=>{this.gameStateService?.unlockPanel("techniquePanel")},unlocked:!1},{name:"Sturdy Walls",description:"You have built a home strong enough to endure for generations.",hint:"Build back better.",check:()=>this.homeService.home.type>=$e.SimpleHut,effect:()=>{this.homeService.keepHome=!0},unlocked:!1},{name:"Don't Sell My Stuff!",description:"Your descendants have so much respect for you that they will preserve one stack of items for your next reincarnation.",hint:"Strong family bonds have advantages.",check:()=>this.characterService.bloodlineRank>=3,effect:()=>{this.inventoryService.heirloomSlots<1&&(this.inventoryService.heirloomSlots=1)},unlocked:!1},{name:"Mine Forever",description:"Your descendants have so much respect for you that they will preserve three stacks of items for your next reincarnation.",hint:"Strong family bonds have advantages.",check:()=>this.characterService.bloodlineRank>=5,effect:()=>{this.inventoryService.heirloomSlots<3&&(this.inventoryService.heirloomSlots=3)},unlocked:!1},{name:"Eternal Nation",description:"You have established an empire that will never fall, and a bloodline that will always inherit it.",hint:"Bloodline Empire.",check:()=>this.homeService.home.type>=$e.Capital&&this.characterService.bloodlineRank>=7,effect:()=>{this.characterService.imperial=!0},unlocked:!1},{name:"Limit Breaker",description:"You have broken past human limits and improve constantly! What new fate awaits you?",hint:"999",check:()=>this.characterService.bloodlineRank>=9,effect:()=>{},unlocked:!1},{name:"Harmony of Mind and Body",description:"You have balanced your powerful mind and body and unlocked the ability to use your Qi to strike down your enemies.",hint:"The dao embraces all things in perfect harmony.",check:()=>{const w=this.characterService.attributes.speed.value,k=this.characterService.attributes.toughness.value,F=this.characterService.attributes.charisma.value,U=this.characterService.attributes.intelligence.value,X=this.characterService.attributes.strength.value,J=Math.min(w,k,F,U,X),ee=Math.max(w,k,F,U,X);return J>=1e6&&ee<=1.21*J},effect:()=>{this.battleService.addQiAttack()},unlocked:!1},{name:"Unity of Spirit, Mind, and Body",description:"You have balanced your powerful spirit with your mind and body.<br>You unlocked the ability to use your Qi to protect yourself.",hint:"The dao embraces all things in perfect harmony.",check:()=>{const w=this.characterService.attributes.spirituality.value,k=this.characterService.attributes.speed.value,F=this.characterService.attributes.toughness.value,U=this.characterService.attributes.charisma.value,X=this.characterService.attributes.intelligence.value,J=this.characterService.attributes.strength.value,ee=Math.min(k,F,U,X,J,w),se=Math.max(k,F,U,X,J,w);return ee>=1e6&&se<=1.21*ee},effect:()=>{this.battleService.addQiShield()},unlocked:!1},{name:"Disposable Followers",description:"You have recruited so many people you can now freely dismiss followers using the "+this.itemRepoService.items.followerAutoDismissManual.name,hint:"The One Hundred Companions.",check:()=>this.followerService.followersRecruited>=100,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.followerAutoDismissManual)},unlocked:!1},{name:"Loyal Followers",description:"One of your followers has trained under you so long they have nothing else to learn.<br>In an epiphany you realized how to double your new followers' lifespan.",hint:"Endless training.",check:()=>this.followerService.highestLevel>=100,effect:()=>{this.followerService.followerLifespanDoubled=!0},unlocked:!1},{name:"Ascension",description:"You have developed enough spirituality to ascend.",hint:"Only with spiritual development can you ascend to higher states.",check:()=>this.characterService.attributes.spirituality.value>=10,effect:()=>{this.characterService.ascensionUnlocked=!0},unlocked:!1},{name:"I don't want to go.",description:"You have lived many lives and unlocked the "+this.itemRepoService.items.autoPauseSettingsManual.name,hint:"Just keep playing. I'm sure this will come to an aspiring immortal eventually.",check:()=>this.characterService.totalLives>=48&&this.mainLoopService.totalTicks>18250,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.autoPauseSettingsManual)},unlocked:!1},{name:"Breaks are Good",description:"You have collected two hour's worth of banked time and unlocked the "+this.itemRepoService.items.bankedTicksEfficiencyManual.name,hint:"Take a day off from cultivating.",check:()=>this.mainLoopService.bankedTicks>288e3,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.bankedTicksEfficiencyManual)},unlocked:!1},{name:"Breaks are Bad",description:"You died from overwork performing an activity without necessary rest and unlocked the "+this.itemRepoService.items.autoRestManual.name,hint:"There's no time to rest, cultivating is life.",check:()=>this.activityService.activityDeath||this.characterService.immortal,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.autoRestManual)},unlocked:!1},{name:"Still Spry",description:"You have lived to be 300 years old and unlocked the "+this.itemRepoService.items.ageSpeedManual.name,hint:"One step to becoming immortal is to live longer.",check:()=>this.characterService.age>109500,effect:()=>{this.storeService.unlockManual(this.itemRepoService.items.ageSpeedManual)},unlocked:!1},{name:"Immortality",description:"Congratulations! You are now immortal.",hint:"Name of the game.",check:()=>this.characterService.immortal,effect:()=>{this.activityService.checkRequirements(!0)},unlocked:!1},{name:"Headhunter",description:"You've sorted through so many applicants that you can now always find followers you want.",hint:"You didn't really want one thousand scouts, did you?",check:()=>this.followerService.totalDismissed>888,effect:()=>{this.followerService.onlyWantedFollowers=!0},unlocked:!1},{name:"Yes We Can!",description:"You found Bob the Builder.",hint:"Can we fix it?",check:()=>{for(const w of this.followerService.followers)if(("Robert"===w.name||"Bob"===w.name)&&"builder"===w.job)return!0;return!1},effect:()=>{},unlocked:!1},{name:"The Old Soulsmith",description:"She's retired from soulsmithing and just goes fishing now. Also, go reread Cradle.",hint:"Lindon's soulsmithing tutor.",check:()=>{for(const w of this.followerService.followers)if("Gesha"===w.name&&"fisher"===w.job)return!0;return!1},effect:()=>{},unlocked:!1},{name:"They're Grrrrreat",description:"You have made an animal friend who can provide you with a tasty breakfast.",hint:"You'll need to find a very special pet.",check:()=>{for(const w of this.followerService.pets)if(("Tony"===w.name||"Antonio"===w.name)&&"tiger"===w.job)return!0;return!1},effect:()=>{},unlocked:!1},{name:"Don't mess with Grandma",description:"You have crafted the mightiest stick.<br>Grandmother would be so proud.",hint:"The best stick.",check:()=>"Grandmother's Walking Stick"===this.characterService.equipment.leftHand?.name&&(this.characterService.equipment.leftHand.weaponStats?.baseDamage||0)>1e9,effect:()=>{},unlocked:!1},{name:"Smooth Farming",description:"You have harvested crops every day for a month and can now count on more regular and reliable harvests.",hint:"Farm-fresh produce every day would be lovely.",check:()=>this.farmService.consecutiveHarvests>=30,effect:()=>{this.homeService.smoothFarming=!0},unlocked:!1},{name:"The Pain Begins",description:"You have begun to work your way through hell.",hint:"You are not ready.",check:()=>this.hellService.inHell,effect:()=>{this.gameStateService?.unlockPanel("hellStatusPanel")},unlocked:!1},{name:"Let It Burn",description:"You have burned an insane amount of money.",hint:"You didn't want that money anyway.",check:()=>this.hellService.burnedMoney>1e9,effect:()=>{this.hellService.fasterHellMoney=!0},unlocked:!1},{name:"Peaches Peaches Peaches",description:"They're so good, you just want to drink them down.",hint:"There is more alchemy to learn.",check:()=>this.inventoryService.divinePeachesUnlocked,effect:()=>{this.characterService.itemPouches.length<3&&this.characterService.itemPouches.push(this.inventoryService.getEmptyItemStack())},unlocked:!1},{name:"Rise of the God Slayers",description:"A new threat has emerged, more powerful than anything you've ever faced.",hint:"Godhood comes with issues.",check:()=>this.characterService.god,effect:()=>{this.battleService.godSlayersUnlocked=!0,this.battleService.godSlayersEnabled=!0},unlocked:!1},{name:"You Like Me!",description:"You clicked the credits button. Hurray!",hint:"Who made this thing?",check:()=>this.gameStateService.creditsClicked,effect:()=>{},unlocked:!1},{name:"You Really Like Me!",description:"You clicked the support link and saw my first book. Thanks!",hint:"Do you really, really?",check:()=>this.gameStateService.supportClicked,effect:()=>{},unlocked:!1}],this.mainLoopService.longTickSubject.subscribe(()=>{this.gameStateService||(this.gameStateService=this.injector.get(Ut));for(const w of this.achievements)this.unlockedAchievements.includes(w.name)||w.check()&&this.unlockAchievement(w,!0)})}unlockAchievement(e,n){n&&(this.unlockedAchievements.push(e.name),this.logService.log(D.STORY,e.description),this.characterService.toast("Achievement Unlocked: "+(e.displayName?e.displayName:e.name))),e.effect(),e.unlocked=!0,n&&this.gameStateService?.savetoLocalStorage()}getProperties(){return{unlockedAchievements:this.unlockedAchievements}}setProperties(e){this.gameStateService||(this.gameStateService=this.injector.get(Ut)),this.unlockedAchievements=e.unlockedAchievements||[];for(const n of this.achievements)this.unlockedAchievements.includes(n.name)&&this.unlockAchievement(n,!1)}static{this.\u0275fac=function(n){return new(n||t)(P(tt),P(we),P(Xi),P(Ie),P(he),P(Un),P(jr),P(Vt),P(zt),P(wr),P(bt),P(Gt),P(ja),P(We),P(Ml))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const lp="immortalityIdle2GameState";let Ut=(()=>{class t{constructor(e,n,r,o,a,s,l,c,d,u,p,g,m,b,C){this.characterService=e,this.homeService=n,this.farmService=r,this.inventoryService=o,this.logService=a,this.activityService=s,this.itemRepoService=l,this.battleService=c,this.followersService=d,this.mainLoopService=u,this.dialog=p,this.achievementService=g,this.impossibleTaskService=m,this.locationService=b,this.hellService=C,this.lastSaved=(new Date).getTime(),this.isDarkMode=!1,this.isExperimental=window.location.href.includes("experimental"),this.gameStartTimestamp=(new Date).getTime(),this.easyModeEver=!1,this.saveInterval=300,this.lockPanels=!1,this.dragging=!1,this.layout=$(void 0),this.allPanelsUsed=!1,this.creditsClicked=!1,this.supportClicked=!1,this.hardResetting=!1,this.panels=[{id:"timePanel",name:"Time",icon:"timer",panelHelp:"Control the flow of time, stopping and starting it as you see fit. What an immense power!<br>Time will automatically pause if you have no activities on your schedule that you can perform.",unlocked:!1},{id:"schedulePanel",name:"Schedule",icon:"calendar_month",panelHelp:"Choose activities to add to your schedule by dragging and dropping them here or pressing the calendar button on activities.<br>When you allow time to move forward, you will perform each activity in your schedule in the order it is listed.<br>You can move scheduled activities around or repeat activities over multiple days.",unlocked:!1},{id:"attributesPanel",name:"Attributes",icon:"bar_chart",panelHelp:"Your attributes define your growing immortal characteristics.<br>You can grow your attributes through the activities that you choose.<br>Aptitudes that you developed in your past lives can make it easier to develop attributes in your current life.",unlocked:!0},{id:"followersPanel",name:"Followers",icon:"groups",panelHelp:"Your followers can aid you in many ways.<br>Each has a specific skill that they will use to your benefit.<br>Followers must be taken care of, so having them will cost you some money each day, and more powerful followers will have more expensive needs you will have to take care of.",unlocked:!1},{id:"healthPanel",name:"Status",icon:"favorite",panelHelp:"Maintaining your health is an important part of becoming immortal.<br>If your health reaches 0, you will die and need to try for immortality once you are reincarnated in your next life.",unlocked:!0},{id:"activityPanel",name:"Activities",icon:"self_improvement",panelHelp:"Click an activity to spend a day doing it.<br>Achieving immortality doesn't happen overnight.<br>It takes lifetimes of hard work.<br>Choose your activities to take care of your basic needs and develop your immortal potential.<br>At first you'll only know how to do a few things, but as you develop your attributes, more options will become available.<br>Don't forget to schedule some rest too!<br>You'll need to take a break now and then in your journey toward immortality.",unlocked:!0},{id:"battlePanel",name:"Battles",icon:"fort",panelHelp:"Battling enemies is an essential part of your quest for immortality.<br>You'll need to be strong enough to fight them off if you want to stay alive.",unlocked:!1},{id:"equipmentPanel",name:"Equipment",icon:"colorize",panelHelp:"You will need to arm yourself with weapons and protective gear if you want to fight through the many battles that await you on your journey to immortality.<br>Legends even speak of extraordinary cultivators who can combine items of the same type to produce even stronger equipment.<br>Watch out, each piece of gear will take damage with use and you will need to constantly improve it to keep it strong.",unlocked:!1},{id:"homePanel",name:"Home",icon:"home",panelHelp:"Your home is an essential part of your life.<br>A better home allows you to recover and has room for furniture that can aid your immortal development.",unlocked:!1},{id:"inventoryPanel",name:"Inventory",icon:"shopping_bag",panelHelp:"The items that you gain during your quest for immortality will appear here.<br>Hover your cursor over an item to learn more about it.",unlocked:!1},{id:"logPanel",name:"Log",icon:"feed",panelHelp:"A record of the events that lead you to immortality will surely be of interest to those who sing your legend in the ages to come.<br>You can filter out the events that are less interesting to you in the present.",unlocked:!0},{id:"portalPanel",name:"Portals",icon:"radio_button_checked",panelHelp:"Take a portal to a different plane of existence.",unlocked:!1},{id:"petsPanel",name:"Pets",icon:"pets",panelHelp:"Your pets can aid you in many ways.<br>Each has a specific skill that they will use to your benefit.",unlocked:!1},{id:"farmPanel",name:"Farm",icon:"solar_power",panelHelp:"Your farm can grow healthy food that can aid you on your journey to immortality.",unlocked:!1},{id:"locationPanel",name:"Location",icon:"public",panelHelp:"The locations you have available depend mostly on your speed, and will determine what activities you have available. You can select which locations you would prefer to find monsters in when you look for trouble.",unlocked:!1},{id:"impossibleTasksPanel",name:"Impossible Tasks",icon:"priority_high",panelHelp:"The path to immortality runs through these impossible tasks. Only by completing them can you find the way to live forever.",unlocked:!1},{id:"techniquePanel",name:"Combat Techniques",icon:"sports_martial_arts",panelHelp:"Developing unique family techniques is an essential part of a powerful bloodline and a useful step on your way to immortality.",unlocked:!1},{id:"craftingPanel",name:"Crafting",icon:"carpenter",panelHelp:"Creating weapons, armor, potions, and pills is an essential part of becoming an immortal.",unlocked:!1},{id:"hellStatusPanel",name:"Hell Progress",icon:"local_fire_department",panelHelp:"Your progress through the terrors of hell.",unlocked:!1}],window.GameStateService=this,u.longTickSubject.subscribe(()=>{(new Date).getTime()-this.lastSaved>=1e3*this.saveInterval&&this.savetoLocalStorage()}),this.layout.set([]),this.resetPanels()}resetPanels(){this.layout.set([{id:"healthPanel",x:0,y:0,w:98,h:8},{id:"attributesPanel",x:0,y:15,w:30,h:20},{id:"activityPanel",x:30,y:15,w:38,h:40},{id:"logPanel",x:0,y:30,w:98,h:25}]),this.updateAllPanelsUsed()}changeLayoutPanel(e,n=!1){const r=JSON.parse(JSON.stringify(this.layout()));let o=0;const a=this.layout();if(a){for(let l=0;l<this.panels.length;l++)this.panels[l].id===a[e].id&&(o=l);const s=this.getNextUnusedPanelId(o,n);if(""===s)return;r[e].id=s,this.layout.set(r)}}removeLayoutPanel(e){const n=JSON.parse(JSON.stringify(this.layout()));n.splice(e,1),this.layout.set(n),this.updateAllPanelsUsed()}addLayoutPanel(e="",n=0,r=0,o=30,a=20){const s=this.layout();if(s&&""===e&&s.find(u=>u.id===e))return;const l=JSON.parse(JSON.stringify(s));let c=e;""===e&&(c=this.getNextUnusedPanelId(0)),""!==c&&(l.push({id:c,x:n,y:r,w:o,h:a}),this.layout.set(l),this.updateAllPanelsUsed())}getNextUnusedPanelId(e,n=!1){const r=this.layout();if(!r)return this.panels[e+1].id;if(n){for(let o=e-1;o>=0;o--)if(this.panels[o].unlocked&&!r.find(({id:a})=>a===this.panels[o].id))return this.panels[o].id;for(let o=this.panels.length-1;o>=e;o--)if(this.panels[o].unlocked&&!r.find(({id:a})=>a===this.panels[o].id))return this.panels[o].id}else{for(let o=e+1;o<this.panels.length;o++)if(this.panels[o].unlocked&&!r.find(({id:a})=>a===this.panels[o].id))return this.panels[o].id;for(let o=0;o<=e;o++)if(this.panels[o].unlocked&&!r.find(({id:a})=>a===this.panels[o].id))return this.panels[o].id}return""}updateAllPanelsUsed(){this.allPanelsUsed=!0;const e=this.layout();if(e)for(let n=0;n<this.panels.length;n++)if(this.panels[n].unlocked&&!e.find(({id:r})=>r===this.panels[n].id))return void(this.allPanelsUsed=!1)}unlockPanel(e){const n=this.panels.find(({id:r})=>r===e);n&&(n.unlocked=!0),this.updateAllPanelsUsed()}changeAutoSaveInterval(e){!e||e<1?e=1:e>900&&(e=900),this.saveInterval=e,this.savetoLocalStorage()}savetoLocalStorage(){this.hardResetting||(window.localStorage.setItem(lp+this.getDeploymentFlavor(),this.getGameExport()),this.lastSaved=(new Date).getTime())}loadFromLocalStorage(){const e=window.localStorage.getItem(lp+this.getDeploymentFlavor());return!!e&&(this.importGame(e),this.dialog.open(BQ,{data:{earnedTicks:this.mainLoopService.earnedTicks},autoFocus:!1}),!0)}importLayout(e){const n=JSON.parse(e);!n||!n.layout||this.layout.set(n.layout)}importGame(e){let n;if("iig"!==e.substring(0,3))return;n=decodeURIComponent(atob(e.substring(3)));const r=JSON.parse(n),o=this.validateGameState(r);this.impossibleTaskService.setProperties(o.impossibleTasks),this.hellService.setProperties(o.hell||{}),this.characterService.setProperties(o.character),this.homeService.setProperties(o.home),this.farmService.setProperties(o.farm),this.inventoryService.setProperties(o.inventory);for(const a of this.inventoryService.itemStacks){if(!a.item)continue;const s=this.itemRepoService.getItemById(a.item.id);s&&(a.item=s)}this.locationService.setProperties(o.locations),this.activityService.setProperties(o.activities),this.battleService.setProperties(o.battles),this.followersService.setProperties(o.followers),this.logService.setProperties(o.logs),this.mainLoopService.setProperties(o.mainLoop),this.achievementService.setProperties(o.achievements),this.isDarkMode=o.darkMode||!1,this.gameStartTimestamp=o.gameStartTimestamp||(new Date).getTime(),this.easyModeEver=o.easyModeEver||!1,this.saveInterval=o.saveInterval||10,this.followersService.updateFollowerCap(),o.layout&&this.layout.set(o.layout),this.lockPanels=o.lockPanels??!0,this.creditsClicked=o.creditsClicked||!1,this.supportClicked=o.supportClicked||!1,this.updateAllPanelsUsed()}validateGameState(e){return{achievements:e.achievements??{unlockedAchievements:[]},character:this.getCharacterProperties(e.character),inventory:this.getInventoryProperties(e.inventory),home:this.getHomeProperties(e.home),farm:this.getFarmProperties(e.farm),activities:this.getActivitiesProperties(e.activities),locations:this.getLocationsProperties(e.locations),battles:this.getBattlesProperties(e.battles),followers:this.getFollowersProperties(e.followers),logs:this.getLogsProperties(e.logs),mainLoop:this.getMainLoopProperties(e.mainLoop),impossibleTasks:this.getImpossibleTasksProperties(e.impossibleTasks),hell:this.getHellProperties(e.hell),darkMode:e.darkMode??!1,gameStartTimestamp:0,saveInterval:0,easyModeEver:e.easyModeEver??!1,lockPanels:e.lockPanels??!1,layout:e.layout??[],creditsClicked:e.creditsClicked||!1,supportClicked:e.supportClicked||!1}}getInventoryProperties(e){return{itemStacks:e?.itemStacks||[],stashedItemStacks:e?.stashedItemStacks||[],autoSellUnlocked:e?.autoSellUnlocked||!1,autoSellEntries:e?.autoSellEntries||[],autoUseUnlocked:e?.autoUseUnlocked||!1,autoEatUnlocked:e?.autoEatUnlocked||!1,autoEatNutrition:e?.autoEatNutrition??!0,autoEatHealth:e?.autoEatHealth||!1,autoEatStamina:e?.autoEatStamina||!1,autoEatQi:e?.autoEatQi||!1,autoEatAll:e?.autoEatAll||!1,autoUseEntries:e?.autoUseEntries||[],autoBalanceUnlocked:e?.autoBalanceUnlocked||!1,autoBalanceItems:e?.autoBalanceItems||[],autoPillUnlocked:e?.autoPillUnlocked||!1,autoPillEnabled:e?.autoPillEnabled||!1,autoWeaponMergeUnlocked:e?.autoWeaponMergeUnlocked||!1,autoArmorMergeUnlocked:e?.autoArmorMergeUnlocked||!1,useSpiritGemUnlocked:e?.useSpiritGemUnlocked||!1,useSpiritGemWeapons:e?.useSpiritGemWeapons||!1,useCheapestSpiritGem:e?.useCheapestSpiritGem||!1,autoSellOldHerbs:e?.autoSellOldHerbs||!1,autoSellOldWood:e?.autoSellOldWood||!1,autoSellOldOre:e?.autoSellOldOre||!1,autoSellOldHides:e?.autoSellOldHides||!1,autoSellOldHerbsEnabled:e?.autoSellOldHerbsEnabled||!1,autoSellOldWoodEnabled:e?.autoSellOldWoodEnabled||!1,autoSellOldOreEnabled:e?.autoSellOldOreEnabled||!1,autoSellOldBarsEnabled:e?.autoSellOldBarsEnabled||!1,autoSellOldHidesEnabled:e?.autoSellOldHidesEnabled||!1,autoequipBestWeapon:e?.autoequipBestWeapon||!1,autoequipBestArmor:e?.autoequipBestArmor||!1,autoequipBestEnabled:e?.autoequipBestEnabled||!1,maxStackSize:e?.maxStackSize||100,thrownAwayItems:e?.thrownAwayItems||0,autoSellOldGemsUnlocked:e?.autoSellOldGemsUnlocked||!1,autoSellOldGemsEnabled:e?.autoSellOldGemsEnabled||!1,autoBuyFood:e?.autoBuyFood??!0,automergeEquipped:e?.automergeEquipped||!1,autoSort:e?.autoSort||!1,descendingSort:e?.descendingSort||!1,divinePeachesUnlocked:e?.divinePeachesUnlocked||!1,equipmentUnlocked:e?.equipmentUnlocked||!1,equipmentCreated:e?.equipmentCreated||0,totalItemsReceived:e?.totalItemsReceived||0,autoReloadCraftInputs:e?.autoReloadCraftInputs||!1,pillCounter:e?.pillCounter||0,potionCounter:e?.potionCounter||0,herbCounter:e?.herbCounter||0,gemsAcquired:e?.gemsAcquired||0,foodEatenToday:e?.foodEatenToday||0,heirloomSlots:e?.heirloomSlots||0}}getHomeProperties(e){return{land:e?.land||0,homeValue:e?.homeValue||$e.SquatterTent,bedroomFurniture:e?.bedroomFurniture||[],landPrice:e?.landPrice||0,keepFurniture:e?.keepFurniture||!1,keepWorkstationInputs:e?.keepWorkstationInputs||!1,nextHomeCostReduction:e?.nextHomeCostReduction||0,houseBuildingProgress:e?.houseBuildingProgress||1,upgrading:e?.upgrading||!1,ownedFurniture:e?.ownedFurniture||[],highestLand:e?.highestLand||0,highestLandPrice:e?.highestLandPrice||100,bestHome:e?.bestHome||$e.SquatterTent,thugPause:e?.thugPause||!1,hellHome:e?.hellHome||!1,homeUnlocked:e?.homeUnlocked||!1,keepHome:e?.keepHome||!1,seeFurnitureEffects:e?.seeFurnitureEffects||!1,workstations:e?.workstations||[],totalCrafts:e?.totalCrafts||0,alchemyCounter:e?.alchemyCounter||0,forgeChainsCounter:e?.forgeChainsCounter||0}}getFarmProperties(e){return{fields:e?.fields||[],autoFieldLimit:e?.autoFieldLimit||0,mostFields:e?.mostFields||0,hellFood:e?.hellFood||!1,fallowPlots:e?.fallowPlots||0,unlockedCrops:e?.unlockedCrops||[]}}getActivitiesProperties(e){return{autoRestart:e?.autoRestart||!1,pauseOnDeath:e?.pauseOnDeath??!0,pauseBeforeDeath:e?.pauseBeforeDeath||!1,activityLoop:e?.activityLoop||[],unlockedActivities:e?.unlockedActivities||[],discoveredActivities:e?.discoveredActivities||[],openApprenticeships:e?.openApprenticeships||0,spiritActivity:e?.spiritActivity||null,completedApprenticeships:e?.completedApprenticeships||[],currentApprenticeship:e?.currentApprenticeship||void 0,savedActivityLoops:e?.savedActivityLoops||[],loopChangeTriggers:e?.loopChangeTriggers||[],triggerIndex:e?.triggerIndex||0,autoPauseUnlocked:e?.autoPauseUnlocked||!1,autoRestUnlocked:e?.autoRestUnlocked||!1,pauseOnImpossibleFail:e?.pauseOnImpossibleFail||!1,totalExhaustedDays:e?.totalExhaustedDays||0,purifyGemsUnlocked:e?.purifyGemsUnlocked||!1,lifeActivities:e?.lifeActivities||{},familySpecialty:e?.familySpecialty||null,miningCounter:e?.miningCounter||0,huntingCounter:e?.huntingCounter||0,fishingCounter:e?.fishingCounter||0,tauntCounter:e?.tauntCounter||0,recruitingCounter:e?.recruitingCounter||0,petRecruitingCounter:e?.petRecruitingCounter||0,coreCultivationCounter:e?.coreCultivationCounter||0,researchWindCounter:e?.researchWindCounter||0}}getLocationsProperties(e){return{unlockedLocations:e?.unlockedLocations||[],troubleTarget:e?.troubleTarget||E.SmallTown}}getBattlesProperties(e){return{enemies:e?.enemies||[],currentEnemy:e?.currentEnemy||null,kills:e?.kills||0,killsByLocation:e?.killsByLocation||{},godSlayerKills:e?.godSlayerKills||0,totalKills:e?.totalKills||0,autoTroubleUnlocked:e?.autoTroubleUnlocked||!1,monthlyMonsterDay:e?.monthlyMonsterDay||0,highestDamageTaken:e?.highestDamageTaken||0,highestDamageDealt:e?.highestDamageDealt||0,godSlayersUnlocked:e?.godSlayersUnlocked||!1,godSlayersEnabled:e?.godSlayersEnabled||!1,totalEnemies:e?.totalEnemies||0,battleMessageDismissed:e?.battleMessageDismissed||!1,techniques:e?.techniques||[{name:"Basic Strike",description:"A very simple strike that even the weakest mortal could perform.",ticksRequired:10,ticks:0,baseDamage:1,unlocked:!0,attribute:"strength",staminaCost:1},{name:cp,description:"A strike from the weapon in your right hand.",ticksRequired:6,ticks:0,baseDamage:2,unlocked:!1,attribute:"strength",staminaCost:10},{name:dp,description:"A strike from the weapon in your left hand.",ticksRequired:8,ticks:0,baseDamage:2,unlocked:!1,attribute:"strength",staminaCost:10}],techniqueDevelopmentCounter:e?.techniqueDevelopmentCounter||0,maxFamilyTechniques:e?.maxFamilyTechniques||0,statusEffects:e?.statusEffects||[],potionCooldown:e?.potionCooldown||20,potionThreshold:e?.potionThreshold||50,foodCooldown:e?.foodCooldown||60,foodThresholdStatusType:e?.foodThresholdStatusType||"health",foodThreshold:e?.foodThreshold||50,activeFormation:e?.activeFormation||"",formationCooldown:e?.formationCooldown||0,formationDuration:e?.formationDuration||0,formationPower:e?.formationPower||0,battlesUnlocked:e?.battlesUnlocked||!1}}getFollowersProperties(e){return{followersUnlocked:e?.followersUnlocked||!1,followers:e?.followers||[],autoDismissUnlocked:e?.autoDismissUnlocked||!1,maxFollowerByType:e?.maxFollowerByType||{},maxPetsByType:e?.maxPetsByType||{},sortField:e?.sortField||"Job",sortAscending:e?.sortAscending??!0,totalRecruited:e?.totalRecruited||0,totalDied:e?.totalDied||0,totalDismissed:e?.totalDismissed||0,highestLevel:e?.highestLevel||0,stashedFollowers:e?.stashedFollowers||[],stashedPets:e?.stashedPets||[],stashedFollowersMaxes:e?.stashedFollowersMaxes||{},stashedPetMaxes:e?.stashedPetMaxes||{},unlockedHiddenJobs:e?.unlockedHiddenJobs||[],autoReplaceUnlocked:e?.autoReplaceUnlocked||!1,petsBoosted:e?.petsBoosted||!1,onlyWantedFollowers:e?.onlyWantedFollowers||!1,pets:e?.pets||[]}}getLogsProperties(e){return{logTopics:e?.logTopics||[],storyLog:e?.storyLog||[],startingStoryLogEntries:e?.startingStoryLogEntries||[]}}getMainLoopProperties(e){return{unlockFastSpeed:e?.unlockFastSpeed||!1,unlockFasterSpeed:e?.unlockFasterSpeed||!1,unlockFastestSpeed:e?.unlockFastestSpeed||!1,unlockAgeSpeed:e?.unlockAgeSpeed||!1,unlockPlaytimeSpeed:e?.unlockPlaytimeSpeed||!1,lastTime:e?.lastTime||(new Date).getTime(),tickDivider:e?.tickDivider||0,offlineDivider:e?.offlineDivider||10,pause:e?.pause||!1,bankedTicks:e?.bankedTicks||0,totalTicks:e?.totalTicks||0,useBankedTicks:e?.useBankedTicks??!0,scientificNotation:e?.scientificNotation||!1,playMusic:e?.playMusic||!1,timeUnlocked:e?.timeUnlocked||!1,daysSinceLongTick:e?.daysSinceLongTick||0,daysSinceYearOrLongTick:e?.daysSinceYearOrLongTick||0}}getImpossibleTasksProperties(e){return{taskProgress:e?.taskProgress||[],impossibleTasksUnlocked:e?.impossibleTasksUnlocked||!1,activeTaskIndex:e?.activeTaskIndex||0}}getHellProperties(e){let n=e?.currentHell||Z.Gates;return n<0&&(n=Z.Gates),{inHell:e?.inHell||!1,currentHell:n,completedHellTasks:e?.completedHellTasks||[],completedHellBosses:e?.completedHellBosses||[],mountainSteps:e?.mountainSteps||0,animalsHealed:e?.animalsHealed||0,boulderHeight:e?.boulderHeight||0,daysFasted:e?.daysFasted||0,swimDepth:e?.swimDepth||0,exitFound:e?.exitFound||!1,soulsEscaped:e?.soulsEscaped||0,relicsReturned:e?.relicsReturned||0,timesCrushed:e?.timesCrushed||0,contractsExamined:e?.contractsExamined||0,atonedKills:e?.atonedKills||0,fasterHellMoney:e?.fasterHellMoney||!1,burnedMoney:e?.burnedMoney||0}}getCharacterProperties(e){return{attributes:{strength:{description:"An immortal must have raw physical power.",value:e?.attributes.strength.value||1,lifeStartValue:e?.attributes.strength.lifeStartValue||1,aptitude:e?.attributes.strength.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes.strength.aptitudeMult||1,icon:"fitness_center"},toughness:{description:"An immortal must develop resilience to endure hardship.",value:e?.attributes.toughness.value||1,lifeStartValue:e?.attributes.toughness.lifeStartValue||1,aptitude:e?.attributes.toughness.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes.toughness.aptitudeMult||1,icon:"castle"},speed:{description:"An immortal must be quick of foot and hand.",value:e?.attributes.speed.value||1,lifeStartValue:e?.attributes.speed.lifeStartValue||1,aptitude:e?.attributes.speed.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes.speed.aptitudeMult||1,icon:"directions_run"},intelligence:{description:"An immortal must understand the workings of the universe.",value:e?.attributes.intelligence.value||1,lifeStartValue:e?.attributes.intelligence.lifeStartValue||1,aptitude:e?.attributes.intelligence.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes.intelligence.aptitudeMult||1,icon:"local_library"},charisma:{description:"An immortal must influence the hearts and minds of others.",value:e?.attributes.charisma.value||1,lifeStartValue:e?.attributes.charisma.lifeStartValue||1,aptitude:e?.attributes.charisma.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes.charisma.aptitudeMult||1,icon:"forum"},spirituality:{description:"An immortal must find deep connections to the divine.",value:e?.attributes.spirituality.value||0,lifeStartValue:e?.attributes.spirituality.lifeStartValue||0,aptitude:e?.attributes.spirituality.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes.spirituality.aptitudeMult||1,icon:"self_improvement"},earthLore:{description:"Understanding the earth and how to draw power and materials from it.",value:e?.attributes.earthLore.value||0,lifeStartValue:e?.attributes.earthLore.lifeStartValue||0,aptitude:e?.attributes.earthLore.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes.earthLore.aptitudeMult||1,icon:"landslide"},metalLore:{description:"Understanding metals and how to forge and use them.",value:e?.attributes.metalLore.value||0,lifeStartValue:e?.attributes.metalLore.lifeStartValue||0,aptitude:e?.attributes.metalLore.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes.metalLore.aptitudeMult||1,icon:"view_module"},woodLore:{description:"Understanding plants and how to grow and care for them.",value:e?.attributes.woodLore.value||0,lifeStartValue:e?.attributes.woodLore.lifeStartValue||0,aptitude:e?.attributes.woodLore.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes.woodLore.aptitudeMult||1,icon:"forest"},waterLore:{description:"Understanding potions and pills and how to make and use them.",value:e?.attributes.waterLore.value||0,lifeStartValue:e?.attributes.waterLore.lifeStartValue||0,aptitude:e?.attributes.waterLore.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes.waterLore.aptitudeMult||1,icon:"water_drop"},fireLore:{description:"Burn! Burn! BURN!!!",value:e?.attributes.fireLore.value||0,lifeStartValue:e?.attributes.fireLore.lifeStartValue||0,aptitude:e?.attributes.fireLore.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes.fireLore.aptitudeMult||1,icon:"local_fire_department"},combatMastery:{description:"Mastery of combat skills.",value:e?.attributes.combatMastery.value||0,lifeStartValue:e?.attributes.combatMastery.lifeStartValue||0,aptitude:e?.attributes.combatMastery.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes.combatMastery.aptitudeMult||1,icon:"sports_martial_arts"},magicMastery:{description:"Mastery of magical skills.",value:e?.attributes.magicMastery.value||0,lifeStartValue:e?.attributes.magicMastery.lifeStartValue||0,aptitude:e?.attributes.magicMastery.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes.magicMastery.aptitudeMult||1,icon:"auto_awesome"},animalHandling:{description:"Skill in working with animals and monsters.",value:e?.attributes.animalHandling.value||0,lifeStartValue:e?.attributes.animalHandling.lifeStartValue||0,aptitude:e?.attributes.animalHandling.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes.animalHandling.aptitudeMult||1,icon:"pets"},performance:{description:"Skill in manipulating others with your voice.",value:e?.attributes?.performance?.value||0,lifeStartValue:e?.attributes?.performance?.lifeStartValue||0,aptitude:e?.attributes?.performance?.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes?.performance?.aptitudeMult||1,icon:"record_voice_over"},smithing:{description:"Skill with the forge and anvil.",value:e?.attributes?.smithing?.value||0,lifeStartValue:e?.attributes?.smithing?.lifeStartValue||0,aptitude:e?.attributes?.smithing?.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes?.smithing?.aptitudeMult||1,icon:"hardware"},alchemy:{description:"Mastery of potions and pills.",value:e?.attributes?.alchemy?.value||0,lifeStartValue:e?.attributes?.alchemy?.lifeStartValue||0,aptitude:e?.attributes?.alchemy?.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes?.alchemy?.aptitudeMult||1,icon:"emoji_food_beverage"},woodwork:{description:"Skill with saws and chisels.",value:e?.attributes?.woodwork?.value||0,lifeStartValue:e?.attributes?.woodwork?.lifeStartValue||0,aptitude:e?.attributes?.woodwork?.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes?.woodwork?.aptitudeMult||1,icon:"carpenter"},leatherwork:{description:"Skill shaping hides into useful items.",value:e?.attributes?.leatherwork?.value||0,lifeStartValue:e?.attributes?.leatherwork?.lifeStartValue||0,aptitude:e?.attributes?.leatherwork?.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes?.leatherwork?.aptitudeMult||1,icon:"pets"},formationMastery:{description:"Experience creating formation flags.",value:e?.attributes?.formationMastery?.value||0,lifeStartValue:e?.attributes?.formationMastery?.lifeStartValue||0,aptitude:e?.attributes?.formationMastery?.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes?.formationMastery?.aptitudeMult||1,icon:"flag"},cooking:{description:"Mastery of the wok and other kitchen essentials.",value:e?.attributes?.cooking?.value||0,lifeStartValue:e?.attributes?.cooking?.lifeStartValue||0,aptitude:e?.attributes?.cooking?.aptitude||1,displayValue:$(0),displayAptitude:$(0),aptitudeMult:e?.attributes?.cooking?.aptitudeMult||1,icon:"soup_kitchen"}},status:{health:{description:"Physical well-being. Take too much damage and you will die.",value:e?.status.health.value||100,displayValue:$(e?.status.health.value||100),max:e?.status.health.max||100,displayMax:$(e?.status.health.value||100),battleTickRecovery:e?.status.health.battleTickRecovery||0},stamina:{description:"Physical energy to accomplish tasks. Most activities use stamina, and if you let yourself run down you could get sick and have to stay in bed for a few days.",value:e?.status.stamina.value||100,displayValue:$(e?.status.stamina.value||100),max:e?.status.stamina.max||100,displayMax:$(e?.status.stamina.value||100),battleTickRecovery:e?.status.stamina.battleTickRecovery||1},qi:{description:"Magical energy required for mysterious spiritual activities.",value:e?.status?.qi?.value||0,displayValue:$(e?.status.qi.value||0),max:e?.status?.qi?.max||0,displayMax:$(e?.status.qi.value||0),battleTickRecovery:e?.status?.qi?.battleTickRecovery||0},nutrition:{description:"Eating is essential to life. You will automatically eat whatever food you have available when you are hungry. If you run out of food, you will automatically spend some money on cheap scraps each day.",value:e?.status?.nutrition?.value||30,displayValue:$(e?.status.nutrition.value||30),max:e?.status?.nutrition?.max||30,displayMax:$(e?.status.nutrition.value||30),battleTickRecovery:e?.status?.nutrition?.battleTickRecovery||0}},money:e?.money||0,stashedMoney:e?.stashedMoney||0,hellMoney:e?.hellMoney||0,equipment:{head:e?.equipment.head||null,feet:e?.equipment.feet||null,body:e?.equipment.body||null,legs:e?.equipment.legs||null,leftHand:e?.equipment.leftHand||null,rightHand:e?.equipment.rightHand||null},stashedEquipment:{head:e?.stashedEquipment.head||null,feet:e?.stashedEquipment.feet||null,body:e?.stashedEquipment.body||null,legs:e?.stashedEquipment.legs||null,leftHand:e?.stashedEquipment.leftHand||null,rightHand:e?.stashedEquipment.rightHand||null},itemPouches:e?.itemPouches||[],age:e?.age||0,baseLifespan:e?.baseLifespan||10950,foodLifespan:e?.foodLifespan||0,alchemyLifespan:e?.alchemyLifespan||0,statLifespan:e?.statLifespan||0,spiritualityLifespan:e?.spiritualityLifespan||0,magicLifespan:e?.magicLifespan||0,attributeScalingLimit:e?.attributeScalingLimit||10,attributeSoftCap:e?.attributeSoftCap||1e5,aptitudeGainDivider:e?.aptitudeGainDivider||5*Math.pow(1.5,9),condenseSoulCoreCost:e?.condenseSoulCoreCost||10,reinforceMeridiansCost:e?.reinforceMeridiansCost||1e3,bloodlineRank:e?.bloodlineRank||0,qiUnlocked:e?.qiUnlocked||!1,totalLives:e?.totalLives||1,healthBonusFood:e?.healthBonusFood||0,healthBonusBath:e?.healthBonusBath||0,healthBonusMagic:e?.healthBonusMagic||0,healthBonusSoul:e?.healthBonusSoul||0,empowermentFactor:e?.empowermentFactor||1,immortal:e?.immortal||!1,god:e?.god||!1,easyMode:e?.easyMode||!1,highestMoney:e?.highestMoney||0,highestAge:e?.highestAge||0,highestHealth:e?.highestHealth||0,highestStamina:e?.highestStamina||0,highestQi:e?.highestQi||0,highestAttributes:e?.highestAttributes||{},yinYangBoosted:e?.yinYangBoosted||!1,yin:e?.yin||1,yang:e?.yang||1,righteousWrathUnlocked:e?.righteousWrathUnlocked||!1,bonusMuscles:e?.bonusMuscles||!1,bonusBrains:e?.bonusBrains||!1,bonusHealth:e?.bonusHealth||!1,showLifeSummary:e?.showLifeSummary??!0,showTips:e?.showTips||!1,showUpdateAnimations:e?.showUpdateAnimations??!0,startingStaminaBoost:e?.startingStaminaBoost||!1}}getLayoutExport(){const e={layout:this.layout()??[],lockPanels:this.lockPanels};return JSON.stringify(e)}getGameExport(){const e={achievements:this.achievementService.getProperties(),impossibleTasks:this.impossibleTaskService.getProperties(),hell:this.hellService.getProperties(),character:this.characterService.getProperties(),inventory:this.inventoryService.getProperties(),home:this.homeService.getProperties(),farm:this.farmService.getProperties(),locations:this.locationService.getProperties(),activities:this.activityService.getProperties(),battles:this.battleService.getProperties(),followers:this.followersService.getProperties(),logs:this.logService.getProperties(),mainLoop:this.mainLoopService.getProperties(),darkMode:this.isDarkMode,gameStartTimestamp:this.gameStartTimestamp,saveInterval:this.saveInterval||300,easyModeEver:this.easyModeEver,lockPanels:this.lockPanels,layout:this.layout()??[],creditsClicked:this.creditsClicked,supportClicked:this.supportClicked};let n=JSON.stringify(e);return n="iig"+btoa(encodeURIComponent(n)),n}hardReset(){this.hardResetting=!0,window.localStorage.removeItem(lp+this.getDeploymentFlavor()),window.localStorage.getItem(lp+this.getDeploymentFlavor())&&console.error("Game state didn't clear"),setTimeout(()=>window.window.location.href=window.location.href,500)}rebirth(){this.characterService.forceRebirth=!0,this.mainLoopService.pause=!1}getDeploymentFlavor(){let e=window.location.href;if("http://localhost:4200/"===e||e.includes("devtunnels.ms"))return"";if("https://immortalityidle.github.io/"===e||"https://immortalityidle.github.io/old/"===e)return"";if(e.includes("https://immortalityidle.github.io/"))return e=e.substring(0,e.length-1),e.substring(e.lastIndexOf("/")+1);throw new Error("Hey, someone stole this game!")}static{this.\u0275fac=function(n){return new(n||t)(P(Ie),P(zt),P(wr),P(he),P(Xi),P(bt),P(Un),P(Vt),P(Gt),P(tt),P(Ht),P(sp),P(ja),P(Ml),P(We))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Un=(()=>{class t{constructor(e,n,r,o){this.characterService=e,this.injector=n,this.logService=r,this.mainLoopService=o,this.colorByRank=["darkgray","gray","lightgray","white","darkgreen","green","lightgreen","darkblue","blue","lightblue","darkviolet","purple","fuchsia","darkorange","orange","yellow","gold","red"],this.furniture=[{id:"blanket",name:"Cotton Blanket",type:"furniture",subtype:"bed",color:"gray",elements:["wood"],value:10,description:"A tattered, gray cotton blanket.<br>Not much, but it could keep you warm at night.<br>Increases daily stamina recovery by 1.",useConsumes:!1,use:()=>{this.characterService.status.stamina.value++}},{id:"mat",name:"Sleeping Mat",type:"furniture",subtype:"bed",color:"brown",elements:["wood"],value:1e3,description:"A thin mat woven from brown reeds.<br>Increases daily stamina recovery by 1 and restores a bit of health.",useConsumes:!1,use:()=>{this.characterService.status.stamina.value+=1,this.characterService.status.health.value+=.1,this.characterService.checkOverage()}},{id:"canopyBed",name:"Canopy Bed",type:"furniture",subtype:"bed",color:"red",value:1e4,description:"A fine bed with a red silk cover.<br>The curtains keep the mosquitoes off you during the night.<br>Increases daily stamina recovery by 2 and restores a bit of health.",useConsumes:!1,use:()=>{this.characterService.status.stamina.value+=2,this.characterService.status.health.value+=.2,this.characterService.checkOverage()}},{id:"heatedBed",name:"Heated Bed",type:"furniture",subtype:"bed",color:"brown",elements:["fire"],value:1e5,description:"A bed built over a small clay oven. Keeps you toasty on even the coldest nights.<br>Increases daily stamina recovery by 5 and improves health recovery.",useConsumes:!1,use:()=>{this.characterService.status.stamina.value+=5,this.characterService.status.health.value+=1,this.characterService.checkOverage()}},{id:"bedOfNails",name:"Bed of Nails",type:"furniture",subtype:"bed",color:"black",elements:["metal"],value:1e4,description:"A solid board with iron nails poking upwards.<br>You won't sleep as well, but it is certain to toughen you up.",useConsumes:!1,use:()=>{this.characterService.status.stamina.value-=1,this.characterService.increaseAttribute("toughness",.1)}},{id:"waterBucket",name:"water bucket ",type:"furniture",subtype:"bath",color:"gray",elements:["water"],value:10,description:"A simple gray bucket of water that lets you splash your face clean.<br>Increases charisma.",useConsumes:!1,use:()=>{this.characterService.increaseAttribute("charisma",.01)}},{id:"washBasin",name:"wash basin",type:"furniture",subtype:"bath",color:"brown",elements:["water","earth"],value:1e3,description:"A clay wash basin with a rag to clean yourself.<br>Increases charisma.",useConsumes:!1,use:()=>{this.characterService.increaseAttribute("charisma",.05)}},{id:"woodenTub",name:"wooden tub",type:"furniture",subtype:"bath",color:"brown",elements:["water","wood"],value:1e4,description:"A tall and narrow wooden tub where you can squat and bathe.<br>Increases charisma and health recovery.",useConsumes:!1,use:()=>{this.characterService.increaseAttribute("charisma",.1),this.characterService.status.health.value+=1,this.characterService.checkOverage()}},{id:"bronzeTub",name:"bronze tub",type:"furniture",subtype:"bath",color:"brown",elements:["water","metal"],value:1e6,description:"A luxurious bronze tub where you can get sparkling clean.<br>Increases charisma and health recovery.",useConsumes:!1,use:()=>{this.characterService.increaseAttribute("charisma",.2),this.characterService.status.health.value+=1,this.characterService.checkOverage()}},{id:"heatedTub",name:"heated tub",type:"furniture",subtype:"bath",color:"brown",elements:["water","metal","fire"],value:1e8,description:"A luxurious tub with its own heating stove.<br>Good for your health and beauty.",useConsumes:!1,use:()=>{this.characterService.increaseAttribute("charisma",.2),this.characterService.status.stamina.value+=5,this.characterService.status.health.value+=1,this.characterService.healthBonusBath++,this.characterService.checkOverage()}},{id:"bookshelf",name:"bookshelf",type:"furniture",subtype:"books",value:1e6,description:"An bookshelf to read and expand your mind.",useConsumes:!1,use:()=>{this.characterService.increaseAttribute("intelligence",.01)}},{id:"prayerShrine",name:"prayer shrine",type:"furniture",subtype:"spiritual",value:1e7,description:"A quiet shrine for contemplative prayer.<br>You won't be able to use this unless you have some innate spirituality.",useConsumes:!1,use:()=>{this.characterService.attributes.spirituality.value>0&&this.characterService.increaseAttribute("spirituality",.001)}},{id:"dogKennel",name:"dog kennel",type:"furniture",subtype:"animal",value:1e6,description:"A kennel that comes with a faithful hunting dog.",useConsumes:!1,use:()=>{this.characterService.increaseAttribute("animalHandling",.01)}},{id:"cormorantCage",name:"cormorant cage",type:"furniture",subtype:"animal",value:1e6,description:"A cage holding a trained cormorant that can help you with fishing.",useConsumes:!1,use:()=>{this.characterService.increaseAttribute("animalHandling",.01)}},{id:"wingChunDummy",name:"wing-chun dummy",type:"furniture",subtype:"fitness",value:1e6,description:"A training dummy for practicing martial arts.",useConsumes:!1,use:()=>{this.characterService.increaseAttribute("strength",.001),this.characterService.increaseAttribute("speed",.001)}},{id:"ancestorPortraitPurple",name:"purple ancestor portrait",type:"furniture",subtype:"portrait",color:"purple",value:1e7,description:"A fine portrait of one of your ancestors wearing a purple robe.",useConsumes:!1,use:()=>{}},{id:"ancestorPortraitGreen",name:"green ancestor portrait",type:"furniture",subtype:"portrait",color:"green",value:1e7,description:"A fine portrait of one of your ancestors wearing a green robe.",useConsumes:!1,use:()=>{}},{id:"ancestorPortraitRed",name:"red ancestor portrait",type:"furniture",subtype:"portrait",color:"red",value:1e7,description:"A fine portrait of one of your ancestors wearing a red robe.",useConsumes:!1,use:()=>{}},{id:"ancestorPortraitOrange",name:"orange ancestor portrait",type:"furniture",subtype:"portrait",color:"orange",value:1e7,description:"A fine portrait of one of your ancestors wearing an orange robe.",useConsumes:!1,use:()=>{}},{id:"ancestorPortraitPink",name:"pink ancestor portrait",type:"furniture",subtype:"portrait",color:"pink",value:1e7,description:"A fine portrait of one of your ancestors wearing a pink robe.",useConsumes:!1,use:()=>{}},{id:"ancestorPortraitBlue",name:"blue ancestor portrait",type:"furniture",subtype:"portrait",color:"blue",value:1e7,description:"A fine portrait of one of your ancestors wearing a blue robe.",useConsumes:!1,use:()=>{}},{id:"ancestorPortraitYellow",name:"yellow ancestor portrait",type:"furniture",subtype:"portrait",color:"yellow",value:1e7,description:"A fine portrait of one of your ancestors wearing a yellow robe.",useConsumes:!1,use:()=>{}},{id:"ancestorPortraitBrown",name:"brown ancestor portrait",type:"furniture",subtype:"portrait",color:"brown",value:1e7,description:"A fine portrait of one of your ancestors wearing a brown robe.",useConsumes:!1,use:()=>{}},{id:"ancestorPortraitWhite",name:"white ancestor portrait",type:"furniture",subtype:"portrait",color:"white",value:1e7,description:"A fine portrait of one of your ancestors wearing a white robe.",useConsumes:!1,use:()=>{}},{id:"ancestorPortraitPastel",name:"pastel ancestor portrait",type:"furniture",subtype:"portrait",color:"pastel",value:1e7,description:"A fine portrait of one of your ancestors wearing a pastel robe.",useConsumes:!1,use:()=>{}},{id:"ancestorPortraitBlack",name:"black ancestor portrait",type:"furniture",subtype:"portrait",color:"black",value:1e7,description:"A fine portrait of one of your ancestors wearing a black robe.",useConsumes:!1,use:()=>{}},{id:"ancestorPortraitGray",name:"gray ancestor portrait",type:"furniture",subtype:"portrait",color:"gray",value:1e7,description:"A fine portrait of one of your ancestors wearing a gray robe.",useConsumes:!1,use:()=>{}},{id:"trophy",name:"trophy",type:"furniture",subtype:"trophy",value:1e6,description:"A hunting trophy from a monster you fought in a previous life.",useConsumes:!1,use:()=>{}}],this.items={rice:{id:"rice",imageFile:"rice",name:"rice",type:"food",subtype:"grain",value:1,description:"A basic staple of life. One pouch will sustain you for a day.",useLabel:"Eat",useDescription:"Fills your belly.",useConsumes:!0},cabbage:{id:"cabbage",imageFile:"cabbage",name:"cabbage",type:"food",subtype:"vegetable",value:5,description:"A simple, healthy vegetable.",useLabel:"Eat",useDescription:"Fills your belly and helps you be healthy.",useConsumes:!0},beans:{id:"beans",imageFile:"beans",name:"beans",type:"food",subtype:"vegetable",value:10,description:"A handful of healthy vegetables.",useLabel:"Eat",useDescription:"Fills your belly and helps you be healthy and hardy.",useConsumes:!0},broccoli:{id:"broccoli",imageFile:"broccoli",name:"broccoli",type:"food",subtype:"vegetable",value:15,description:"Little green trees. A very healthy vegetable.",useLabel:"Eat",useDescription:"Fills your belly and helps you be healthy and hardy.",useConsumes:!0},calabash:{id:"calabash",imageFile:"calabash",name:"calabash",type:"food",subtype:"vegetable",value:20,description:"A tasty gourd with health-giving properties.",useLabel:"Eat",useDescription:"Fills your belly and helps you be healthy and hardy.",useConsumes:!0},taro:{id:"taro",imageFile:"taro",name:"taro",type:"food",subtype:"vegetable",value:25,description:"A healthy root vegetable.",useLabel:"Eat",useDescription:"Fills your belly and helps you be healthy and hardy.",useConsumes:!0},pear:{id:"pear",imageFile:"pear",name:"pear",type:"food",subtype:"fruit",value:30,description:"A tasty fruit.",useLabel:"Eat",useDescription:"Fills your belly and helps you be healthy and hardy.",useConsumes:!0},melon:{id:"melon",imageFile:"melon",name:"melon",type:"food",subtype:"fruit",value:35,description:"A yummy fruit.",useLabel:"Eat",useDescription:"Fills your belly and helps you be healthy and hardy.",useConsumes:!0},plum:{id:"plum",imageFile:"plum",name:"plum",type:"food",subtype:"fruit",value:40,description:"An excellent fruit.",useLabel:"Eat",useDescription:"Fills your belly and helps you be healthy and hardy.",useConsumes:!0},apricot:{id:"apricot",imageFile:"apricot",name:"apricot",type:"food",subtype:"fruit",value:45,description:"A delicious fruit.",useLabel:"Eat",useDescription:"Fills your belly and helps you be healthy and hardy.",useConsumes:!0},peach:{id:"peach",imageFile:"peach",name:"peach",type:"food",subtype:"fruit",value:50,description:"A highly prized and delicious fruit.",useLabel:"Eat",useDescription:"Fills your belly and can even lead to a long life.",useConsumes:!0},divinePeach:{id:"divinePeach",imageFile:"divinePeach",name:"divine peach",type:"food",subtype:"fruit",value:100,description:"A divinely prized and delicious fruit.",useLabel:"Eat",useDescription:"Sates your immortal hunger.",useConsumes:!0},distilledPeachEssence:{id:"distilledPeachEssence",imageFile:"distilledPeachEssence",name:"distilled peach essence",type:"potion",value:1e3,description:"An alchemical masterpiece created from the most perfect of peaches. When equipped, it is automatically consumed to restore 50 health when needed.",effect:"health",increaseAmount:500,pouchable:!0},meat:{id:"meat",imageFile:"meat",name:"meat",type:"food",subtype:"meat",value:50,description:"Some delicious meat.",useLabel:"Eat",useDescription:"Fills your belly and adds variety to your diet.",useConsumes:!0},spiritMeat:{id:"spiritMeat",imageFile:"spiritMeat",name:"spirit meat",type:"food",subtype:"meat",value:1e3,description:"Your hunters have performed a ritual burned offering of meat to send you this spiritual feast.",useLabel:"Eat",useDescription:"Fills your belly and adds variety to your diet.",useConsumes:!0},carp:{id:"carp",imageFile:"fish",name:"carp",type:"food",subtype:"fish",value:50,description:"A common fish.",useLabel:"Eat",useDescription:"Fills your belly and adds variety to your diet.",useConsumes:!0},spiritCarp:{id:"spiritCarp",imageFile:"fish",name:"spirit carp",type:"food",subtype:"fish",value:1e3,description:"Your fishers have performed a ritual burned offering of fish to send you this spiritual feast.",useLabel:"Eat",useDescription:"Fills your belly and adds variety to your diet.",useConsumes:!0},hide:{id:"hide",imageFile:"hide1",imageColor:this.colorByRank[0],name:"tattered hide",type:"hide",value:1,description:"A tattered animal hide."},thinPelt:{id:"thinPelt",imageFile:"hide2",imageColor:this.colorByRank[1],name:"thin pelt",type:"hide",value:2,description:"A thin fur pelt."},plainLeather:{id:"plainLeather",imageFile:"hide3",imageColor:this.colorByRank[2],name:"plain leather",type:"hide",value:3,description:"A basic leather hide."},scaleSkin:{id:"scaleSkin",imageFile:"hide4",imageColor:this.colorByRank[3],name:"scale skin",type:"hide",value:4,description:"A scaly reptile skin."},thickFur:{id:"thickFur5",imageFile:"hide5",imageColor:this.colorByRank[4],name:"thick fur",type:"hide",value:5,description:"A thick animal fur."},armoredHide:{id:"armoredHide",imageFile:"hide6",imageColor:this.colorByRank[5],name:"armored hide",type:"hide",value:6,description:"An armored animal hide."},frozenScales:{id:"frozenScales",imageFile:"hide7",imageColor:this.colorByRank[6],name:"frozen scales",type:"hide",value:7,description:"A frozen scaly hide."},mysticalLeather:{id:"mysticalLeather",imageFile:"hide8",imageColor:this.colorByRank[7],name:"mystical leather",type:"hide",value:8,description:"A mystical animal hide."},infernalFur:{id:"infernalFur",imageFile:"hide9",imageColor:this.colorByRank[8],name:"infernal fur",type:"hide",value:9,description:"A diabolical pelt."},orichalcumHide:{id:"orichalcumHide",imageFile:"hide10",imageColor:this.colorByRank[9],name:"orichalcum hide",type:"hide",value:10,description:"A strong magic-infused hide."},tempestScales:{id:"tempestScales",imageFile:"hide11",imageColor:this.colorByRank[10],name:"tempest scales",type:"hide",value:11,description:"A hide bristling with electricity."},evergreenVeil:{id:"evergreenVeil",imageFile:"hide12",imageColor:this.colorByRank[11],name:"evergreen veil",type:"hide",value:12,description:"An extremely durable hide ."},sovereignLeather:{id:"sovereignLeather",imageFile:"hide13",imageColor:this.colorByRank[12],name:"sovereign leather",type:"hide",value:13,description:"A powerful hide of a noble animal."},abyssalFur:{id:"abyssalFur",imageFile:"hide14",imageColor:this.colorByRank[13],name:"abyssal fur",type:"hide",value:14,description:"A fur brimming with unholy power."},umbralHide:{id:"umbralHide",imageFile:"hide15",imageColor:this.colorByRank[14],name:"umbral hide",type:"hide",value:15,description:"A hide made of shadows themselves."},divineVeil:{id:"divineVeil",imageFile:"hide16",imageColor:this.colorByRank[15],name:"divine veil",type:"hide",value:16,description:"A hide consecrated with divine protection."},balsaLog:{id:"balsaLog",imageFile:"wood",imageColor:this.colorByRank[0],name:"balsa log",type:"wood",subtype:"fuel",value:1,description:"A really soft log."},elmLog:{id:"elmLog",imageFile:"wood",imageColor:this.colorByRank[1],name:"elm log",type:"wood",subtype:"fuel",value:2,description:"A soft log."},cypressLog:{id:"cypressLog",imageFile:"wood",imageColor:this.colorByRank[2],name:"cypress log",type:"wood",subtype:"fuel",value:3,description:"A poor quality log."},walnutLog:{id:"walnutLog",imageFile:"wood",imageColor:this.colorByRank[3],name:"walnut log",type:"wood",subtype:"fuel",value:4,description:"An adequate quality log."},laurelwoodLog:{id:"laurelwoodLog",imageFile:"wood",imageColor:this.colorByRank[4],name:"laurelwood log",type:"wood",subtype:"fuel",value:5,description:"A nice quality log."},blackwoodLog:{id:"blackwoodLog",imageFile:"wood",imageColor:this.colorByRank[5],name:"blackwood log",type:"wood",subtype:"fuel",value:6,description:"A good quality log."},rosewoodLog:{id:"rosewoodLog",imageFile:"wood",imageColor:this.colorByRank[6],name:"rosewood log",type:"wood",subtype:"fuel",value:7,description:"A great quality log."},pearwoodLog:{id:"pearwoodLog",imageFile:"wood",imageColor:this.colorByRank[7],name:"pearwood log",type:"wood",subtype:"fuel",value:8,description:"An excellent quality log."},zitanLog:{id:"zitanLog",imageFile:"wood",imageColor:this.colorByRank[8],name:"zitan log",type:"wood",subtype:"fuel",value:9,description:"An amazing quality log."},lignumvitaeLog:{id:"lignumvitaeLog",imageFile:"wood",imageColor:this.colorByRank[9],name:"lignum vitae log",type:"wood",subtype:"fuel",value:10,description:"A log of the highest mortal quality."},peachwoodlog:{id:"peachwoodlog",imageFile:"wood",imageColor:this.colorByRank[10],name:"peachwood log",type:"wood",subtype:"fuel",value:11,description:"A log brimming with spiritual energy."},diamondwoodLog:{id:"diamondwoodLog",imageFile:"wood",imageColor:this.colorByRank[11],name:"diamondwood log",type:"wood",subtype:"fuel",value:12,description:"A log as hard as diamond."},titanwoodLog:{id:"titanwoodLog",imageFile:"wood",imageColor:this.colorByRank[12],name:"titanwood log",type:"wood",subtype:"fuel",value:13,description:"A log with the strength of titans."},dragonwoodLog:{id:"dragonwoodLog",imageFile:"wood",imageColor:this.colorByRank[13],name:"dragonwood log",type:"wood",subtype:"fuel",value:14,description:"A log blessed by dragons."},devilwoodLog:{id:"devilwoodLog",imageFile:"wood",imageColor:this.colorByRank[14],name:"devilwood log",type:"wood",subtype:"fuel",value:15,description:"A demonic quality log."},divinewoodLog:{id:"divinewoodLog",imageFile:"wood",imageColor:this.colorByRank[15],name:"divinewood log",type:"wood",subtype:"fuel",value:16,description:"A divine quality log."},coal:{id:"coal",imageFile:"coal",name:"coal",type:"coal",subtype:"fuel",value:1,description:"A chunk of coal.<br>Handy as fuel."},copperOre:{id:"copperOre",imageFile:"ore",imageColor:this.colorByRank[0],name:"copper ore",type:"ore",value:1,description:"A chunk of copper ore."},tinOre:{id:"tinOre",imageFile:"ore",imageColor:this.colorByRank[1],name:"tin ore",type:"ore",value:2,description:"A chunk of tin ore."},bronzeOre:{id:"bronzeOre",imageFile:"ore",imageColor:this.colorByRank[2],name:"mixed ore",type:"ore",value:3,description:"A chunk of ore containing copper, tin, lead, and zinc."},ironOre:{id:"ironOre",imageFile:"ore",imageColor:this.colorByRank[3],name:"iron ore",type:"ore",value:4,description:"A chunk of iron ore."},steelOre:{id:"steelOre",imageFile:"ore",imageColor:this.colorByRank[4],name:"coal-mixed iron ore",type:"ore",value:5,description:"A chunk of iron ore laced with coal."},mithrilOre:{id:"mithrilOre",imageFile:"ore",imageColor:this.colorByRank[5],name:"mithril ore",type:"ore",value:6,description:"A chunk of mithril ore."},greensteelOre:{id:"greensteelOre",imageFile:"ore",imageColor:this.colorByRank[6],name:"greensteel ore",type:"ore",value:7,description:"A chunk of greensteel ore."},bluesteelOre:{id:"bluesteelOre",imageFile:"ore",imageColor:this.colorByRank[7],name:"bluesteel ore",type:"ore",value:8,description:"A chunk of bluesteel ore."},redsteelOre:{id:"redsteelOre",imageFile:"ore",imageColor:this.colorByRank[8],name:"redsteel ore",type:"ore",value:9,description:"A chunk of redsteel ore."},flamesteelOre:{id:"flamesteelOre",imageFile:"ore",imageColor:this.colorByRank[9],name:"flamesteel ore",type:"ore",value:10,description:"A chunk of flamesteel ore."},froststeelOre:{id:"froststeelOre",imageFile:"ore",imageColor:this.colorByRank[10],name:"froststeel ore",type:"ore",value:11,description:"A chunk of froststeel ore."},brightsteelOre:{id:"brightsteelOre",imageFile:"ore",imageColor:this.colorByRank[11],name:"brightsteel ore",type:"ore",value:12,description:"A chunk of brightsteel ore."},darksteelOre:{id:"darksteelOre",imageFile:"ore",imageColor:this.colorByRank[12],name:"darksteel ore",type:"ore",value:13,description:"A chunk of darksteel ore."},felsteelOre:{id:"felsteelOre",imageFile:"ore",imageColor:this.colorByRank[13],name:"felsteel ore",type:"ore",value:14,description:"A chunk of felsteel ore."},cloudsteelOre:{id:"cloudsteelOre",imageFile:"ore",imageColor:this.colorByRank[14],name:"cloudsteel ore",type:"ore",value:15,description:"A chunk of cloudsteel ore."},adamantOre:{id:"adamantOre",imageFile:"ore",imageColor:this.colorByRank[15],name:"adamant ore",type:"ore",value:16,description:"A chunk of adamant ore."},copperBar:{id:"copperBar",imageFile:"metal",imageColor:this.colorByRank[0],name:"copper bar",type:"metal",value:10,description:"A bar of copper."},tinBar:{id:"tinBar",imageFile:"metal",imageColor:this.colorByRank[1],name:"tin bar",type:"metal",value:20,description:"A bar of tin."},bronzeBar:{id:"bronzeBar",imageFile:"metal",imageColor:this.colorByRank[2],name:"bronze bar",type:"metal",value:30,description:"A bar of bronze."},ironBar:{id:"ironBar",imageFile:"metal",imageColor:this.colorByRank[3],name:"iron bar",type:"metal",value:40,description:"A bar of iron."},steelBar:{id:"steelBar",imageFile:"metal",imageColor:this.colorByRank[4],name:"steel bar",type:"metal",value:50,description:"A bar of steel."},mithrilBar:{id:"mithrilBar",imageFile:"metal",imageColor:this.colorByRank[5],name:"mithril bar",type:"metal",value:60,description:"A bar of of mithril."},greensteelBar:{id:"greensteelBar",imageFile:"metal",imageColor:this.colorByRank[6],name:"greensteel bar",type:"metal",value:70,description:"A bar of greensteel."},bluesteelBar:{id:"bluesteelBar",imageFile:"metal",imageColor:this.colorByRank[7],name:"bluesteel bar",type:"metal",value:80,description:"A bar of bluesteel."},redsteelBar:{id:"redsteelBar",imageFile:"metal",imageColor:this.colorByRank[8],name:"redsteel bar",type:"metal",value:90,description:"A bar of redsteel."},flamesteelBar:{id:"flamesteelBar",imageFile:"metal",imageColor:this.colorByRank[9],name:"flamesteel bar",type:"metal",value:100,description:"A bar of flamesteel."},froststeelBar:{id:"froststeelBar",imageFile:"metal",imageColor:this.colorByRank[10],name:"froststeel bar",type:"metal",value:110,description:"A bar of froststeel."},brightsteelBar:{id:"brightsteelBar",imageFile:"metal",imageColor:this.colorByRank[11],name:"brightsteel bar",type:"metal",value:120,description:"A bar of brightsteel."},darksteelBar:{id:"darksteelBar",imageFile:"metal",imageColor:this.colorByRank[12],name:"darksteel bar",type:"metal",value:130,description:"A bar of darksteel."},felsteelBar:{id:"felsteelBar",imageFile:"metal",imageColor:this.colorByRank[13],name:"felsteel bar",type:"metal",value:140,description:"A bar of felsteel."},cloudsteelBar:{id:"cloudsteelBar",imageFile:"metal",imageColor:this.colorByRank[14],name:"cloudsteel bar",type:"metal",value:150,description:"A bar of cloudsteel."},adamantBar:{id:"adamantBar",imageFile:"metal",imageColor:this.colorByRank[15],name:"adamant bar",type:"metal",value:160,description:"A bar of adamant."},junk:{id:"junk",imageFile:"junk",name:"junk",type:"metal",value:10,description:"Some metal junk."},pillMold:{id:"pillMold",imageFile:"pillMold",name:"pill mold",type:"pillMold",value:100,description:"A metal mold for compressing a very powerful pill."},pillBox:{id:"pillBox",imageFile:"pillBox",name:"pill box",type:"pillBox",value:100,description:"A wooden box required for holding a very powerful pill."},pillPouch:{id:"pillPouch",imageFile:"pillPouch",name:"pill pouch",type:"pillPouch",value:100,description:"A leather pouch designed to fit inside a pill box and preserve the power of certain very potent pills."},unbreakableChain:{id:"unbreakableChain",imageFile:"chain",name:"unbreakable chain",type:"chain",value:1,description:"This chain is specially forged to be incredibly strong, but it's REALLY heavy."},everlastingBrick:{id:"everlastingBrick",imageFile:"brick",name:"everlasting brick",type:"brick",value:1,description:"This brick is specially made to bear unimaginable weight."},everlastingMortar:{id:"everlastingMortar",imageFile:"mortar",name:"everlasting mortar",type:"mortar",value:1,description:"This mortar is specially made to hold up even the highest building."},scaffolding:{id:"scaffolding",imageFile:"scaffolding",name:"scaffolding",type:"scaffolding",value:1,description:"This scaffolding allows you to work for the next level of your tower."},windTome:{id:"windTome",imageFile:"windTome",name:"Tome of Wind Control",type:"windTome",value:1,description:"This book contains a great deal of research on how winds work and how they can be tamed."},army:{id:"army",imageFile:"army",name:"a vast army",type:"army",value:1,description:"This is an army. It fits nicely in your backpack due to your mastery of transdimensional magic."},immortality:{id:"immortality",imageFile:"immortality",name:"Essence of Immortality",type:"immortality",value:1/0,description:"The object of your obsession. Using this will make you immortal.",useLabel:"Become Immortal",useDescription:"Become immortal and win the first phase of the game.",useConsumes:!0,use:()=>{this.impossibleTaskService||(this.impossibleTaskService=this.injector.get(ja)),this.impossibleTaskService.taskProgress[fe.OvercomeDeath].progress++,this.impossibleTaskService.activeTaskIndex=fe.OvercomeDeath,this.impossibleTaskService.checkCompletion(),this.impossibleTaskService.taskProgress[fe.OvercomeDeath].complete&&(this.logService.injury(D.STORY,"YOU HAVE ACHIEVED IMMORTALITY! YOU WILL LIVE FOREVER!"),this.gameStateService||(this.gameStateService=this.injector.get(Ut)),this.gameStateService.easyModeEver&&this.logService.log(D.STORY,"Good work, even if you did take the easy path. For more of a challenge, you could reset and try without using the easy game mode."),this.logService.log(D.STORY,"You started your journey on "+new Date(this.gameStateService.gameStartTimestamp).toDateString()+" and succeeded in your quest on "+(new Date).toDateString()+"."),this.logService.log(D.STORY,"You took "+this.mainLoopService.totalTicks+" days over "+this.characterService.totalLives+" lifetimes to overcome death."),this.characterService.immortal=!0)}},portalKey:{id:"portalKey",imageFile:"key",name:"Portal Key",type:"portalKey",value:1/0,description:"The key to Lord Yama's kingdom. With this key, you can use his portals to instantly travel anywhere.",useLabel:"Create a portal back to the palace of the gods on Mount Penglai and claim your throne.",useDescription:"Become a god and win the second phase of the game.",useConsumes:!0,use:()=>{this.logService.injury(D.STORY,"YOU HAVE ACHIEVED GODHOOD! YOU WILL RULE OVER THE UNIVERSE FOREVER!"),this.hellService||(this.hellService=this.injector.get(We)),this.hellService.inHell=!1,this.gameStateService||(this.gameStateService=this.injector.get(Ut)),this.activityService||(this.activityService=this.injector.get(bt)),this.battleService||(this.battleService=this.injector.get(Vt)),this.logService.log(D.STORY,"You started your journey on "+new Date(this.gameStateService.gameStartTimestamp).toDateString()+" and achieved godhood on "+(new Date).toDateString()+"."),this.logService.log(D.STORY,"You took "+this.mainLoopService.totalTicks+" days over "+this.characterService.totalLives+" lifetimes to claim your throne on Mount Penglai."),this.characterService.god=!0,this.gameStateService.unlockPanel("portalPanel")}},fingers:{id:"fingers",imageFile:"finger",name:"fingers",type:"fingers",value:1,description:"A handful of bloody fingers. The demons carry them as grisly trophies. Now, it seems, you do too."},tokenOfGratitude:{id:"tokenOfGratitude",imageFile:"token",name:"token of gratitude",type:"tokenOfGratitude",value:1,description:"A small keepsake from your family member."},mirrorShard:{id:"mirrorShard",imageFile:"mirrorShard",name:"mirror shard",type:"mirrorShard",value:1,description:"A shard of broken glass. You carefully turn the reflective side away from you."},iceCore:{id:"iceCore",imageFile:"iceCore",name:"ice core",type:"iceCore",value:1,description:"A small sphere containing the essence of pure cold."},fireCore:{id:"fireCore",imageFile:"fireCore",name:"fire core",type:"fireCore",value:1,description:"A small sphere containing the essence of pure heat."},treasureMap:{id:"treasureMap",imageFile:"treasureMap",name:"treasure map",type:"treasureMap",value:1,description:"A treasure map with the location of a stolen relic."},stolenRelic:{id:"stolenRelic",imageFile:"relic",name:"stolen relic",type:"stolenRelic",value:1,description:"A treasure pilfered from a tomb."},hellCrownTongueRippers:{id:"hellCrownTongueRippers",imageFile:"crown",name:"Crown of the Tongue Rippers",type:"hellcrown",value:1/0,description:"A crown proving your mastery over the Hell of Tongue Rippers. Using this will unlock a new type of follower.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.followerService||(this.followerService=this.injector.get(Gt)),this.hellService.completedHellBosses.includes(Z.TongueRipping)||this.hellService.completedHellBosses.push(Z.TongueRipping),this.logService.log(D.STORY,"The Crown of Tongue Rippers settles onto your head, then sinks in to become a part of your very soul. You feel that your words carry a new power that can inspire a new kind of follower to worship you as the god you are becoming. Perhaps a trip back to the mortal realm through reincarnation might be worthwhile."),this.followerService.unlockJob("prophet")}},hellCrownScissors:{id:"hellCrownScissors",imageFile:"crown",name:"Crown of Scissors",type:"hellcrown",value:1/0,description:"A crown proving your mastery over the Hell of Scissors. Using this will unlock a new ability for your followers.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.followerService||(this.followerService=this.injector.get(Gt)),this.hellService.completedHellBosses.includes(Z.Scissors)||this.hellService.completedHellBosses.push(Z.Scissors),this.logService.log(D.STORY,"The Crown of Scissors settles onto your head, then sinks in to become a part of your very soul. You feel a deeper appreciation for marriage and family, and your followers sense it."),this.logService.log(D.STORY,"From now on, each follower will train a child to replace themselves in your service when they pass away."),this.followerService.autoReplaceUnlocked=!0}},hellCrownTreesOfKnives:{id:"hellCrownTreesOfKnives",imageFile:"crown",name:"Crown of Knives",type:"hellcrown",value:1/0,description:"A crown proving your mastery over the Hell of Trees of Knives. Using this will unlock a new follower.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.followerService||(this.followerService=this.injector.get(Gt)),this.hellService.completedHellBosses.includes(Z.TreesOfKnives)||this.hellService.completedHellBosses.push(Z.TreesOfKnives),this.logService.log(D.STORY,"The Crown of Knives settles onto your head, then sinks in to become a part of your very soul. You can recruit a new follower specialized in honoring ancestors."),this.followerService.unlockJob("moneyBurner")}},hellCrownMirrors:{id:"hellCrownMirrors",imageFile:"crown",name:"Crown of Mirrors",type:"hellcrown",value:1/0,description:"A crown proving your mastery over the Hell of Mirrors. Using this will unlock a new understanding of combat.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.followerService||(this.followerService=this.injector.get(Gt)),this.activityService||(this.activityService=this.injector.get(bt)),this.hellService.completedHellBosses.includes(Z.Mirrors)||this.hellService.completedHellBosses.push(Z.Mirrors),this.logService.log(D.STORY,"The Crown of Mirrors settles onto your head, then sinks in to become a part of your very soul. A deep understanding of combat based on your many battles with yourself reveals itself in a moment of enlightenment."),this.characterService.attributes.combatMastery.value+=1,this.activityService.CombatTraining.unlocked=!0}},hellCrownSteamers:{id:"hellCrownSteamers",imageFile:"crown",name:"Crown of Steam",type:"hellcrown",value:1/0,description:"A misty crown proving your mastery over the Hell of Steamers. Using this will unlock a new spell.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.battleService||(this.battleService=this.injector.get(Vt)),this.hellService.completedHellBosses.includes(Z.Steamers)||this.hellService.completedHellBosses.push(Z.Steamers),this.logService.log(D.STORY,"The Crown of Steam settles onto your head, then sinks in to become a part of your very soul. You learn to harness the intense heat of the Hell of Steamers in a powerful magical blast."),this.battleService.addPyroclasm()}},hellCrownPillars:{id:"hellCrownPillars",imageFile:"crown",name:"Crown of Pillars",type:"hellcrown",value:1/0,description:"A crown topped with tiny copper pillars. Using this will unlock a new spell.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.battleService||(this.battleService=this.injector.get(Vt)),this.hellService.completedHellBosses.includes(Z.CopperPillars)||this.hellService.completedHellBosses.push(Z.CopperPillars),this.logService.log(D.STORY,"The Crown of Pillars settles onto your head, then sinks in to become a part of your very soul. You can now summon a massive metal fist with each of your combat strikes."),this.battleService.addMetalFist()}},hellCrownMountainOfKnives:{id:"hellCrownMountainOfKnives",imageFile:"crown",name:"Crown of the Knife Mountain",type:"hellcrown",value:1/0,description:"A crown shaped like a mountain covered in tiny blades. Using this will unlock a new understanding of the world.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.hellService.completedHellBosses.includes(Z.MountainOfKnives)||this.hellService.completedHellBosses.push(Z.MountainOfKnives),this.logService.log(D.STORY,"The crown settles onto your head, then sinks in to become a part of your very soul. Having balanced your karmic debt, you begin to see the balance in all the world around you. Bonuses for Yin and Yang balance are greatly increased."),this.characterService.yinYangBoosted=!0}},hellCrownMountainOfIce:{id:"hellCrownMountainOfIce",imageFile:"crown",name:"Crown of Ice",type:"hellcrown",value:1/0,description:"A frozen crown. Using this will unlock a new spell.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.hellService.completedHellBosses.includes(Z.MountainOfIce)||this.hellService.completedHellBosses.push(Z.MountainOfIce),this.battleService||(this.battleService=this.injector.get(Vt)),this.logService.log(D.STORY,"The crown settles onto your head, then sinks in to become a part of your very soul. The deep freezing from the mountain has given you a new idea for how to defend yourself."),this.battleService.addIceShield()}},hellCrownCauldronsOfOil:{id:"hellCrownCauldronsOfOil",imageFile:"crown",name:"Cauldron Crown",type:"hellcrown",value:1/0,description:"An ugly pot you can wear on your head. Using this will unlock a new respect for the sanctity and dignity of human life.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.hellService.completedHellBosses.includes(Z.CauldronsOfOil)||this.hellService.completedHellBosses.push(Z.CauldronsOfOil),this.logService.log(D.STORY,"The crown settles onto your head, then sinks in to become a part of your very soul. A new resolve awakens in you to protect the defenseless from those that would abuse them."),this.characterService.righteousWrathUnlocked=!0}},hellCrownCattlePit:{id:"hellCrownCattlePit",imageFile:"crown",name:"Cow Crown",type:"hellcrown",value:1/0,description:"Now you are the Cow Emperor. Using this will let you understand animals, making your pets much more effective.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.hellService.completedHellBosses.includes(Z.CattlePit)||this.hellService.completedHellBosses.push(Z.CattlePit),this.followerService||(this.followerService=this.injector.get(Gt)),this.logService.log(D.STORY,"The crown settles onto your head, then sinks in to become a part of your very soul. You find a new and deep connection to animals that you've never felt before."),this.followerService.petsBoosted=!0}},hellCrownCrushingBoulder:{id:"hellCrownCrushingBoulder",imageFile:"crown",name:"Boulder Crown",type:"hellcrown",value:1/0,description:"A heavy stone crown. Using this will greatly improve your physical characteristics.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.hellService.completedHellBosses.includes(Z.CrushingBoulder)||this.hellService.completedHellBosses.push(Z.CrushingBoulder),this.logService.log(D.STORY,"The crown settles onto your head, then sinks in to become a part of your very soul. Your muscles swell with new power."),this.characterService.bonusMuscles=!0}},hellCrownMortarsAndPestles:{id:"hellCrownMortarsAndPestles",imageFile:"crown",name:"Gluttonous Crown",type:"hellcrown",value:1/0,description:"A crown topped with mortars full of hellfire. Using this will lead you to a new enlightenment about food.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.hellService.completedHellBosses.includes(Z.MortarsAndPestles)||this.hellService.completedHellBosses.push(Z.MortarsAndPestles),this.farmService||(this.farmService=this.injector.get(wr)),this.inventoryService||(this.inventoryService=this.injector.get(he)),this.logService.log(D.STORY,"The crown settles onto your head, then sinks in to become a part of your very soul. You come to a deep appreciation of the value and importance of food."),this.farmService.hellFood=!0,this.inventoryService.divinePeachesUnlocked=!0,this.inventoryService.updateFarmFoodList()}},hellCrownBloodPool:{id:"hellCrownBloodPool",imageFile:"crown",name:"Blood Crown",type:"hellcrown",value:1/0,description:"A liquid crown made of blood. Using this will empower your bloodline.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.hellService.completedHellBosses.includes(Z.BloodPool)||this.hellService.completedHellBosses.push(Z.BloodPool),this.homeService||(this.homeService=this.injector.get(zt)),this.logService.log(D.STORY,"The crown settles onto your head, then sinks in to become a part of your very soul. Your bloodline becomes so powerful that the benefits of your ancestral home now apply even when you are no longer in the mortal realm."),this.homeService.hellHome=!0}},hellCrownWrongfulDead:{id:"hellCrownWrongfulDead",imageFile:"crown",name:"Hollow Crown",type:"hellcrown",value:1/0,description:"A crown so light you can barely feel it. Using this will greatly improve your mental characteristics.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.hellService.completedHellBosses.includes(Z.WrongfulDead)||this.hellService.completedHellBosses.push(Z.WrongfulDead),this.logService.log(D.STORY,"The crown settles onto your head, then sinks in to become a part of your very soul. Your mind suddenly expands with endless new possibilities."),this.characterService.bonusBrains=!0}},hellCrownDismemberment:{id:"hellCrownDismemberment",imageFile:"crown",name:"Crown of Limbs",type:"hellcrown",value:1/0,description:"A crown topped with dismembered limbs. Using this will open up a new understanding of spirit gems.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.hellService.completedHellBosses.includes(Z.Dismemberment)||this.hellService.completedHellBosses.push(Z.Dismemberment),this.activityService||(this.activityService=this.injector.get(bt)),this.logService.log(D.STORY,"The crown settles onto your head, then sinks in to become a part of your very soul. If you are spiritual enough, you can now purify gems to infuse new effects into your weapons."),this.activityService.purifyGemsUnlocked=!0}},hellCrownFireMountain:{id:"hellCrownFireMountain",imageFile:"crown",name:"Lava Crown",type:"hellcrown",value:1/0,description:"A crown made of pure lava. Using this will unlock a new spell.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.hellService.completedHellBosses.includes(Z.MountainOfFire)||this.hellService.completedHellBosses.push(Z.MountainOfFire),this.battleService||(this.battleService=this.injector.get(Vt)),this.logService.log(D.STORY,"The crown settles onto your head, then sinks in to become a part of your very soul. The intense heat of the volcano has strengthened your inner fire, allowing you to form a barrier to protect you and harm your enemies."),this.battleService.addFireShield()}},hellCrownMills:{id:"hellCrownMills",imageFile:"crown",name:"Millstone Crown",type:"hellcrown",value:1/0,description:"A heavy crown with the weight of a millstone. Using this will increase the limits of your health.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.hellService.completedHellBosses.includes(Z.Mills)||this.hellService.completedHellBosses.push(Z.Mills),this.logService.log(D.STORY,"The crown settles onto your head, then sinks in to become a part of your very soul. The intense pressure of the mill has strengthened your skin and bones allowing you to increase your total health dramatically."),this.characterService.bonusHealth=!0}},hellCrownSaws:{id:"hellCrownSaws",imageFile:"crown",name:"Saw Crown",type:"hellcrown",value:1/0,description:"A toothy crown with sawblades pointing in all directions. Using this will unlock a new follower.",useLabel:"Accept the Crown",useDescription:"",useConsumes:!0,use:()=>{this.hellService||(this.hellService=this.injector.get(We)),this.hellService.completedHellBosses.includes(Z.Saws)||this.hellService.completedHellBosses.push(Z.Saws),this.followerService||(this.followerService=this.injector.get(Gt)),this.logService.log(D.STORY,"The crown settles onto your head, then sinks in to become a part of your very soul. You can now recruit followers that put their swindling and cheating to good use."),this.followerService.unlockJob("banker")}},fastPlayManual:{id:"fastPlayManual",name:"Manual of Expeditious Time Perception",type:"manual",description:"This manual teaches you to perceive time as moving faster.",value:28e3,useLabel:"Read",useDescription:"Permanently unlock fast game speed.",useConsumes:!0,use:()=>{this.mainLoopService.unlockFastSpeed=!0,this.mainLoopService.topDivider=this.mainLoopService.topDivider>5?5:this.mainLoopService.topDivider,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>this.mainLoopService.unlockFastSpeed},fasterPlayManual:{id:"fasterPlayManual",name:"Manual of Greatly Expeditious Time Perception",type:"manual",description:"This manual teaches you to perceive time as moving much faster.",value:1e5,useLabel:"Read",useDescription:"Permanently unlock faster game speed.",useConsumes:!0,use:()=>{this.mainLoopService.unlockFasterSpeed=!0,this.mainLoopService.topDivider=this.mainLoopService.topDivider>2?2:this.mainLoopService.topDivider,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>this.mainLoopService.unlockFasterSpeed},fastestPlayManual:{id:"fastestPlayManual",name:"Manual of Ludicrous Time Perception",type:"manual",description:"This manual teaches you to perceive time as moving incredibly fast.",value:8e5,useLabel:"Read",useDescription:"Permanently unlock fastest game speed.",useConsumes:!0,use:()=>{this.mainLoopService.unlockFastestSpeed=!0,this.mainLoopService.topDivider=1,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>this.mainLoopService.unlockFastestSpeed},restartActivityManual:{id:"restartActivityManual",name:"Manual of Remembered Plans",type:"manual",description:"This manual teaches you to automatically schedule activities that you performed in your previous life.",value:500,useLabel:"Read",useDescription:"Permanently unlock preserving activity plans across reincarnations.",useConsumes:!0,use:()=>{this.activityService||(this.activityService=this.injector.get(bt)),this.activityService.autoRestart=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.activityService||(this.activityService=this.injector.get(bt)),this.activityService?.autoRestart)},autoSellManual:{id:"autoSellManual",name:"Manual of Mercantile Fluency",type:"manual",description:"This manual teaches you to automatically sell items.",value:8e4,useLabel:"Read",useDescription:"Permanently unlock the auto-sell button in the inventory panel.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoSellUnlocked=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoSellUnlocked)},autoEatManual:{id:"autoEatManual",name:"Manual of Wise Consumption",type:"manual",description:"This manual teaches you to automatically eat to maximize your health, nutition, and stamina.",value:1e5,useLabel:"Read",useDescription:"Permanently unlock the auto-eat button in the inventory panel.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoEatUnlocked=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoEatUnlocked)},autoUseManual:{id:"autoUseManual",name:"Manual of Facilitated Usage",type:"manual",description:"This manual teaches you to automatically use items.",value:1e6,useLabel:"Read",useDescription:"Permanently unlock the auto-use button in the inventory panel.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoUseUnlocked=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoUseUnlocked)},autoBalanceManual:{id:"autoBalanceManual",name:"Manual of Balanced Consumption and Mercantile Moderation",type:"manual",description:"This manual teaches you to automatically balance between using and selling items.",value:5e7,useLabel:"Read",useDescription:"Permanently unlock the auto-balance button in the inventory panel.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoBalanceUnlocked=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoBalanceUnlocked)},autoPillManual:{id:"autoPillManual",name:"Manual of Reckless Pill Consumption",type:"manual",description:"This manual teaches you to automatically use all pills.",value:1e10,useLabel:"Read",useDescription:"Permanently unlock auto-swallowing all pills.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoPillUnlocked=!0,this.inventoryService.autoPillEnabled=!0;for(let a=this.inventoryService.autoUseEntries.length-1;a>=0;a--)this.inventoryService.autoUseEntries[a].name.includes("Pill")&&this.inventoryService.autoUseEntries.splice(a,1);this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoPillUnlocked)},basicHealthRegenerationManual:{id:"basicHealthRegenerationManual",name:"Manual of Basic Health Regeration",type:"manual",description:"This manual teaches you to automatically recover a small amount of health during your battles.",value:1e10,useLabel:"Read",useDescription:"Permanently unlock gives you a small amount of health each time tick during your battles.",useConsumes:!0,use:()=>{this.characterService.status.health.battleTickRecovery<1&&(this.characterService.status.health.battleTickRecovery=1),this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>this.characterService.status.health.battleTickRecovery>=1},basicQiRegenerateManual:{id:"basicQiRegenerateManual",name:"Manual of Basic Qi Regeration",type:"manual",description:"This manual teaches you to automatically recover a small amount of Qi during your battles.",value:1e15,useLabel:"Read",useDescription:"Permanently unlock gives you a small amount of Qi each time tick during your battles.",useConsumes:!0,use:()=>{this.characterService.status.qi.battleTickRecovery<1&&(this.characterService.status.qi.battleTickRecovery=1),this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>this.characterService.status.qi.battleTickRecovery>=1},autoTroubleManual:{id:"autoTroubleManual",name:"Manual of Consistent Troublemaking",type:"manual",description:"This manual makes looking for trouble more effective, calling out an enemy every time.",value:5e8,useLabel:"Read",useDescription:"Permanently improve Looking for Trouble.",useConsumes:!0,use:()=>{this.battleService||(this.battleService=this.injector.get(Vt)),this.battleService.autoTroubleUnlocked=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.battleService||(this.battleService=this.injector.get(Vt)),this.battleService?.autoTroubleUnlocked)},autoWeaponMergeManual:{id:"autoWeaponMergeManual",name:"Manual of Effortless Weapon Merging",type:"manual",description:"This manual teaches you to automatically merge weapons.",value:1e9,useLabel:"Read",useDescription:"Permanently unlock automatic weapon merging in the inventory panel.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoWeaponMergeUnlocked=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoWeaponMergeUnlocked)},autoArmorMergeManual:{id:"autoArmorMergeManual",name:"Manual of Effortless Armor Merging",type:"manual",description:"This manual teaches you to automatically merge armor.",value:1e9,useLabel:"Read",useDescription:"Permanently unlock automatic armor merging in the inventory panel.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoArmorMergeUnlocked=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoArmorMergeUnlocked)},useSpiritGemManual:{id:"useSpiritGemManual",name:"Manual of Spirit Gem Comprehension",type:"manual",description:"This manual teaches you to incorporate spirit gems in your crafting.",value:5e5,useLabel:"Read",useDescription:"Permanently unlock including spirit gems when creating items.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.useSpiritGemUnlocked=!0,this.inventoryService.useSpiritGemWeapons=!0,this.inventoryService.useSpiritGemPotions=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.useSpiritGemUnlocked)},bestHerbsManual:{id:"bestHerbsManual",name:"Manual of the Herbal Connoisseur",type:"manual",description:"This manual teaches you to automatically sell any herbs below your current ability to gather.",value:5e6,useLabel:"Read",useDescription:"Permanently unlock auto-selling lower grade herbs.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoSellOldHerbs=!0,this.inventoryService.autoSellOldHerbsEnabled=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoSellOldHerbs)},bestWoodManual:{id:"bestWoodManual",name:"Manual of the Discerning Wood Collector",type:"manual",description:"This manual teaches you to automatically sell any logs below your current ability to gather.",value:5e6,useLabel:"Read",useDescription:"Permanently unlock auto-selling lower grade logs.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoSellOldWood=!0,this.inventoryService.autoSellOldWoodEnabled=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoSellOldWood)},bestOreManual:{id:"bestOreManual",name:"Manual of Mineral Pragmatism",type:"manual",description:"This manual teaches you to automatically sell any ores and bars below your current ability to gather.",value:5e6,useLabel:"Read",useDescription:"Permanently unlock auto-selling lower grade ores and bars.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoSellOldOre=!0,this.inventoryService.autoSellOldOreEnabled=!0,this.inventoryService.autoSellOldBarsEnabled=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoSellOldOre)},bestHidesManual:{id:"bestHidesManual",name:"Manual of Pelt Perception",type:"manual",description:"This manual teaches you to automatically sell any hides below your current ability to gather.",value:5e6,useLabel:"Read",useDescription:"Permanently unlock auto-selling lower grade hides.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoSellOldHides=!0,this.inventoryService.autoSellOldHidesEnabled=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoSellOldHides)},bestWeaponManual:{id:"bestWeaponManual",name:"Manual of Wise Weapon Selection",type:"manual",description:"This manual teaches you to automatically equip the best weapons that you have.",value:1e10,useLabel:"Read",useDescription:"Permanently unlock auto-equipping the best weapons in your inventory.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoequipBestWeapon=!0,this.inventoryService.automergeEquipped=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoequipBestWeapon)},bestArmorManual:{id:"bestArmorManual",name:"Manual of Defensive Preparation",type:"manual",description:"This manual teaches you to automatically equip the best armor that you have.",value:1e10,useLabel:"Read",useDescription:"Permanently unlock auto-equipping the best armor in your inventory.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoequipBestArmor=!0,this.inventoryService.automergeEquipped=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoequipBestArmor)},betterStorageManual:{id:"betterStorageManual",name:"Manual of Efficient Item Storage",type:"manual",description:"This manual teaches you to store items more efficiently so you can keep more in each stack.",value:1e6,useLabel:"Read",useDescription:"Permanently increase by ten times the number of items you can put in each stack in your inventory.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.maxStackSize*=10,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.maxStackSize>=1e3)},evenBetterStorageManual:{id:"evenBetterStorageManual",name:"Manual of Hyperefficient Item Storage",type:"manual",description:"This manual teaches you to store items more efficiently so you can keep more in each stack.",value:1e8,useLabel:"Read",useDescription:"Permanently increase by ten times the number of items you can put in each stack in your inventory.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.maxStackSize*=10,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.maxStackSize>=1e4)},bestStorageManual:{id:"bestStorageManual",name:"Manual of Hyperspatial Item Storage",type:"manual",description:"This manual teaches you to store items more efficiently so you can keep more in each stack.",value:1e8,useLabel:"Read",useDescription:"Permanently increase by ten times the number of items you can put in each stack in your inventory.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.maxStackSize*=10,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.maxStackSize>=1e5)},followerAutoDismissManual:{id:"followerAutoDismissManual",name:"Manual of Judicious Disciple Selection",type:"manual",description:"This manual teaches you to automatically dismiss followers based on their jobs.",value:1e11,useLabel:"Read",useDescription:"Permanently increase by ten times the number of items you can put in each stack in your inventory.",useConsumes:!0,use:()=>{this.followerService||(this.followerService=this.injector.get(Gt)),this.followerService.autoDismissUnlocked=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.followerService||(this.followerService=this.injector.get(Gt)),this.followerService.autoDismissUnlocked)},bestGemsManual:{id:"bestGemsManual",name:"Manual of Gemological Purity",type:"manual",description:"This manual teaches you to automatically sell gems that are below the value of the gems your current monster drops.",value:1e9,useLabel:"Read",useDescription:"Permanently unlock gem auto-selling for lower level gems.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoSellOldGemsUnlocked=!0,this.inventoryService.autoSellOldGemsEnabled=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoSellOldGemsUnlocked)},autoPauseSettingsManual:{id:"autoPauseSettingsManual",name:"Manual of Customized Danger Sensing",type:"manual",description:"This manual teaches you to customize options for automatically pausing the game.",value:1e7,useLabel:"Read",useDescription:"Permanently unlock auto-pausing customization",useConsumes:!0,use:()=>{this.activityService||(this.activityService=this.injector.get(bt)),this.activityService.autoPauseUnlocked=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.activityService||(this.activityService=this.injector.get(bt)),this.activityService.autoPauseUnlocked)},bankedTicksEfficiencyManual:{id:"bankedTicksEfficiencyManual",name:"Manual of Efficient Time Banking",type:"manual",description:"This manual teaches you to more efficiently bank ticks when paused or offline.",value:25e8,useLabel:"Read",useDescription:"Permanently increase banked tick efficiency to 50%.",useConsumes:!0,use:()=>{this.mainLoopService.offlineDivider=2,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>this.mainLoopService.offlineDivider<=2},autoRestManual:{id:"autoRestManual",name:"Manual of Timely Rest",type:"manual",description:"This manual teaches you to avoid overwork by resting just in time.",value:4e10,useLabel:"Read",useDescription:"Permanently unlock automatic resting.",useConsumes:!0,use:()=>{this.activityService||(this.activityService=this.injector.get(bt)),this.activityService.autoRestUnlocked=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.activityService||(this.activityService=this.injector.get(bt)),this.activityService.autoRestUnlocked)},ageSpeedManual:{id:"ageSpeedManual",name:"Manual of Aged Time Perception",type:"manual",description:"This manual teaches you to perceive time faster the older you are.",value:75e8,useLabel:"Read",useDescription:"Permanently increase time passage based on your age.",useConsumes:!0,use:()=>{this.mainLoopService.unlockAgeSpeed=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>this.mainLoopService.unlockAgeSpeed},totalPlaytimeManual:{id:"totalPlaytimeManual",name:"Manual of Lifetime Time Perception",type:"manual",description:"This manual teaches you to perceive time faster the longer you've lived across all your lives.",value:5e10,useLabel:"Read",useDescription:"Permanently increase time passage based on your total time lived.",useConsumes:!0,use:()=>{this.mainLoopService.unlockPlaytimeSpeed=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>this.mainLoopService.unlockPlaytimeSpeed},perpetualCraftingManual:{id:"perpetualCraftingManual",name:"Manual of Perpetual Crafting",type:"manual",description:"This manual teaches you to automatically reload crafting input items into workstations when you obtain them.",value:1e8,useLabel:"Read",useDescription:"Permanently unlock automatic crafting ingredient reloading.",useConsumes:!0,use:()=>{this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoReloadCraftInputs=!0,this.logService.log(D.EVENT,"The teachings of the manual sink deep into your soul. You'll be able to apply this knowledge in all future reincarnations.")},owned:()=>(this.inventoryService||(this.inventoryService=this.injector.get(he)),this.inventoryService.autoReloadCraftInputs)}}}getItemById(e){if(this.items[e])return this.items[e]}getFurnitureById(e){for(const n of this.furniture)if(n.id===e)return n;return null}static{this.\u0275fac=function(n){return new(n||t)(P(Ie),P(we),P(Xi),P(tt))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),he=(()=>{class t{constructor(e,n,r,o,a,s){this.injector=e,this.logService=n,this.characterService=r,this.itemRepoService=a,this.titleCasePipe=s,this.itemStacks=[],this.stashedItemStacks=[],this.maxItems=10,this.maxStackSize=100,this.selectedItem=this.getEmptyItemStack(),this.autoequipBestEnabled=!0,this.lifetimeUsedItems=0,this.lifetimeUsedFood=0,this.lifetimeSoldItems=0,this.lifetimePotionsUsed=0,this.lifetimePillsUsed=0,this.lifetimeGemsSold=0,this.motherGift=!1,this.grandmotherGift=!1,this.thrownAwayItems=0,this.mergeCounter=0,this.autoBuyFood=!0,this.automergeEquipped=!1,this.autoSort=!1,this.descendingSort=!1,this.divinePeachesUnlocked=!1,this.equipmentUnlocked=!1,this.equipmentCreated=0,this.emptyIdCounter=0,this.emptyIdPrefix=Date.now()+"",this.totalItemsReceived=0,this.autoReloadCraftInputs=!1,this.pillCounter=0,this.potionCounter=0,this.herbCounter=0,this.gemsAcquired=0,this.foodEatenToday=0,this.maxFoodPerDay=10,this.heirloomSlots=0,this.farmFoodList=[this.itemRepoService.items.rice,this.itemRepoService.items.cabbage,this.itemRepoService.items.beans,this.itemRepoService.items.broccoli,this.itemRepoService.items.calabash,this.itemRepoService.items.taro,this.itemRepoService.items.pear,this.itemRepoService.items.melon,this.itemRepoService.items.plum,this.itemRepoService.items.apricot,this.itemRepoService.items.peach],setTimeout(()=>this.hellService=this.injector.get(We)),setTimeout(()=>this.homeService=this.injector.get(zt)),setTimeout(()=>this.battleService=this.injector.get(Vt)),setTimeout(()=>this.locationService=this.injector.get(Ml)),this.bigNumberPipe=this.injector.get(It),this.autoSellUnlocked=!1,this.autoSellEntries=[],this.autoUseUnlocked=!1,this.autoEatUnlocked=!1,this.autoEatNutrition=!0,this.autoEatHealth=!1,this.autoEatStamina=!1,this.autoEatQi=!1,this.autoEatAll=!1,this.autoBalanceUnlocked=!1,this.autoBalanceItems=[],this.autoPillUnlocked=!1,this.autoPillEnabled=!1,this.autoWeaponMergeUnlocked=!1,this.autoArmorMergeUnlocked=!1,this.autoequipBestWeapon=!1,this.autoequipBestArmor=!1,this.useSpiritGemUnlocked=!1,this.useSpiritGemWeapons=!1,this.useSpiritGemPotions=!1,this.useCheapestSpiritGem=!1,this.autoSellOldHerbs=!1,this.autoSellOldWood=!1,this.autoSellOldOre=!1,this.autoSellOldHides=!1,this.autoSellOldHerbsEnabled=!1,this.autoSellOldWoodEnabled=!1,this.autoSellOldOreEnabled=!1,this.autoSellOldBarsEnabled=!1,this.autoSellOldHidesEnabled=!1,this.autoSellOldGemsUnlocked=!1,this.autoSellOldGemsEnabled=!1,this.autoUseEntries=[];for(const l of this.farmFoodList)this.autoUseEntries.push({name:l.name,type:"food",reserve:0});for(let l=0;l<this.maxItems;l++)this.itemStacks.push(this.getEmptyItemStack());o.inventoryTickSubject.subscribe(()=>{this.tick()}),o.longTickSubject.subscribe(()=>{this.autoequipBestWeapon&&this.autoWeaponMergeUnlocked&&this.autoequipBestEnabled&&this.autoequipWeapons(),this.autoequipBestArmor&&this.autoArmorMergeUnlocked&&this.autoequipBestEnabled&&this.autoequipArmor();for(const l of["head","body","legs","feet"]){const c=this.characterService.equipment[l];c&&this.updateArmorDescription(c)}for(const l of["leftHand","rightHand"]){const c=this.characterService.equipment[l];c&&this.updateWeaponDescription(c)}for(const l of this.itemStacks)if(l.item){const c=l.item;Pi(c)&&(c.weaponStats?this.updateWeaponDescription(c):c.armorStats&&this.updateArmorDescription(c))}this.autoSort&&this.sortInventory()}),o.reincarnateSubject.subscribe(()=>{this.reset()})}tick(){this.characterService.dead||(this.characterService.status.nutrition.value--,this.foodEatenToday=0,this.eatDailyMeal(),this.mergeCounter>=20?(this.autoWeaponMergeUnlocked&&this.autoWeaponMerge(),this.autoArmorMergeUnlocked&&this.autoArmorMerge(),this.mergeCounter=0):this.mergeCounter++)}getProperties(){return{itemStacks:this.itemStacks,stashedItemStacks:this.stashedItemStacks,autoSellUnlocked:this.autoSellUnlocked,autoSellEntries:this.autoSellEntries,autoUseUnlocked:this.autoUseUnlocked,autoEatUnlocked:this.autoEatUnlocked,autoEatNutrition:this.autoEatNutrition,autoEatHealth:this.autoEatHealth,autoEatStamina:this.autoEatStamina,autoEatQi:this.autoEatQi,autoEatAll:this.autoEatAll,autoUseEntries:this.autoUseEntries,autoBalanceUnlocked:this.autoBalanceUnlocked,autoBalanceItems:this.autoBalanceItems,autoPillUnlocked:this.autoPillUnlocked,autoPillEnabled:this.autoPillEnabled,autoWeaponMergeUnlocked:this.autoWeaponMergeUnlocked,autoArmorMergeUnlocked:this.autoArmorMergeUnlocked,useSpiritGemUnlocked:this.useSpiritGemUnlocked,useSpiritGemWeapons:this.useSpiritGemWeapons,useCheapestSpiritGem:this.useCheapestSpiritGem,autoSellOldHerbs:this.autoSellOldHerbs,autoSellOldWood:this.autoSellOldWood,autoSellOldOre:this.autoSellOldOre,autoSellOldHides:this.autoSellOldHides,autoSellOldHerbsEnabled:this.autoSellOldHerbsEnabled,autoSellOldWoodEnabled:this.autoSellOldWoodEnabled,autoSellOldOreEnabled:this.autoSellOldOreEnabled,autoSellOldBarsEnabled:this.autoSellOldBarsEnabled,autoSellOldHidesEnabled:this.autoSellOldHidesEnabled,autoequipBestWeapon:this.autoequipBestWeapon,autoequipBestArmor:this.autoequipBestArmor,autoequipBestEnabled:this.autoequipBestEnabled,maxStackSize:this.maxStackSize,thrownAwayItems:this.thrownAwayItems,autoSellOldGemsUnlocked:this.autoSellOldGemsUnlocked,autoSellOldGemsEnabled:this.autoSellOldGemsEnabled,autoBuyFood:this.autoBuyFood,automergeEquipped:this.automergeEquipped,autoSort:this.autoSort,descendingSort:this.descendingSort,divinePeachesUnlocked:this.divinePeachesUnlocked,equipmentUnlocked:this.equipmentUnlocked,equipmentCreated:this.equipmentCreated,totalItemsReceived:this.totalItemsReceived,autoReloadCraftInputs:this.autoReloadCraftInputs,pillCounter:this.pillCounter,potionCounter:this.potionCounter,herbCounter:this.herbCounter,gemsAcquired:this.gemsAcquired,foodEatenToday:this.foodEatenToday,heirloomSlots:this.heirloomSlots}}setProperties(e){this.itemStacks=e.itemStacks;for(let n=0;n<this.itemStacks.length;n++)this.itemStacks[n]?this.fixId(n):this.setItemEmptyStack(n);this.stashedItemStacks=e.stashedItemStacks,this.autoSellUnlocked=e.autoSellUnlocked,this.autoSellEntries=e.autoSellEntries,this.autoUseUnlocked=e.autoUseUnlocked,this.autoEatUnlocked=e.autoEatUnlocked,this.autoEatNutrition=e.autoEatNutrition,this.autoEatHealth=e.autoEatHealth,this.autoEatStamina=e.autoEatStamina,this.autoEatQi=e.autoEatQi,this.autoEatAll=e.autoEatAll,this.autoUseEntries=e.autoUseEntries,this.autoBalanceUnlocked=e.autoBalanceUnlocked,this.autoBalanceItems=e.autoBalanceItems,this.autoPillUnlocked=e.autoPillUnlocked,this.autoPillEnabled=e.autoPillUnlocked,this.autoWeaponMergeUnlocked=e.autoWeaponMergeUnlocked,this.autoArmorMergeUnlocked=e.autoArmorMergeUnlocked,this.useSpiritGemUnlocked=e.useSpiritGemUnlocked,this.useSpiritGemWeapons=e.useSpiritGemWeapons,this.useCheapestSpiritGem=e.useCheapestSpiritGem,this.autoSellOldHerbs=e.autoSellOldHerbs,this.autoSellOldWood=e.autoSellOldWood,this.autoSellOldOre=e.autoSellOldOre,this.autoSellOldHides=e.autoSellOldHides,this.autoSellOldHerbsEnabled=e.autoSellOldHerbsEnabled,this.autoSellOldWoodEnabled=e.autoSellOldWoodEnabled,this.autoSellOldOreEnabled=e.autoSellOldOreEnabled,this.autoSellOldBarsEnabled=e.autoSellOldBarsEnabled,this.autoSellOldHidesEnabled=e.autoSellOldHidesEnabled,this.autoequipBestWeapon=e.autoequipBestWeapon,this.autoequipBestArmor=e.autoequipBestArmor,this.autoequipBestEnabled=e.autoequipBestEnabled,this.maxStackSize=e.maxStackSize,this.thrownAwayItems=e.thrownAwayItems,this.autoSellOldGemsUnlocked=e.autoSellOldGemsUnlocked,this.autoSellOldGemsEnabled=e.autoSellOldGemsEnabled,this.autoBuyFood=e.autoBuyFood,this.automergeEquipped=e.automergeEquipped,this.autoSort=e.autoSort,this.descendingSort=e.descendingSort,this.divinePeachesUnlocked=e.divinePeachesUnlocked,this.updateFarmFoodList(),this.equipmentUnlocked=e.equipmentUnlocked,this.equipmentCreated=e.equipmentCreated,this.totalItemsReceived=e.totalItemsReceived,this.autoReloadCraftInputs=e.autoReloadCraftInputs,this.pillCounter=e.pillCounter,this.potionCounter=e.potionCounter,this.herbCounter=e.herbCounter,this.gemsAcquired=e.gemsAcquired,this.foodEatenToday=e.foodEatenToday,this.heirloomSlots=e.heirloomSlots}updateFarmFoodList(){this.divinePeachesUnlocked&&this.farmFoodList.push(this.itemRepoService.items.divinePeach)}changeMaxItems(e){for(this.maxItems=e;this.itemStacks.length<e;)this.itemStacks.push(this.getEmptyItemStack())}sortInventory(){const e=[],n=[],r=[];for(let a=0;a<this.itemStacks.length;a++){const s=this.itemStacks[a];s.item&&("gem"===s.item.type?n.push(s):"equipment"===s.item.type?r.push(s):e.push(s))}this.descendingSort?(e.sort((a,s)=>a.quantity-s.quantity),e.sort((a,s)=>a.item.value-s.item.value),e.sort((a,s)=>a.item.type>s.item.type?-1:a.item.type===s.item.type?0:1),r.sort((a,s)=>a.item.name>s.item.name?-1:a.item.name===s.item.name?0:1),r.sort((a,s)=>a.item.value-s.item.value),n.sort((a,s)=>a.quantity-s.quantity),n.sort((a,s)=>a.item.value-s.item.value)):(e.sort((a,s)=>s.quantity-a.quantity),e.sort((a,s)=>s.item.value-a.item.value),e.sort((a,s)=>s.item.type>a.item.type?-1:s.item.type===a.item.type?0:1),r.sort((a,s)=>s.item.name>a.item.name?-1:s.item.name===a.item.name?0:1),r.sort((a,s)=>s.item.value-a.item.value),n.sort((a,s)=>s.quantity-a.quantity),n.sort((a,s)=>s.item.value-a.item.value));const o=this.itemStacks.length-e.length-n.length-r.length;this.itemStacks=e,this.itemStacks.push(...r),this.itemStacks.push(...n);for(let a=0;a<o;a++)this.itemStacks.push(this.getEmptyItemStack())}generateWeapon(e,n,r=void 0,o=void 0){this.equipmentCreated++;const a=qr.length*xl.length*Km.length,s=Math.ceil(Math.sqrt(e/1e10)*a);let l=s%qr.length;s>=a&&(l=qr.length-1);let c=Math.floor(s/qr.length);const d=qr[l];let u="";if(c>0){let k=Math.floor(c/xl.length);k>0?(k>Km.length?(k=Km.length,c=xl.length-1):c%=xl.length,u=" of "+Km[k-1]+" "+xl[c]):u=" of "+xl[c-1]}let p=n,g="rightHand",m="metalWeapon";"wood"===n&&(g="leftHand",p="wooden",m="woodenWeapon");const b=r??hR[Math.floor(Math.random()*hR.length)];let C;"Grandmother's Walking Stick"===b?(C=b,m="stick"):C=d+" "+p+" "+b+u,this.logService.log(D.CRAFTING,"Your hard work paid off! You created a new weapon: "+this.titleCasePipe.transform(C)+"!");const w=Math.min(Math.sqrt(e+1),1e3)*e;return{id:"weapon",imageFile:m,name:C,type:"equipment",slot:g,value:e,weaponStats:{baseDamage:w,material:n,baseName:b,effect:o},description:"A unique weapon made of "+n+".<br>Drag and drop onto similar weapons to merge them into something better.<br>Base Damage: "+this.bigNumberPipe.transform(w)}}updateWeaponDescription(e){if(!e.weaponStats)return;let n="";e.weaponStats.effect&&(n=" and imbued with the power of "+e.weaponStats.effect),e.description="A unique weapon made of "+e.weaponStats.material+n+".<br>Drag and drop onto similar weapons to merge them into something better.<br> Base Damage: "+this.bigNumberPipe.transform(e.weaponStats.baseDamage)}updateArmorDescription(e){if(!e.armorStats)return;let n="";e.armorStats.effect&&(n=" and imbued with the power of "+e.armorStats.effect),e.description="A unique piece of armor "+n+".<br>Drag and drop onto similar armor to merge them into something better.<br>Defense: "+this.bigNumberPipe.transform(e.armorStats.defense)}upgradeEquppedEquipment(e){const n=[];if(this.characterService.equipment.leftHand&&n.push(this.characterService.equipment.leftHand),this.characterService.equipment.rightHand&&n.push(this.characterService.equipment.rightHand),this.characterService.equipment.head&&n.push(this.characterService.equipment.head),this.characterService.equipment.body&&n.push(this.characterService.equipment.body),this.characterService.equipment.legs&&n.push(this.characterService.equipment.legs),this.characterService.equipment.feet&&n.push(this.characterService.equipment.feet),n.length>0){const r=n[Math.floor(Math.random()*n.length)];this.upgradeEquipment(r,e)}}upgradeEquipment(e,n,r="spirit"){e.armorStats?(e.armorStats.defense+=Math.max(Math.sqrt(n),1e3)*n,"spirit"!==r&&(e.armorStats.effect=r)):e.weaponStats&&(e.weaponStats.baseDamage+=Math.max(Math.sqrt(n),1e3)*n,"spirit"!==r&&(e.weaponStats.effect=r)),e.value+=n,this.logService.log(D.CRAFTING,"You add "+n+" power to your "+this.titleCasePipe.transform(e.name))}generatePotion(e){this.potionCounter++;let n="health",r=e*e;if(this.characterService.qiUnlocked){const a=this.potionCounter%3;0===a?n="stamina":1===a&&(n="qi",r=Math.floor(r/10))}else this.potionCounter%2==0&&(n="stamina");const o=this.titleCasePipe.transform(n)+" Potion + "+r;this.logService.log(D.CRAFTING,"Alchemy Success! Created a "+this.titleCasePipe.transform(o)+". Keep up the good work."),this.addItem({name:o,imageFile:n+"potion",id:"potion",type:"potion",value:e,description:"A potion that restores "+n,useLabel:"Drink",useDescription:"Drink to increase restores "+n+".",useConsumes:!0,pouchable:!0,effect:n,increaseAmount:r})}generateEmpowermentPill(){const a="Empowerment Pill";this.logService.log(D.CRAFTING,"Alchemy Success! Created a "+this.titleCasePipe.transform(a)+". Its effect gets worse the more you take."),this.addItem({name:a,imageFile:"empowermentPill",id:"pill",type:"pill",value:1,description:"A pill that permanently empowers the increase of your attributes based on your aptitudes.",useLabel:"Swallow",useDescription:"Use to permanently empower the increase of your attributes based on your aptitudes.",useConsumes:!0,effect:"empowerment",increaseAmount:1})}generatePill(e,n){this.pillCounter++;let r=n;this.pillCounter>10&&(this.pillCounter=0,r="longevity");const o="A powerful pill that increases your "+r+".",a="Use to increase your "+r,s=10*e,l=this.titleCasePipe.transform(r)+" Pill  +"+e;this.logService.log(D.CRAFTING,"Alchemy Success! Created a "+this.titleCasePipe.transform(l)+". Keep up the good work."),this.addItem({name:l,imageFile:"pill",id:"pill",type:"pill",value:s,description:o,useLabel:"Swallow",useDescription:a,useConsumes:!0,effect:r,increaseAmount:e})}generateHerb(e=!1){if(!this.locationService?.troubleTarget)return;const n=this.locationService.troubleTarget,r=zK.filter(l=>l.locations.includes(n));if(0===r.length)return;let a=Math.floor(Math.pow(this.characterService.attributes.woodLore.value/1e9,.26)*Zm.length);a>=Zm.length&&(a=Zm.length-1);const s=r[this.herbCounter%r.length];if(this.herbCounter++,this.addItem({id:"herb_"+s.name+a,imageFile:"herb_"+s.name,imageColor:this.itemRepoService.colorByRank[a],name:Zm[a]+" "+s.name,type:"herb",subtype:s.name,attribute:s.attribute,value:a+1,description:"Useful herbs. Can be used in creating pills or potions."}),this.autoSellOldHerbsEnabled&&!e)for(let l=0;l<this.itemStacks.length;l++){const c=this.itemStacks[l];c.item&&"herb"===c.item.type&&c.item.subtype===s.name&&c.item.value<a+1&&c.item.subtype===s.name&&this.sell(c,c.quantity)}}generateSpiritGem(e,n="spirit"){let r="A spirit gem dropped by a monster.";return"spirit"!==n&&(r="A spirit gem full of the power of "+n+"."),{id:"spiritGemGrade"+e,imageFile:n+"Gem",name:n+" gem grade "+e,type:"gem",subtype:n,value:10*e,description:r}}generateArmor(e,n,r=void 0,o=void 0){this.equipmentCreated++;const a=qr.length*El.length*Qm.length,s=Math.ceil(Math.sqrt(e/1e10)*a);let l=s%qr.length;s>=a&&(l=qr.length-1);let c=Math.floor(s/qr.length);const d=qr[l];let u="";if(c>0){let w=Math.floor(c/El.length);w>0?(w>Qm.length?(w=Qm.length,c=El.length-1):c%=El.length,u=" of "+Qm[w-1]+" "+El[c]):u=" of "+El[c-1]}let p=VK,g="chestArmor";"legs"===n?(p=qK,g="legsArmor"):"head"===n?(p=jK,g="headArmor"):"feet"===n&&(g="feetArmor",p=UK);const m=r??p[Math.floor(Math.random()*p.length)],b=d+" "+m+u;this.logService.log(D.CRAFTING,"Your hard work paid off! You created some armor: "+this.titleCasePipe.transform(b)+"!");const C=Math.min(Math.sqrt(e),1e3)*e;return{id:"armor",imageFile:g,name:b,type:"equipment",slot:n,value:e,armorStats:{defense:C,baseName:m,effect:o},description:"A unique piece of armor that you made.<br>Drag and drop onto similar armor to merge them into something better.<br>nDefense: "+this.bigNumberPipe.transform(C)}}randomArmorSlot(){const e=Math.random();return e<.25?"body":e<.5?"head":e<.75?"feet":"legs"}getOre(e=-1,n=!1){let r=e;-1===e&&(r=Math.floor(16*Math.pow(this.characterService.attributes.earthLore.value/1e9,.15)));let o=this.itemRepoService.items.copperOre;for(const a in this.itemRepoService.items){const s=this.itemRepoService.items[a];"ore"===s.type&&s.value>o.value&&s.value<=r&&(o=s)}if(this.autoSellOldOreEnabled&&!this.hellService?.inHell&&!n)for(let a=0;a<this.itemStacks.length;a++){const s=this.itemStacks[a];s.item&&"ore"===s.item.type&&s.item.value<o.value&&this.sell(s,s.quantity)}return o}getBar(e,n=!1){const r=10*e;let o=this.itemRepoService.items.copperBar;for(const a in this.itemRepoService.items){const s=this.itemRepoService.items[a];if("metal"===s.type&&s.value===r){o=s;break}}if(this.autoSellOldBarsEnabled&&!this.hellService?.inHell&&!n)for(let a=0;a<this.itemStacks.length;a++){const s=this.itemStacks[a];s.item&&"metal"===s.item.type&&s.item.value<o.value&&this.sell(s,s.quantity)}return o}getWood(e=!1){const r=Math.floor(16*Math.pow(this.characterService.attributes.woodLore.value/1e9,.15));let o=this.itemRepoService.items.balsaLog;for(const a in this.itemRepoService.items){const s=this.itemRepoService.items[a];"wood"===s.type&&s.value>o.value&&s.value<=r&&(o=s)}if(this.autoSellOldWoodEnabled&&!this.hellService?.inHell&&!e)for(let a=0;a<this.itemStacks.length;a++){const s=this.itemStacks[a];s.item&&"wood"===s.item.type&&s.item.value<o.value&&this.sell(s,s.quantity)}return o}getHide(e=-1,n=!1){let r=e;-1===r&&(r=Math.floor(16*Math.pow(this.characterService.attributes.animalHandling.value/1e9,.15)));let o=this.itemRepoService.items.hide;for(const a in this.itemRepoService.items){const s=this.itemRepoService.items[a];"hide"===s.type&&s.value>o.value&&s.value<=r&&(o=s)}if(this.autoSellOldHidesEnabled&&!this.hellService?.inHell&&!n)for(let a=0;a<this.itemStacks.length;a++){const s=this.itemStacks[a];s.item&&s.item.id!==o.id&&"hide"===s.item.type&&s.item.value<o.value&&this.sell(s,s.quantity)}return o}getWildMeat(e){return{id:"wildMeat"+e,imageFile:"meat",name:"wild meat",type:"food",subtype:"wildMeat",value:100*e,description:"Meat from a wild beast"}}getCoinPurse(e){return{id:"coinPurse",imageFile:"pillPouch",name:"coin purse",type:"sellable",value:e,description:"A purse with strange coins. You could probably sell this."}}generateFormationKit(e){const n=["power","defense","survival","greed","repulsion","stealth"],o=Math.floor(Math.random()*n.length),a=n[o];return{id:a+"FormationKit",imageFile:a+"FormationKit",name:a+" formation kit",type:"formationKit",subtype:a,effect:a,value:e,useConsumes:!0,pouchable:!0,useDescription:"Activate this formation",useLabel:"Use",description:"A kit containing formation flags and other essentials for creating a formation.<br>"+["When used, this formation increases your attack power.","When used, this formation increases your defense when attacked.","When used, this formation allows you to survive a single killing blow.","When used, this formation increases the amount of loot you get from killing your enemies.","When used, this formation prevents random monsters from attacking you.<br>If you go looking, you can still find trouble.","When used, this formation allows you to strike your enemy once before they prepare to strike you."][o]}}reset(){this.selectedItem=this.getEmptyItemStack(),this.lifetimeUsedItems=0,this.lifetimeUsedFood=0,this.lifetimeSoldItems=0,this.lifetimePotionsUsed=0,this.lifetimePillsUsed=0,this.lifetimeGemsSold=0;const e=[];for(let n=0;n<this.heirloomSlots;n++)e.push(this.itemStacks[n]);this.itemStacks=e,this.stashedItemStacks=[],this.changeMaxItems(this.homeService.home.maxInventory),this.grandmotherGift&&this.addItem({id:"weapon",imageFile:"stick",name:"Grandmother's Walking Stick",type:"equipment",slot:"leftHand",value:10,weaponStats:{baseDamage:10,material:"wood",baseName:"Grandmother's Walking Stick"},description:"Your grandmother's walking stick.<br>Drag and drop onto similar weapons to merge them into something better.<br>Base Damage: 10"}),this.characterService.bloodlineRank>=6||this.motherGift&&(this.logService.log(D.EVENT,"Your mother gives you three big bags of rice as you prepare to make your way in the world."),this.addItem(this.itemRepoService.items.rice,300))}eatDailyMeal(){if(this.autoEatUnlocked&&(this.autoEatNutrition||this.autoEatHealth||this.autoEatStamina||this.autoEatQi||this.autoEatAll)){let r=null,o=!1,a=-1;for(const s of this.itemStacks)null!==s.item&&"food"===s.item.type&&this.autoUseEntries.find(l=>l.name===s.item.name)&&s.item.value>a&&(a=s.item.value,r=s);for(;r&&r.quantity>0&&!this.bellyFull();)this.useItemStack(r),o=!0;return void(o||!this.hellService?.inHell&&this.characterService.money>0&&this.autoBuyFood&&this.characterService.status.nutrition.value<=.2*this.characterService.status.nutrition.max&&(this.characterService.updateMoney(-1),this.characterService.status.nutrition.value++))}if(this.characterService.status.nutrition.value>.2*this.characterService.status.nutrition.max)return;let e=null,n=0;for(const r of this.itemStacks)null!==r.item&&"food"===r.item.type&&r.item.value>n&&(e=r,n=e.item?.value||0);e?this.useItemStack(e):!this.hellService?.inHell&&this.characterService.money>0&&this.autoBuyFood&&(this.characterService.updateMoney(-1),this.characterService.status.nutrition.value++)}bellyFull(){return this.foodEatenToday>=this.maxFoodPerDay||!(this.autoEatAll||this.autoEatNutrition&&this.characterService.status.nutrition.value<this.characterService.status.nutrition.max||this.autoEatHealth&&this.characterService.status.health.value<this.characterService.status.health.max-1||this.autoEatStamina&&this.characterService.status.stamina.value<this.characterService.status.stamina.max-1||this.autoEatQi&&this.characterService.status.qi.value<this.characterService.status.qi.max-1)}eatFood(e,n=1){if(this.foodEatenToday>this.maxFoodPerDay)return this.logService.log(D.EVENT,"Your stomach is too full to handle any more food today"),0;n>this.maxFoodPerDay-this.foodEatenToday&&(n=this.maxFoodPerDay-this.foodEatenToday);const r=e.value;this.characterService.status.nutrition.value+=n+n*r,this.characterService.healthBonusFood+=n*r*.01,this.characterService.status.health.value+=n*r*.01,this.characterService.status.stamina.value+=n*r*.01,this.characterService.status.qi.value+=n*r*.01;const o=Math.min(365*r,7300);return this.characterService.foodLifespan+n<=o?this.characterService.foodLifespan+=n:this.characterService.foodLifespan<o&&(this.characterService.foodLifespan=o),"meal"===e.subtype&&(this.characterService.status.stamina.max+=n*r/100,this.characterService.status.nutrition.max<200&&(this.characterService.status.nutrition.max+=.1),e.name.startsWith("Soul")&&this.characterService.increaseAttribute("spirituality",.001)),this.foodEatenToday+=n,this.characterService.checkOverage(),n}addItem(e,n=1,r=0,o=!1){if(n<1&&(n=1),this.totalItemsReceived+=n,"gem"===e.type&&this.gemsAcquired++,this.autoReloadCraftInputs&&!o){const s=this.homeService?.workstations;if(s)for(let l=0;l<s.length;l++){const c=s[l];for(let d=0;d<c.inputs.length;d++){const u=c.inputs[d];if(u.quantity<this.maxStackSize&&u.item?.type===e.type&&u.item?.subtype===e.subtype){if(e.id===u.item.id)return u.quantity+=n,-1;if(("food"!==e.type||e.name===u.item.name)&&"gem"!==e.type&&e.value>u.item?.value){const p=this.addItem(e,n,0,!0);return-1!==p&&this.homeService?.moveItemToWorkstation(p,l,d),-1}}}}}if(e.pouchable&&!o){let s=this.characterService.itemPouches.find(l=>l.item?.type===e.type&&l.item.effect===e.effect);if(s||(s=this.itemStacks.find(l=>l.item?.type===e.type&&l.item.effect===e.effect)),s){if("potion"===e.type){const l=(e.increaseAmount||0)*n+(s.item.increaseAmount||0)*s.quantity;s.quantity+=n;const c=Math.floor(l/s.quantity);s.item.increaseAmount=c,s.item.name=this.titleCasePipe.transform(e.effect)+" Potion + "+c}else if("formationKit"===e.type){const l=(e.increaseAmount||0)*n+(s.item.increaseAmount||0)*s.quantity;s.quantity+=n;const c=Math.floor(l/s.quantity);s.item.value=c}else s.quantity+=n;return-1}}if(this.autoPillEnabled&&"pill"===e.type)return this.useItem(e,n),-1;for(const s of this.autoBalanceItems)if(s.name===e.name){if(this.hellService?.inHell)return this.useItem(e,n*s.useNumber),-1;if(s.useNumber<1){if(s.sellNumber<1)break;return this.characterService.updateMoney(e.value*n),-1}if(s.sellNumber<1)return this.useItem(e,n*s.useNumber),-1;let l=n%(s.useNumber+s.sellNumber);for(n-=l;l>0;){if(s.index<s.useNumber){if(l+s.index<=s.useNumber){this.useItem(e,l),s.index+=l;break}this.useItem(e,s.useNumber-s.index),l-=s.useNumber-s.index,s.index=s.useNumber}if(s.index<s.useNumber+s.sellNumber){if(l+s.index<s.useNumber+s.sellNumber){this.characterService.updateMoney(e.value*l),s.index+=l;break}this.characterService.updateMoney(e.value*(s.useNumber+s.sellNumber-s.index)),l-=s.useNumber+s.sellNumber-s.index,s.index=0}s.index>=s.useNumber+s.sellNumber&&(s.index-=s.useNumber+s.sellNumber)}if(n&&(this.useItem(e,(n/=s.useNumber+s.sellNumber)*s.useNumber),this.characterService.updateMoney(e.value*n),n=0),n<1)return-1;break}if("food"!==e.type)for(const s of this.autoUseEntries)if(s.name===e.name){let l=this.getQuantityByName(e.name)+n-s.reserve;if(l>n&&(l=n),l>0&&0==(n-=this.useItem(e,n)))return-1}if(this.autoSellOldGemsEnabled&&"gem"===e.type&&!this.hellService?.inHell)for(let s=0;s<this.itemStacks.length;s++){const l=this.itemStacks[s];l.item&&"gem"===l.item.type&&l.item.value<e.value&&(this.characterService.updateMoney(l.item.value*l.quantity),this.setItemEmptyStack(s))}for(const s of this.autoSellEntries)if(s.name===e.name&&!this.hellService?.inHell){let l=this.getQuantityByName(e.name)+n-s.reserve;if(l>n&&(l=n),l>0&&(this.characterService.updateMoney(e.value*l),0==(n-=l)))return-1}let a=-1;if("equipment"!==e.type)for(let s=0;s<this.itemStacks.length;s++){const l=this.itemStacks[s];if(l.item&&l.item.name===e.name){if(l.quantity+n<=this.maxStackSize)return l.quantity+=n,l.item.value!==e.value&&(l.item.value=Math.round((l.item.value*l.quantity+e.value*n)/(n+l.quantity))),-1===a&&(a=s),this.fixId(s),a;-1===a&&(a=s),n-=this.maxStackSize-l.quantity,l.quantity=this.maxStackSize,this.fixId(s)}}for(let s=r;s<this.itemStacks.length;s++)if(!this.itemStacks[s].item){if(-1===a&&(a=s),n<=this.maxStackSize)return this.itemStacks[s]={item:e,quantity:n,id:s+e.name+n},a;this.itemStacks[s]={item:e,quantity:this.maxStackSize,id:s+e.name+n},n-=this.maxStackSize}return this.autoSellUnlocked&&!this.hellService?.inHell?(this.logService.log(D.EVENT,"You don't have enough room for the "+this.titleCasePipe.transform(e.name)+" so you sell it."),this.characterService.updateMoney(e.value*n)):this.logService.log(D.EVENT,"You don't have enough room for the "+this.titleCasePipe.transform(e.name)+" so you throw it away."),this.thrownAwayItems+=n,a}sell(e,n){if(!e.item||e.item.value===1/0||this.hellService?.inHell)return;this.lifetimeSoldItems+=n,"gem"===e.item.type&&(this.lifetimeGemsSold+=n);const r=this.itemStacks.indexOf(e);n>=e.quantity?(this.setItemEmptyStack(r),this.characterService.updateMoney(e.quantity*e.item.value)):(e.quantity-=n,this.fixIdByStack(e),this.characterService.updateMoney(n*e.item.value))}sellAll(e){if(!this.hellService?.inHell)for(const n of this.itemStacks)n.item&&n.item.name===e.name&&this.sell(n,n.quantity)}autoSell(e){e.value!==1/0&&this.autoSellUnlocked&&(Pi(e)||(this.autoSellEntries.some(n=>n.name===e.name)||this.autoSellEntries.push({name:e.name,type:e.type,reserve:0}),this.sellAll(e)))}unAutoSell(e){const n=this.autoSellEntries.findIndex(r=>r.name===e);this.autoSellEntries.splice(n,1)}useItemStack(e,n=1){if(!e.item)return;n<1&&(n=1),n>e.quantity&&(n=e.quantity);const r=this.useItem(e.item,n);if(e.item.useConsumes)if(e.quantity-=r,e.quantity<=0){const o=this.itemStacks.indexOf(e);this.setItemEmptyStack(o)}else this.fixIdByStack(e)}useItem(e,n=1){return n<1&&(n=1),"food"===e.type?(this.lifetimeUsedFood++,this.eatFood(e,n)):(this.lifetimeUsedItems++,"potion"===e.type?this.usePotion(e,n):"pill"===e.type?this.usePill(e,n):"formationKit"===e.type?n=this.useFormationKit(e):e.use&&(e.use(n),"food"===e.type&&this.hellService&&(this.hellService.daysFasted=0)),n)}autoUse(e){if((this.autoUseUnlocked||"food"===e.type)&&(this.autoEatUnlocked||"food"!==e.type)&&("potion"===e.type||"pill"===e.type||"food"===e.type||e.use)&&(this.autoUseEntries.some(n=>n.name===e.name)||this.autoUseEntries.push({name:e.name,type:e.type,reserve:0}),e.useConsumes&&"food"!==e.type))for(let n=0;n<this.itemStacks.length;n++){const r=this.itemStacks[n];r.item&&r.item.name===e.name&&this.useItemStack(r,r.quantity)}}unAutoUse(e){const n=this.autoUseEntries.findIndex(r=>r.name===e);this.autoUseEntries.splice(n,1)}autoBalance(e){for(const n of this.autoBalanceItems)if(n.name===e.name)return;this.autoBalanceItems.push({name:e.name,index:0,useNumber:1,sellNumber:1}),this.sellAll(e)}unAutoBalance(e){for(let n=0;n<this.autoBalanceItems.length;n++)if(this.autoBalanceItems[n].name===e)return void this.autoBalanceItems.splice(n,1)}equip(e){const n=e.item;if(!n||!Pi(n)){if(n?.pouchable){const a=this.itemStacks.indexOf(e);for(let s=0;s<this.characterService.itemPouches.length;s++)if(this.characterService.itemPouches[s].item?.name===n.name)return this.characterService.itemPouches[s].quantity+=e.quantity,void this.setItemEmptyStack(a);for(let s=0;s<this.characterService.itemPouches.length;s++)if(!this.characterService.itemPouches[s].item)return void this.moveToPouch(a,s)}return}const r=this.characterService.equipment[n.slot];r&&this.addItem(r),this.characterService.equipment[n.slot]=n;const o=this.itemStacks.indexOf(e);this.setItemEmptyStack(o)}equipBest(e){let n=0,r=!0;"leftHand"===e||"rightHand"===e?n=this.characterService.equipment[e]?.weaponStats?.baseDamage||0:(r=!1,n=this.characterService.equipment[e]?.armorStats?.defense||0);for(let o=0;o<this.itemStacks.length;o++){const a=this.itemStacks[o];if(a.item){const s=a.item;if(Pi(s)&&s.slot===e){let l=0;r&&s.weaponStats?l=s.weaponStats?.baseDamage:!r&&s.armorStats&&(l=s.armorStats?.defense),l>n&&this.equip(a)}}}}consume(e,n=1,r=!1){n<0&&(n=0);let o=-1;r&&(o=1/0);let a=-1;for(let s=0;s<this.itemStacks.length;s++){const l=this.itemStacks[s];l.item&&l.item.type===e&&(r?o>l.item.value&&(o=l.item.value,a=s):o<l.item.value&&(o=l.item.value,a=s))}if(a>=0){const s=this.itemStacks[a];if(s.item){const l=Math.min(s.quantity,n);s.quantity-=l,n-=l,s.quantity<=0?this.setItemEmptyStack(a):this.fixId(a)}}return n>0&&a>=0&&(o=this.consume(e,n)),r&&o===1/0&&(o=-1),o}consumeById(e,n=1){n<0&&(n=0);let r=-1,o=0;for(let s=0;s<this.itemStacks.length;s++){const l=this.itemStacks[s];l.item&&l.item.id===e&&(r=s)}if(r<0)return 0;const a=this.itemStacks[r];if(a.item){const s=Math.min(a.quantity,n);a.quantity-=s,n-=s,o+=s,a.quantity<=0?this.setItemEmptyStack(r):this.fixId(r)}return n>0&&r>=0&&(o+=this.consumeById(e,n)),o}checkFor(e){let n=-1;for(let r=0;r<this.itemStacks.length;r++){const o=this.itemStacks[r];o.item&&o.item.type===e&&n<o.item.value&&(n=o.item.value)}return n}getQuantityByName(e){let n=0;for(let r=0;r<this.itemStacks.length;r++){const o=this.itemStacks[r];o.item&&o.item.name===e&&(n+=o.quantity)}return n}getQuantityByType(e){let n=0;for(let r=0;r<this.itemStacks.length;r++){const o=this.itemStacks[r];o.item&&o.item.type===e&&(n+=o.quantity)}return n}usePotion(e,n=1){n<1&&(n=1),this.lifetimePotionsUsed+=n;let r="health";e.effect&&(r=e.effect),this.characterService.status[r].value+=(e.increaseAmount||1)*n,this.characterService.checkOverage()}usePill(e,n=1){if(n<1&&(n=1),this.lifetimePillsUsed+=n,"longevity"===e.effect)this.characterService.alchemyLifespan+=(e.increaseAmount||1)*n,this.characterService.alchemyLifespan>36500&&(this.characterService.alchemyLifespan=36500);else if("empowerment"===e.effect)this.characterService.empowermentFactor+=.01;else{let r="strength";e.effect&&(r=e.effect),this.characterService.increaseAttribute(r,(e.increaseAmount||1)*n)}this.characterService.checkOverage()}useFormationKit(e){return"formationKit"!==e.type||!e.effect||this.battleService.formationCooldown>0?0:(this.battleService.activeFormation=e.effect,this.battleService.formationDuration=e.value,this.battleService.formationCooldown=2*e.value,this.battleService.formationPower=e.value,1)}openInventorySlots(){let e=0;for(const n of this.itemStacks)n.item||e++;return e}mergeEquipment(e,n,r){if(e.slot!==n.slot)return;let o=0;o=this.addItem("rightHand"===e.slot||"leftHand"===e.slot?this.generateWeapon(e.value+n.value,e.weaponStats?.material+"",e.weaponStats?.baseName,e.weaponStats?.effect):this.generateArmor(e.value+n.value,e.slot,e.armorStats?.baseName,e.armorStats?.effect)),o!==r&&!this.itemStacks[r].item&&(this.itemStacks[r]=this.itemStacks[o],this.setItemEmptyStack(o))}mergeItemStacks(e,n,r,o){e.item&&n.item&&e.item.name===n.item.name&&e.quantity+n.quantity<this.maxStackSize&&(n.quantity+=e.quantity,this.fixId(o),this.setItemEmptyStack(r))}autoWeaponMerge(){this.autoMerge("leftHand"),this.autoMerge("rightHand")}autoArmorMerge(){this.autoMerge("head"),this.autoMerge("body"),this.autoMerge("legs"),this.autoMerge("feet")}autoequipWeapons(){this.equipBest("leftHand"),this.equipBest("rightHand")}autoequipArmor(){this.equipBest("head"),this.equipBest("body"),this.equipBest("legs"),this.equipBest("feet")}autoMerge(e){let n=-1,r=null,o=null,a=-1;for(let s=0;s<this.itemStacks.length;s++){let l=this.itemStacks[s]?.item;l&&Pi(l)&&l.slot===e&&(-1===n?(n=s,a=s,r=l):(o=l,r&&(this.setItemEmptyStack(n),this.setItemEmptyStack(s),this.mergeEquipment(r,o,n),l=this.itemStacks[n]?.item,l?Pi(l)&&l.slot===e&&(r=l):n=-1)))}this.automergeEquipped&&r&&this.autoequipBestEnabled&&(this.autoequipBestWeapon||this.autoequipBestArmor)&&(("rightHand"===e||"leftHand"===e)&&this.autoequipBestWeapon||"rightHand"!==e&&"leftHand"!==e&&this.autoequipBestArmor)&&this.mergeEquippedSlot(e,r,a)}mergeEquippedSlot(e,n,r){const o=this.characterService.equipment[e];if(!o)return;if("gem"===n.type&&o)return void this.gemifyEquipment(r,o);if(!Pi(n))return;let a;if(!o)return this.characterService.equipment[e]=n,void this.setItemEmptyStack(r);a="rightHand"===e||"leftHand"===e?this.generateWeapon(o.value+n.value,n.weaponStats?.material+"",o.weaponStats?.baseName,o.weaponStats?.effect):this.generateArmor(o.value+n.value,e,o.armorStats?.baseName,o.armorStats?.effect),this.characterService.equipment[e]=a,this.setItemEmptyStack(r)}mergeSpiritGem(e,n=0){if(e.item&&!(e.quantity<10-n)){e.quantity-=10-n,this.addItem(this.generateSpiritGem(e.item.value/10+1));for(let r=0;r<this.itemStacks.length;r++)if(this.itemStacks[r]===e){if(0===e.quantity)return void this.setItemEmptyStack(r);this.fixId(r)}}}mergeAnySpiritGem(e=0){const n=this.characterService.meridianRank();e>n-5&&(e=n-5),e<0&&(e=0);for(let r=0;r<this.itemStacks.length;r++){const o=this.itemStacks[r];if(o.item&&"gem"===o.item.type&&o.quantity>=10-e)return void this.mergeSpiritGem(o,e)}}stashWeapons(){this.characterService.stashWeapons();for(let e=0;e<this.itemStacks.length;e++){const n=this.itemStacks[e]?.item;n&&Pi(n)&&n.weaponStats&&(this.stashedItemStacks.push(this.itemStacks[e]),this.setItemEmptyStack(e))}}restoreWeapons(){this.characterService.restoreWeapons();for(let e=this.stashedItemStacks.length-1;e>=0;e--){const n=this.stashedItemStacks[e];n&&n.item&&Pi(n.item)&&n.item.weaponStats&&(this.addItem(n.item,n.quantity),this.stashedItemStacks.splice(e,1))}}stashArmor(){this.characterService.stashArmor();for(let e=0;e<this.itemStacks.length;e++){const n=this.itemStacks[e]?.item;n&&Pi(n)&&n.armorStats&&(this.stashedItemStacks.push(this.itemStacks[e]),this.setItemEmptyStack(e))}}restoreArmor(){this.characterService.restoreArmor();for(let e=this.stashedItemStacks.length-1;e>=0;e--){const n=this.stashedItemStacks[e];n&&n.item&&Pi(n.item)&&n.item.armorStats&&(this.addItem(n.item,n.quantity),this.stashedItemStacks.splice(e,1))}}stashInventory(){for(let e=0;e<this.itemStacks.length;e++){const n=this.itemStacks[e]?.item;n&&"food"!==n.type&&"gem"!==n.type&&(this.stashedItemStacks.push(this.itemStacks[e]),this.setItemEmptyStack(e))}}restoreInventory(){for(let e=this.stashedItemStacks.length-1;e>=0;e--){const n=this.stashedItemStacks[e];n&&n.item&&this.addItem(n.item,n.quantity)}this.stashedItemStacks=[]}gemifyEquipment(e,n){const r=this.itemStacks[e],o=this.itemStacks[e]?.item;if(r&&o&&"gem"===o.type){const a=o.type.substring(0,o.type.length-3);this.upgradeEquipment(n,Math.floor(Math.pow(o.value/10,2.4)),a),this.updateArmorDescription(n),r.quantity>1?(r.quantity--,this.fixId(e)):this.setItemEmptyStack(e),this.characterService.yang++,this.characterService.yin++}}removeItemStack(e){const n=this.itemStacks.indexOf(e);this.thrownAwayItems+=e.quantity,this.setItemEmptyStack(n)}setItemEmptyStack(e){this.selectedItem===this.itemStacks[e]&&(this.selectedItem=this.getEmptyItemStack()),this.itemStacks[e]=this.getEmptyItemStack()}getEmptyItemStack(){return{item:null,quantity:0,id:this.emptyIdPrefix+this.emptyIdCounter++}}fixId(e){this.itemStacks[e].id=this.itemStacks[e].item?e+this.itemStacks[e].item.name+this.itemStacks[e].quantity:this.emptyIdPrefix+this.emptyIdCounter++}fixIdByStack(e){for(let n=0;n<this.itemStacks.length;n++)if(e===this.itemStacks[n])return void this.fixId(n);for(let n=0;n<this.characterService.itemPouches.length;n++)if(e===this.characterService.itemPouches[n])return void(e.id=n+this.characterService.itemPouches[n].item.name+this.characterService.itemPouches[n].quantity)}moveToPouch(e,n){if(this.itemStacks[e].item&&this.itemStacks[e].item?.pouchable)if(this.characterService.itemPouches[n].item){if(this.characterService.itemPouches[n].item?.name===this.itemStacks[e].item?.name)return this.characterService.itemPouches[n].quantity+=this.itemStacks[e].quantity,void(this.itemStacks[e]=this.getEmptyItemStack());const r=this.itemStacks[e];this.itemStacks[e]=this.characterService.itemPouches[n],this.characterService.itemPouches[n]=r,this.characterService.itemPouches[n].id=n+this.characterService.itemPouches[n].item.name+this.characterService.itemPouches[n].quantity,this.fixId(e)}else this.characterService.itemPouches[n]=this.itemStacks[e],this.characterService.itemPouches[n].id=n+this.characterService.itemPouches[n].item.name+this.characterService.itemPouches[n].quantity,this.itemStacks[e]=this.getEmptyItemStack()}static{this.\u0275fac=function(n){return new(n||t)(P(we),P(Xi),P(Ie),P(tt),P(Un),P(Ai))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Pi(t){return"slot"in t}let wr=(()=>{class t{constructor(e,n,r,o,a,s){this.injector=e,this.characterService=n,this.inventoryService=r,this.homeService=a,this.itemRepoService=s,this.autoFieldLimit=0,this.fields=[],this.extraFields=0,this.hellFood=!1,this.smoothFarming=!1,this.farmedPlots=0,this.mostFields=0,this.consecutiveHarvests=0,this.fallowPlots=0,this.unlockedCrops=["rice"],this.maxFields=30,setTimeout(()=>this.hellService=this.injector.get(We)),o.homeTickSubject.subscribe(()=>{this.tick()}),o.longTickSubject.subscribe(()=>{let l=this.fallowPlots;for(const c of this.fields)l+=c.plots;l>this.mostFields&&(this.mostFields=l)}),o.reincarnateSubject.subscribe(()=>{this.reset()})}tick(){if(!this.characterService.dead&&(!this.hellService?.inHell||this.hellFood)){this.ageFields();let e=0;for(const n of this.fields)e+=n.upkeepCost||0;this.characterService.updateMoney(0-e)}}getProperties(){return{fields:this.fields,autoFieldLimit:this.autoFieldLimit,mostFields:this.mostFields,hellFood:this.hellFood,fallowPlots:this.fallowPlots,unlockedCrops:this.unlockedCrops}}setProperties(e){this.fields=e.fields,this.autoFieldLimit=e.autoFieldLimit||0,this.mostFields=e.mostFields||0,this.hellFood=e.hellFood||!1,this.fallowPlots=e.fallowPlots,this.unlockedCrops=e.unlockedCrops,this.farmedPlots=0;for(const n of this.fields)this.farmedPlots+=n.plots}reset(){if(this.homeService.keepHome)for(const e of this.fields)e.averageYield=0,e.yield=0,e.daysToHarvest=e.originalDaysToHarvest;else this.fields=[],this.extraFields=0,this.farmedPlots=0}changeCrop(e){let n=this.unlockedCrops.indexOf(this.fields[e].cropName);n++,n>=this.unlockedCrops.length&&(n=0);const r=this.inventoryService.farmFoodList.find(o=>o.id===this.unlockedCrops[n]);r&&(this.fields[e].cropName=this.unlockedCrops[n],this.fields[e].yield=0,this.fields[e].maxPlotYield=Math.floor(200/r.value),this.fields[e].daysToHarvest=180+r.value,this.fields[e].originalDaysToHarvest=180+r.value,this.fields[e].averageYield=0,this.fields[e].imageFile=r.imageFile)}plowPlot(e=1){e<0&&(e=this.homeService.land),e>this.homeService.land&&(e=this.homeService.land),this.fallowPlots+=e,this.homeService.land-=e}clearPlot(e=1){e<0&&(e=this.fallowPlots),e>this.fallowPlots&&(e=this.fallowPlots),this.fallowPlots-=e,this.homeService.land+=e}addField(){if(this.fields.length>=this.maxFields)return;const e=this.inventoryService.farmFoodList[0];this.fields.push({cropName:e.id,plots:0,yield:0,maxPlotYield:Math.floor(200/e.value),daysToHarvest:180+e.value,originalDaysToHarvest:180+e.value,averageYield:0,imageFile:e.imageFile,upkeepCost:0})}removeField(e){this.unassignPlots(e),this.fields.splice(e,1)}workFields(e){for(const n of this.fields)n.yield+=e*n.plots,n.yield>n.maxPlotYield*n.plots&&(n.yield=n.maxPlotYield*n.plots)}assignFallowPlots(e,n=1){n>this.fallowPlots&&(n=this.fallowPlots),this.fields[e].plots+=n,this.farmedPlots+=n,this.fallowPlots-=n,this.updateFieldUpkeep(e)}unassignPlots(e,n=-1){(n<0||n>this.fields[e].plots)&&(n=this.fields[e].plots),this.fields[e].plots-=n,this.farmedPlots-=n,this.fallowPlots+=n,this.updateFieldUpkeep(e)}ageFields(){let e=0,n=!1;for(const r of this.fields){let o=0;!this.hellService?.inHell&&r.plots>0&&(r.daysToHarvest<=0?(o=r.yield,e+=o,this.inventoryService.addItem(this.itemRepoService.items[r.cropName],o),n=!0,r.daysToHarvest=r.originalDaysToHarvest,r.yield=0):r.daysToHarvest--),r.averageYield=(364*r.averageYield+o)/365,this.smoothFarming&&!n&&this.fields.length>0&&r.averageYield>.5&&this.inventoryService.addItem(this.itemRepoService.items[r.cropName],Math.round(r.averageYield))}e>0||this.smoothFarming?this.consecutiveHarvests++:this.consecutiveHarvests=0}unlockCrop(e){this.unlockedCrops.includes(e)||this.unlockedCrops.push(e)}updateFieldUpkeep(e){const n=this.fields[e];let r=0;n.plots>10&&(r+=n.plots-10),n.plots>100&&(r+=Math.pow(n.plots-100,2)),n.plots>1e3&&(r+=Math.pow(2,n.plots-1e3)),n.upkeepCost=r}static{this.\u0275fac=function(n){return new(n||t)(P(we),P(Ie),P(he),P(tt),P(zt),P(Un))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Gt=(()=>{class t{constructor(e,n,r,o,a,s,l,c,d){this.injector=e,this.logService=n,this.characterService=r,this.homeService=o,this.farmService=a,this.inventoryService=s,this.itemRepoService=l,this.battleService=d,this.camelToTitle=new Vr,this.followersUnlocked=!1,this.followerLifespanDoubled=!1,this.followers=[],this.pets=[],this.stashedFollowers=[],this.stashedPets=[],this.followersRecruited=0,this.autoDismissUnlocked=!1,this.maxFollowerByType={},this.maxPetsByType={},this.stashedFollowersMaxes={},this.stashedPetMaxes={},this.followerCap=0,this.petsCap=0,this.followersMaxed="UNMAXED",this.petsMaxed="UNMAXED",this.sortField="Job",this.sortAscending=!0,this.totalRecruited=0,this.totalDied=0,this.totalDismissed=0,this.highestLevel=0,this.unlockedHiddenJobs=[],this.autoReplaceUnlocked=!1,this.petsBoosted=!1,this.onlyWantedFollowers=!1,this.jobs={chef:{work:u=>{this.homeService.chefsWork(Math.floor(this.jobs.chef.totalPower/100)*u)},description:"Chefs increase the output of your kitchens.",totalPower:0},builder:{work:u=>{this.homeService.nextHomeCostReduction+=this.jobs.builder.totalPower,this.homeService.upgrading&&this.homeService.upgradeTick(this.jobs.builder.totalPower*u)},description:"Builders reduce the cost of the next home you upgrade to. They can also help you build it faster.",totalPower:0},hunter:{work:u=>{this.hellService?.inHell?this.jobs.hunter.totalPower>1e3&&this.inventoryService.addItem(this.itemRepoService.items.spiritMeat,Math.floor(this.jobs.hunter.totalPower/1e3*u)):this.inventoryService.addItem(this.itemRepoService.items.meat,Math.floor(this.jobs.hunter.totalPower*u))},description:"Hunters collect meat and help you hunt for hides.",totalPower:0,runEachTick:!0},fisher:{work:u=>{this.hellService?.inHell?this.jobs.fisher.totalPower>1e3&&this.inventoryService.addItem(this.itemRepoService.items.spiritCarp,Math.floor(this.jobs.fisher.totalPower/1e3*u)):this.inventoryService.addItem(this.itemRepoService.items.carp,Math.floor(this.jobs.fisher.totalPower*u))},description:"Fishers fish up delicious fish to contribute to your meals.",totalPower:0,runEachTick:!0},farmer:{work:u=>{this.farmService.workFields(Math.floor(this.jobs.farmer.totalPower*u))},description:"Farmers work your fields, helping your crops to grow.",totalPower:0,runEachTick:!0},miner:{work:u=>{const p=Math.floor(this.jobs.miner.totalPower*u/100);this.inventoryService.addItem(this.inventoryService.getOre(),p)},description:"Miners gather ore for your crafting.",totalPower:0,runEachTick:!0},coalDigger:{work:u=>{const p=Math.floor(this.jobs.coalDigger.totalPower*u/100);this.inventoryService.addItem(this.itemRepoService.items.coal,p)},description:"Coal Diggers gather coal for your crafting.",totalPower:0,runEachTick:!0},lumberjack:{work:u=>{const p=Math.floor(this.jobs.lumberjack.totalPower*u/100);this.inventoryService.addItem(this.inventoryService.getWood(),p)},description:"Lumberjacks gather wood for your crafting.",totalPower:0,runEachTick:!0},weaponsmith:{work:u=>{let p=this.jobs.weaponsmith.totalPower;this.hellService?.inHell&&(p/=10);const g=this.characterService.equipment.rightHand,m=this.characterService.equipment.leftHand;g&&g.weaponStats&&(g.weaponStats.baseDamage+=Math.ceil(Math.pow(Math.floor(p/10),2))*u,g.value+=Math.ceil(Math.pow(Math.floor(p/10),2))*u),m&&m.weaponStats&&(m.weaponStats.baseDamage+=Math.ceil(Math.pow(Math.floor(p/10),2))*u,m.value+=Math.ceil(Math.pow(Math.floor(p/10),2))*u)},description:"Weaponsmiths help you take care of your currently equipped weapons, adding power to them each day. Higher levels can also help improve them.",totalPower:0},armorer:{work:u=>{let p=this.jobs.armorer.totalPower;this.hellService?.inHell&&(p/=10);const g=b=>({...b,armorStats:b.armorStats?{...b.armorStats,defense:b.armorStats?.defense+Math.ceil(Math.pow(Math.floor(p/10),2)/2)*u}:void 0,value:b.value+Math.ceil(Math.pow(Math.floor(p/10),2)/2)*u}),m=this.characterService.equipment;m.head&&m.head.armorStats&&(m.head=g(m.head)),m.body&&m.body.armorStats&&(m.body=g(m.body)),m.legs&&m.legs.armorStats&&(m.legs=g(m.legs)),m.feet&&m.feet.armorStats&&(m.feet=g(m.feet))},description:"Armorers help you take care of your currently equipped pieces of armor, adding defense to them each day. Higher levels can also help improve them.",totalPower:0},brawler:{work:u=>{let p=this.jobs.brawler.totalPower*u;this.hellService?.inHell&&(p/=10),this.characterService.increaseAttribute("strength",p)},description:"Brawlers will spar with you in wrestling and boxing matches, increasing your strength.",totalPower:0},sprinter:{work:u=>{let p=this.jobs.sprinter.totalPower*u;this.hellService?.inHell&&(p/=10),this.characterService.increaseAttribute("speed",p)},description:"Sprinters challenge you to footraces and help you increase your speed.",totalPower:0},trainer:{work:u=>{let p=this.jobs.trainer.totalPower*u;this.hellService?.inHell&&(p/=10),this.characterService.increaseAttribute("toughness",p)},description:"Trainers make sure you follow their strict fitness and diet rules, increasing your toughness.",totalPower:0},tutor:{work:u=>{let p=this.jobs.tutor.totalPower*u;this.hellService?.inHell&&(p/=10),this.characterService.increaseAttribute("intelligence",p)},description:"Tutors teach you all about the wonders of the universe, increasing your intelligence.",totalPower:0},mediator:{work:u=>{let p=this.jobs.mediator.totalPower*u;this.hellService?.inHell&&(p/=10),this.characterService.increaseAttribute("charisma",p)},description:"Mediators teach you how to persuade others, increasing your charisma.",totalPower:0},priest:{work:u=>{let p=this.jobs.priest.totalPower*u;this.hellService?.inHell&&(p/=10),this.characterService.increaseAttribute("spirituality",p)},description:"Priests help you get closer to the divine, increasing your sprituality.",totalPower:0},gemologist:{work:u=>{let p=this.jobs.gemologist.totalPower;this.hellService?.inHell&&(p/=10),p=Math.floor(p/50),p>4&&(p=4);for(let g=0;g<u;g++)this.inventoryService.mergeAnySpiritGem(p)},description:"Gemologists combine spirit gems into higher grades.",totalPower:0},scout:{work:()=>{this.battleService.trouble()},description:"Scouts help you track down and fight monsters faster.",totalPower:0,runEachTick:!0},monsterHunter:{work:u=>{const p=1+Math.floor(this.jobs.monsterHunter.totalPower*u/10),g=1+Math.floor(Math.log(p));this.inventoryService.addItem(this.inventoryService.generateSpiritGem(g),p)},description:"Monster Hunters take on low level monsters for you and offer you some of the gems they gather.",totalPower:0,runEachTick:!0},damned:{work:()=>{this.battleService.trouble()},description:"Damned are souls working off karmic debt in hell that hav decided to join you. Having this follower seems to enrage the demons around you.",hidden:!0,totalPower:0},prophet:{work:u=>{for(let p=0;p<u;p++)Math.random()<1e-5*this.jobs.prophet.totalPower&&this.generateFollower()},description:"Prophets are dedicated to spreading the word of your greatness. Prophets can even find other followers for you if you are out of the mortal realm.",hidden:!0,totalPower:0},moneyBurner:{work:u=>{let p=this.jobs.moneyBurner.totalPower;p=Math.floor(p/50),p>10?p=10:p<1&&(p=1);const g=1e6/p;let m=u;this.characterService.money<g*m&&(m=Math.floor(this.characterService.money/g)),this.characterService.updateMoney(0-m*g),this.characterService.hellMoney+=m},description:"Money Burners dedicate themselves to burning mortal money to produce hell money.",hidden:!0,totalPower:0},banker:{work:u=>{let p=this.jobs.banker.totalPower;this.hellService?.inHell&&(p/=10);for(let g=0;g<u;g++)this.characterService.updateMoney(273e-9*this.characterService.money*p),this.characterService.hellMoney+=273e-9*this.characterService.hellMoney*p},description:"Bankers put your money to use, earning interest on what you have. Surprisingly, this works for hell money too.",hidden:!0,totalPower:0},snake:{work:u=>{let p=this.jobs.snake.totalPower;this.petsBoosted||(p*=.01),this.characterService.increaseAttribute("fireLore",p*u)},description:"A fiery serpent. Snakes understand fire and can teach you the hidden secrets of the flames.",pet:!0,totalPower:0},tiger:{work:u=>{let p=this.jobs.tiger.totalPower;this.petsBoosted||(p*=.01),this.characterService.increaseAttribute("woodLore",p*u)},description:"Tigers know the secrets of the jungle and can teach you the deepest mysteries of Wood Lore.",pet:!0,totalPower:0},ox:{work:u=>{let p=this.jobs.ox.totalPower;this.petsBoosted||(p*=.01),this.characterService.increaseAttribute("earthLore",p*u)},description:"Oxen connect deeply to the earth and can teach you their secret understanding.",pet:!0,totalPower:0},monkey:{work:u=>{let p=this.jobs.monkey.totalPower;this.petsBoosted||(p*=.01),this.characterService.increaseAttribute("metalLore",p*u)},description:"Monkeys know more about metal than the greatest of human blacksmiths.",pet:!0,totalPower:0},pig:{work:u=>{let p=this.jobs.pig.totalPower;this.petsBoosted||(p*=.01),this.characterService.increaseAttribute("waterLore",p*u)},description:"Pigs understand the secrets of water and can teach them to you.",pet:!0,totalPower:0}},setTimeout(()=>this.hellService=this.injector.get(We)),c.yearOrLongTickSubject.subscribe(u=>{this.followersUnlocked&&u&&(this.updateFollowerCap(),this.yearTickFollowers(this.followers,u),this.yearTickFollowers(this.pets,u),this.followersWorks(u),this.sortFollowers(this.sortAscending,!0),this.sortFollowers(this.sortAscending,!1))}),c.tickSubject.subscribe(()=>{this.followersUnlocked&&(this.characterService.dead||(this.characterService.age%18250==0&&!this.hellService?.inHell&&this.generateFollower(),this.followersWorks(),this.followersMaxed=this.followersMaxed=this.followers.length<this.followerCap?"UNMAXED":"MAXED",this.petsMaxed=this.petsMaxed=this.pets.length<this.petsCap?"UNMAXED":"MAXED"))}),c.reincarnateSubject.subscribe(()=>{this.reset()})}yearTickFollowers(e,n){for(let r=e.length-1;r>=0;r--){const o=e[r];if(o.age+=n,o.age>=e[r].lifespan){if(this.totalDied++,e.splice(r,1),this.autoReplaceUnlocked){const a=this.generateFollower(o.pet,o.job);a&&(a.power=Math.round(o.power/2),a.cost=100*a.power,this.logService.log(D.FOLLOWER,"Your follower "+o.name+" passed away from old age but was replaced by their child "+a?.name+".")),this.logService.log(D.FOLLOWER,"Your follower "+o.name+" passed away from old age and was not replaced because of your choices in follower jobs.")}else this.logService.injury(D.FOLLOWER,"Your follower "+o.name+" passed away from old age.");this.updateFollowerTotalPower()}else this.characterService.money<e[r].cost*n&&!this.hellService?.inHell?(this.totalDismissed++,this.logService.injury(D.FOLLOWER,"You didn't have enough money to suppport your follower "+e[r].name+" so they left your service."),e.splice(r,1),this.updateFollowerTotalPower()):this.hellService?.inHell||this.characterService.updateMoney(0-e[r].cost*n)}}updateFollowerCap(){this.followerCap=1+3*this.homeService.homeValue+this.characterService.meridianRank()+this.characterService.soulCoreRank()+this.characterService.bloodlineRank,this.petsCap=Math.round(1+this.characterService.meridianRank()/10+this.characterService.soulCoreRank()/10+this.characterService.bloodlineRank/10+Math.log10(this.characterService.attributes.animalHandling.value)),this.followersMaxed=this.followersMaxed=this.followers.length<this.followerCap?"UNMAXED":"MAXED"}updateFollowerTotalPower(){for(const e of Object.keys(this.jobs))this.jobs[e].totalPower=0;for(let e=this.followers.length-1;e>=0;e--)this.jobs[this.followers[e].job].totalPower+=this.followers[e].power;for(let e=this.pets.length-1;e>=0;e--)this.jobs[this.pets[e].job].totalPower+=this.pets[e].power}sortFollowers(e,n=!1){let r=1,o=-1;e||(r=-1,o=1);let a=this.followers;if(n&&(a=this.pets),"Remaining Life"===this.sortField)a.sort((s,l)=>s.lifespan-s.age>l.lifespan-l.age?r:s.lifespan-s.age==l.lifespan-l.age?0:o);else{const s=this.sortField.toLowerCase();a.sort((l,c)=>(l[s]??0)>(c[s]??0)?r:l[s]===c[s]?0:o)}}followersWorks(e){for(const n of Object.keys(this.jobs)){const r=this.jobs[n];r.totalPower>0&&(e&&!r.runEachTick?r.work(e):!e&&r.runEachTick&&r.work(1))}}reset(){this.characterService.bloodlineRank>=7?this.logService.log(D.FOLLOWER,"Your imperial entourage rejoins you as you set out."):(this.followers.splice(0,this.followers.length),this.followersMaxed="UNMAXED"),this.followersRecruited=0,this.updateFollowerTotalPower()}getProperties(){return{followersUnlocked:this.followersUnlocked,followers:this.followers,pets:this.pets,stashedFollowers:this.stashedFollowers,stashedPets:this.stashedPets,autoDismissUnlocked:this.autoDismissUnlocked,maxFollowerByType:this.maxFollowerByType,maxPetsByType:this.maxPetsByType,stashedFollowersMaxes:this.stashedFollowersMaxes,stashedPetMaxes:this.stashedPetMaxes,sortField:this.sortField,sortAscending:this.sortAscending,totalRecruited:this.totalRecruited,totalDied:this.totalDied,totalDismissed:this.totalDismissed,highestLevel:this.highestLevel,unlockedHiddenJobs:this.unlockedHiddenJobs,autoReplaceUnlocked:this.autoReplaceUnlocked,petsBoosted:this.petsBoosted,onlyWantedFollowers:this.onlyWantedFollowers}}setProperties(e){this.followers=e.followers,this.pets=e.pets,this.stashedFollowers=e.stashedFollowers,this.stashedPets=e.stashedPets,this.followersUnlocked=e.followersUnlocked,this.autoDismissUnlocked=e.autoDismissUnlocked,this.maxFollowerByType=e.maxFollowerByType,this.maxPetsByType=e.maxPetsByType,this.stashedFollowersMaxes=e.stashedFollowersMaxes,this.stashedPetMaxes=e.stashedPetMaxes,this.sortField=e.sortField,this.sortAscending=e.sortAscending,this.totalRecruited=e.totalRecruited,this.totalDied=e.totalDied,this.totalDismissed=e.totalDismissed,this.highestLevel=e.highestLevel,this.unlockedHiddenJobs=e.unlockedHiddenJobs,this.autoReplaceUnlocked=e.autoReplaceUnlocked,this.petsBoosted=e.petsBoosted,this.onlyWantedFollowers=e.onlyWantedFollowers,this.unhideUnlockedJobs(),this.updateFollowerTotalPower()}unlockJob(e){this.unlockedHiddenJobs.includes(e)||this.unlockedHiddenJobs.push(e),this.unhideUnlockedJobs()}unhideUnlockedJobs(){for(const e of this.unlockedHiddenJobs)this.jobs[e].hidden=!1}generateFollower(e=!1,n){let r=this.followers,o=this.followerCap;if(e&&(r=this.pets,o=this.petsCap),this.totalRecruited++,this.followersRecruited++,r.length>=o){if(!this.onlyWantedFollowers)return this.logService.injury(D.FOLLOWER,"A new follower shows up, but you already have too many. You are forced to turn them away."),e?this.petsMaxed="MAXED":this.followersMaxed="MAXED",null;{const c=Object.keys(this.jobs);let d=!1;for(const u of c){if(this.jobs[u].hidden)continue;let p=void 0!==this.maxFollowerByType[u]?this.maxFollowerByType[u]:1e3;e&&(p=void 0!==this.maxPetsByType[u]?this.maxPetsByType[u]:1e3);let g=0;for(const m of r)if(m.job===u&&g++,g>p){d=!0,this.dismissFollower(m);break}if(d)break}if(!d)return this.logService.injury(D.FOLLOWER,"A new follower shows up, but you already have all the followers you want."),e?this.petsMaxed="MAXED":this.followersMaxed="MAXED",null}}if(""===(n=n||this.generateFollowerJob(e,r)))return null;let a=void 0!==this.maxFollowerByType[n]?this.maxFollowerByType[n]:1e3;if(e&&(a=void 0!==this.maxPetsByType[n]?this.maxPetsByType[n]:1e3),this.numFollowersOnJob(n,r)>=a)return this.logService.log(D.FOLLOWER,"A new follower shows up, but they were a "+this.camelToTitle.transform(n)+" and you don't want any more of those."),this.totalDismissed++,null;const s=this.followerLifespanDoubled?5:10;this.logService.log(D.FOLLOWER,"A new "+this.camelToTitle.transform(n)+" has come to learn at your feet.");const l={name:this.generateFollowerName(),age:0,lifespan:Math.min(this.characterService.lifespan/s,365e3),job:n,power:1,cost:100,pet:e};return r.push(l),this.sortFollowers(this.sortAscending,e),r.length>=o&&(e?this.petsMaxed="MAXED":this.followersMaxed="MAXED"),this.updateFollowerTotalPower(),l}numFollowersOnJob(e,n){let r=0;for(const o of n)o.job===e&&r++;return r}generateFollowerName(){return uR[Math.floor(Math.random()*uR.length)]}generateFollowerJob(e=!1,n){const r=Object.keys(this.jobs),o=[];for(const a of r)if(!this.jobs[a].hidden&&(e&&this.jobs[a].pet||!e&&!this.jobs[a].pet))if(this.onlyWantedFollowers){let s=void 0!==this.maxFollowerByType[a]?this.maxFollowerByType[a]:1e3;e&&(s=void 0!==this.maxPetsByType[a]?this.maxPetsByType[a]:1e3),this.numFollowersOnJob(a,n)<s&&o.push(a)}else o.push(a);return 0===o.length?"":o[Math.floor(Math.random()*o.length)]}dismissFollower(e){if(this.totalDismissed++,e.pet){const n=this.pets.indexOf(e);this.pets.splice(n,1),this.petsMaxed="UNMAXED"}else{const n=this.followers.indexOf(e);this.followers.splice(n,1),this.followersMaxed="UNMAXED"}this.updateFollowerTotalPower()}dismissAllFollowers(e=null,n=!1){let r=this.followers;if(n?(r=this.pets,this.petsMaxed="UNMAXED"):this.followersMaxed="UNMAXED",e)for(let o=r.length-1;o>=0;o--)r[o].job===e.job&&(r.splice(o,1),this.totalDismissed++);else this.totalDismissed+=r.length,r.splice(0);this.updateFollowerTotalPower()}limitFollower(e){let n=0,r=this.followers;e.pet&&(r=this.pets);for(let o=r.length-1;o>=0;o--)r[o].job===e.job&&n++;e.pet?this.maxPetsByType[e.job]=n:this.maxFollowerByType[e.job]=n}setMaxFollowers(e,n){this.maxFollowerByType[e]=!n||n<0?0:n}setMaxPets(e,n){this.maxPetsByType[e]=!n||n<0?0:n}stashFollowers(){this.stashedFollowers=this.followers,this.followers=[],this.stashedPets=this.pets,this.pets=[],this.stashedFollowersMaxes=this.maxFollowerByType,this.stashedPetMaxes=this.maxPetsByType,this.maxFollowerByType={},this.maxPetsByType={}}restoreFollowers(){this.followers=this.stashedFollowers,this.stashedFollowers=[],this.pets=this.stashedPets,this.stashedPets=[],this.maxFollowerByType=this.stashedFollowersMaxes,this.maxPetsByType=this.stashedPetMaxes,this.stashedFollowersMaxes={},this.stashedPetMaxes={}}hellPurge(){const e=["prophet","moneyBurner","damned"];for(let n=this.followers.length-1;n>=0;n--)e.includes(this.followers[n].job)||this.followers.splice(n,1);this.updateFollowerTotalPower()}static{this.\u0275fac=function(n){return new(n||t)(P(we),P(Xi),P(Ie),P(zt),P(wr),P(he),P(Un),P(tt),P(Vt))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var $e=function(t){return t[t.SquatterTent=0]="SquatterTent",t[t.OwnTent=1]="OwnTent",t[t.DirtyShack=2]="DirtyShack",t[t.SimpleHut=3]="SimpleHut",t[t.PleasantCottage=4]="PleasantCottage",t[t.LargeHouse=5]="LargeHouse",t[t.CourtyardHouse=6]="CourtyardHouse",t[t.Manor=7]="Manor",t[t.Mansion=8]="Mansion",t[t.Palace=9]="Palace",t[t.Castle=10]="Castle",t[t.Fortress=11]="Fortress",t[t.Mountain=12]="Mountain",t[t.ForbiddenCity=13]="ForbiddenCity",t[t.Capital=14]="Capital",t[t.ImperialSeat=15]="ImperialSeat",t[t.Godthrone=16]="Godthrone",t}($e||{});let zt=(()=>{class t{constructor(e,n,r,o,a,s,l){if(this.injector=e,this.characterService=n,this.inventoryService=r,this.logService=o,this.mainLoopService=a,this.itemRepoService=s,this.titleCasePipe=l,this.keepFurniture=!1,this.keepWorkstationInputs=!1,this.ownedFurniture=[],this.grandfatherTent=!1,this.houseBuildingProgress=1,this.upgrading=!1,this.thugPause=!1,this.hellHome=!1,this.homeUnlocked=!1,this.smoothFarming=!1,this.keepHome=!1,this.bedroomFurniture=[null,null,null,null,null,null,null,null,null],this.openBedroomFurnitureSlots=0,this.seeFurnitureEffects=!1,this.workstations=[],this.totalCrafts=0,this.alchemyCounter=0,this.forgeChainsCounter=0,this.homesList=[{name:"Squatter Tent",type:$e.SquatterTent,description:"A dirty tent pitched in an unused field. Costs nothing, but you get what you pay for. The mice around here are pretty nasty, so you should really buy some land and get a safer place to stay.",cost:0,costPerDay:0,landRequired:0,maxInventory:10,upgradeToTooltip:"",consequence:()=>{},maxFurniture:0,maxWorkstations:0,maxWorkstationPower:0,daysToBuild:1},{name:"Tent of Your Own",type:$e.OwnTent,description:"A decent tent pitched on your own bit of land. The occasional ruffian might give you trouble. Automatically restores 1 stamina and a bit of health each night.",cost:100,costPerDay:1,landRequired:1,maxInventory:15,upgradeToTooltip:"Get a better home and stop the mouse invasions.<br>A better home will cost 100 taels and take up 1 land.<br>Land can be purchasd in the Regular People Shop.<br>The new home will restore 1 stamina and a bit of health each night.",consequence:()=>{this.characterService.status.health.value+=.5,this.characterService.status.stamina.value+=1,this.characterService.checkOverage()},maxFurniture:0,maxWorkstations:0,maxWorkstationPower:0,daysToBuild:1},{name:"Dirty Shack",type:$e.DirtyShack,description:"A cheap dirt-floored wooden shack. At least it has a door to keep ruffians out. Automatically restores 3 stamina and a bit of health each night.",cost:1e3,costPerDay:5,landRequired:5,maxInventory:20,upgradeToTooltip:"Get a better home and stop the ruffians from stealing your wealth.<br>A better home will cost 1,000 taels and take up 5 land.<br>The new home will restore 3 stamina and a bit of health each night.<br>It also has walls.",consequence:()=>{this.characterService.status.health.value+=.5,this.characterService.status.stamina.value+=3,this.characterService.checkOverage()},maxFurniture:1,maxWorkstations:0,maxWorkstationPower:0,daysToBuild:1},{name:"Simple Hut",type:$e.SimpleHut,description:"A very simple hut. Automatically restores 5 stamina and a bit of health each night. This home and all future homes will remain in your family, and you wiil reincarnate as its heir.",cost:1e4,costPerDay:10,landRequired:10,maxInventory:25,upgradeToTooltip:"Get a better house and give your descendants a permanent place to settle.<br>A better home will cost 10,000 taels and take up 10 land.<br>The new home will restore 5 stamina and a bit of health each night.",consequence:()=>{this.characterService.status.health.value+=.7,this.characterService.status.stamina.value+=5,this.characterService.checkOverage()},maxFurniture:2,maxWorkstations:0,maxWorkstationPower:0,daysToBuild:10},{name:"Pleasant Cottage",type:$e.PleasantCottage,description:"A nice little home where you can rest peacefully. Automatically restores 10 stamina, 1 health and a bit of Qi each night.",cost:1e5,costPerDay:20,landRequired:20,maxInventory:30,upgradeToTooltip:"Get a better house.<br>A better home will cost 100,000 taels and take up 20 land.<br>The new home will restore 10 stamina and 1 health and a bit of Qi each night (if unlocked).",consequence:()=>{this.characterService.status.qi.value+=.1,this.characterService.status.health.value+=1,this.characterService.status.stamina.value+=10,this.characterService.checkOverage()},maxFurniture:3,maxWorkstations:1,maxWorkstationPower:0,daysToBuild:30},{name:"Large House",type:$e.LargeHouse,description:"A large house where you can live and work. Automatically restores 15 stamina, 2 health, and a bit of Qi each night.",cost:1e6,costPerDay:50,landRequired:50,maxInventory:35,upgradeToTooltip:"Get a better house.<br>A better home will cost 1M taels and take up 50 land.<br>The new home will restore 15 stamina, 2 health, and a bit of Qi each night (if unlocked).",consequence:()=>{this.characterService.status.qi.value+=.2,this.characterService.status.health.value+=2,this.characterService.status.stamina.value+=15,this.characterService.checkOverage()},maxFurniture:4,maxWorkstations:2,maxWorkstationPower:0,daysToBuild:90},{name:"Courtyard House",type:$e.CourtyardHouse,description:"A large house with a wall and an enclosed courtyard. Perfect for building a thriving business. Automatically restores 20 stamina, 3 health, and a bit of Qi each night.",cost:1e7,costPerDay:80,landRequired:80,maxInventory:40,upgradeToTooltip:"Get a better house.<br>A better home will cost 10m taels and take up 80 land.<br>The new home will restore 20 stamina, 3 health, and a bit of Qi each night.",consequence:()=>{this.characterService.status.qi.value+=.3,this.characterService.status.health.value+=3,this.characterService.status.stamina.value+=20,this.characterService.checkOverage()},maxFurniture:5,maxWorkstations:3,maxWorkstationPower:0,daysToBuild:180},{name:"Manor",type:$e.Manor,description:"A large manor house. You are really moving up in the world. Automatically restores 25 stamina, 4 health, and a bit of Qi each night.",cost:1e8,costPerDay:100,landRequired:100,maxInventory:50,upgradeToTooltip:"Get a better house.<br>A better home will cost 100m taels and take up 100 land.<br>The new home will restore 25 stamina, 4 health, and a bit of Qi each night.",consequence:()=>{this.characterService.status.qi.value+=.4,this.characterService.status.health.value+=4,this.characterService.status.stamina.value+=25,this.characterService.checkOverage()},maxFurniture:6,maxWorkstations:3,maxWorkstationPower:0,daysToBuild:365},{name:"Mansion",type:$e.Mansion,description:"An elaborate mansion. Automatically restores 30 stamina, 5 health, and a bit of Qi each night.",cost:1e9,costPerDay:120,landRequired:120,maxInventory:50,upgradeToTooltip:"Get a better house.<br>A better home will cost 1B taels and take up 120 land.<br>The new home will restore 30 stamina, 5 health, and a bit of Qi each night.",consequence:()=>{this.characterService.status.qi.value+=.5,this.characterService.status.health.value+=5,this.characterService.status.stamina.value+=30,this.characterService.checkOverage()},maxFurniture:7,maxWorkstations:4,maxWorkstationPower:0,daysToBuild:3650},{name:"Palace",type:$e.Palace,description:"A lavish palace. Automatically restores 35 stamina, 10 health, and 1 Qi each night.",cost:1e10,costPerDay:150,landRequired:150,maxInventory:55,upgradeToTooltip:"Get a better house.<br>A better home will cost 10B taels and take up 150 land.<br>The new home will restore 35 stamina, 10 health, and 1 Qi each night.",consequence:()=>{this.characterService.status.qi.value+=1,this.characterService.status.health.value+=10,this.characterService.status.stamina.value+=35,this.characterService.checkOverage()},maxFurniture:8,maxWorkstations:4,maxWorkstationPower:1,daysToBuild:36500},{name:"Castle",type:$e.Castle,description:"An imposing castle. Automatically restores 40 stamina, 15 health, and 2 Qi each night.",cost:1e11,costPerDay:150,landRequired:150,maxInventory:60,upgradeToTooltip:"Get a better house.<br>A better home will cost 100B taels and take up 150 land.<br>The new home will restore 40 stamina, 15 health, and 2 Qi each night.",consequence:()=>{this.characterService.status.qi.value+=2,this.characterService.status.health.value+=15,this.characterService.status.stamina.value+=40,this.characterService.checkOverage()},maxFurniture:9,maxWorkstations:5,maxWorkstationPower:1,daysToBuild:365e3},{name:"Fortress",type:$e.Fortress,description:"An indomitable fortress. Automatically restores 50 stamina, 20 health, and 3 Qi each night.",cost:1e12,costPerDay:180,landRequired:180,maxInventory:65,upgradeToTooltip:"Get a better house.<br>A better home will cost 1T taels and take up 180 land.<br>The new home will restore 50 stamina, 20 health, and 3 Qi each night.",consequence:()=>{this.characterService.status.qi.value+=3,this.characterService.status.health.value+=20,this.characterService.status.stamina.value+=50,this.characterService.checkOverage()},maxFurniture:9,maxWorkstations:5,maxWorkstationPower:1,daysToBuild:365e4},{name:"Mountain",type:$e.Mountain,description:"An entire mighty mountain. Automatically restores 100 stamina, 30 health, and 4 Qi each night.",cost:1e13,costPerDay:500,landRequired:500,maxInventory:70,upgradeToTooltip:"Get a better house.<br>A better home will cost 10T taels and take up 500 land.<br>The new home will restore 100 stamina, 30 health, and 4 Qi each night.",consequence:()=>{this.characterService.status.qi.value+=4,this.characterService.status.health.value+=30,this.characterService.status.stamina.value+=100,this.characterService.checkOverage()},maxFurniture:9,maxWorkstations:6,maxWorkstationPower:2,daysToBuild:365e5},{name:"Forbidden City",type:$e.ForbiddenCity,description:"A city of your very own. Automatically restores 200 stamina, 50 health, and 5 Qi each night.",cost:1e14,costPerDay:1e3,landRequired:1e3,maxInventory:80,upgradeToTooltip:"Get a better house.<br>better home will cost 100T taels and take up 1,000 land.<br>The new home will restore 200 stamina, 50 health, and 5 Qi each night.",consequence:()=>{this.characterService.status.qi.value+=5,this.characterService.status.health.value+=50,this.characterService.status.stamina.value+=200,this.characterService.checkOverage()},maxFurniture:9,maxWorkstations:6,maxWorkstationPower:2,daysToBuild:365e6},{name:"Capital",type:$e.Capital,description:"The entire province is yours now. Automatically restores 300 stamina, 80 health, and 10 Qi each night.",cost:1e15,costPerDay:1e4,landRequired:1e4,maxInventory:100,upgradeToTooltip:"Get a better house.<br>A better home will cost 1q taels and take up 10,000 land.<br>The new home will restore 300 stamina, 80 health, and 10 Qi each night.",consequence:()=>{this.characterService.status.qi.value+=10,this.characterService.status.health.value+=80,this.characterService.status.stamina.value+=300,this.characterService.checkOverage()},maxFurniture:9,maxWorkstations:7,maxWorkstationPower:2,daysToBuild:365e7},{name:"Seat of the Empire",type:$e.ImperialSeat,description:"You've built quite a little empire for yourself. Automatically restores 500 stamina, 100 health, and 20 Qi each night.",cost:1e16,costPerDay:1e6,landRequired:1e6,maxInventory:110,upgradeToTooltip:"Get a better house.<br>A better home will cost 10q taels and take up 1,000,000 land.<br>The new home will restore 500 stamina, 100 health, and 20 Qi each night.",consequence:()=>{this.characterService.status.qi.value+=20,this.characterService.status.health.value+=100,this.characterService.status.stamina.value+=500,this.characterService.checkOverage()},maxFurniture:9,maxWorkstations:8,maxWorkstationPower:3,daysToBuild:365e8},{name:"Godthrone",type:$e.Godthrone,description:"All in the land kneel far beneath you. Automatically restores 1000 stamina, 150 health, and 30 Qi each night.",cost:1e17,costPerDay:1e7,landRequired:1e7,maxInventory:120,upgradeToTooltip:"Get a better house.<br>A better home will cost 100q taels and take up 10,000,000 land.<br>The new home will restore 1000 stamina, 150 health, and 30 Qi each night.",consequence:()=>{this.characterService.status.qi.value+=30,this.characterService.status.health.value+=150,this.characterService.status.stamina.value+=1e3,this.characterService.checkOverage()},maxFurniture:9,maxWorkstations:9,maxWorkstationPower:3,daysToBuild:365e9}],this.workstationsList=[{id:"Smelter",triggerActivities:[R.Smelting],power:0,setupCost:1e3,maintenanceCost:10,description:"A smelter that will produce metal bars when you do Smelting.<br>You will need to provide your own ore and fuel.",maxInputs:2,inputs:[],consequence:c=>{if(c.inputs.length<2)return;const d=c.inputs.find(p=>"fuel"===p.item?.subtype),u=c.inputs.find(p=>"ore"===p.item?.type);d&&u&&u.quantity>0&&d.quantity>5&&(this.totalCrafts++,this.inventoryService.addItem(this.inventoryService.getBar(u.item?.value||1)),u.quantity--,d.quantity-=5)}},{id:"Superior Smelter",triggerActivities:[R.Smelting,R.MakeBrick],power:0,setupCost:1e6,maintenanceCost:1e7,description:"An enormous smelter that will produce metal bars when you do Smelting, or possible make other things that require intense heat.<br>You will need to provide your own ore and fuel.",maxInputs:3,inputs:[],consequence:(c,d)=>{if(d===R.MakeBrick)return void this.makeBricks(c);if(c.inputs.length<2)return;const u=c.inputs.find(g=>"fuel"===g.item?.subtype),p=c.inputs.find(g=>"ore"===g.item?.type);u&&p&&p.quantity>0&&u.quantity>0&&(this.totalCrafts++,this.inventoryService.addItem(this.inventoryService.getBar(p.item?.value||1)),p.quantity--,u.quantity--)}},{id:"Basic Anvil",triggerActivities:[R.Blacksmithing],power:0,setupCost:1e4,maintenanceCost:100,description:"A simple anvil that will let you craft your own equipment when you do Blacksmithing.<br>You will need to provide your own metal bars.",maxInputs:1,inputs:[],consequence:(c,d)=>{this.createEquipment(c,d)}},{id:"Heavy Anvil",triggerActivities:[R.Blacksmithing],power:1,setupCost:1e6,maintenanceCost:1e3,description:"A massive anvil that will let you craft more powerful equipment when you do Blacksmithing.<br>You will need to provide your own metal bars.",maxInputs:2,inputs:[],consequence:(c,d)=>{this.createEquipment(c,d)}},{id:"Masterwork Anvil",triggerActivities:[R.Blacksmithing,R.ForgeChains],power:2,setupCost:1e7,maintenanceCost:1e4,description:"An enchanted anvil that will let you craft extremely powerful equipment when you do Blacksmithing.<br>You will need to provide your own metal bars.",maxInputs:3,inputs:[],consequence:(c,d)=>{d===R.ForgeChains?this.forgeChains(c):this.createEquipment(c,d)}},{id:"Basic Woodworking Bench",triggerActivities:[R.Woodworking],power:0,setupCost:1e4,maintenanceCost:100,description:"A simple woodworking workbench that will let you craft your own equipment when you do Woodworking.<br>You will need to provide your own wood.",maxInputs:1,inputs:[],consequence:(c,d)=>{this.createEquipment(c,d)}},{id:"Advanced Woodworking Bench",triggerActivities:[R.Woodworking],power:1,setupCost:1e6,maintenanceCost:1e3,description:"A fully stocked woodworking workbench that will let you craft more powerful equipment when you do Woodworking.<br>You will need to provide your own wood.",maxInputs:2,inputs:[],consequence:(c,d)=>{this.createEquipment(c,d)}},{id:"Masterwork Woodworking Bench",triggerActivities:[R.Woodworking,R.MakeScaffold],power:2,setupCost:1e7,maintenanceCost:1e4,description:"An enchanted woodworking workbench that will let you craft extremely powerful equipment when you do Woodworking.<br>You will need to provide your own wood.",maxInputs:3,inputs:[],consequence:(c,d)=>{d===R.MakeScaffold?this.makeScafold(c):this.createEquipment(c,d)}},{id:"Basic Leatherworking Station",triggerActivities:[R.Leatherworking],power:0,setupCost:1e4,maintenanceCost:100,description:"A simple leatherworking station that will let you craft your own equipment when you do Leatherworking.<br>You will need to provide your own hides.",maxInputs:1,inputs:[],consequence:(c,d)=>{this.createEquipment(c,d)}},{id:"Advanced Leatherworking Station",triggerActivities:[R.Leatherworking],power:1,setupCost:1e6,maintenanceCost:1e3,description:"A fully stocked leatherworking station that will let you craft more powerful equipment when you do Leatherworking.<br>You will need to provide your own hides.",maxInputs:2,inputs:[],consequence:(c,d)=>{this.createEquipment(c,d)}},{id:"Masterwork Leatherworking Station",triggerActivities:[R.Leatherworking],power:2,setupCost:1e7,maintenanceCost:1e4,description:"An enchanted leatherworking station that will let you craft extremely powerful equipment when you do Leatherworking.<br>You will need to provide your own hides.",maxInputs:3,inputs:[],consequence:(c,d)=>{this.createEquipment(c,d)}},{id:"Basic Cauldron",triggerActivities:[R.Alchemy],power:0,setupCost:1e4,maintenanceCost:100,description:"A simple cauldron for brewing potions and making pills when you do alchemy.<br>You will need to provide your own herbs.",maxInputs:2,inputs:[],consequence:(c,d)=>{this.craftAlchemy(c,d)}},{id:"Large Cauldron",triggerActivities:[R.Alchemy],power:1,setupCost:1e6,maintenanceCost:1e3,description:"A large cauldron for brewing potions and making pills when you do alchemy.<br>You will need to provide your own herbs.",maxInputs:4,inputs:[],consequence:(c,d)=>{this.craftAlchemy(c,d)}},{id:"Enchanted Cauldron",triggerActivities:[R.Alchemy,R.MakeMortar],power:2,setupCost:1e7,maintenanceCost:1e4,description:"An enchanted cauldron for brewing potions and making pills when you do alchemy.<br>You will need to provide your own herbs.",maxInputs:6,inputs:[],consequence:(c,d)=>{d===R.MakeMortar?this.makeMortar(c):this.craftAlchemy(c,d)}},{id:"Cook Pot",triggerActivities:[R.Cooking],power:0,setupCost:100,maintenanceCost:10,description:"A simple cook pot to prepare meals.<br>You will need to provide your own ingredients.",maxInputs:2,inputs:[],consequence:(c,d)=>{this.cookFood(c,d)}},{id:"Roasting Spit",triggerActivities:[R.Cooking],power:1,setupCost:1e4,maintenanceCost:100,description:"A simple spit to roast your foods, letting you add more variety to your diet.<br>You will need to provide your own ingredients.",maxInputs:3,inputs:[],consequence:(c,d)=>{this.cookFood(c,d)}},{id:"Chef Kitchen",triggerActivities:[R.Cooking],power:2,setupCost:1e6,maintenanceCost:1e3,description:"A restaurant quality kitchen allowing you to make magnificent meals.<br>You will need to provide your own ingredients.",maxInputs:5,inputs:[],consequence:(c,d)=>{this.cookFood(c,d)}},{id:"Basic Formation Workstation",triggerActivities:[R.FormationCreation],power:1,setupCost:1e6,maintenanceCost:1e3,description:"A simple workspace where you can assemple flags, talismans, arrays, and other items and assemble them into kits that can support you in battle.",maxInputs:3,inputs:[],consequence:c=>{this.createFormationKit(c)}},{id:"Advanced Formation Workstation",triggerActivities:[R.FormationCreation],power:2,setupCost:1e8,maintenanceCost:1e4,description:"Am advanced workspace where you can assemple flags, talismans, arrays, and other items and assemble them into kits that can support you in battle.",maxInputs:4,inputs:[],consequence:c=>{this.createFormationKit(c)}},{id:"Masterwork Formation Workstation",triggerActivities:[R.FormationCreation],power:3,setupCost:1e9,maintenanceCost:1e5,description:"A workspace where you can assemple the most powerful flags, talismans, arrays, and other items and assemble them into kits that can support you in battle.",maxInputs:5,inputs:[],consequence:c=>{this.createFormationKit(c)}}],this.availableWorkstationsList=[],this.baguaMap=[["books","wood","purple","red","green"],["bed","trophy","fire","red","orange"],["bed","portrait","animal","earth","red","pink"],["portrait","fitness","animal","wood","green","blue"],["fitness","earth","yellow","brown"],["portrait","metal","white","pastel"],["books","spiritual","water","earth","blue","black","green"],["water","black"],["books","animal","metal","gray","white","black"]],this.nextHomeCostReduction=0,this.nextHomeCost=0,this.highestLand=0,this.highestLandPrice=100,this.bestHome=0,setTimeout(()=>this.hellService=this.injector.get(We)),setTimeout(()=>this.activityService=this.injector.get(bt)),setTimeout(()=>this.followerService=this.injector.get(Gt)),this.land=0,this.landPrice=100,this.setCurrentHome(this.homesList[0]),void 0===this.home||void 0===this.homeValue||void 0===this.nextHome)throw Error("Home service not initialized correctly.");a.homeTickSubject.subscribe(()=>{this.tick()}),a.longTickSubject.subscribe(()=>{this.land>this.highestLand&&(this.highestLand=this.land),this.landPrice>this.highestLandPrice&&(this.highestLandPrice=this.landPrice),this.homeValue>this.bestHome&&(this.bestHome=this.homeValue),this.upgrading&&this.nextHome===this.home&&(this.houseBuildingProgress=1,this.upgrading=!1,this.setCurrentHome(this.home))}),a.reincarnateSubject.subscribe(()=>{this.reset(),this.keepHome?this.logService.log(D.EVENT,"You reincarnate as one of your own descendants, and your family recognizes you as the reborn heir to the family home as you age."):this.homeValue===$e.SquatterTent&&this.grandfatherTent&&(this.logService.log(D.EVENT,"Your grandfather gives you a bit of land and helps you set up a tent on it."),this.setCurrentHome(this.nextHome)),this.characterService.fatherGift&&this.characterService.bloodlineRank<6&&(this.logService.log(D.EVENT,"Your father puts some coins in your purse as you begin your grand adventure."),this.characterService.updateMoney(2e3)),this.characterService.updateMoney(30*this.home.costPerDay)})}tick(){if(!this.characterService.dead){if(this.upgrading&&this.upgradeTick(),this.nextHomeCost=this.nextHome.cost-this.nextHomeCostReduction,this.nextHomeCost<0&&(this.nextHomeCost=0),!this.hellService?.inHell||this.hellHome){this.home.consequence();for(const e of this.bedroomFurniture)e?.use&&e?.use()}if(!this.hellService?.inHell&&!this.characterService.god){let e=0;for(const n of this.workstations)e+=n.maintenanceCost;e+=this.home.costPerDay,e>this.characterService.money?(this.logService.injury(D.EVENT,"You can't afford the upkeep on your home. Some thugs rough you up over the debt. You'd better start doing activities that make more money, fast, or you'll work yourself to death."),this.thugPause&&(this.mainLoopService.pause=!0),this.characterService.status.health.value-=20,this.characterService.money=0):this.characterService.updateMoney(0-e)}}}getProperties(){return{homeValue:this.homeValue,bedroomFurniture:this.bedroomFurniture,land:this.land,landPrice:this.landPrice,keepFurniture:this.keepFurniture,keepWorkstationInputs:this.keepWorkstationInputs,nextHomeCostReduction:this.nextHomeCostReduction,houseBuildingProgress:this.houseBuildingProgress,upgrading:this.upgrading,ownedFurniture:this.ownedFurniture,highestLand:this.highestLand,highestLandPrice:this.highestLandPrice,bestHome:this.bestHome,thugPause:this.thugPause,hellHome:this.hellHome,homeUnlocked:this.homeUnlocked,keepHome:this.keepHome,seeFurnitureEffects:this.seeFurnitureEffects,workstations:this.workstations,totalCrafts:this.totalCrafts,alchemyCounter:this.alchemyCounter,forgeChainsCounter:this.forgeChainsCounter}}setProperties(e){this.land=e.land,this.landPrice=e.landPrice,this.setCurrentHome(this.homesList[e.homeValue]),this.keepFurniture=e.keepFurniture||!1,this.keepWorkstationInputs=e.keepWorkstationInputs||!1,this.nextHomeCostReduction=e.nextHomeCostReduction||0,this.houseBuildingProgress=e.houseBuildingProgress||1,this.upgrading=e.upgrading||!1;for(let n=0;n<e.bedroomFurniture.length;n++){const r=e.bedroomFurniture[n];this.bedroomFurniture[n]=r?this.itemRepoService.getFurnitureById(r.id):null}this.ownedFurniture=e.ownedFurniture||[],this.highestLand=e.highestLand||0,this.highestLandPrice=e.highestLandPrice||100,this.bestHome=e.bestHome||0,this.thugPause=e.thugPause||!1,this.hellHome=e.hellHome||!1,this.homeUnlocked=e.homeUnlocked||!1,this.keepHome=e.keepHome,this.seeFurnitureEffects=e.keepHome,this.totalCrafts=e.totalCrafts,this.alchemyCounter=e.alchemyCounter||0,this.forgeChainsCounter=e.forgeChainsCounter||0,this.workstations=[];for(const n of e.workstations)this.addWorkstation(n.id,n);this.recalculateFengShui()}getNextHome(){for(let e=this.homeValue;e<this.homesList.length-1;e++)if(this.homeValue===this.homesList[e].type)return this.homesList[e+1];return this.homesList[this.homesList.length-1]}getPreviousHome(){if(this.homeValue===$e.SquatterTent)return this.home;for(let e=1;e<this.homesList.length;e++)if(this.homeValue===this.homesList[e].type)return this.homesList[e-1];return this.home}upgradeToNextHome(){this.upgrading||this.characterService.money>=this.nextHomeCost&&this.land>=this.nextHome.landRequired&&(this.characterService.updateMoney(0-this.nextHomeCost),this.land-=this.nextHome.landRequired,this.nextHomeCostReduction=0,this.houseBuildingProgress=0,this.upgrading=!0,this.logService.log(D.EVENT,"You start upgrading your home to a "+this.nextHome.name))}downgradeHome(){for(this.upgrading&&(this.nextHomeCostReduction=0,this.houseBuildingProgress=0,this.upgrading=!1);this.workstations.length>0;)this.removeWorkstation(this.workstations[0]);for(let e=0;e<this.bedroomFurniture.length;e++)this.setFurniture(null,e);this.land+=this.home.landRequired-this.previousHome.landRequired,this.setCurrentHome(this.previousHome)}upgradeTick(e=1){e<1&&(e=1),this.houseBuildingProgress+=1/this.nextHome.daysToBuild*e,this.houseBuildingProgress>=1&&(this.houseBuildingProgress=1,this.upgrading=!1,this.setCurrentHome(this.nextHome),this.logService.log(D.EVENT,"You finished upgrading your home. You now live in a "+this.home.name))}reset(){if(this.keepHome){if(!this.keepWorkstationInputs)for(const e of this.workstations)for(const n of e.inputs)n.quantity=0}else this.setCurrentHome(this.homesList[0]);if(!this.keepFurniture){for(let e=0;e<this.bedroomFurniture.length;e++)this.bedroomFurniture[e]=null;this.recalculateFengShui(),this.ownedFurniture=[]}this.characterService.bloodlineRank<7&&(this.upgrading=!1,this.houseBuildingProgress=1),this.nextHomeCostReduction=0,this.keepHome?this.landPrice-=10*(this.land-1):this.landPrice=100,this.land=0}setCurrentHome(e){this.homeValue=e.type,this.home=this.getHomeFromValue(this.homeValue),this.previousHome=this.getPreviousHome(),this.nextHome=this.getNextHome(),this.nextHomeCost=this.nextHome.cost-this.nextHomeCostReduction,this.inventoryService.changeMaxItems(this.home.maxInventory),this.availableWorkstationsList=this.workstationsList.filter(n=>n.power<=e.maxWorkstationPower),this.recalculateFengShui()}getHomeFromValue(e){for(const n of this.homesList)if(n.type===e)return n;throw Error("Home was not found with the given value")}buyLand(e){const r=this.landPrice*e+e*(e-1)/2*10;return this.characterService.money>=r&&(this.characterService.updateMoney(0-r),this.land+=e,this.landPrice+=10*e),e}calculateAffordableLand(e){const n=e,r=this.landPrice;return Math.floor((-r-5+Math.sqrt(Math.pow(r,2)+10*r+20*n+25))/10)}hasWorkstation(e){return void 0!==this.workstations.find(n=>n.id.includes(e))}setFurniture(e,n){if(null===e&&this.bedroomFurniture[n])this.bedroomFurniture[n]=null,this.openBedroomFurnitureSlots++;else if(null!==e&&this.bedroomFurniture[n])this.bedroomFurniture[n]=e;else if(null!==e&&!this.bedroomFurniture[n]){if(this.openBedroomFurnitureSlots<=0)return;this.bedroomFurniture[n]=e}this.recalculateFengShui()}recalculateFengShui(){this.openBedroomFurnitureSlots=this.home.maxFurniture;let e=0;for(let n=0;n<this.bedroomFurniture.length;n++){const r=this.bedroomFurniture[n];if(r&&(this.openBedroomFurnitureSlots--,this.baguaMap[n].includes(r.subtype||"")&&(e+=1),this.baguaMap[n].includes(r.color||"")&&(e+=1),r.elements))for(const o of r.elements)this.baguaMap[n].includes(o)&&(e+=1)}this.characterService.fengshuiScore=e}removeWorkstation(e){for(const r of e.inputs)r.item&&this.inventoryService.addItem(r.item,r.quantity);const n=this.workstations.indexOf(e);this.workstations.splice(n,1)}addWorkstation(e,n=null){if(this.workstations.length>=this.home.maxWorkstations)return;const r=this.workstationsList.find(({id:l})=>l===e);if(!r)return;let o=0;for(const l of this.workstations)l.id===e&&o++;const a=[];for(let l=0;l<r.maxInputs;l++)a.push(this.inventoryService.getEmptyItemStack());const s={index:this.workstations.length,name:e+" #"+(o+1),id:e,triggerActivities:r?.triggerActivities,power:r.power,setupCost:r.setupCost,maintenanceCost:r.maintenanceCost,description:r.description,maxInputs:r.maxInputs,inputs:a,consequence:r.consequence};n&&(s.inputs=n.inputs),this.workstations.push(s)}triggerWorkstations(e){for(const n of this.workstations)n.triggerActivities.includes(e)&&n.consequence(n,e)}moveItemToWorkstation(e,n,r){if(this.inventoryService.itemStacks[e].item)if(this.workstations[n].inputs[r].item){if(this.workstations[n].inputs[r].item?.name===this.inventoryService.itemStacks[e].item?.name)return this.workstations[n].inputs[r].quantity+=this.inventoryService.itemStacks[e].quantity,void(this.inventoryService.itemStacks[e]=this.inventoryService.getEmptyItemStack());const o=this.inventoryService.itemStacks[e];this.inventoryService.itemStacks[e]=this.workstations[n].inputs[r],this.workstations[n].inputs[r]=o,this.workstations[n].inputs[r].id=n+"_"+r+this.workstations[n].inputs[r].item.name+this.workstations[n].inputs[r].quantity,this.inventoryService.fixId(e)}else this.workstations[n].inputs[r]=this.inventoryService.itemStacks[e],this.workstations[n].inputs[r].id=n+"_"+r+this.workstations[n].inputs[r].item.name+this.workstations[n].inputs[r].quantity,this.inventoryService.itemStacks[e]=this.inventoryService.getEmptyItemStack()}chefsWork(e){const n=this.workstations.filter(r=>r.triggerActivities.includes(R.Cooking));for(const r of n)this.cookFood(r,e/n.length)}cookFood(e,n,r=1){if(e.inputs.length<2)return;const o=[],a=[];let s=0;for(const g of e.inputs)g.item&&"food"===g.item.type&&"meal"!==g.item.subtype&&!o.includes(g.item.id)&&g.quantity>=r&&(o.push(g.item.id),g.item.subtype&&!a.includes(g.item.subtype)&&a.push(g.item.subtype),s+=g.item.value,g.quantity-=r);if(s<1)return;s*=o.length,s*=a.length,s*=e.power+1;let c="meal",d="Menu Special #"+s,u=!1;(this.activityService?.getActivityByType(n)?.level||0)>0&&(s*=4,c="soulfood",d="Soul Food Special #"+s,u=!0);const p="meal"+s;this.totalCrafts++,this.inventoryService.addItem({id:d,imageFile:c,name:d,type:"food",subtype:"meal",value:s,description:"A home-made meal that can nourish you much more than raw ingredients.",useLabel:"Eat",useDescription:"Fills your belly.",useConsumes:!0,pouchable:u,effect:p},r)}forgeChains(e){const n=e.inputs.find(o=>"metal"===o.item?.type);if(this.characterService.attributes.metalLore.value<1e9)return this.logService.injury(D.EVENT,"You lack the necessary knowledge and cause a deadly explosion."),this.characterService.status.health.value-=.6*this.characterService.status.health.max,void(this.activityService?.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0));if(!n||n.quantity<10||(n.item?.value||0)<150)return this.logService.injury(D.EVENT,"You fumble with the wrong tools and materials and hurt yourself."),this.characterService.status.health.value-=.05*this.characterService.status.health.max,void(this.activityService?.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0));const r=e.inputs.find(o=>"gem"===o.item?.type);if(!r||r.quantity<10||(r.item?.value||0)<250)return this.logService.injury(D.EVENT,"You think you have the right metal, but you'll need something to imbue it with additional strength."),void(this.activityService?.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0));this.forgeChainsCounter++,n.quantity-=10,r.quantity-=10,this.forgeChainsCounter>10?(this.logService.log(D.CRAFTING,"Your anvil gives off an ear-splitting ringing and echoes endlessly into the depths. The new chain glows with power!"),this.inventoryService.addItem(this.itemRepoService.items.unbreakableChain),this.forgeChainsCounter=0):this.logService.log(D.CRAFTING,"Your anvil rings and weakly echoes into the depths. You throw aside the useless dull chain, but you think you are on the right track.")}makeMortar(e){const n=e.inputs.find(s=>"ore"===s.item?.type);if(!n||(n.item?.value||0)<10||n.quantity<100)return this.logService.injury(D.EVENT,"You fumble with the wrong materials and hurt yourself."),this.characterService.status.health.value-=.05*this.characterService.status.health.max,void(this.activityService?.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0));const r=e.inputs.find(s=>"hide"===s.item?.type);if(!r||r.quantity<10||(r.item?.value||0)<10)return this.logService.injury(D.EVENT,"You think you have the right ore to make mortar, but you'll need something to give the mortar additional elasticity. Something strong, yet flexible."),void(this.activityService?.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0));const o=e.inputs.find(s=>"gem"===s.item?.type);if(!o||o.quantity<10||(o.item?.value||0)<300)return this.logService.injury(D.EVENT,"You think you have the right materials to make mortar, but you'll need something to imbue the mixture with additional strength."),void(this.activityService?.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0));const a=Math.floor((this.followerService.jobs.builder.totalPower+100)/100);if(a<10)return this.logService.injury(D.EVENT,"You try mixing the cauldron of mortar, but lack the required experience with building materials to do it properly. You might need some help."),void(this.activityService?.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0));n.quantity-=100,r.quantity-=10,o.quantity-=10,this.inventoryService.addItem(this.itemRepoService.items.everlastingMortar,a),this.logService.log(D.CRAFTING,"You and your followers made some "+this.itemRepoService.items.everlastingMortar.name)}makeBricks(e){const n=e.inputs.find(l=>"ore"===l.item?.type);if(!n||(n.item?.value||0)<10||n.quantity<200)return this.logService.injury(D.EVENT,"You fumble with the wrong materials and hurt yourself."),this.characterService.status.health.value-=.05*this.characterService.status.health.max,void(this.activityService?.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0));const r=e.inputs.findIndex(l=>"fuel"===l.item?.subtype);if(-1===r)return this.logService.injury(D.EVENT,"Your brick-making smelter remains inert without fuel."),void(this.activityService?.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0));const o=e.inputs[r];if(!o||(o.item?.value||0)<10)return this.logService.injury(D.EVENT,"You fumble with the wrong fuels and hurt yourself."),this.characterService.status.health.value-=.05*this.characterService.status.health.max,void(this.activityService?.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0));if(o.quantity<2e3){const l=this.inventoryService.itemStacks.findIndex(c=>c?.item?.id===o.item?.id);if(-1!==l&&this.moveItemToWorkstation(l,this.workstations.indexOf(e),r),o.quantity<2e3)return o.quantity=0,this.logService.injury(D.EVENT,"Your smelter sputters out, lacking the vast amounts of fuel it needs."),void(this.activityService?.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0))}const a=e.inputs.find(l=>"gem"===l.item?.type);if(!a||a.quantity<10||(a.item?.value||0)<300)return this.logService.injury(D.EVENT,"You think you have the right ore to make bricks, but you'll need something to imbue the mixture with additional strength."),void(this.activityService?.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0));const s=Math.floor((this.followerService.jobs.builder.totalPower+100)/100);if(s<10)return this.logService.injury(D.EVENT,"You try forming the bricks in your smelter, but lack the required experience with building materials to do it properly. You might need some help."),void(this.activityService?.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0));n.quantity-=200,o.quantity-=2e3,a.quantity-=10,this.inventoryService.addItem(this.itemRepoService.items.everlastingBrick,s),this.logService.log(D.CRAFTING,"You and your followers baked a batch of "+this.itemRepoService.items.everlastingBrick.name+"s")}makeScafold(e){const n=e.inputs.find(r=>"wood"===r.item?.type);if(!n||(n.item?.value||0)<12||n.quantity<200)return this.logService.injury(D.EVENT,"You fumble with the wrong materials and hurt yourself."),this.characterService.status.health.value-=.05*this.characterService.status.health.max,void(this.activityService?.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0));n.quantity-=200,this.inventoryService.addItem(this.itemRepoService.items.scaffolding),this.logService.log(D.CRAFTING,"You made "+this.itemRepoService.items.scaffolding.name)}createEquipment(e,n){if(e.inputs.length<1)return;let r="metal";n===R.Woodworking?r="wood":n===R.Leatherworking&&(r="hide");const o=this.activityService?.getActivityByType(n)?.level||0,a=e.inputs.find(c=>c.item?.type===r),s=e.inputs.find(c=>"gem"===c.item?.type),l=e.inputs.find(c=>c.item?.type!==r&&("wood"===c.item?.type||"metal"===c.item?.type||"hide"===c.item?.type));if(a&&a.quantity>=10){let d,c=(a?.item?.value||1)+5*e.power;"wood"===a.item?.type?c+=Math.log10(this.characterService.attributes.woodLore.value):"metal"===a.item?.type&&(c+=Math.log10(this.characterService.attributes.metalLore.value)),c+=o,s&&s.quantity>0&&this.inventoryService.useSpiritGemUnlocked&&(c+=s?.item?.value||1,s.quantity--),l&&l.quantity>0&&(c+=l?.item?.value||1,l.quantity--),this.totalCrafts++,d=n===R.Leatherworking?this.inventoryService.generateArmor(c,this.inventoryService.randomArmorSlot()):this.inventoryService.generateWeapon(c,r),this.inventoryService.addItem(d),a.quantity-=10}}craftAlchemy(e,n){if(e.inputs.length<1)return;const r=[];let o=0,a=!1,s=!1,l=!1,c=!1;const d=this.activityService?.getActivityByType(n)?.level||0;let u="toughness";for(const p of e.inputs)p.item&&"herb"===p.item.type&&p.item.subtype&&!r.includes(p.item.subtype)&&p.quantity>0&&(r.push(p.item.subtype),o+=p.item.value,p.quantity--,p.item.attribute&&(u=p.item.attribute));if(!(o<1)){for(const p of e.inputs)p.item&&"gem"===p.item.type&&p.quantity>0&&this.inventoryService.useSpiritGemUnlocked?(a=!0,p.quantity--):p.item&&"pillMold"===p.item.type&&p.quantity>0?(s=!0,p.quantity--):p.item&&"pillBox"===p.item.type&&p.quantity>0?(l=!0,p.quantity--):p.item&&"pillPouch"===p.item.type&&p.quantity>0&&(c=!0,p.quantity--);this.totalCrafts++,this.alchemyCounter++,a&&s&&l&&c?this.inventoryService.generateEmpowermentPill():(a||d>2)&&this.alchemyCounter>10?(this.alchemyCounter=0,this.inventoryService.generatePill(o,u)):this.inventoryService.generatePotion(o)}}createFormationKit(e){const n=e.inputs.find(c=>"wood"===c.item?.type&&c.quantity>=10),r=e.inputs.find(c=>"hide"===c.item?.type&&c.quantity>=10),o=e.inputs.find(c=>"gem"===c.item?.type&&c.quantity>=10);if(!n||!r||!o)return;const a=e.inputs.find(c=>"metal"===c.item?.type&&c.quantity>=10),s=e.inputs.find(c=>("potion"===c.item?.type||"pill"===c.item?.type||"herb"===c.item?.type)&&c.quantity>=10);let l=(n.item?.value||0)+(r.item?.value||0)+(o.item?.value||0)+(a?.item?.value||0)+(s?.item?.value||0);l*=e.power,l=Math.floor(l),this.inventoryService.addItem(this.inventoryService.generateFormationKit(l)),n.quantity-=10,r.quantity-=10,o.quantity-=10,a&&(a.quantity-=10),s&&(s.quantity-=10)}getFurnitureSlotTooltip(e){let n="";if(this.seeFurnitureEffects){n+="This space facilitates the Feng Shui of your home when its furniture aligns with:";for(const o of this.baguaMap[e])n+="<br>"+this.titleCasePipe.transform(o);n+="<br>"}this.openBedroomFurnitureSlots>0&&(n+="Click to set which furniture should be placed here.");const r=this.bedroomFurniture[e];return r&&(n+="<br><br>"+this.getFurnitureTooltip(r)),n}getFurnitureTooltip(e){let n="";if(n=e.description,this.seeFurnitureEffects&&(n+="<br>Feng Shui Properties:",e.subtype&&(n+="<br>"+this.titleCasePipe.transform(e.subtype)),e.color&&(n+="<br>Color: "+this.titleCasePipe.transform(e.color)),e.elements)){n+="<br>Elements: ";for(const r of e.elements)n+=this.titleCasePipe.transform(r)+", ";n=n.substring(0,n.length-2)}return n}static{this.\u0275fac=function(n){return new(n||t)(P(we),P(Ie),P(he),P(Xi),P(tt),P(Un),P(Ai))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),bt=(()=>{class t{constructor(e,n,r,o,a,s,l,c,d,u,p){this.injector=e,this.characterService=n,this.inventoryService=r,this.homeService=o,this.farmService=a,this.mainLoopService=s,this.itemRepoService=l,this.battleService=c,this.logService=d,this.followerService=u,this.impossibleTaskService=p,this.activityLoop=[],this.savedActivityLoops=[],this.loopChangeTriggers=[],this.triggerIndex=0,this.spiritActivity=null,this.autoRestart=!1,this.autoPauseUnlocked=!1,this.pauseOnImpossibleFail=!0,this.pauseOnDeath=!0,this.pauseBeforeDeath=!1,this.openApprenticeships=1,this.oddJobDays=0,this.beggingDays=0,this.completedApprenticeships=[],this.currentIndex=0,this.currentTickCount=0,this.exhaustionDays=0,this.currentLoopEntry=void 0,this.currentApprenticeship=void 0,this.activityDeath=!1,this.autoRestUnlocked=!1,this.totalExhaustedDays=0,this.spiritActivityProgress=!1,this.purifyGemsUnlocked=!1,this.trainingFollowersDays=0,this.trainingPetsDays=0,this.immediateActivity=null,this.lifeActivities={},this.familySpecialty=null,this.supportedSpecialties=[R.Begging,R.Cooking,R.Blacksmithing,R.Alchemy,R.Woodworking,R.Leatherworking],this.tauntCounter=0,this.pillMoldCounter=0,this.pillBoxCounter=0,this.pillPouchCounter=0,this.researchWindCounter=0,this.miningCounter=0,this.huntingCounter=0,this.fishingCounter=0,this.recruitingCounter=0,this.petRecruitingCounter=0,this.coreCultivationCounter=0,this.Swim={level:0,name:["Swim Deeper"],location:E.DeepSea,impossibleTaskIndex:fe.Swim,imageBaseName:"swim",activityType:R.Swim,description:["Swim down further into the depths."],yinYangEffect:[Q.None],consequenceDescription:["Uses 20 Stamina. Reduce health by 100."],consequence:[()=>{this.characterService.status.stamina.value-=20,this.characterService.status.health.value-=100,this.impossibleTaskService.taskProgress[fe.Swim].progress++,this.impossibleTaskService.checkCompletion(),this.impossibleTaskService.taskProgress[fe.Swim].complete&&this.logService.log(D.STORY,"Your preparations were worthwhile! You dove all the way to the bottom of the ocean, through a hidden tunnel that led impossibly deep, and found a mythical sunken island.")}],resourceUse:[{stamina:20}],requirements:[{}],unlocked:!0,skipApprenticeshipLevel:0},this.ForgeChains={level:0,location:E.LargeCity,impossibleTaskIndex:fe.RaiseIsland,name:["Forge Unbreakable Chain"],imageBaseName:"forgechains",activityType:R.ForgeChains,description:["Forge a chain strong enough to pull the island from the depths."],yinYangEffect:[Q.None],consequenceDescription:["Uses 100 Stamina. If you have the right facilities, materials, and knowledge you might be able to create an unbreakable chain."],consequence:[()=>{this.characterService.status.stamina.value-=100,void 0===this.homeService.workstations.find(b=>b.triggerActivities.includes(R.ForgeChains))&&this.logService.log(D.EVENT,"You think about forging chains, but you don't have the right workstation to even get started.")}],resourceUse:[{stamina:100}],requirements:[{}],unlocked:!0,skipApprenticeshipLevel:0},this.AttachChains={level:0,name:["Attach Chains to the Island"],location:E.DeepSea,impossibleTaskIndex:fe.RaiseIsland,imageBaseName:"attachchains",activityType:R.AttachChains,description:["Swim deep and attach one of your chains to the island, then pull."],yinYangEffect:[Q.None],consequenceDescription:["Uses nearly a million Stamina. These chains are really, REALLY heavy. You better plan on having an Unbreakable Chain and a good place to rest afterwards."],consequence:[()=>{this.inventoryService.consume("chain")>0?this.characterService.status.stamina.value>=999e3?(this.characterService.status.stamina.value-=999e3,this.logService.log(D.EVENT,"You attach a chain to the island, and give your chains a long, strenuous tug."),this.impossibleTaskService.taskProgress[fe.RaiseIsland].progress++,this.impossibleTaskService.checkCompletion(),this.impossibleTaskService.taskProgress[fe.RaiseIsland].complete&&this.logService.log(D.STORY,"With a mighty pull of 777 chains, the island comes loose. You haul it to the surface.")):(this.logService.injury(D.EVENT,"You strain yourself trying to lug the chain to an anchor point and collapse."),this.characterService.status.stamina.value-=999e3,this.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0)):(this.logService.injury(D.EVENT,"You pass time exploring the hidden tunnels without a chain until a horror of the depths takes a nibble."),this.characterService.status.health.value-=.05*this.characterService.status.health.max,this.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0))}],resourceUse:[{stamina:999e3}],requirements:[{}],unlocked:!0,skipApprenticeshipLevel:0},this.MakeBrick={level:0,name:["Create an Everlasting Brick"],location:E.LargeCity,impossibleTaskIndex:fe.BuildTower,imageBaseName:"makebrick",activityType:R.MakeBrick,description:["Create bricks sturdy enough to support the weight of your tower."],yinYangEffect:[Q.None],consequenceDescription:["Uses 100 Stamina. If you have the right followers and materials you will create some everlasting bricks."],consequence:[()=>{this.characterService.status.stamina.value-=100,void 0===this.homeService.workstations.find(b=>b.triggerActivities.includes(R.MakeBrick))&&this.logService.log(D.EVENT,"You think about making bricks, but you don't have the right workstation to even get started.")}],resourceUse:[{stamina:100}],requirements:[{}],unlocked:!0,skipApprenticeshipLevel:0},this.MakeScaffold={level:0,name:["Build Scaffolding"],location:E.LargeCity,impossibleTaskIndex:fe.BuildTower,imageBaseName:"scaffolding",activityType:R.MakeScaffold,description:["Set up the scaffolding for the next level of your tower."],yinYangEffect:[Q.None],consequenceDescription:["Uses 1000 Stamina. If you have the right materials you might succeed in setting up the scaffolding for the next level."],consequence:[()=>{this.characterService.status.stamina.value-=1e3,void 0===this.homeService.workstations.find(b=>b.triggerActivities.includes(R.MakeScaffold))&&this.logService.log(D.EVENT,"You think about making a scaffold, but you don't have the right workstation to even get started.")}],resourceUse:[{stamina:1e3}],requirements:[{}],unlocked:!0,skipApprenticeshipLevel:0},this.MakeMortar={level:0,name:["Mix Everlasting Mortar"],location:E.LargeCity,impossibleTaskIndex:fe.BuildTower,imageBaseName:"makemortar",activityType:R.MakeMortar,description:["Mix mortar powerful enough to hold your mighty tower together."],yinYangEffect:[Q.None],consequenceDescription:["Uses 100 Stamina. If you have the right followers, facilities, and materials you might succeed in mixing some proper mortar."],consequence:[()=>{this.characterService.status.stamina.value-=100,void 0===this.homeService.workstations.find(b=>b.triggerActivities.includes(R.MakeMortar))&&this.logService.log(D.EVENT,"You think about making mortar, but you don't have the right workstation to even get started.")}],resourceUse:[{stamina:100}],requirements:[{}],unlocked:!0,skipApprenticeshipLevel:0},this.BuildTower={level:0,name:["Build the Next Level"],location:E.LargeCity,impossibleTaskIndex:fe.BuildTower,imageBaseName:"buildtower",activityType:R.BuildTower,description:["Assemble 1000 bricks, 100 barrels of mortar, and your scaffolding to construct the next level of your tower. You will need a lot of expert help for this."],yinYangEffect:[Q.None],consequenceDescription:["Uses 1000 Stamina. If you have the right followers and materials you will build the next level."],consequence:[()=>{this.characterService.status.stamina.value-=1e3;let m=0;for(const C of this.followerService.followers)"builder"===C.job&&m++;if(m<10)return this.logService.injury(D.EVENT,"You fumble without the proper help and hurt yourself."),this.characterService.status.health.value-=.05*this.characterService.status.health.max,void(this.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0));let b=0;return b=this.inventoryService.consume("scaffolding"),b<1?(this.logService.injury(D.EVENT,"You try building without a scaffolding, but it ends in a disaster and you are badly hurt."),this.characterService.status.health.value-=.2*this.characterService.status.health.max,void(this.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0))):(b=0,b=this.inventoryService.consume("mortar",100),b<1?(this.logService.injury(D.EVENT,"You try building without enough mortar, but it ends in a disaster and you are badly hurt."),this.characterService.status.health.value-=.2*this.characterService.status.health.max,void(this.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0))):(b=0,b=this.inventoryService.consume("brick",1e3),b<1?(this.logService.injury(D.EVENT,"You try building without enough bricks, but it ends in a disaster and you are badly hurt."),this.characterService.status.health.value-=.2*this.characterService.status.health.max,void(this.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0))):(this.impossibleTaskService.taskProgress[fe.BuildTower].progress++,this.impossibleTaskService.checkCompletion(),void(this.impossibleTaskService.taskProgress[fe.BuildTower].complete&&this.logService.log(D.STORY,"You have acheived the impossible and built a tower beyond the heavens.")))))}],resourceUse:[{stamina:1e3}],requirements:[{}],unlocked:!0,skipApprenticeshipLevel:0},this.ResearchWind={level:0,name:["Research Wind Control"],location:E.MountainTops,impossibleTaskIndex:fe.TameWinds,imageBaseName:"researchwind",activityType:R.ResearchWind,description:["Delve deep into wind lore to understand how the neverending storm can be controlled."],yinYangEffect:[Q.None],consequenceDescription:["Uses 1000 Stamina and Qi. Compile your research and if you have done enough you may produce a Tome of Wind Control."],consequence:[()=>{this.characterService.status.stamina.value-=1e3,this.characterService.status.qi.value-=1e3,this.characterService.status.stamina.value<0||this.characterService.status.qi.value<0?this.logService.log(D.EVENT,"You try to research, but you just don't have the energy."):this.characterService.status.stamina.value>=0&&this.characterService.status.qi.value>=0&&(this.researchWindCounter++,this.researchWindCounter>100&&(this.logService.log(D.CRAFTING,"Research breakthrough! You produce a tome!."),this.inventoryService.addItem(this.itemRepoService.items.windTome),this.researchWindCounter=0))}],resourceUse:[{stamina:1e3,qi:1e3}],requirements:[{}],unlocked:!0,skipApprenticeshipLevel:0},this.TameWinds={level:0,name:["Tame Winds"],location:E.MountainTops,impossibleTaskIndex:fe.TameWinds,imageBaseName:"tamewind",activityType:R.TameWinds,description:["Use your research to tame the winds."],yinYangEffect:[Q.None],consequenceDescription:["Uses 10000 Stamina and Qi and an obscene amount of money. Use a Tome of Wind Control to tame the hurricane."],consequence:[()=>{this.characterService.status.stamina.value-=1e4,this.characterService.status.qi.value-=1e4,this.characterService.money<1e18&&(this.logService.injury(D.EVENT,"You try to tame the winds, but without the proper funds you can't begin the magical ritual."),this.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0)),this.characterService.updateMoney(-1e18);let m=0;m=this.inventoryService.consume("windTome"),m>0?(this.impossibleTaskService.taskProgress[fe.TameWinds].progress++,this.logService.log(D.EVENT,"You feel yourself drawing closer to mastery over the winds."),this.impossibleTaskService.checkCompletion(),this.impossibleTaskService.taskProgress[fe.TameWinds].complete&&this.logService.log(D.STORY,"You acheived the impossible and tamed a hurricane.")):(this.logService.injury(D.EVENT,"You try to tame the winds, but without the proper preparation you are blown off the top of the tower."),this.characterService.status.health.value-=.5*this.characterService.status.health.max,this.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0))}],resourceUse:[{stamina:1e4,qi:1e4}],requirements:[{}],unlocked:!0,skipApprenticeshipLevel:0},this.LearnToFly={level:0,name:["Learn To Fly"],location:E.MountainTops,impossibleTaskIndex:fe.LearnToFly,imageBaseName:"learntofly",activityType:R.LearnToFly,description:["Jump off your tower and practice flying. This will definitely go well for you."],yinYangEffect:[Q.None],consequenceDescription:["You will certainly, probably, maybe not die doing this."],consequence:[()=>{this.impossibleTaskService.taskProgress[fe.LearnToFly].progress++,this.impossibleTaskService.taskProgress[fe.LearnToFly].progress<2222?(this.logService.injury(D.EVENT,"Jumping off an impossibly tall tower ends about like you might expect. Your wounds may take a bit to heal, but at least you learned something."),this.characterService.status.health.value-=1e4):this.impossibleTaskService.taskProgress[fe.LearnToFly].progress<4444?(this.logService.injury(D.EVENT,"You feel like you might have flown a litte bit, somewhere near the time you hit the ground."),this.characterService.status.health.value-=5e3):this.impossibleTaskService.taskProgress[fe.LearnToFly].progress<6666?(this.logService.injury(D.EVENT,"You definitely did better that time. You did some great flying but sticking the landing is still tricky."),this.characterService.status.health.value-=1e3):(this.logService.injury(D.EVENT,"Almost there! Perfect landings are so hard."),this.characterService.status.health.value-=100),this.impossibleTaskService.checkCompletion(),this.impossibleTaskService.taskProgress[fe.LearnToFly].complete&&this.logService.log(D.STORY,"You mastered flight! You can go anywhere in the world now, even where the ancient dragons live.")}],resourceUse:[{health:1001}],requirements:[{}],unlocked:!0,skipApprenticeshipLevel:0},this.OfferDragonFood={level:0,name:["Offer Food"],location:E.MountainTops,impossibleTaskIndex:fe.BefriendDragon,imageBaseName:"offerfood",activityType:R.OfferDragonFood,description:["It turns out that dragons love a well-prepared meal. Bring the dragon a bunch and he may be more friendly."],yinYangEffect:[Q.None],consequenceDescription:["You will need a great deal of fine food for this to work."],consequence:[()=>{let m=0;if(m=this.inventoryService.consume("food",1e3),m<5e4)return this.logService.injury(D.EVENT,"The dragon is offended by your paltry offering and takes a swipe at you with its massive claw."),this.characterService.status.health.value-=.9*this.characterService.status.health.max,void(this.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0));this.impossibleTaskService.taskProgress[fe.BefriendDragon].progress<2e3?(this.impossibleTaskService.taskProgress[fe.BefriendDragon].progress++,this.logService.log(D.EVENT,"The dragon accepts your offering. You think. It eats the food anyway, and doesn't attack you while doing it.")):this.logService.log(D.EVENT,"The dragon doesn't seem interested in any more food.")}],resourceUse:[{}],requirements:[{}],unlocked:!0,skipApprenticeshipLevel:0},this.OfferDragonWealth={level:0,name:["Offer Wealth"],location:E.MountainTops,impossibleTaskIndex:fe.BefriendDragon,imageBaseName:"offergold",activityType:R.OfferDragonWealth,description:["You have heard that dragons like treasure. Bring the dragon a bunch and he may be more friendly."],yinYangEffect:[Q.None],consequenceDescription:["You will need a vast hoard of taels for this to work."],consequence:[()=>this.impossibleTaskService.taskProgress[fe.BefriendDragon].progress<1e3?(this.logService.log(D.EVENT,"The dragon is offended by your very presence and viciously attacks you. You'll need to warm him up with different offerings before you try this again."),this.characterService.status.health.value-=.9*this.characterService.status.health.max,void(this.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0))):this.characterService.money<1e21?(this.logService.injury(D.EVENT,"The dragon is offended by your paltry offering and takes a swipe at you with its massive claw."),this.characterService.status.health.value-=.9*this.characterService.status.health.max,void(this.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0))):(this.characterService.updateMoney(-1e21),void(this.impossibleTaskService.taskProgress[fe.BefriendDragon].progress<4e3?this.impossibleTaskService.taskProgress[fe.BefriendDragon].progress++:this.logService.log(D.EVENT,"The dragon doesn't seem interested in any more money.")))],resourceUse:[{}],requirements:[{}],unlocked:!0,skipApprenticeshipLevel:0},this.TalkToDragon={level:0,name:["Talk to the Dragon"],location:E.MountainTops,impossibleTaskIndex:fe.BefriendDragon,imageBaseName:"talktodragon",activityType:R.TalkToDragon,description:["Try to strike up a conversation with the dragon."],yinYangEffect:[Q.None],consequenceDescription:["The dragon probably likes you enough to talk to you now, right?"],consequence:[()=>this.impossibleTaskService.taskProgress[fe.BefriendDragon].progress<1e3?(this.logService.log(D.EVENT,"The dragon is offended by your very presence and viciously attacks you. You'll need to warm him up with offerings before you try this again."),this.characterService.status.health.value-=.9*this.characterService.status.health.max,void(this.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0))):this.characterService.attributes.charisma.value<1e18?(this.logService.injury(D.EVENT,"The dragon doesn't like the sound of your voice and takes a bite out of you. Maybe you should practice speaking with humans first."),this.characterService.status.health.value-=1e4,void(this.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0))):void(this.impossibleTaskService.taskProgress[fe.BefriendDragon].progress<3500?this.logService.log(D.EVENT,"The dragon doesn't like like you enough to talk to you, but at least he doesn't attack you."):(this.impossibleTaskService.taskProgress[fe.BefriendDragon].progress++,this.impossibleTaskService.checkCompletion(),this.impossibleTaskService.taskProgress[fe.BefriendDragon].complete&&this.logService.log(D.STORY,"You did the impossible and made friends with a dragon!")))],resourceUse:[{}],requirements:[{}],unlocked:!0,skipApprenticeshipLevel:0},this.GatherArmies={level:0,name:["Gather Armies"],location:E.LargeCity,impossibleTaskIndex:fe.ConquerTheNation,imageBaseName:"gatherarmy",activityType:R.GatherArmies,description:["Gather troops into armies. This will require vast amounts of food and money."],yinYangEffect:[Q.None],consequenceDescription:["You rule a province by now, right? If not, this isn't going to go well."],consequence:[()=>{if(this.homeService.homeValue<$e.Capital){this.logService.injury(D.EVENT,"You don't even have your own province? What were you thinking? The nearby nobles send their forces against you.");for(let b=0;b<3;b++)this.battleService.addArmy();return}let m=0;return m=this.inventoryService.consume("food",1e5,!0),m<1?(this.logService.injury(D.EVENT,"You don't have enough food to feed your army, so they revolt and fight you instead."),this.battleService.addArmy(),void(this.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0))):this.characterService.money<1e22?(this.logService.injury(D.EVENT,"You don't have enough money to pay your army, so they revolt and fight you instead."),this.battleService.addArmy(),void(this.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0))):(this.characterService.updateMoney(-1e22),void this.inventoryService.addItem(this.itemRepoService.items.army))}],resourceUse:[{}],requirements:[{}],unlocked:!0,skipApprenticeshipLevel:0},this.ConquerTheNation={level:0,name:["Conquer More Territory"],location:E.LargeCity,impossibleTaskIndex:fe.ConquerTheNation,imageBaseName:"conquer",activityType:R.ConquerTheNation,description:["Send out your armies to conquer the nation."],yinYangEffect:[Q.None],consequenceDescription:["I'm sure you have plenty of armies for this. You wouldn't try this without enough armies, that would end badly."],consequence:[()=>{let m=0;if(m=this.inventoryService.consume("army",this.impossibleTaskService.taskProgress[fe.ConquerTheNation].progress+1),m<1){for(let b=0;b<5;b++)this.battleService.addArmy();return this.logService.log(D.EVENT,"Your armies failed you, and you are forced to fight the enemy armies to a standstill."),void(this.pauseOnImpossibleFail&&(this.mainLoopService.pause=!0))}this.impossibleTaskService.taskProgress[fe.ConquerTheNation].progress++,this.impossibleTaskService.checkCompletion(),this.impossibleTaskService.taskProgress[fe.ConquerTheNation].complete&&this.logService.log(D.STORY,"You did the impossible and conquered the nation! You bring an end to cruelty and strife for all under your wise rule.")}],resourceUse:[{}],requirements:[{}],unlocked:!0,skipApprenticeshipLevel:0},this.MoveStars={level:0,name:["Move Stars"],location:E.Self,impossibleTaskIndex:fe.RearrangeTheStars,imageBaseName:"movestars",activityType:R.MoveStars,description:["Extend your vast magical powers into the heavens and force the stars into alignment."],yinYangEffect:[Q.None],consequenceDescription:["Uses 900,000 Stamina and 50,000 Qi."],consequence:[()=>{this.characterService.status.stamina.value-=9e5,this.characterService.status.qi.value-=5e4,this.characterService.status.stamina.value>=0&&this.characterService.status.qi.value>=0&&(this.impossibleTaskService.taskProgress[fe.RearrangeTheStars].progress++,this.impossibleTaskService.checkCompletion(),this.impossibleTaskService.taskProgress[fe.RearrangeTheStars].complete&&this.logService.log(D.STORY,"You did the impossible and rearranged the stars themselves. You are so near to achieving immortality you can almost taste it. It tastes like peaches."))}],resourceUse:[{stamina:9e5,qi:5e4}],requirements:[{}],unlocked:!0,skipApprenticeshipLevel:0},this.OddJobs={level:0,name:["Odd Jobs"],location:E.SmallTown,imageBaseName:"oddjobs",activityType:R.OddJobs,description:["Run errands, pull weeds, clean toilet pits, or do whatever else you can to earn a coin. Undignified work for a future immortal, but you have to eat to live."],yinYangEffect:[Q.None],consequenceDescription:["Uses 5 Stamina. Increases all your basic attributes by a small amount and provides a little money."],consequence:[()=>{this.characterService.increaseAttribute("strength",.02),this.characterService.increaseAttribute("toughness",.02),this.characterService.increaseAttribute("speed",.02),this.characterService.increaseAttribute("intelligence",.02),this.characterService.increaseAttribute("charisma",.02),this.characterService.status.stamina.value-=5,this.characterService.updateMoney(3),this.OddJobs.lastIncome=3,this.oddJobDays++}],resourceUse:[{stamina:5}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.Resting={level:0,name:["Resting","Meditation","Communing With Divinity","Finding True Inner Peace"],location:E.Self,imageBaseName:"resting",activityType:R.Resting,yinYangEffect:[Q.Yin,Q.Yin,Q.Yin,Q.Balance],description:["Take a break and get some sleep. Good sleeping habits are essential for cultivating immortal attributes.","Enter a meditative state and begin your journey toward spritual enlightenment.","Extend your senses beyond the mortal realm and connect to deeper realities.","Turn your senses inward and find pure stillness within."],consequenceDescription:["Restores 50 Stamina and 2 Health.","Restores 100 Stamina, 10 Health, and 1 Qi (if unlocked).","Restores 200 Stamina, 20 Health, and 10 Qi (if unlocked).","Restores 300 Stamina, 30 Health, and 20 Qi (if unlocked)."],consequence:[()=>{this.characterService.status.stamina.value+=50,this.characterService.status.health.value+=2,this.characterService.checkOverage(),this.characterService.yin++},()=>{this.characterService.status.stamina.value+=100,this.characterService.status.health.value+=10,this.characterService.increaseAttribute("spirituality",.001),this.characterService.qiUnlocked&&(this.characterService.status.qi.value+=1),this.characterService.checkOverage(),this.characterService.yin++},()=>{this.characterService.status.stamina.value+=200,this.characterService.status.health.value+=20,this.characterService.status.qi.value+=10,this.characterService.increaseAttribute("spirituality",.5),this.characterService.checkOverage(),this.characterService.yin++},()=>{this.characterService.status.stamina.value+=300,this.characterService.status.health.value+=30,this.characterService.status.qi.value+=20,this.characterService.increaseAttribute("spirituality",1),this.characterService.checkOverage(),this.characterService.yin>this.characterService.yang?this.characterService.yang++:this.characterService.yin++}],resourceUse:[{},{},{},{}],requirements:[{},{strength:1e3,speed:1e3,charisma:1e3,intelligence:1e3,toughness:1e3},{strength:1e6,speed:1e6,charisma:1e6,intelligence:1e6,toughness:1e6,spirituality:1e5,fireLore:1e4,waterLore:1e4,earthLore:1e4,metalLore:1e4,woodLore:1e4},{strength:1e21,speed:1e21,charisma:1e21,intelligence:1e21,toughness:1e21,spirituality:1e21,fireLore:1e18,waterLore:1e18,earthLore:1e18,metalLore:1e18,woodLore:1e18}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.Begging={level:0,name:["Begging","Street Performing","Oration","Politics"],location:E.SmallTown,imageBaseName:"begging",activityType:R.Begging,description:["Find a nice spot on the side of the street, look sad, and put your hand out. Someone might put a coin in it if you are charasmatic enough.","Add some musical flair to your begging.","Move the crowds with your stirring speeches.","Charm your way into civic leadership."],yinYangEffect:[Q.Yang,Q.Yang,Q.Yang,Q.Yang],consequenceDescription:["Uses 5 Stamina. Increases charisma and provides a little money.","Uses 5 Stamina. Increases charisma and provides some money.","Uses 5 Stamina. Increases charisma and provides money.","Uses 5 Stamina. Increases charisma, provides money, and makes you wonder if there is more to life than just money and fame."],consequence:[()=>{this.characterService.increaseAttribute("charisma",.1),this.characterService.increaseAttribute("performance",.1),this.characterService.status.stamina.value-=5;let m=3+Math.log2(this.characterService.attributes.charisma.value);this.familySpecialty===R.Begging&&(m+=.2*m),this.characterService.updateMoney(m),this.Begging.lastIncome=m,this.beggingDays++,this.characterService.yang++},()=>{this.characterService.increaseAttribute("charisma",.2),this.characterService.increaseAttribute("performance",.1),this.characterService.status.stamina.value-=5;let m=10+Math.log2(this.characterService.attributes.charisma.value);this.familySpecialty===R.Begging&&(m+=.2*m),this.characterService.updateMoney(m),this.Begging.lastIncome=m,this.beggingDays++,this.characterService.yang++},()=>{this.characterService.increaseAttribute("charisma",.3),this.characterService.increaseAttribute("performance",.1),this.characterService.status.stamina.value-=5;let m=20+Math.log2(2*this.characterService.attributes.charisma.value);this.familySpecialty===R.Begging&&(m+=.2*m),this.characterService.updateMoney(m),this.Begging.lastIncome=m,this.beggingDays++,this.characterService.yang++},()=>{this.characterService.increaseAttribute("charisma",.5),this.characterService.increaseAttribute("performance",.1),this.characterService.status.stamina.value-=5;let m=30+Math.log2(10*this.characterService.attributes.charisma.value);this.familySpecialty===R.Begging&&(m+=.2*m),this.characterService.updateMoney(m),this.Begging.lastIncome=m,this.beggingDays++,this.characterService.yang++}],resourceUse:[{stamina:5},{stamina:5},{stamina:5},{stamina:5}],requirements:[{charisma:3},{charisma:100,performance:100},{charisma:5e3,performance:1e4},{charisma:1e4,performance:1e6}],unlocked:!1,skipApprenticeshipLevel:0},this.Cooking={level:0,name:["Cooking","Soul Food Preparation"],location:E.SmallTown,imageBaseName:"cooking",activityType:R.Cooking,description:["Work as a chef. If you have a cooking workstation of your own, you can even make some meals for yourself.","Work as a spiritual chef, devoting great energy to creating food that feeds both body and soul. If you have a cooking workstation of your own, you can even make some meals for yourself."],yinYangEffect:[Q.None,Q.Balance],consequenceDescription:["Uses 10 Stamina. Increases charisma and intelligence and provides a little money.","Uses 90 Stamina. Increases charisma, intelligence, and spirituality."],consequence:[()=>{this.characterService.increaseAttribute("charisma",.05),this.characterService.increaseAttribute("intelligence",.1),this.characterService.increaseAttribute("cooking",.1),this.characterService.status.stamina.value-=10;let m=5+Math.log2((this.characterService.attributes.charisma.value+2*this.characterService.attributes.intelligence.value)/3);this.familySpecialty===R.Cooking&&(m+=.2*m),this.characterService.updateMoney(m),this.Cooking.lastIncome=m},()=>{this.characterService.increaseAttribute("charisma",.5),this.characterService.increaseAttribute("intelligence",1),this.characterService.increaseAttribute("spirituality",.001),this.characterService.increaseAttribute("cooking",.1),this.characterService.status.stamina.value-=10}],resourceUse:[{stamina:10},{stamina:90}],requirements:[{charisma:10,intelligence:20},{charisma:1e4,speed:1e4,intelligence:2e4,spirituality:10,cooking:1e3}],unlocked:!1,skipApprenticeshipLevel:0},this.Blacksmithing={level:0,name:["Apprentice Blacksmithing","Journeyman Blacksmithing","Blacksmithing","Master Blacksmithing"],location:E.LargeCity,imageBaseName:"blacksmithing",activityType:R.Blacksmithing,description:["Work for the local blacksmith. You mostly pump the bellows, but at least you're learning a trade.","Mold metal into useful things. You might even produce something you want to keep now and then.","Create useful and beautiful metal objects. You might produce a decent weapon occasionally.","Work the forges like a true master."],yinYangEffect:[Q.Balance,Q.Balance,Q.Balance,Q.Balance],consequenceDescription:["Uses 25 Stamina. Increases strength and toughness and provides a little money.","Uses 25 Stamina. Increases strength, toughness, and money.","Uses 25 Stamina. Build your physical power, master your craft, and create weapons.","Uses 50 Stamina. Bring down your mighty hammer and create works of metal wonder."],consequence:[()=>{this.checkApprenticeship(R.Blacksmithing),this.characterService.increaseAttribute("strength",.1),this.characterService.increaseAttribute("toughness",.1),this.characterService.increaseAttribute("smithing",.1),this.characterService.status.stamina.value-=25;let m=Math.log2(this.characterService.attributes.strength.value+this.characterService.attributes.toughness.value)+this.characterService.attributes.metalLore.value;this.familySpecialty===R.Blacksmithing&&(m+=.2*m),this.characterService.updateMoney(m),this.Blacksmithing.lastIncome=m,this.characterService.increaseAttribute("metalLore",.1),this.characterService.yin++,this.characterService.yang++},()=>{this.checkApprenticeship(R.Blacksmithing),this.characterService.increaseAttribute("strength",.2),this.characterService.increaseAttribute("toughness",.2),this.characterService.increaseAttribute("smithing",.1),this.characterService.status.stamina.value-=25;let m=Math.log2(this.characterService.attributes.strength.value+this.characterService.attributes.toughness.value)+2*this.characterService.attributes.metalLore.value;this.familySpecialty===R.Blacksmithing&&(m+=.2*m),this.characterService.updateMoney(m),this.Blacksmithing.lastIncome=m,this.characterService.increaseAttribute("metalLore",.2),this.characterService.increaseAttribute("fireLore",.02),this.characterService.yin++,this.characterService.yang++},()=>{this.checkApprenticeship(R.Blacksmithing),this.characterService.increaseAttribute("strength",.5),this.characterService.increaseAttribute("toughness",.5),this.characterService.increaseAttribute("smithing",.1),this.characterService.status.stamina.value-=25;let m=Math.log2(this.characterService.attributes.strength.value+this.characterService.attributes.toughness.value)+this.characterService.attributes.fireLore.value+5*this.characterService.attributes.metalLore.value;this.familySpecialty===R.Blacksmithing&&(m+=.2*m),this.characterService.updateMoney(m),this.Blacksmithing.lastIncome=m,this.characterService.increaseAttribute("metalLore",.3),this.characterService.increaseAttribute("fireLore",.05),this.characterService.yin++,this.characterService.yang++},()=>{this.checkApprenticeship(R.Blacksmithing),this.characterService.increaseAttribute("strength",1),this.characterService.increaseAttribute("toughness",1),this.characterService.increaseAttribute("smithing",.1),this.characterService.status.stamina.value-=50;let m=Math.log2(this.characterService.attributes.strength.value+this.characterService.attributes.toughness.value)+this.characterService.attributes.fireLore.value+10*this.characterService.attributes.metalLore.value;this.familySpecialty===R.Blacksmithing&&(m+=.2*m),this.characterService.updateMoney(m),this.Blacksmithing.lastIncome=m,this.characterService.increaseAttribute("metalLore",.5),this.characterService.increaseAttribute("fireLore",.1),this.pillMoldCounter++,this.pillMoldCounter>1e3&&(this.pillMoldCounter=0,this.inventoryService.addItem(this.itemRepoService.items.pillMold)),this.characterService.yin++,this.characterService.yang++}],resourceUse:[{stamina:25},{stamina:25},{stamina:25},{stamina:50}],requirements:[{strength:50,toughness:50},{strength:400,toughness:400,metalLore:1,smithing:100},{strength:2e3,toughness:2e3,metalLore:10,fireLore:1,smithing:1e4},{strength:1e4,toughness:1e4,metalLore:100,fireLore:10,smithing:1e6}],unlocked:!1,skipApprenticeshipLevel:2},this.GatherHerbs={level:0,name:["Gathering Herbs"],location:E.SmallTown,imageBaseName:"herbs",activityType:R.GatherHerbs,description:["Search the natural world for useful herbs."],yinYangEffect:[Q.Yang],consequenceDescription:["Uses 10 Stamina. Find herbs and learn about plants"],consequence:[()=>{this.characterService.increaseAttribute("intelligence",.1),this.characterService.increaseAttribute("speed",.1),this.characterService.status.stamina.value-=10,this.inventoryService.generateHerb(),this.characterService.increaseAttribute("woodLore",.003),this.characterService.yang++}],resourceUse:[{stamina:10}],requirements:[{speed:20,intelligence:20}],unlocked:!1,skipApprenticeshipLevel:0},this.Alchemy={level:0,name:["Apprentice Alchemy","Journeyman Alchemy","Alchemy","Master Alchemy"],location:E.LargeCity,imageBaseName:"alchemy",activityType:R.Alchemy,description:["Get a job at the alchemist's workshop. It smells awful but you might learn a few things.","Get a cauldron and do a little brewing of your own.","Open up your own alchemy shop.","Brew power, precipitate life, stir in some magic, and create consumable miracles."],yinYangEffect:[Q.Yin,Q.Yin,Q.Yin,Q.Yin],consequenceDescription:["Uses 10 Stamina. Get smarter, make a few taels, and learn the secrets of alchemy.","Uses 10 Stamina. Get smarter, make money, practice your craft. If you have some herbs, you might make a usable potion or pill.","Uses 10 Stamina. Get smarter, make money, and make some decent potions or pills.","Uses 20 Stamina. Create amazing potions and pills."],consequence:[()=>{this.checkApprenticeship(R.Alchemy),this.characterService.increaseAttribute("intelligence",.1),this.characterService.increaseAttribute("alchemy",.1),this.characterService.status.stamina.value-=10;let m=Math.log2(this.characterService.attributes.intelligence.value)+this.characterService.attributes.waterLore.value;this.familySpecialty===R.Alchemy&&(m+=.2*m),this.characterService.updateMoney(m),this.Alchemy.lastIncome=m,this.characterService.increaseAttribute("woodLore",.05),this.characterService.increaseAttribute("waterLore",.1),this.characterService.yin++},()=>{this.checkApprenticeship(R.Alchemy),this.characterService.increaseAttribute("intelligence",.2),this.characterService.increaseAttribute("alchemy",.1),this.characterService.status.stamina.value-=10;let m=Math.log2(this.characterService.attributes.intelligence.value)+2*this.characterService.attributes.waterLore.value;this.familySpecialty===R.Alchemy&&(m+=.2*m),this.characterService.updateMoney(m),this.Alchemy.lastIncome=m,this.characterService.increaseAttribute("woodLore",.1),this.characterService.increaseAttribute("waterLore",.2),this.characterService.yin++},()=>{this.checkApprenticeship(R.Alchemy),this.characterService.increaseAttribute("intelligence",.5),this.characterService.increaseAttribute("alchemy",.1),this.characterService.status.stamina.value-=10;let m=Math.log2(this.characterService.attributes.intelligence.value)+5*this.characterService.attributes.waterLore.value;this.familySpecialty===R.Alchemy&&(m+=.2*m),this.characterService.updateMoney(m),this.Alchemy.lastIncome=m,this.characterService.increaseAttribute("woodLore",.15),this.characterService.increaseAttribute("waterLore",.3),this.characterService.yin++},()=>{this.checkApprenticeship(R.Alchemy),this.characterService.increaseAttribute("intelligence",1),this.characterService.increaseAttribute("alchemy",.1),this.characterService.status.stamina.value-=20;let m=Math.log2(this.characterService.attributes.intelligence.value)+10*this.characterService.attributes.waterLore.value;this.familySpecialty===R.Alchemy&&(m+=.2*m),this.characterService.updateMoney(m),this.Alchemy.lastIncome=m,this.characterService.increaseAttribute("woodLore",.2),this.characterService.increaseAttribute("waterLore",.6),this.characterService.yin++}],resourceUse:[{stamina:10},{stamina:10},{stamina:10},{stamina:20}],requirements:[{intelligence:200},{intelligence:1e3,waterLore:1,alchemy:100},{intelligence:8e3,waterLore:100,woodLore:10,alchemy:1e4},{intelligence:1e5,waterLore:1e3,woodLore:100,fireLore:10,alchemy:1e6}],unlocked:!1,skipApprenticeshipLevel:2},this.ChopWood={level:0,name:["Chopping Wood"],location:E.Forest,imageBaseName:"chopping",activityType:R.ChopWood,description:["Work as a woodcutter, cutting logs in the forest."],yinYangEffect:[Q.Yang],consequenceDescription:["Uses 10 Stamina. Get a log and learn about plants."],consequence:[()=>{this.characterService.increaseAttribute("strength",.1),this.characterService.status.stamina.value-=10,this.inventoryService.addItem(this.inventoryService.getWood()),this.characterService.increaseAttribute("woodLore",.01),this.characterService.yang++}],resourceUse:[{stamina:10}],requirements:[{strength:100}],unlocked:!1,skipApprenticeshipLevel:0},this.Woodworking={level:0,name:["Apprentice Woodworking","Journeyman Woodworking","Woodworking","Master Woodworking"],location:E.SmallTown,imageBaseName:"woodworking",activityType:R.Woodworking,description:["Work in a woodcarver's shop.","Carve wood into useful items.","Open your own woodworking shop.","Carve pure poetry in wooden form."],yinYangEffect:[Q.Yang,Q.Yang,Q.Yang,Q.Yang],consequenceDescription:["Uses 20 Stamina. Increases strength and intelligence and provides a little money.","Uses 20 Stamina. Increases strength and intelligence and provides a little money. You may make something you want to keep now and then.","Uses 20 Stamina. Increases strength and intelligence, earn some money, create wooden equipment.","Uses 40 Stamina. Create the best of wooden weapons."],consequence:[()=>{this.checkApprenticeship(R.Woodworking),this.characterService.increaseAttribute("strength",.1),this.characterService.increaseAttribute("intelligence",.1),this.characterService.increaseAttribute("woodwork",.1),this.characterService.status.stamina.value-=20;let m=Math.log2(this.characterService.attributes.strength.value+this.characterService.attributes.intelligence.value)+this.characterService.attributes.woodLore.value;this.familySpecialty===R.Woodworking&&(m+=.2*m),this.characterService.updateMoney(m),this.Woodworking.lastIncome=m,this.characterService.increaseAttribute("woodLore",.001),this.characterService.yang++},()=>{this.checkApprenticeship(R.Woodworking),this.characterService.increaseAttribute("strength",.2),this.characterService.increaseAttribute("intelligence",.2),this.characterService.increaseAttribute("woodwork",.1),this.characterService.status.stamina.value-=20;let m=Math.log2(this.characterService.attributes.strength.value+this.characterService.attributes.intelligence.value)+2*this.characterService.attributes.woodLore.value;this.familySpecialty===R.Woodworking&&(m+=.2*m),this.characterService.updateMoney(m),this.Woodworking.lastIncome=m,this.characterService.increaseAttribute("woodLore",.005),this.characterService.yang++},()=>{this.checkApprenticeship(R.Woodworking),this.characterService.increaseAttribute("strength",.5),this.characterService.increaseAttribute("intelligence",.5),this.characterService.increaseAttribute("woodwork",.1),this.characterService.status.stamina.value-=20;let m=Math.log2(this.characterService.attributes.strength.value+this.characterService.attributes.intelligence.value)+5*this.characterService.attributes.woodLore.value;this.familySpecialty===R.Woodworking&&(m+=.2*m),this.characterService.updateMoney(m),this.Woodworking.lastIncome=m,this.characterService.increaseAttribute("woodLore",.02),this.characterService.yang++},()=>{this.checkApprenticeship(R.Woodworking),this.characterService.increaseAttribute("strength",1),this.characterService.increaseAttribute("intelligence",1),this.characterService.increaseAttribute("woodwork",.1),this.characterService.status.stamina.value-=40;let m=Math.log2(this.characterService.attributes.strength.value+this.characterService.attributes.intelligence.value)+10*this.characterService.attributes.woodLore.value;this.familySpecialty===R.Woodworking&&(m+=.2*m),this.characterService.updateMoney(m),this.Woodworking.lastIncome=m,this.characterService.increaseAttribute("woodLore",.6),this.pillBoxCounter++,this.pillBoxCounter>1e3&&(this.pillBoxCounter=0,this.inventoryService.addItem(this.itemRepoService.items.pillBox)),this.characterService.yang++}],resourceUse:[{stamina:20},{stamina:20},{stamina:20},{stamina:40}],requirements:[{strength:100,intelligence:100},{strength:800,intelligence:800,woodLore:1,woodwork:100},{strength:2e3,intelligence:2e3,woodLore:10,woodwork:1e4},{strength:1e4,intelligence:1e4,woodLore:100,woodwork:1e6}],unlocked:!1,skipApprenticeshipLevel:2},this.Leatherworking={level:0,name:["Apprentice Leatherworking","Journeyman Leatherworking","Leatherworking","Master Leatherworking"],location:E.SmallTown,imageBaseName:"leatherworking",activityType:R.Leatherworking,description:["Work in a tannery, where hides are turned into leather items.","Convert hides into leather items.","Open your own tannery.","Fashion!"],yinYangEffect:[Q.Balance,Q.Balance,Q.Balance,Q.Balance],consequenceDescription:["Uses 20 Stamina. Increases speed and toughness and provides a little money.","Uses 20 Stamina. Increases speed and toughness and provides a little money. You may make something you want to keep now and then.","Uses 20 Stamina. Increases speed and toughness, earn some money, create leather equipment.","Uses 40 Stamina. Create the fanciest pants you can imagine. Maybe some boots, too."],consequence:[()=>{this.checkApprenticeship(R.Leatherworking),this.characterService.increaseAttribute("speed",.1),this.characterService.increaseAttribute("toughness",.1),this.characterService.status.stamina.value-=20;let m=Math.log2(this.characterService.attributes.speed.value+this.characterService.attributes.toughness.value)+this.characterService.attributes.animalHandling.value;this.familySpecialty===R.Leatherworking&&(m+=.2*m),this.characterService.updateMoney(m),this.Leatherworking.lastIncome=m,this.characterService.increaseAttribute("animalHandling",.001),this.characterService.increaseAttribute("leatherwork",.1),this.characterService.yin++,this.characterService.yang++},()=>{this.checkApprenticeship(R.Leatherworking),this.characterService.increaseAttribute("speed",.2),this.characterService.increaseAttribute("toughness",.2),this.characterService.status.stamina.value-=20;let m=Math.log2(this.characterService.attributes.speed.value+this.characterService.attributes.toughness.value)+2*this.characterService.attributes.animalHandling.value;this.familySpecialty===R.Leatherworking&&(m+=.2*m),this.characterService.updateMoney(m),this.Leatherworking.lastIncome=m,this.characterService.increaseAttribute("animalHandling",.002),this.characterService.increaseAttribute("leatherwork",.1),this.characterService.yin++,this.characterService.yang++},()=>{this.checkApprenticeship(R.Leatherworking),this.characterService.increaseAttribute("speed",.5),this.characterService.increaseAttribute("toughness",.5),this.characterService.status.stamina.value-=20;let m=Math.log2(this.characterService.attributes.speed.value+this.characterService.attributes.toughness.value)+5*this.characterService.attributes.animalHandling.value;this.familySpecialty===R.Leatherworking&&(m+=.2*m),this.characterService.updateMoney(m),this.Leatherworking.lastIncome=m,this.characterService.increaseAttribute("animalHandling",.003),this.characterService.increaseAttribute("leatherwork",.1),this.characterService.yin++,this.characterService.yang++},()=>{this.checkApprenticeship(R.Leatherworking),this.characterService.increaseAttribute("speed",1),this.characterService.increaseAttribute("toughness",1),this.characterService.status.stamina.value-=40;let m=Math.log2(this.characterService.attributes.speed.value+this.characterService.attributes.toughness.value)+10*this.characterService.attributes.animalHandling.value;this.familySpecialty===R.Leatherworking&&(m+=.2*m),this.characterService.updateMoney(m),this.Leatherworking.lastIncome=m,this.characterService.increaseAttribute("animalHandling",.1),this.characterService.increaseAttribute("leatherwork",.1),this.pillPouchCounter++,this.pillPouchCounter>1e3&&(this.pillPouchCounter=0,this.inventoryService.addItem(this.itemRepoService.items.pillPouch)),this.characterService.yin++,this.characterService.yang++}],resourceUse:[{stamina:20},{stamina:20},{stamina:20},{stamina:40}],requirements:[{speed:100,toughness:100},{speed:800,toughness:800,animalHandling:1,leatherwork:100},{speed:2e3,toughness:2e3,animalHandling:10,leatherwork:1e4},{speed:1e4,toughness:1e4,animalHandling:100,leatherwork:1e6}],unlocked:!1,skipApprenticeshipLevel:2},this.FormationCreation={level:0,name:["Apprentice Formation Creation","Journeyman Formation Creation","Formation Creation","Master Formation Creation"],location:E.SmallTown,imageBaseName:"formationCreation",activityType:R.FormationCreation,description:["Work under a formation master to learn the basics of creating formation flags, talismans, arrays, and other essential parts of kits that can help you in battle.<br><br>This requires expertise in many other professions before you can even begin to practice it.","Practice the essentials in creating formation flags, talismans, arrays, and other parts of kits that can help you in battle.<br><br>This requires expertise in many other professions.","Work on your own in creating formation flags, talismans, arrays, and other essential parts of kits that can help you in battle.<br><br>This requires expertise in many other professions.","Masterfully create formation flags, talismans, arrays, and other essential parts of kits that can help you in battle."],yinYangEffect:[Q.Balance,Q.Balance,Q.Balance,Q.Balance],consequenceDescription:["Uses 100 Stamina. If you have a formation workstation, you can make some weak formations kits.","Uses 200 Stamina. If you have a formation workstation, you can make some simple formations kits.","Uses 500 Stamina. If you have a formation workstation, you can make some formations kits.","Uses 1000 Stamina. If you have a formation workstation, you can make some excellent formations kits."],consequence:[()=>{this.checkApprenticeship(R.FormationCreation),this.characterService.increaseAttribute("formationMastery",.1),this.characterService.status.stamina.value-=100,this.characterService.yin++,this.characterService.yang++},()=>{this.checkApprenticeship(R.FormationCreation),this.characterService.increaseAttribute("formationMastery",.1),this.characterService.status.stamina.value-=200,this.characterService.yin++,this.characterService.yang++},()=>{this.checkApprenticeship(R.FormationCreation),this.characterService.increaseAttribute("formationMastery",.1),this.characterService.status.stamina.value-=500,this.characterService.yin++,this.characterService.yang++},()=>{this.checkApprenticeship(R.FormationCreation),this.characterService.increaseAttribute("formationMastery",.1),this.characterService.status.stamina.value-=1e3,this.characterService.yin++,this.characterService.yang++}],resourceUse:[{stamina:100},{stamina:200},{stamina:500},{stamina:1e3}],requirements:[{smithing:100,cooking:100,alchemy:100,woodwork:100,leatherwork:100},{smithing:1e4,cooking:1e4,alchemy:1e4,woodwork:1e4,leatherwork:1e4,formationMastery:1e3},{smithing:1e6,cooking:1e6,alchemy:1e6,woodwork:1e6,leatherwork:1e6,formationMastery:1e4},{smithing:1e8,cooking:1e8,alchemy:1e8,woodwork:1e8,leatherwork:1e8,formationMastery:1e5}],unlocked:!1,skipApprenticeshipLevel:2},this.Plowing={level:0,name:["Plowing Land"],location:E.SmallTown,imageBaseName:"plowing",activityType:R.Plowing,description:["Plow an unused plot of land into a field for growing crops."],yinYangEffect:[Q.Yang],consequenceDescription:["Uses 50 Stamina. Increases strength and speed."],consequence:[()=>{this.farmService.plowPlot(),this.characterService.status.stamina.value-=50,this.characterService.increaseAttribute("strength",.1),this.characterService.increaseAttribute("speed",.1),this.characterService.increaseAttribute("woodLore",.001),this.characterService.increaseAttribute("earthLore",.001),this.characterService.yang++}],resourceUse:[{stamina:50}],requirements:[{strength:10,speed:10}],landRequirements:1,unlocked:!1,relockable:!0,skipApprenticeshipLevel:0},this.Clearing={level:0,name:["Clearing Land"],location:E.SmallTown,imageBaseName:"clearing",activityType:R.Clearing,description:["Clear a fallow plot of farmland into an empty plot of land."],yinYangEffect:[Q.Yin],consequenceDescription:["Uses 50 Stamina. Increases strength and speed."],consequence:[()=>{this.farmService.clearPlot(),this.characterService.status.stamina.value-=50,this.characterService.increaseAttribute("strength",.1),this.characterService.increaseAttribute("speed",.1),this.characterService.increaseAttribute("woodLore",.001),this.characterService.increaseAttribute("earthLore",.001),this.characterService.yin++}],resourceUse:[{stamina:50}],requirements:[{strength:10,speed:10}],fallowLandRequirements:1,unlocked:!1,relockable:!0,skipApprenticeshipLevel:0},this.Farming={level:0,name:["Farming"],location:E.SmallTown,imageBaseName:"farming",activityType:R.Farming,description:["Cultivate the crops in your fields. This is a waste of time if you don't have planted fields ready to work."],yinYangEffect:[Q.Yang],consequenceDescription:["Uses 20 Stamina. Increases strength and speed and helps your fields to produce more food."],consequence:[()=>{this.characterService.status.stamina.value-=20;let m=Math.floor(Math.log10(this.characterService.attributes.woodLore.value+this.characterService.attributes.earthLore.value));m<1&&(m=1),this.farmService.workFields(m),this.characterService.increaseAttribute("strength",.1),this.characterService.increaseAttribute("speed",.1),this.characterService.increaseAttribute("woodLore",.001),this.characterService.increaseAttribute("earthLore",.001),this.characterService.yang++}],resourceUse:[{stamina:20}],requirements:[{strength:10,speed:10}],farmedLandRequirements:1,unlocked:!1,relockable:!0,skipApprenticeshipLevel:0},this.Mining={level:0,name:["Mining"],location:E.SmallTown,imageBaseName:"mining",activityType:R.Mining,description:["Dig in the ground for usable minerals."],yinYangEffect:[Q.Yin],consequenceDescription:["Uses 20 Stamina. Increases strength and sometimes finds something useful."],consequence:[()=>{this.characterService.status.stamina.value-=20,this.characterService.increaseAttribute("strength",.1),this.characterService.increaseAttribute("earthLore",.05),this.miningCounter++,this.miningCounter%2==1&&this.inventoryService.addItem(this.itemRepoService.items.coal),this.miningCounter>5&&(this.miningCounter=0,this.inventoryService.addItem(this.inventoryService.getOre())),this.characterService.yin++}],resourceUse:[{stamina:20}],requirements:[{strength:70}],unlocked:!1,skipApprenticeshipLevel:0},this.Smelting={level:0,name:["Smelting"],location:E.SmallTown,imageBaseName:"smelting",activityType:R.Smelting,description:["Smelt metal ores and fuel into usable metal. You can even keep the metal bars if you have a smelter of your own."],yinYangEffect:[Q.Balance],consequenceDescription:["Uses 20 Stamina. Increases toughness and intelligence. If you have metal ores, you can make them into bars."],consequence:[()=>{this.characterService.status.stamina.value-=20,this.characterService.increaseAttribute("toughness",.1),this.characterService.increaseAttribute("intelligence",.1),this.characterService.increaseAttribute("metalLore",.01),this.characterService.yin++,this.characterService.yang++}],resourceUse:[{stamina:20}],requirements:[{toughness:100,intelligence:100}],unlocked:!1,skipApprenticeshipLevel:0},this.Hunting={level:0,name:["Hunting"],location:E.Forest,imageBaseName:"hunting",activityType:R.Hunting,description:["Hunt for animals in the nearby woods."],yinYangEffect:[Q.Yang],consequenceDescription:["Uses 50 Stamina. Increases speed and a good hunt provides some meat."],consequence:[()=>{this.characterService.status.stamina.value-=50,this.characterService.increaseAttribute("speed",.1);let m=10;this.homeService.bedroomFurniture.find(b=>"dogKennel"===b?.id)&&(m=5),this.characterService.increaseAttribute("animalHandling",.1),this.huntingCounter++,this.huntingCounter>m&&(this.huntingCounter=0,this.inventoryService.addItem(this.itemRepoService.items.meat),this.inventoryService.addItem(this.inventoryService.getHide(),Math.floor(this.followerService.jobs.hunter.totalPower/20))),this.characterService.yang++}],resourceUse:[{stamina:50}],requirements:[{speed:200}],unlocked:!1,skipApprenticeshipLevel:0},this.Fishing={level:0,name:["Fishing"],location:E.SmallPond,imageBaseName:"fishing",activityType:R.Fishing,description:["Grab your net and see if you can catch some fish."],yinYangEffect:[Q.Yin],consequenceDescription:["Uses 30 Stamina. Increases intelligence and strength and you might catch a fish."],consequence:[()=>{this.characterService.status.stamina.value-=30,this.characterService.increaseAttribute("strength",.1),this.characterService.increaseAttribute("intelligence",.1),this.characterService.increaseAttribute("animalHandling",.02),this.characterService.increaseAttribute("waterLore",.01),this.fishingCounter++;let m=10;this.homeService.bedroomFurniture.find(b=>"cormorantCage"===b?.id)&&(m=5),this.fishingCounter>m&&(this.fishingCounter=0,this.inventoryService.addItem(this.itemRepoService.items.carp)),this.characterService.yin++}],resourceUse:[{stamina:30}],requirements:[{strength:15,intelligence:15}],unlocked:!1,skipApprenticeshipLevel:0},this.Burning={level:0,name:["Burning Things"],location:E.SmallTown,imageBaseName:"burning",activityType:R.Burning,description:["Light things on fire and watch them burn."],yinYangEffect:[Q.Yang],consequenceDescription:["Uses 5 Stamina. You will be charged for what you burn. Teaches you to love fire."],consequence:[()=>{this.characterService.status.stamina.value-=5;const m=this.characterService.increaseAttribute("fireLore",.1);this.characterService.updateMoney(0-m),this.characterService.money<0&&(this.characterService.money=0),this.characterService.yang++}],resourceUse:[{stamina:5}],requirements:[{intelligence:10}],unlocked:!1,skipApprenticeshipLevel:0},this.BalanceChi={level:0,name:["Balance Your Chi"],location:E.Self,imageBaseName:"balance",activityType:R.BalanceChi,description:["Balance the flow of your chi and widen your meridians."],yinYangEffect:[Q.Balance],consequenceDescription:["Uses 100 Stamina. Increases your weakest lore."],consequence:[()=>{this.characterService.status.stamina.value-=100;let m="earthLore";for(const C of["metalLore","woodLore","waterLore","fireLore"])this.characterService.attributes[C].value<this.characterService.attributes[m].value&&(m=C);let b=.01;(this.characterService.qiUnlocked||this.characterService.easyMode)&&(b=.1),this.characterService.increaseAttribute(m,b),this.characterService.increaseAttribute("spirituality",.001),this.characterService.yin>this.characterService.yang?this.characterService.yang++:this.characterService.yin++}],resourceUse:[{stamina:100}],requirements:[{strength:1e3,speed:1e3,toughness:1e3,charisma:1e3,intelligence:1e3,earthLore:1e3,metalLore:1e3,woodLore:1e3,waterLore:1e3,fireLore:1e3,spirituality:1}],unlocked:!1,skipApprenticeshipLevel:0},this.BodyCultivation={level:0,name:["Body Cultivation"],location:E.Self,imageBaseName:"bodycultivation",activityType:R.BodyCultivation,description:["Focus on the development of your body. Unblock your meridians, let your chi flow, and prepare your body for immortality."],yinYangEffect:[Q.Yang],consequenceDescription:["Uses 100 Stamina. Increases your physical abilities and strengthen your aptitudes in them."],consequence:[()=>{this.characterService.status.stamina.value-=100,this.characterService.increaseAttribute("strength",1),this.characterService.increaseAttribute("speed",1),this.characterService.increaseAttribute("toughness",1),this.characterService.attributes.strength.aptitude+=.1,this.characterService.attributes.speed.aptitude+=.1,this.characterService.attributes.toughness.aptitude+=.1,this.characterService.increaseAttribute("spirituality",.001),this.characterService.yang++}],resourceUse:[{stamina:100}],requirements:[{strength:5e3,speed:5e3,toughness:5e3,spirituality:1}],unlocked:!1,skipApprenticeshipLevel:0},this.MindCultivation={level:0,name:["Mind Cultivation"],location:E.Self,imageBaseName:"mindcultivation",activityType:R.MindCultivation,description:["Focus on the development of your mind. Unblock your meridians, let your chi flow, and prepare your mind for immortality."],yinYangEffect:[Q.Yin],consequenceDescription:["Uses 100 Stamina. Increases your mental abilities and strengthen your aptitudes in them."],consequence:[()=>{this.characterService.status.stamina.value-=100,this.characterService.increaseAttribute("intelligence",1),this.characterService.increaseAttribute("charisma",1),this.characterService.attributes.intelligence.aptitude+=.1,this.characterService.attributes.charisma.aptitude+=.1,this.characterService.increaseAttribute("spirituality",.001),this.characterService.yin++}],resourceUse:[{stamina:100}],requirements:[{charisma:5e3,intelligence:5e3,spirituality:1}],unlocked:!1,skipApprenticeshipLevel:0},this.CoreCultivation={level:0,name:["Core Cultivation"],location:E.Self,imageBaseName:"corecultivation",activityType:R.CoreCultivation,description:["Focus on the development of your soul core."],yinYangEffect:[Q.Balance],consequenceDescription:["Uses 200 Stamina. A very advanced cultivation technique. Make sure you have achieved a deep understanding of elemental balance before attempting this. Gives you a small chance of increasing your Qi capabilities."],consequence:[()=>{this.characterService.status.stamina.value-=200,this.characterService.qiUnlocked&&(this.coreCultivationCounter++,this.coreCultivationCounter>100&&(this.coreCultivationCounter=0,this.characterService.status.qi.max++,this.characterService.status.qi.value++)),this.characterService.yang++,this.characterService.yin++}],resourceUse:[{stamina:200}],requirements:[{woodLore:1e3,waterLore:1e3,fireLore:1e3,metalLore:1e3,earthLore:1e3,spirituality:1e3}],unlocked:!1,skipApprenticeshipLevel:0},this.SoulCultivation={level:0,name:["Soul Cultivation"],location:E.Self,imageBaseName:"soulcultivation",activityType:R.SoulCultivation,description:["Focus on the development of your immortal soul."],yinYangEffect:[Q.Balance],consequenceDescription:["Uses 1000 health. An immortal's cultivation technique. Balance your attributes and your lore, and improve yourself in every way."],consequence:[()=>{this.characterService.status.health.value-=1e3;let m="earthLore";for(const b of["metalLore","woodLore","waterLore","fireLore"])this.characterService.attributes[b].value<this.characterService.attributes[m].value&&(m=b);this.characterService.increaseAttribute(m,1),m="strength";for(const b of["speed","toughness","intelligence","charisma"])this.characterService.attributes[b].value<this.characterService.attributes[m].value&&(m=b);this.characterService.increaseAttribute(m,1),this.characterService.increaseAttribute("spirituality",.01),this.characterService.healthBonusSoul++,this.characterService.status.stamina.max++,this.characterService.status.qi.max++,this.characterService.checkOverage(),this.characterService.yin>this.characterService.yang?this.characterService.yang++:this.characterService.yin++}],resourceUse:[{health:1e3}],requirements:[{spirituality:1e15}],unlocked:!1,skipApprenticeshipLevel:0},this.InfuseEquipment={level:0,name:["Infuse Equipment"],location:E.Self,imageBaseName:"infuseequipment",activityType:R.InfuseEquipment,description:["Infuse the power of a gem into your equipment."],yinYangEffect:[Q.Balance],consequenceDescription:["Uses 200 Stamina and 10 Qi. An advanced magical technique."],consequence:[()=>{if(!this.characterService.qiUnlocked)return;this.characterService.status.stamina.value-=200,this.characterService.status.qi.value-=10;const m=this.inventoryService.consume("gem",1,this.inventoryService.useCheapestSpiritGem);m>0&&this.characterService.status.qi.value>=0&&this.inventoryService.upgradeEquppedEquipment(Math.floor(Math.pow(m/10,2.4))),this.characterService.yang++,this.characterService.yin++}],resourceUse:[{stamina:200,qi:10}],requirements:[{strength:2e7,toughness:2e7,speed:2e7,spirituality:1e4}],unlocked:!1,skipApprenticeshipLevel:0},this.InfuseBody={level:0,name:["Infuse Body"],location:E.Self,imageBaseName:"infusebody",activityType:R.InfuseBody,description:["Direct your magical energy into reinforcing your physical body, making it healthier and more able to sustain damage without falling."],yinYangEffect:[Q.Balance],consequenceDescription:["Uses 10 Qi and 200 Stamina. Make sure you have enough magical power before attempting this."],consequence:[()=>{this.characterService.status.stamina.value-=200,this.characterService.qiUnlocked&&this.characterService.status.qi.value>=10&&(this.characterService.status.qi.value-=10,this.characterService.healthBonusMagic++),this.characterService.yang++,this.characterService.yin++}],resourceUse:[{stamina:200,qi:10}],requirements:[{woodLore:1e3,waterLore:1e3,fireLore:1e3,metalLore:1e3,earthLore:1e3,spirituality:1e3}],unlocked:!1,skipApprenticeshipLevel:0},this.ExtendLife={level:0,name:["Extending Life"],location:E.Self,imageBaseName:"extendlife",activityType:R.ExtendLife,description:["Direct your magical energy into extending your lifespan, making you live longer."],yinYangEffect:[Q.Balance],consequenceDescription:["Uses 20 Qi and 400 Stamina. Make sure you have enough magical power before attempting this."],consequence:[()=>{this.characterService.status.stamina.value-=400,this.characterService.qiUnlocked&&this.characterService.status.qi.value>=20&&(this.characterService.status.qi.value-=20,this.characterService.magicLifespan<36500&&(this.characterService.magicLifespan+=10)),this.characterService.yang++,this.characterService.yin++}],resourceUse:[{stamina:400,qi:20}],requirements:[{woodLore:1e4,waterLore:1e4,fireLore:1e4,metalLore:1e4,earthLore:1e4,spirituality:1e4}],unlocked:!1,skipApprenticeshipLevel:0},this.Recruiting={level:0,name:["Recruiting Followers"],location:E.LargeCity,imageBaseName:"recruiting",activityType:R.Recruiting,description:["Look for followers willing to serve you."],yinYangEffect:[Q.Yang],consequenceDescription:["Uses 100 Stamina and 1M taels. Gives you a small chance of finding a follower, if you are powerful enough to attract any."],consequence:[()=>{this.characterService.status.stamina.value-=100,!(this.characterService.money<=1e6)&&(this.characterService.updateMoney(-1e6),this.followerService.followersUnlocked&&this.characterService.money>0?(this.recruitingCounter++,this.recruitingCounter>100&&(this.recruitingCounter=0,this.followerService.generateFollower())):this.logService.injury(D.EVENT,"All of your potential followers ignore your recruiting efforts after sensing your low cultivation."),this.characterService.yang++)}],resourceUse:[{stamina:100}],requirements:[{charisma:5e7}],unlocked:!1,skipApprenticeshipLevel:0},this.TrainingFollowers={level:0,name:["Training Followers"],location:E.LargeCity,imageBaseName:"trainingfollowers",activityType:R.TrainingFollowers,description:["Train your followers to make them more powerful."],yinYangEffect:[Q.Yang],consequenceDescription:["Uses 1000 Stamina. Gives you a small chance for each follower of increasing their power. They might learn more if you are a better leader."],consequence:[()=>{this.characterService.status.stamina.value-=1e3,this.trainingFollowersDays++,this.characterService.yang++}],resourceUse:[{stamina:1e3}],requirements:[{charisma:1e10}],unlocked:!1,skipApprenticeshipLevel:0},this.Taunting={level:0,name:["Looking for Trouble"],location:E.Self,imageBaseName:"taunting",activityType:R.Taunting,description:["Go looking for an enemy and call them out to battle."],yinYangEffect:[Q.Yang],consequenceDescription:["Has a chance to incite a fight."],consequence:[()=>{this.tauntCounter++,(this.tauntCounter>20||this.battleService.autoTroubleUnlocked)&&(this.battleService.trouble(),this.tauntCounter=0),this.characterService.yang++}],resourceUse:[{}],requirements:[{strength:100,toughness:100}],unlocked:!1,skipApprenticeshipLevel:0},this.CombatTraining={level:0,name:["Combat Training"],location:E.Self,imageBaseName:"combattraining",activityType:R.CombatTraining,description:["Hone every fiber of your being to martial sepremacy. Your experience in the Hell of Mirrors allowed you to examine your own combat form and understand how to improve it. Now all you need is practice."],yinYangEffect:[Q.Balance],consequenceDescription:["Uses 10000 stamina. Trains your Combat Mastery."],consequence:[()=>{this.characterService.status.stamina.value-=1e4,this.characterService.increaseAttribute("combatMastery",.01),this.characterService.yang++,this.characterService.yin++}],resourceUse:[{stamina:1e4}],requirements:[{combatMastery:1}],unlocked:!1,skipApprenticeshipLevel:0},this.PetRecruiting={level:0,name:["Finding Pets"],location:E.Self,imageBaseName:"findingpets",activityType:R.PetRecruiting,description:["Look for animals that want to be your pets."],yinYangEffect:[Q.Yang],consequenceDescription:["Uses 100 Stamina and 100,000 food. Gives you a small chance of finding a pet."],consequence:[()=>{this.inventoryService.getQuantityByType("food")<1e5||(this.characterService.status.stamina.value-=100,!(this.inventoryService.consume("food",1e5,!0)<=0)&&(this.characterService.increaseAttribute("animalHandling",1),this.followerService.followersUnlocked&&(this.petRecruitingCounter++,this.petRecruitingCounter>100&&(this.petRecruitingCounter=0,this.followerService.generateFollower(!0))),this.characterService.yang++))}],resourceUse:[{stamina:100}],requirements:[{animalHandling:1e15}],unlocked:!1,skipApprenticeshipLevel:0},this.PetTraining={level:0,name:["Training Pets"],location:E.Self,imageBaseName:"trainingpets",activityType:R.PetTraining,description:["Train your pets to make them more powerful."],yinYangEffect:[Q.Yang],consequenceDescription:["Uses 1000 Stamina and 100k food. Gives you a small chance for each pet of increasing their power. They might learn more if you are a better with animals."],consequence:[()=>{this.inventoryService.getQuantityByType("food")<1e5||(this.characterService.status.stamina.value-=1e3,!(this.inventoryService.consume("food",1e5,!0)<=0)&&(this.characterService.increaseAttribute("animalHandling",1),this.trainingPetsDays++,this.characterService.yang++))}],resourceUse:[{stamina:1e3}],requirements:[{animalHandling:1e18}],unlocked:!1,skipApprenticeshipLevel:0},this.PurifyGems={level:0,name:["Purifying Gems"],location:E.Self,imageBaseName:"purifyinggems",activityType:R.PurifyGems,description:["Purify corrupted spirit gems into something more useful."],yinYangEffect:[Q.None],consequenceDescription:["Uses 100000 Stamina and a corrupted spirit gem."],consequence:[()=>{this.characterService.status.stamina.value-=1e5;const m=this.inventoryService.consume("corruptionGem");m>0&&this.inventoryService.addItem(this.inventoryService.generateSpiritGem(m/10,"life"))}],resourceUse:[{stamina:1e5}],requirements:[{spirituality:1e24}],unlocked:!1,skipApprenticeshipLevel:0},this.burnMoney={level:0,name:["Burn Money"],location:E.Hell,activityType:R.BurnMoney,description:["Burn mortal realm money to receive hell money."],yinYangEffect:[Q.None],consequenceDescription:["Uses a huge pile of mortal money (one million). Gives you some hell money."],consequence:[()=>{this.characterService.money<1e6?this.logService.log(D.EVENT,"You fail to burn the money that you don't have, and feel pretty dumb for trying."):(this.characterService.updateMoney(-1e6),this.hellService.burnedMoney+=1e6,this.hellService.fasterHellMoney?this.characterService.hellMoney+=10:this.characterService.hellMoney++)}],resourceUse:[{stamina:10}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.hellRecruiting={level:0,name:["Recruiting the Damned"],location:E.Hell,activityType:R.HellRecruiting,description:["Look for followers willing to help you."],yinYangEffect:[Q.None],consequenceDescription:["Uses 100 Stamina and 1000 hell money. Gives you a small chance of finding a follower."],consequence:[()=>{if(!(this.characterService.attributes.charisma.value<1e6))return this.characterService.hellMoney<1e3?(this.logService.injury(D.EVENT,"You don't have enough hell money. The damned souls around you team up with the demons to give you a beating."),this.characterService.status.health.value-=.2*this.characterService.status.health.max,void(this.characterService.status.health.value<=0&&(this.hellService.beaten=!0))):(this.characterService.status.stamina.value-=100,this.characterService.hellMoney-=1e3,void(Math.random()<.01?(this.followerService.generateFollower(!1,"damned"),this.logService.log(D.EVENT,"Your recruiting efforts seem to infuriate the demons here.")):this.logService.log(D.EVENT,"You pass around some bribes but fail to find any interested followers today.")));this.logService.log(D.EVENT,"You completely fail to catch the attention of any of the damned.")}],resourceUse:[{stamina:100}],requirements:[{}],unlocked:!1,discovered:!0,skipApprenticeshipLevel:0},this.rehabilitation={level:0,name:["Rehabilitate Ruffian"],location:E.Hell,activityType:R.Rehabilitation,description:["You recognize a bunch of the ruffians here as people who used to beat and rob you in your past lives. Perhaps you can give them some some friendly rehabilitation. With your fists."],yinYangEffect:[Q.None],consequenceDescription:["Uses 100 Stamina and 10 hell money as bait. Breaks a ruffian out of their basket and picks a fight with them."],consequence:[()=>{this.characterService.status.stamina.value-=100,this.battleService.addEnemy({name:"Ruffian",baseName:"deadruffian",health:100,maxHealth:100,defense:10,defeatEffect:"respawnDouble",loot:[],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:10,unlocked:!0}]})}],resourceUse:[{stamina:100}],requirements:[{}],unlocked:!1,discovered:!0,skipApprenticeshipLevel:0},this.honorAncestors={level:0,name:["Honor Ancestors"],location:E.Hell,activityType:R.HonorAncestors,description:["You look around and realize that you have many family members and ancestors here. You should probably give them some credit for what they have done for you. And some money."],yinYangEffect:[Q.None],consequenceDescription:["Uses 1 hell money."],consequence:[()=>{this.characterService.hellMoney<1?this.logService.log(D.EVENT,"Your ancestors are not impressed with your lack of financial offerings."):(this.characterService.hellMoney--,this.inventoryService.addItem(this.itemRepoService.items.tokenOfGratitude))}],resourceUse:[{stamina:10}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.copperMining={level:0,name:["Copper Mining"],location:E.Hell,activityType:R.CopperMining,description:["The copper pillars here look like they're made of a decent grade of copper. It looks like you have enough slack in your chains to turn and break off some pieces."],yinYangEffect:[Q.None],consequenceDescription:["Uses 100,000 stamina and produces one copper bar."],consequence:[()=>{this.characterService.attributes.strength.value<1e24?this.logService.log(D.EVENT,"You try to crack into the pillar, but you're not strong enough."):(this.characterService.status.stamina.value-=1e5,this.inventoryService.addItem(this.itemRepoService.items.copperBar))}],resourceUse:[{stamina:1e5}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.forgeHammer={level:0,name:["Forge Hammer"],location:E.Hell,activityType:R.ForgeHammer,description:["Shape a bar of copper into a hammer using your bare hands. This would be so much easier with an anvil and tools."],yinYangEffect:[Q.None],consequenceDescription:["Uses 100,000 stamina and produces the worst hammer in the world."],consequence:[()=>{this.characterService.attributes.strength.value<1e24?this.logService.log(D.EVENT,"Your weak muscles flinch at the very thought of trying to mold metal by hand."):(this.characterService.status.stamina.value-=1e5,this.inventoryService.consume("metal",1)>0&&this.inventoryService.addItem({id:"weapon",imageFile:"copperHammer",name:"Copper Hammer",type:"equipment",slot:"rightHand",value:1,weaponStats:{baseDamage:1,material:"metal",baseName:"hammer"},description:"A crude copper hammer."}))}],resourceUse:[{stamina:1e5}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.climbMountain={level:0,name:["Climb the Mountain"],location:E.Hell,activityType:R.ClimbMountain,description:["Take another step up the mountain. The path before you seems exceptionally jagged. Maybe you shouldn't have killed so very many little spiders."],yinYangEffect:[Q.None],consequenceDescription:["Uses 1000 stamina and works off some of that murderous karma you have built up."],consequence:[()=>{this.characterService.attributes.strength.value<1e24||this.characterService.attributes.toughness.value<1e24?this.logService.log(D.EVENT,"Your legs give out before you can take a single step up the mountain. Maybe if you were stronger and tougher you could climb."):(this.characterService.status.stamina.value-=1e3,this.hellService.mountainSteps++)}],resourceUse:[{stamina:1e3}],requirements:[{strength:1e24,toughness:1e24}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.attackClimbers={level:0,name:["Attack Climbers"],location:E.Hell,activityType:R.AttackClimbers,description:["The murderers on this mountain look pretty distracted. It wouldn't be hard to knock them down to the bottom."],yinYangEffect:[Q.None],consequenceDescription:["Knock a climber off the mountain."],consequence:[()=>{this.hellService.mountainSteps=0}],resourceUse:[{}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.meltMountain={level:0,name:["Melt the Mountain"],location:E.Hell,activityType:R.MeltMountain,description:["The mountain is far to slippery climb. The only way you're getting to the top is to bring the top down to you."],yinYangEffect:[Q.None],consequenceDescription:["Focus your connection to fire and melt that sucker down."],consequence:[()=>{if(this.characterService.attributes.fireLore.value<1e16)return void this.logService.log(D.EVENT,"Your connection to fire isn't nearly as strong as you thought it was.");const m=Math.log10(this.characterService.attributes.fireLore.value);for(let b=0;b<m;b++)this.battleService.addEnemy({name:"Ice Golem",baseName:"icegolem",health:1e15,maxHealth:1e15,defense:1e6,loot:[this.itemRepoService.items.iceCore],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e6,unlocked:!0}]})}],resourceUse:[{}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.freezeMountain={level:0,name:["Rock the Lava"],location:E.Hell,activityType:R.FreezeMountain,description:["Swimming in lava is less fun that it seemed like it would be."],yinYangEffect:[Q.None],consequenceDescription:["Focus your connection to water and turn that lava back to stone."],consequence:[()=>{if(this.characterService.attributes.waterLore.value<1e16)return void this.logService.log(D.EVENT,"Your connection to water isn't nearly as strong as you thought it was.");const m=Math.log10(this.characterService.attributes.waterLore.value);for(let b=0;b<m;b++)this.battleService.addEnemy({name:"Lava Golem",baseName:"lavagolem",health:1e15,maxHealth:1e15,defense:1e6,loot:[this.itemRepoService.items.fireCore],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e6,unlocked:!0}]})}],resourceUse:[{}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.healAnimals={level:0,name:["Heal Animals"],location:E.Hell,activityType:R.HealAnimals,description:["You notice that not all the animals here are frenzied killers. Some of them are sick, wounded, and miserable. You resolve to do what good you can here."],yinYangEffect:[Q.None],consequenceDescription:["Uses 10,000 Qi and 10,000 stamina. Heals an animal."],consequence:[()=>{this.characterService.status.stamina.value-=1e4,this.characterService.status.qi.value-=1e4,this.hellService.animalsHealed++}],resourceUse:[{stamina:1e4,qi:1e4}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.liftBoulder={level:0,name:["Lift the Boulder Higher"],location:E.Hell,activityType:R.LiftBoulder,description:["The boulder is heavy, but you are strong. See how high you can lift it."],yinYangEffect:[Q.None],consequenceDescription:["Uses 100,000 stamina."],consequence:[()=>{this.characterService.status.stamina.value-=1e5,this.hellService.boulderHeight++}],resourceUse:[{stamina:1e4,qi:1e4}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.HellSwim={level:0,name:["Swim Deeper into the Blood"],location:E.Hell,activityType:R.Swim,description:["Swim down further into the crimson depths."],yinYangEffect:[Q.None],consequenceDescription:["Uses 2000 Stamina. Reduce health by 1000."],consequence:[()=>{this.characterService.status.stamina.value-=2e3,this.characterService.status.health.value-=1e3,this.hellService.swimDepth++}],resourceUse:[{stamina:2e3}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.searchForExit={level:0,name:["Search for the Exit"],location:E.Hell,activityType:R.SearchForExit,description:["The lost souls here are searching for a way out, and they can't seem to see the portal you came in on. You could help them search for the exit they're seeking."],yinYangEffect:[Q.None],consequenceDescription:["Uses 200,000 Stamina."],consequence:[()=>{if(this.characterService.status.stamina.value-=2e5,this.characterService.attributes.intelligence.value<=1e24)return void this.logService.log(D.EVENT,"You stumble around completely lost like the rest of the souls here. If only you were smarter.");const m=1e-5*Math.log10(this.characterService.attributes.intelligence.value-1e24);Math.random()<m&&(this.hellService.exitFound=!0)}],resourceUse:[{stamina:2e5}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.teachTheWay={level:0,name:["Teach the Way to the Exit"],location:E.Hell,activityType:R.TeachTheWay,description:["Teach the other damned souls here the way out."],yinYangEffect:[Q.None],consequenceDescription:["Uses 200,000 Stamina."],consequence:[()=>{if(this.characterService.status.stamina.value-=2e5,this.characterService.attributes.charisma.value<=1e24)return void this.logService.log(D.EVENT,"The damned souls completely ignore your attempts at instruction.");const m=Math.floor(Math.log10(this.characterService.attributes.charisma.value-1e24));this.hellService.soulsEscaped+=m}],resourceUse:[{stamina:2e5}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.interrogate={level:0,name:["Interrogate the Damned"],location:E.Hell,activityType:R.Interrogate,description:["Find out where the tomb looters here hid their stolen treasures. You might be able to reverse some of the damage they have done."],yinYangEffect:[Q.None],consequenceDescription:["Uses 1000 Stamina."],consequence:[()=>{if(this.characterService.status.stamina.value-=1e3,this.characterService.attributes.charisma.value<=1e24)return void this.logService.log(D.EVENT,"The damned here completely ignore you attempts.");const m=1e-5*Math.log10(this.characterService.attributes.charisma.value-1e24);Math.random()<m?this.inventoryService.addItem(this.itemRepoService.items.treasureMap):this.logService.log(D.EVENT,"You almost talk a soul into telling you where their treasure is hidden.")}],resourceUse:[{stamina:1e3}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.recoverTreasure={level:0,name:["Recover a Treasure"],location:E.Hell,activityType:R.RecoverTreasure,description:["Recover a stolen relic. You'll need all your wits to find it even if you have one the sketchy maps the damned can provide."],yinYangEffect:[Q.None],consequenceDescription:["Uses 1000 Stamina."],consequence:[()=>{if(this.characterService.status.stamina.value-=1e3,this.characterService.attributes.intelligence.value<=1e24)return void this.logService.log(D.EVENT,"The puzzle your best puzzling but can't figure out how to even start on this relic.");const m=1e-5*Math.log10(this.characterService.attributes.intelligence.value-1e24);Math.random()<m?this.inventoryService.consume("treasureMap")>0&&this.inventoryService.addItem(this.itemRepoService.items.stolenRelic):this.logService.log(D.EVENT,"You think you're getting close to figuring out where this relic is. If only you were more clever.")}],resourceUse:[{stamina:1e3}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.replaceTreasure={level:0,name:["Replace a Treasure"],location:E.Hell,activityType:R.ReplaceTreasure,description:["Return a stolen relic to the tomb where it came from. You'll need to be quick to avoid the tomb's traps."],yinYangEffect:[Q.None],consequenceDescription:["Uses 1000 Stamina."],consequence:[()=>{if(this.characterService.status.stamina.value-=1e3,this.characterService.attributes.speed.value<=1e24)return void this.logService.log(D.EVENT,"You are too slow to even attempt replacing a treasure.");const m=1e-5*Math.log10(this.characterService.attributes.speed.value-1e24);Math.random()<m?this.inventoryService.consume("stolenRelic")>0&&this.hellService.relicsReturned++:this.logService.log(D.EVENT,"You make a good effort to run through the tomb, but you fail. Try harder!")}],resourceUse:[{stamina:1e3}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.endureTheMill={level:0,name:["Endure the Mill"],location:E.Hell,activityType:R.Endure,description:["Trapped under the millstone like this, there's not much you can do but endure the punishment. Fortunately, you probably never went out looking for tiny spiders to squash, right?"],yinYangEffect:[Q.None],consequenceDescription:["Uses 1000 stamina. Try not to give up. You can do this!"],consequence:[()=>{this.characterService.status.stamina.value-=1e3;const m=Math.max(1e5-this.characterService.attributes.toughness.value/1e23,100);this.characterService.status.health.value-=m,this.characterService.status.health.value<=0?this.hellService.beaten=!0:this.hellService.timesCrushed++}],resourceUse:[{stamina:1e3}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.examineContracts={level:0,name:["Examine Contracts"],location:E.Hell,activityType:R.ExamineContracts,description:["As if the saw-weilding demons weren't bad enough, this place is a haven for fiendish bureaucrats. Huge piles of paper containing the contracts, covenants, bylaws, stipulations, regulations, and heretofor unspecified legal nonsense for this hell. Maybe if you go through them carefully, you can find a loophole to get yourself an audience with the boss."],yinYangEffect:[Q.None],consequenceDescription:["Uses 500,000 stamina because hellish legalese is so incredibly boring."],consequence:[()=>{if(this.characterService.status.stamina.value-=5e5,this.characterService.attributes.intelligence.value<=1e24)return void this.logService.log(D.EVENT,"You can't even begin to read the complex contracts.");const m=1e-5*Math.log10(this.characterService.attributes.intelligence.value-1e24);Math.random()<m?this.hellService.contractsExamined++:this.logService.log(D.EVENT,"You very nearly make out the meaning of the scrawled contract.")}],resourceUse:[{stamina:5e5}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.HellOddJobs={level:0,name:["Odd Jobs"],location:E.SmallTown,imageBaseName:"oddjobs",activityType:R.OddJobs,description:["Run errands, pull weeds, clean toilet pits, or do whatever else you can to earn a coin. Undignified work for an aspiring god, but you can't manage anything more profitable when you're projecting your spirit this far."],yinYangEffect:[Q.None],consequenceDescription:["Uses 5 Stamina. Increases all your basic attributes by a small amount and provides a little money."],consequence:[()=>{this.characterService.increaseAttribute("strength",.02),this.characterService.increaseAttribute("toughness",.02),this.characterService.increaseAttribute("speed",.02),this.characterService.increaseAttribute("intelligence",.02),this.characterService.increaseAttribute("charisma",.02),this.characterService.status.stamina.value-=5,this.characterService.updateMoney(3),this.OddJobs.lastIncome=3,this.oddJobDays++}],resourceUse:[{stamina:5}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0},this.escapeHell={level:0,location:E.Hell,name:["Escape from this hell"],activityType:R.EscapeHell,description:["Return to the gates of Lord Yama's realm."],yinYangEffect:[Q.None],consequenceDescription:[""],consequence:[()=>{this.battleService.enemies=[],this.battleService.currentEnemy=null;const m=this.hellService.hells[this.hellService.currentHell];m.exitEffect&&m.exitEffect(),this.hellService.moveToHell(Z.Gates)}],requirements:[{}],unlocked:!0,discovered:!0,skipApprenticeshipLevel:0,resourceUse:[]},this.FinishHell={level:0,name:["Challenge Lord Yama"],location:E.Hell,activityType:R.FinishHell,description:["You've had enough of this place and learned everything these hells can teach you. Your karmic debt is paid. Challenge Lord Yama to prove you deserve your rightful place in the heavens."],yinYangEffect:[Q.None],consequenceDescription:[""],consequence:[()=>{0===this.battleService.enemies.length&&(this.battleService.addEnemy({name:"Lord Yama",baseName:"Yama",health:1e40,maxHealth:1e40,defense:1e18,loot:[this.itemRepoService.items.portalKey],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e14,unlocked:!0}]}),this.battleService.addEnemy({name:"Horse Face",baseName:"HorseFace",health:1e39,maxHealth:1e39,defense:5e17,loot:[],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:5e13,unlocked:!0}]}),this.battleService.addEnemy({name:"Ox Head",baseName:"OxHead",health:1e39,maxHealth:1e39,defense:5e17,loot:[],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:5e13,unlocked:!0}]}))}],requirements:[{}],resourceUse:[],unlocked:!0,skipApprenticeshipLevel:0},this.activities=[this.Swim,this.ForgeChains,this.AttachChains,this.MakeBrick,this.MakeMortar,this.MakeScaffold,this.BuildTower,this.ResearchWind,this.TameWinds,this.LearnToFly,this.OfferDragonFood,this.OfferDragonWealth,this.TalkToDragon,this.GatherArmies,this.ConquerTheNation,this.MoveStars,this.Resting,this.Begging,this.Cooking,this.Blacksmithing,this.Woodworking,this.Leatherworking,this.Alchemy,this.FormationCreation,this.Plowing,this.Clearing,this.Farming,this.Mining,this.Smelting,this.ChopWood,this.Hunting,this.Fishing,this.GatherHerbs,this.Taunting,this.Burning,this.OddJobs,this.BodyCultivation,this.MindCultivation,this.BalanceChi,this.CoreCultivation,this.InfuseEquipment,this.InfuseBody,this.ExtendLife,this.SoulCultivation,this.PurifyGems,this.Recruiting,this.TrainingFollowers,this.PetRecruiting,this.PetTraining,this.CombatTraining],this.portals=[],setTimeout(()=>this.locationService=this.injector.get(Ml)),setTimeout(()=>this.hellService=this.injector.get(We)),s.reincarnateSubject.subscribe(()=>{this.reset()}),s.longTickSubject.subscribe(m=>{this.characterService.bloodlineRank>=9&&!(this.hellService?.inHell&&this.hellService.currentHell===Z.TreesOfKnives)&&this.characterService.increaseAptitudeDaily(m),this.upgradeActivities(!1),this.checkRequirements(!1)});const g=(m,b,C)=>{let w=!1;const k=()=>(1-Math.pow(C.power/100,.55))/(365e5/(3650+C.age*Math.log2(m/1e10+1))),F=()=>{const X=1-k();return J=>J>0?Math.pow(X,J):1};let U=b;for(;U>0;){const X=F(),J=Math.random();if(J<X(U)){U=0;break}w=!0,U-=Math.max(1,Math.ceil(Math.log(J)/Math.log(1-k()))),C.power++,C.power>this.followerService.highestLevel&&(this.followerService.highestLevel=C.power),C.cost=100*C.power,this.logService.log(D.FOLLOWER,C.name+" gains additional power as a "+C.job)}return w};s.yearOrLongTickSubject.subscribe(()=>{if(this.trainingFollowersDays+this.trainingPetsDays>0&&this.followerService.followersUnlocked){if(this.followerService.followersUnlocked){let m=!0,b=!0,C=!1;for(const w of this.followerService.followers){const k=this.characterService.attributes.charisma.value,F=this.trainingFollowersDays;w.power>=100?w.power=100:(m=!1,0!==F&&(C||=g(k,F,w)))}for(const w of this.followerService.pets){const k=this.characterService.attributes.animalHandling.value,F=this.trainingPetsDays;w.power>=100?w.power=100:(b=!1,0!==F&&(C||=g(k,F,w)))}m&&this.trainingFollowersDays&&this.logService.log(D.FOLLOWER,"You try to train your followers, but they are all already as powerful as they can be. You pat them each on the back and tell them they are great."),b&&this.trainingPetsDays&&this.logService.log(D.FOLLOWER,"You try to train your pets, but they are all already as powerful as they can be. You give them all belly rubs and tell them they are great."),C&&this.followerService.updateFollowerTotalPower()}this.trainingFollowersDays=0,this.trainingPetsDays=0}}),s.activityTickSubject.subscribe(()=>{if(0!==this.activityLoop.length||this.immediateActivity){if(!this.characterService.dead){if(this.pauseBeforeDeath&&this.characterService.age>=this.characterService.lifespan-1&&!this.characterService.immortal&&(this.logService.injury(D.EVENT,"The end of your natural life is imminent. Game paused."),this.mainLoopService.pause=!0),this.exhaustionDays>0)return this.totalExhaustedDays++,this.exhaustionDays--,void(this.immediateActivity&&this.logService.log(D.EVENT,"You were too exhausted to do "+this.immediateActivity.name[this.immediateActivity.level]+" today, but you are getting better."));if(this.immediateActivity){let m=this.immediateActivity;return this.autoRestUnlocked&&""!==this.checkResourceUse(m)&&(m=this.Resting),this.lifeActivities[m.activityType]=(this.lifeActivities[m.activityType]||0)+1,m.consequence[m.level](),this.homeService.triggerWorkstations(m.activityType),this.checkExhaustion(),this.checkQiOveruse(),this.activityDeath=!1,this.characterService.status.health.value<=0&&(this.activityDeath=!0),this.handleSpiritActivity(),void(this.characterService.money>this.characterService.maxMoney&&(this.characterService.money=this.characterService.maxMoney))}if(this.checkTriggers(),this.currentIndex<this.activityLoop.length){this.currentLoopEntry=this.activityLoop[this.currentIndex];let m=this.getActivityByType(this.currentLoopEntry.activity);if(null===m||this.currentLoopEntry.disabled||this.currentLoopEntry.userDisabled||0===this.currentLoopEntry.repeatTimes){let b=0;for(this.currentIndex<this.activityLoop.length-1&&(b=this.currentIndex+1);b!==this.currentIndex&&(0===this.activityLoop[b].repeatTimes||this.activityLoop[b].disabled||this.activityLoop[b].userDisabled||null===this.getActivityByType(this.activityLoop[b].activity));)b++,b>=this.activityLoop.length&&(b=0);if(b===this.currentIndex)return void(this.mainLoopService.pause=!0);this.currentIndex=b,this.currentLoopEntry=this.activityLoop[this.currentIndex],m=this.getActivityByType(this.currentLoopEntry.activity),this.currentTickCount=0}if(m?(this.autoRestUnlocked&&""!==this.checkResourceUse(m)&&(m=this.Resting),this.lifeActivities[m.activityType]=(this.lifeActivities[m.activityType]||0)+1,m.consequence[m.level](),this.homeService.triggerWorkstations(m.activityType)):console.log("Invalid activity, skipping activity for the day"),this.checkExhaustion(),this.checkQiOveruse(),this.activityDeath=!1,this.characterService.status.health.value<=0&&(this.activityDeath=!0),this.currentTickCount++,this.currentTickCount>=this.currentLoopEntry.repeatTimes){this.currentTickCount=0,this.currentIndex++,this.currentIndex>=this.activityLoop.length&&(this.currentIndex=0);const b=this.currentIndex;for(;0===this.activityLoop[this.currentIndex].repeatTimes||this.activityLoop[this.currentIndex].disabled||this.activityLoop[this.currentIndex].userDisabled||null===this.getActivityByType(this.activityLoop[this.currentIndex].activity);)if(this.currentIndex++,this.currentIndex>=this.activityLoop.length&&(this.currentIndex=0),this.currentIndex===b&&(0===this.activityLoop[this.currentIndex].repeatTimes||this.activityLoop[this.currentIndex].disabled||this.activityLoop[this.currentIndex].userDisabled||null===this.getActivityByType(this.activityLoop[this.currentIndex].activity)))return void(this.mainLoopService.pause=!0)}}else this.currentIndex=0;this.handleSpiritActivity(),this.characterService.money>this.characterService.maxMoney&&(this.characterService.money=this.characterService.maxMoney)}}else this.mainLoopService.pause=!0}),this.upgradeActivities(!0),this.checkRequirements(!0)}checkTriggers(){if(this.triggerIndex<this.loopChangeTriggers.length){const e=this.loopChangeTriggers[this.triggerIndex];this.characterService.attributes[e.attribute].value>=e.value&&(this.triggerIndex++,this.loadActivityLoop(e.scheduleName))}}checkExhaustion(){this.characterService.status.stamina.value<0&&(this.logService.injury(D.EVENT,"You collapse to the ground, completely exhausted. It takes you 5 days to recover enough to work again."),this.exhaustionDays=5,this.characterService.status.stamina.value=100,this.characterService.status.health.value-=.01*this.characterService.status.health.max)}checkQiOveruse(){this.characterService.status.qi.value<0&&(this.logService.injury(D.EVENT,"You overextend your Qi and damage your Qi channels. It takes you 10 days to recover."),this.characterService.status.qi.max>1&&(this.characterService.status.qi.max-=1),this.exhaustionDays=10,this.characterService.status.health.value-=.01*this.characterService.status.health.max)}checkResourceUse(e,n=!1){if(!e.resourceUse||!e.resourceUse[e.level])return"";if(n&&(e.resourceUse[e.level].qi||(e.resourceUse[e.level].qi=0),this.characterService.status.qi.value<(e.resourceUse[e.level]?.qi??0)+5))return"qi";for(const r in e.resourceUse[e.level])if(this.characterService.status[r].value<(e.resourceUse?.[e.level]?.[r]??0))return r;return""}handleSpiritActivity(){if(null!==this.spiritActivity&&this.characterService.status.qi.value>=5){this.spiritActivityProgress=!0;const e=this.getActivityByType(this.spiritActivity);null!==e&&""===this.checkResourceUse(e,!0)&&e.unlocked?(this.lifeActivities[e.activityType]=(this.lifeActivities[e.activityType]||0)+1,e.consequence[e.level](),this.homeService.triggerWorkstations(e.activityType),this.characterService.status.qi.value-=5):this.spiritActivityProgress=!1}else this.spiritActivityProgress=!1}getYinYangDescription(e){return e===Q.Yang?"\n\nPromotes the development of Yang energy.":e===Q.Yin?"\n\nPromotes the development of Yin energy.":e===Q.Balance?"\n\nPromotes a balance of Yin and Yang energies.":""}getProperties(){const e=[],n=[];for(const r of this.activities)r.unlocked&&e.push(r.activityType),r.discovered&&n.push(r.activityType);return{autoRestart:this.autoRestart,autoPauseUnlocked:this.autoPauseUnlocked,pauseOnDeath:this.pauseOnDeath,pauseBeforeDeath:this.pauseBeforeDeath,activityLoop:this.activityLoop,unlockedActivities:e,discoveredActivities:n,openApprenticeships:this.openApprenticeships,spiritActivity:this.spiritActivity,completedApprenticeships:this.completedApprenticeships,currentApprenticeship:this.currentApprenticeship,savedActivityLoops:this.savedActivityLoops,loopChangeTriggers:this.loopChangeTriggers,triggerIndex:this.triggerIndex,autoRestUnlocked:this.autoRestUnlocked,pauseOnImpossibleFail:this.pauseOnImpossibleFail,totalExhaustedDays:this.totalExhaustedDays,purifyGemsUnlocked:this.purifyGemsUnlocked,lifeActivities:this.lifeActivities,familySpecialty:this.familySpecialty,tauntCounter:this.tauntCounter,researchWindCounter:this.researchWindCounter,miningCounter:this.miningCounter,huntingCounter:this.huntingCounter,fishingCounter:this.fishingCounter,recruitingCounter:this.recruitingCounter,petRecruitingCounter:this.petRecruitingCounter,coreCultivationCounter:this.coreCultivationCounter}}setProperties(e){this.completedApprenticeships=e.completedApprenticeships||[];const n=e.unlockedActivities||[R.OddJobs,R.Resting],r=e.discoveredActivities||[R.OddJobs,R.Resting];for(const o of this.activities)o.unlocked=n.includes(o.activityType),o.discovered||(o.discovered=r.includes(o.activityType)||n.includes(o.activityType));this.autoRestart=e.autoRestart,this.autoPauseUnlocked=e.autoPauseUnlocked||!1,this.pauseOnDeath=e.pauseOnDeath,this.pauseBeforeDeath=e.pauseBeforeDeath||!1,this.activityLoop=e.activityLoop,this.spiritActivity=e.spiritActivity??null,this.openApprenticeships=e.openApprenticeships||0,this.currentApprenticeship=e.currentApprenticeship,this.savedActivityLoops=e.savedActivityLoops,this.loopChangeTriggers=e.loopChangeTriggers,this.triggerIndex=e.triggerIndex,this.autoRestUnlocked=e.autoRestUnlocked||!1,this.purifyGemsUnlocked=e.purifyGemsUnlocked||!1,this.lifeActivities=e.lifeActivities,this.familySpecialty=e.familySpecialty,this.pauseOnImpossibleFail=void 0===e.pauseOnImpossibleFail||e.pauseOnImpossibleFail,this.totalExhaustedDays=e.totalExhaustedDays||0;for(let o=0;o<5;o++)this.upgradeActivities(!0);this.tauntCounter=e.tauntCounter,this.researchWindCounter=e.researchWindCounter,this.miningCounter=e.miningCounter,this.huntingCounter=e.huntingCounter,this.fishingCounter=e.fishingCounter,this.recruitingCounter=e.recruitingCounter,this.petRecruitingCounter=e.petRecruitingCounter,this.coreCultivationCounter=e.coreCultivationCounter,this.checkRequirements(!0)}meetsRequirements(e){if(!this.hellService?.inHell&&this.locationService&&!this.locationService.unlockedLocations.includes(e.location))return!1;if(this.meetsRequirementsByLevel(e,e.level)){if(e.unlocked=!0,e.discovered)for(const n of this.activityLoop)n.activity===e.activityType&&n.disabled&&(n.disabled=!1);else e.discovered=!0;return!0}return e.relockable&&(e.unlocked=!1),!1}meetsRequirementsByLevel(e,n){if(e.skipApprenticeshipLevel>0&&this.openApprenticeships<=0&&e.activityType!==this.currentApprenticeship&&!this.completedApprenticeships.includes(e.activityType))return!1;const r=Object.keys(e.requirements[n]);for(const a in r){const s=r[a];let l=0;if(void 0!==e.requirements[n][s]&&(l=e.requirements[n][s]??0),this.characterService.attributes[s].value<=l)return!1}const o=e.resourceUse[n];for(const a in o)if(this.characterService.status[a].max<=(e.resourceUse[n][a]||1/0))return!1;return!(e.landRequirements&&this.homeService.land<e.landRequirements||e.fallowLandRequirements&&this.farmService.fallowPlots<e.fallowLandRequirements||e.farmedLandRequirements&&this.farmService.farmedPlots<e.farmedLandRequirements)}checkRequirements(e){for(const n of this.activities)if(void 0===n.impossibleTaskIndex)if(n.projectionOnly=!1,this.hellService?.inHell){const r=this.hellService?.hells[this.hellService.currentHell];r?.activities.includes(n)?(n.discovered=!0,this.meetsRequirements(n)):r?.projectionActivities.includes(n)?(n.projectionOnly=!0,n.unlocked=!0,n.discovered=!0):(n.unlocked=!1,n.discovered=!1)}else this.meetsRequirements(n)&&!n.unlocked&&(e||this.logService.log(D.EVENT,"A new activity is available. Maybe you should try "+n.name[n.level]+"."));else n.unlocked=n.impossibleTaskIndex===this.impossibleTaskService.activeTaskIndex,n.discovered=n.impossibleTaskIndex===this.impossibleTaskService.activeTaskIndex;for(let n=this.activityLoop.length-1;n>=0;n--)this.getActivityByType(this.activityLoop[n].activity)?.unlocked||(this.activityLoop[n].disabled=!0)}upgradeActivities(e){for(const n of this.activities)n.level<n.description.length-1&&this.meetsRequirementsByLevel(n,n.level+1)&&(!e&&n.unlocked&&this.logService.log(D.EVENT,"Congratulations on your promotion! "+n.name[n.level]+" upgraded to "+n.name[n.level+1]),n.level++)}getActivityName(e){const n=this.getActivityByType(e);return n?n.name[n.level]:""}reset(){let e=0;for(const n in this.lifeActivities){const r=parseInt(n),o=this.lifeActivities[r]||0;r&&o>e&&this.supportedSpecialties.includes(r)&&(e=o,this.familySpecialty=r)}this.lifeActivities={},this.openApprenticeships=1,this.currentApprenticeship=void 0,this.oddJobDays=0,this.beggingDays=0;for(const n of this.activities)n.level=0,n.unlocked=!1;for(let n=0;n<5;n++)this.upgradeActivities(!0);this.impossibleTaskService.activeTaskIndex!==fe.Swim&&(this.Resting.unlocked=!0,this.OddJobs.unlocked=!0),this.autoRestart?(this.checkRequirements(!0),this.pauseOnDeath&&!this.characterService.immortal&&(this.mainLoopService.pause=!0)):this.activityLoop=[],this.currentTickCount=0,this.currentIndex=0,this.triggerIndex=0,this.loopChangeTriggers.length>0&&(this.loadActivityLoop(this.loopChangeTriggers[0].scheduleName),this.triggerIndex++)}getActivityByType(e){for(const n of this.activities)if(n.activityType===e)return n;return null}checkApprenticeship(e){if(!this.completedApprenticeships.includes(e))if(this.currentApprenticeship===e){const n=this.getActivityByType(e);n&&n.level>=n.skipApprenticeshipLevel&&this.completedApprenticeships.push(e)}else if(this.openApprenticeships>0){this.openApprenticeships--,this.currentApprenticeship=e;for(const n of this.activities)n.skipApprenticeshipLevel>0&&(n.unlocked=!1);this.checkRequirements(!0)}}saveActivityLoop(e=""){const n=this.savedActivityLoops.find(r=>r.name===e);n?n.activities=JSON.parse(JSON.stringify(this.activityLoop)):this.savedActivityLoops.push({name:e,activities:JSON.parse(JSON.stringify(this.activityLoop))})}loadActivityLoop(e){const n=this.savedActivityLoops.find(r=>r.name===e);n&&(this.activityLoop=JSON.parse(JSON.stringify(n.activities)),this.checkRequirements(!0),this.currentIndex=0)}removeActivityLoop(e){const n=this.savedActivityLoops.findIndex(r=>r.name===e);n>=0&&this.savedActivityLoops.splice(n,1);for(let r=this.loopChangeTriggers.length-1;r>=0;r--)this.loopChangeTriggers[r].scheduleName===e&&this.loopChangeTriggers.splice(r,1)}static{this.\u0275fac=function(n){return new(n||t)(P(we),P(Ie),P(he),P(zt),P(wr),P(tt),P(Un),P(Vt),P(Xi),P(Gt),P(ja))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Z=function(t){return t[t.Gates=0]="Gates",t[t.TongueRipping=1]="TongueRipping",t[t.Scissors=2]="Scissors",t[t.TreesOfKnives=3]="TreesOfKnives",t[t.Mirrors=4]="Mirrors",t[t.Steamers=5]="Steamers",t[t.CopperPillars=6]="CopperPillars",t[t.MountainOfKnives=7]="MountainOfKnives",t[t.MountainOfIce=8]="MountainOfIce",t[t.CauldronsOfOil=9]="CauldronsOfOil",t[t.CattlePit=10]="CattlePit",t[t.CrushingBoulder=11]="CrushingBoulder",t[t.MortarsAndPestles=12]="MortarsAndPestles",t[t.BloodPool=13]="BloodPool",t[t.WrongfulDead=14]="WrongfulDead",t[t.Dismemberment=15]="Dismemberment",t[t.MountainOfFire=16]="MountainOfFire",t[t.Mills=17]="Mills",t[t.Saws=18]="Saws",t}(Z||{});let We=(()=>{class t{constructor(e,n,r,o,a,s,l,c,d){this.injector=e,this.logService=n,this.characterService=r,this.activityService=a,this.followerService=s,this.battleService=l,this.inventoryService=c,this.itemRepoService=d,this.inHell=!1,this.currentHell=Z.Gates,this.completedHellTasks=[],this.completedHellBosses=[],this.beaten=!1,this.mountainSteps=0,this.animalsHealed=0,this.boulderHeight=0,this.daysFasted=0,this.swimDepth=0,this.exitFound=!1,this.soulsEscaped=0,this.relicsReturned=0,this.timesCrushed=0,this.contractsExamined=0,this.atonedKills=0,this.fasterHellMoney=!1,this.burnedMoney=0,this.hells=[{name:"Gates of Hell",description:"The gates of Lord Yama's realm.<br>An array of frightening gates allow you to select the various hells and their challenges.<br>If you are overwhelmed by these horrors, you can always escape back to the mortal realm through reincarnation.",index:Z.Gates,setPortals:()=>{this.activityService.portals=[];let u=!0;for(const p of this.hells){if(p.index===Z.Gates)continue;let g="";this.completedHellBosses.includes(p.index)?g="You have proven your mastery over this hell.":(this.completedHellTasks.includes(p.index)&&(g="The Lord of this Hell is available to challenge."),u=!1),this.activityService.portals.push({level:0,name:[p.name],location:E.Hell,activityType:R.Hell+p.index,description:[p.description],yinYangEffect:[Q.None],consequenceDescription:[g],consequence:[()=>{this.moveToHell(p.index)}],requirements:[{}],unlocked:!0,skipApprenticeshipLevel:0,resourceUse:[]})}u&&this.activityService.portals.push(this.activityService.FinishHell)},completeEffect:()=>{},activities:[this.activityService.Resting,this.activityService.CombatTraining,this.activityService.CoreCultivation,this.activityService.SoulCultivation,this.activityService.InfuseBody,this.activityService.PurifyGems,this.activityService.InfuseEquipment],projectionActivities:[],hint:"",progress:()=>this.characterService.god?1:0,progressMax:()=>1,successCheck:()=>this.characterService.god,progressCache:0,progressMaxCache:1},{name:"Hell of Tongue-ripping",description:"Torment for gossips and everyone one who made trouble with their words.<br>The demons here reach for your tongue to rip it out.",index:Z.TongueRipping,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},entryEffect:()=>{this.followerService.stashFollowers()},dailyEffect:()=>{this.characterService.attributes.charisma.value*=.9},exitEffect:()=>{this.followerService.restoreFollowers()},completeEffect:()=>{this.logService.log(D.STORY,"Together with your new followers, you have seized control of the Hell of Tongue-ripping. Now all that remains is to defeat its lord.")},activities:[this.activityService.Resting,this.activityService.MindCultivation,this.activityService.BodyCultivation,this.activityService.CoreCultivation,this.activityService.SoulCultivation,this.activityService.hellRecruiting,this.activityService.TrainingFollowers],projectionActivities:[this.activityService.OddJobs,this.activityService.burnMoney],hint:"It's hard to talk with all these demons going for your mouth, but maybe if you can get some help from the other prisoners here you could take control of this place.",progress:()=>{let u=0;for(const p of this.followerService.followers)u+=p.power;return u},progressMax:()=>5e3,successCheck:()=>{let u=0;for(const p of this.followerService.followers)u+=p.power;return u>5e3},progressCache:0,progressMaxCache:1},{name:"Hell of Scissors",description:"Torment for those who ruin marriages.<br>The demons here will cut your fingers right off.",index:Z.Scissors,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},entryEffect:()=>{this.inventoryService.stashWeapons()},exitEffect:()=>{this.inventoryService.restoreWeapons()},completeEffect:()=>{this.logService.log(D.STORY,"Using nothing but the strength of your body and mind, you have seized control of the Hell of Scissors.<br>Now all that remains is to defeat its lord.")},activities:[this.activityService.Resting,this.activityService.MindCultivation,this.activityService.BodyCultivation,this.activityService.CoreCultivation,this.activityService.SoulCultivation,this.activityService.Taunting],projectionActivities:[this.activityService.OddJobs,this.activityService.burnMoney],hint:"These demons don't seem content to just take your fingers. You'd better get ready to defend yourself.",progress:()=>this.inventoryService.getQuantityByName("fingers"),progressMax:()=>100,successCheck:()=>this.inventoryService.getQuantityByName("fingers")>=100,progressCache:0,progressMaxCache:1},{name:"Hell of Trees of Knives",description:"Torment for those who cause trouble between family members.<br>The demons here will tie you to a tree made of sharp knives",index:Z.TreesOfKnives,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},entryEffect:()=>{this.characterService.stashMoney()},dailyEffect:()=>{const u=.1*this.characterService.status.health.value;this.logService.injury(D.COMBAT,"The knives dig into your flesh, causing "+u+" damage."),this.characterService.status.health.value-=u},exitEffect:()=>{this.characterService.restoreMoney()},completeEffect:()=>{this.logService.log(D.STORY,"You have reconciled yourself with all of your family members and satisfied the demands of this hell. Now all that remains is to defeat its lord (while still tied to this tree).")},activities:[this.activityService.Resting,this.activityService.MindCultivation,this.activityService.BodyCultivation,this.activityService.CoreCultivation,this.activityService.SoulCultivation,this.activityService.honorAncestors],projectionActivities:[this.activityService.OddJobs,this.activityService.burnMoney],hint:"Heal your family bonds.",progress:()=>this.inventoryService.getQuantityByName("token of gratitude"),progressMax:()=>1e4,successCheck:()=>this.inventoryService.getQuantityByName("token of gratitude")>=1e4,progressCache:0,progressMaxCache:1},{name:"Hell of Mirrors",description:"Torment for those who escaped punishment for their crimes.<br>The mirrors here shine with a terrifying glow.",index:Z.Mirrors,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},entryEffect:()=>{this.followerService.stashFollowers()},exitEffect:()=>{this.followerService.restoreFollowers()},completeEffect:()=>{this.inventoryService.consume("mirrorShard",1e3),this.logService.log(D.STORY,"You piece together the shards of mirror that you have collected to form a new mirror. A dark shape looms beyond it.")},activities:[this.activityService.Resting,this.activityService.CombatTraining,this.activityService.MindCultivation,this.activityService.BodyCultivation,this.activityService.CoreCultivation,this.activityService.SoulCultivation,this.activityService.Taunting],projectionActivities:[this.activityService.OddJobs,this.activityService.burnMoney],hint:"Master yourself. All by yourself.",progress:()=>this.inventoryService.getQuantityByName("mirror shard"),progressMax:()=>1e3,successCheck:()=>this.inventoryService.getQuantityByName("mirror shard")>=1e3,progressCache:0,progressMaxCache:1},{name:"Hell of Steamers",description:"Torment for hypocrites and ruffians.<br>The steam baskets here are just the right size for you.",index:Z.Steamers,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},entryEffect:()=>{this.inventoryService.stashWeapons(),this.inventoryService.stashArmor()},exitEffect:()=>{this.activityService.portals=[this.activityService.escapeHell],this.inventoryService.restoreWeapons(),this.inventoryService.restoreArmor()},dailyEffect:()=>{if(this.inventoryService.consume("iceCore")<0){const u=.05*this.characterService.status.health.value;this.logService.injury(D.COMBAT,"The steam cooks your skin, causing "+u+" damage."),this.characterService.status.health.value-=u}Math.random()<.2&&(this.logService.log(D.EVENT,"As if the constant scalding steam isn't enough, one of these ruffians stole some money! Why does this feel so familiar?"),this.characterService.hellMoney-=.1*this.characterService.hellMoney)},completeEffect:()=>{this.battleService.clearEnemies(),this.logService.log(D.STORY,"You defeat so many ruffians that the rest all beg to return to their baskets for their regular torment.")},activities:[this.activityService.Resting,this.activityService.MindCultivation,this.activityService.BodyCultivation,this.activityService.CoreCultivation,this.activityService.SoulCultivation,this.activityService.Taunting,this.activityService.rehabilitation],projectionActivities:[this.activityService.OddJobs,this.activityService.burnMoney],hint:"There so many ruffians here that deserve some payback from you. I wonder if you can take them all on.",progress:()=>this.battleService.enemies.length,progressMax:()=>100,successCheck:()=>this.battleService.enemies.length>100,progressCache:0,progressMaxCache:1},{name:"Hell of Copper Pillars",description:"Torment for arsonists.<br>The red-hot copper pillars you will be bound to remind you of all those times you played with fire.",index:Z.CopperPillars,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},entryEffect:()=>{this.inventoryService.stashWeapons()},exitEffect:()=>{this.inventoryService.restoreWeapons()},dailyEffect:()=>{if(this.inventoryService.consume("iceCore")<0){const u=Math.max(.1*this.characterService.status.health.value,20);this.characterService.status.health.value-=u,this.logService.injury(D.COMBAT,"The heat of the pillars burns you for "+u+" damage.")}},completeEffect:()=>{this.logService.log(D.STORY,"You finally forge a hammer powerful enough to break through the chains that bind you to the pillar. The Lord of this Hell comes to investigate all the commotion as the chains fall to the ground.")},activities:[this.activityService.Resting,this.activityService.MindCultivation,this.activityService.BodyCultivation,this.activityService.CoreCultivation,this.activityService.SoulCultivation,this.activityService.copperMining,this.activityService.forgeHammer],projectionActivities:[this.activityService.OddJobs,this.activityService.burnMoney],hint:"You'll need a really strong hammer to break through these hellsteel chain. Too bad the only material around is copper.",progress:()=>this.characterService.equipment.rightHand?.weaponStats?.baseDamage||0,progressMax:()=>100,successCheck:()=>(this.characterService.equipment.rightHand?.weaponStats?.baseDamage||0)>100,progressCache:0,progressMaxCache:1},{name:"Hell of the Mountain of Knives",description:"Torment for those who killed for pleasure.<br>The mountain of sharp blades looks like it might be rough on footwear.",index:Z.MountainOfKnives,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},dailyEffect:()=>{let u=this.battleService.totalKills/100-this.mountainSteps-this.atonedKills;this.atonedKills++,u<0&&(u=0),this.characterService.status.health.value-=u,u>0&&this.logService.injury(D.COMBAT,"The mountain's blades shred you for "+u+" damage.")},completeEffect:()=>{this.logService.log(D.STORY,"You finally reach the peak. The karmic weight of all the killing you've ever done drops from your shoulders. Now to defeat this hell's lord without taking any pleasure in the act.")},activities:[this.activityService.Resting,this.activityService.MindCultivation,this.activityService.BodyCultivation,this.activityService.CoreCultivation,this.activityService.SoulCultivation,this.activityService.climbMountain],projectionActivities:[this.activityService.OddJobs,this.activityService.burnMoney],hint:"It seems you've accrued a lot of karma from all the killing you've done over your many lives. The bill is due.",progress:()=>this.mountainSteps,progressMax:()=>this.battleService.totalKills/100,successCheck:()=>this.mountainSteps>=this.battleService.totalKills/100,progressCache:0,progressMaxCache:1},{name:"Hell of the Mountain of Ice",description:"Torment for adulterers and schemers.<br>The chill wind blowing through the gate is so cold it burns.",index:Z.MountainOfIce,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},completeEffect:()=>{this.logService.log(D.STORY,"You realize that the power of the ice cores is all that prevents the heat from the neighboring hells from turning the mountain into slush. With enough of these tucked away in your pack, the mountain dwindles down to a managable size. Now to see who's in charge around here.")},dailyEffect:()=>{this.inventoryService.consume("fireCore")<0&&(this.characterService.status.health.value-=1e3,this.logService.injury(D.COMBAT,"The mountain's ice freezes you for 1000 damage.")),this.characterService.attributes.fireLore.value*=.9},activities:[this.activityService.Resting,this.activityService.MindCultivation,this.activityService.BodyCultivation,this.activityService.CoreCultivation,this.activityService.SoulCultivation,this.activityService.Taunting,this.activityService.meltMountain],projectionActivities:[this.activityService.OddJobs,this.activityService.burnMoney],hint:"Burn it down!",progress:()=>this.inventoryService.getQuantityByName("ice core"),progressMax:()=>1e4,successCheck:()=>this.inventoryService.getQuantityByName("ice core")>=1e4,progressCache:0,progressMaxCache:1},{name:"Hell of the Cauldrons of Oil",description:"Torment for rapists and abusers.<br>Next on the menu: deep fried immortal.",index:Z.CauldronsOfOil,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},dailyEffect:()=>{if(!this.completedHellTasks.includes(Z.CauldronsOfOil)){if(this.inventoryService.consume("iceCore")>0)return this.logService.injury(D.EVENT,"The ice cores you brought in with you make the oil sputter and pop, baking you in a cloud of superheated steam."),void(this.characterService.status.health.value-=1e5);const u=Math.max(.1*this.characterService.status.health.value,20);this.logService.injury(D.COMBAT,"The oil scorches you, causing "+u+" damage."),this.characterService.status.health.value-=u}if(Math.random()<.1){this.logService.injury(D.COMBAT,"Your weapons slip from your oily hands."),this.inventoryService.autoequipBestEnabled=!1;let u=this.characterService.equipment.rightHand;u&&(this.inventoryService.addItem(u),this.characterService.equipment.rightHand=null),u=this.characterService.equipment.leftHand,u&&(this.inventoryService.addItem(u),this.characterService.equipment.leftHand=null)}},completeEffect:()=>{this.logService.log(D.STORY,"The pile of ice cores you brought in with you make the oil sputter and pop, but you are tough enough to withstand the superheated steam. Out of the cauldron now, you look around for the boss.")},activities:[this.activityService.Resting,this.activityService.MindCultivation,this.activityService.BodyCultivation,this.activityService.CoreCultivation,this.activityService.SoulCultivation],projectionActivities:[this.activityService.OddJobs,this.activityService.burnMoney],hint:"You'd need to be incredibly resilient to survive this place.",progress:()=>this.inventoryService.getQuantityByName("ice core"),progressMax:()=>1e3,successCheck:()=>this.inventoryService.getQuantityByName("ice core")>=1e3&&this.characterService.status.health.value>1e5,progressCache:0,progressMaxCache:1},{name:"Hell of the Cattle Pit",description:"Torment for animal abusers.<br>The cows are looking a little restless.",index:Z.CattlePit,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},completeEffect:()=>{this.logService.log(D.STORY,"The horde of rampaging cattle finally seems to understand that you're not there to hurt them. They back off and leave you alone. All except for that really big cow over there.")},activities:[this.activityService.Resting,this.activityService.MindCultivation,this.activityService.BodyCultivation,this.activityService.CoreCultivation,this.activityService.SoulCultivation,this.activityService.healAnimals],projectionActivities:[this.activityService.OddJobs,this.activityService.burnMoney],hint:"Look at those poor sick cows. And those other cows that for some reason are standing up on two legs and charging you with weapons.",progress:()=>this.animalsHealed,progressMax:()=>1e6,successCheck:()=>this.animalsHealed>1e6,progressCache:0,progressMaxCache:1},{name:"Hell of the Crushing Boulder",description:"Torment for child-killer and abondoners where the damned have to lift giant boulders or be crushed under them.<br>Atlas had it easy compared to these people.",index:Z.CrushingBoulder,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},entryEffect:()=>{this.boulderHeight=0},dailyEffect:()=>{this.boulderHeight>100||(this.characterService.status.health.value-=500,this.logService.injury(D.COMBAT,"The boulder crushes you for 500 damage."),Math.random()<.1&&this.battleService.addEnemy({name:"An Annoying Imp",baseName:"imp",health:10,maxHealth:10,defense:100,loot:[],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:100,unlocked:!0}]}))},completeEffect:()=>{this.logService.log(D.STORY,"You hoist the boulder high over your head, then throw it high into the air. It lands with a satisfying thud. Unfortunately, it grows arms and legs and walks back to you, and this time it looks angry.")},activities:[this.activityService.Resting,this.activityService.MindCultivation,this.activityService.BodyCultivation,this.activityService.CoreCultivation,this.activityService.SoulCultivation,this.activityService.liftBoulder],projectionActivities:[this.activityService.OddJobs,this.activityService.burnMoney],hint:"It's leg day. No, it's arm day. Must be both! Lift!",progress:()=>this.boulderHeight,progressMax:()=>1e3,successCheck:()=>this.boulderHeight>1e3,progressCache:0,progressMaxCache:1},{name:"Hell of Mortars and Pestles",description:"Torment for food wasters.<br>You didn't really need to eat all those peaches, did you?<br>The diet here is pure hellfire.",index:Z.MortarsAndPestles,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},dailyEffect:()=>{this.daysFasted++},completeEffect:()=>{this.logService.log(D.STORY,"Your righteous asceticism have served you well. The lord of this hell has arrived to deal with you personally.")},activities:[this.activityService.Resting,this.activityService.MindCultivation,this.activityService.BodyCultivation,this.activityService.CoreCultivation,this.activityService.SoulCultivation],projectionActivities:[this.activityService.OddJobs,this.activityService.burnMoney],hint:"You begin to feel remorse for your gluttony across your many lives. Perhaps a nice, long fast would help you feel better. Hopefully you can keep the demons from spoonfeeding you their fiery concoction.",progress:()=>this.daysFasted,progressMax:()=>1e3,successCheck:()=>this.daysFasted>1e3,progressCache:0,progressMaxCache:1},{name:"Hell of the Blood Pool",description:"Torment for those who disrespect others.<br>The pool looks deep, but it's hard to tell with all that blood.",index:Z.BloodPool,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},entryEffect:()=>{this.swimDepth=0},completeEffect:()=>{this.logService.log(D.STORY,"You finally reach the bottom of the pool where you find a massive plug. When you pull it, the pool begins to drain, revealing the source of all this blood.")},activities:[this.activityService.HellSwim],projectionActivities:[this.activityService.OddJobs,this.activityService.burnMoney],hint:"Not this again!",progress:()=>this.swimDepth,progressMax:()=>1e4,successCheck:()=>this.swimDepth>1e4,progressCache:0,progressMaxCache:1},{name:"Hell of the Wrongful Dead",description:"Torment for those who gave up their lives too early.<br>Fortunately you've probably never done that.<br>The pounding Rains of Pain and the blowing Winds of Sorrow give unrelenting misery to everyone here.",index:Z.WrongfulDead,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},entryEffect:()=>{this.exitFound&&(this.hells[Z.WrongfulDead].activities.includes(this.activityService.teachTheWay)||this.hells[Z.WrongfulDead].activities.push(this.activityService.teachTheWay))},dailyEffect:()=>{this.logService.injury(D.COMBAT,"The constant storm saps you of 500 health and 100 stamina."),this.characterService.status.health.value-=500,this.characterService.status.stamina.value-=100},completeEffect:()=>{this.logService.log(D.STORY,"You sigh in relief as you usher the last of the damned out. The hell is finally empty. Well, empty except for the monstrous Hell Lord coming toward you.")},activities:[this.activityService.Resting,this.activityService.MindCultivation,this.activityService.BodyCultivation,this.activityService.CoreCultivation,this.activityService.SoulCultivation,this.activityService.searchForExit],projectionActivities:[this.activityService.OddJobs,this.activityService.burnMoney],hint:"These people don't belong here. Get them out.",progress:()=>this.soulsEscaped,progressMax:()=>1e6,successCheck:()=>this.soulsEscaped>1e6,progressCache:0,progressMaxCache:1},{name:"Hell of Dismemberment",description:"Torment for tomb-raiders and grave-robbers.<br>The demons here look awfully handy with those giant axes.",index:Z.Dismemberment,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},completeEffect:()=>{this.logService.log(D.STORY,"As you help more of the damned here to resolve their crimes, an angry cry sounds through the hell. The lord has arrived.")},activities:[this.activityService.Resting,this.activityService.MindCultivation,this.activityService.BodyCultivation,this.activityService.CoreCultivation,this.activityService.SoulCultivation,this.activityService.interrogate],projectionActivities:[this.activityService.OddJobs,this.activityService.burnMoney,this.activityService.recoverTreasure,this.activityService.replaceTreasure],hint:"Unloot those tombs.",progress:()=>this.relicsReturned,progressMax:()=>1e4,successCheck:()=>this.relicsReturned>1e4,progressCache:0,progressMaxCache:1},{name:"Hell of the Mountain of Fire",description:"Torment for thieves.<br>The volcano where the poor souls are thrown looks a little toasty for comfort.",index:Z.MountainOfFire,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},dailyEffect:()=>{if(this.inventoryService.consume("iceCore")<0){const u=Math.max(.1*this.characterService.status.health.value,20);this.logService.injury(D.COMBAT,"The oppressive heat of the volcano burns you for "+u+" damage."),this.characterService.status.health.value-=u}},completeEffect:()=>{this.logService.log(D.STORY,"You realize that the power of the fire cores is essential to keeping the lava in the volcano liquid. With enough of these tucked away in your pack, the the surface finally cools enough to turn back to stone. Someone is not happy with this change.")},activities:[this.activityService.Resting,this.activityService.MindCultivation,this.activityService.BodyCultivation,this.activityService.CoreCultivation,this.activityService.SoulCultivation,this.activityService.freezeMountain],projectionActivities:[this.activityService.OddJobs,this.activityService.burnMoney],hint:"How does this volcano stay so hot?",progress:()=>this.inventoryService.getQuantityByName("fire core"),progressMax:()=>1e4,successCheck:()=>this.inventoryService.getQuantityByName("fire core")>=1e4,progressCache:0,progressMaxCache:1},{name:"Hell of Mills",description:"Torment for any who abused their power to oppress the weak.<br>You don't look forward to being ground into immortal flour.",index:Z.Mills,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},completeEffect:()=>{this.logService.log(D.STORY,"Your karmic debt for all the oppression you've ever inflicted is paid off. Now you just need to show the strongest demon here not to pick on the weak.")},activities:[this.activityService.endureTheMill],projectionActivities:[],hint:"Just endure.",progress:()=>this.timesCrushed,progressMax:()=>100*this.characterService.totalLives,successCheck:()=>this.timesCrushed>100*this.characterService.totalLives,progressCache:0,progressMaxCache:1},{name:"Hell of Saws",description:"Torment for swindlers and business cheats.<br>The demons sharpen their saws and grin at you.<br>You wish now that you'd stayed out of politics.",index:Z.Saws,setPortals:()=>{this.activityService.portals=[this.activityService.escapeHell]},dailyEffect:()=>{this.contractsExamined<=2e4&&(this.logService.injury(D.COMBAT,"The saws tear into your flesh, causing 100 damage."),this.characterService.status.health.value-=100)},completeEffect:()=>{this.logService.log(D.STORY,"You finally find article 131 of bylaw 8888 subsection 42(b)6.42 where paragraph fourty-eight clearly states that you have the right to confront the Hell Lord. Time to party!")},activities:[this.activityService.Resting,this.activityService.MindCultivation,this.activityService.BodyCultivation,this.activityService.CoreCultivation,this.activityService.SoulCultivation,this.activityService.examineContracts],projectionActivities:[this.activityService.OddJobs,this.activityService.burnMoney],hint:"You read legalese, right?",progress:()=>this.contractsExamined,progressMax:()=>2e4,successCheck:()=>this.contractsExamined>2e4,progressCache:0,progressMaxCache:1}],o.tickSubject.subscribe(()=>{if(this.currentHell<=0)return;const u=this.hells[this.currentHell];u.dailyEffect&&u.dailyEffect(),this.beaten&&(this.beaten=!1,this.logService.injury(D.EVENT,"You fall to your knees, unable to bear more damage. You crawl back through this hell's gate to get a moment of respite at the gates of Lord Yama's realm."),this.battleService.enemies=[],this.battleService.currentEnemy=null,this.moveToHell(Z.Gates)),!this.completedHellTasks.includes(this.currentHell)&&u.successCheck()&&(u.completeEffect(),this.completedHellTasks.push(this.currentHell))}),o.reincarnateSubject.subscribe(()=>{this.reset()}),o.longTickSubject.subscribe(()=>{for(const u of this.hells)u.progressCache=u.progress(),u.progressMaxCache=u.progressMax()})}reset(){if(this.inHell){if(this.currentHell>=0){const e=this.hells[this.currentHell];e.exitEffect&&e.exitEffect()}this.inHell=!1,this.currentHell=Z.Gates}}moveToHell(e){if(this.currentHell>=0){const r=this.hells[this.currentHell];r.exitEffect&&r.exitEffect()}this.currentHell=e;const n=this.hells[this.currentHell];n.entryEffect&&n.entryEffect(),n.setPortals(),this.activityService.checkRequirements(!0)}trouble(){if(this.currentHell<=0)return;const e=this.hells[this.currentHell].progress();if(this.currentHell===Z.TongueRipping)this.battleService.addEnemy({name:"Tongue Ripper",baseName:"tongueripper",health:1e20+1e19*e,maxHealth:1e20+1e19*e,defense:1e8+1e7*e,loot:[this.inventoryService.generateSpiritGem(Math.floor(Math.log2(e+2)),"corruption")],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e6+1e4*e,unlocked:!0}]});else if(this.currentHell===Z.Scissors)this.battleService.addEnemy({name:"Scissors Demon",baseName:"scissorsdemon",health:1e15+1e14*e,maxHealth:1e15+1e14*e,defense:1e8+1e7*e,loot:[this.inventoryService.generateSpiritGem(Math.floor(Math.log2(e+2)),"corruption"),this.itemRepoService.items.fingers],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e6+1e4*e,unlocked:!0}]});else if(this.currentHell===Z.TreesOfKnives)this.battleService.addEnemy({name:"Hungry Crow",baseName:"crow",health:1e6,maxHealth:1e6,defense:1e6,loot:[this.inventoryService.generateSpiritGem(25,"corruption")],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e6,unlocked:!0}]});else if(this.currentHell===Z.Mirrors)this.battleService.addEnemy({name:"Your Reflection",baseName:"mirror",health:this.characterService.status.health.value,maxHealth:this.characterService.status.health.value,defense:this.characterService.defense,loot:[this.itemRepoService.items.mirrorShard],techniques:this.battleService.techniques});else if(this.currentHell===Z.CauldronsOfOil)this.battleService.addEnemy({name:"Oiled Demon",baseName:"oileddemon",health:1e20+1e19*e,maxHealth:1e20+1e19*e,defense:1e8,loot:[this.inventoryService.generateSpiritGem(25,"corruption")],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e6,unlocked:!0}]});else if(this.currentHell===Z.CattlePit){if(this.animalsHealed<=1e6)for(let n=0;n<10;n++)this.battleService.addEnemy({name:"Demonic Cow",baseName:"demoniccow",health:1e20+1e19*e,maxHealth:1e20+1e19*e,defense:1e8,loot:[this.inventoryService.generateSpiritGem(25,"corruption")],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e6,unlocked:!0}]})}else this.currentHell===Z.MortarsAndPestles?this.battleService.addEnemy({name:"Force Feeder",baseName:"forcefeeder",health:1e6,maxHealth:1e6,defense:1e6,loot:[this.inventoryService.generateSpiritGem(25,"corruption")],techniques:[{name:"Force Feeding",ticks:0,ticksRequired:10,baseDamage:1e6,effect:"feeder",hitTracker:0,unlocked:!0}]}):this.currentHell===Z.Dismemberment?this.battleService.addEnemy({name:"Axe Demon",baseName:"axedemon",health:1e20+1e19*e,maxHealth:1e20+1e19*e,defense:1e8,loot:[this.inventoryService.generateSpiritGem(25,"corruption")],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e6,unlocked:!0}]}):this.currentHell===Z.Saws&&this.battleService.addEnemy({name:"Saw Demon",baseName:"sawdemon",health:1e20+1e19*e,maxHealth:1e20+1e19*e,defense:1e8,loot:[this.inventoryService.generateSpiritGem(25,"corruption")],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e6,unlocked:!0}]})}fightHellBoss(){this.currentHell===Z.TongueRipping?this.battleService.addEnemy({name:"Gorbolash the Gossip Gasher",baseName:"Gorbolash",health:1e30,maxHealth:1e30,defense:1e12,loot:[this.itemRepoService.items.hellCrownTongueRippers],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e10,unlocked:!0}]}):this.currentHell===Z.Scissors?this.battleService.addEnemy({name:"Malgorath the Marriage Masher",baseName:"Malgorath",health:1e27,maxHealth:1e27,defense:1e12,loot:[this.itemRepoService.items.hellCrownScissors],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e11,unlocked:!0}]}):this.currentHell===Z.TreesOfKnives?this.battleService.addEnemy({name:"Flamgolus the Family Flayer",baseName:"Flamgolus",health:1e30,maxHealth:1e30,defense:1e12,loot:[this.itemRepoService.items.hellCrownTreesOfKnives],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e10,unlocked:!0}]}):this.currentHell===Z.Mirrors?this.battleService.addEnemy({name:"Myorshuggath the Mirror Master",baseName:"Myorshuggath",health:1e30,maxHealth:1e30,defense:1e12,loot:[this.itemRepoService.items.hellCrownMirrors],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e10,unlocked:!0}]}):this.currentHell===Z.Steamers?this.battleService.addEnemy({name:"Stactolus the Steamer",baseName:"Stactolus",health:1e27,maxHealth:1e27,defense:1e12,loot:[this.itemRepoService.items.hellCrownSteamers],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e10,unlocked:!0}]}):this.currentHell===Z.CopperPillars?this.battleService.addEnemy({name:"Ignificor the Forever Burning",baseName:"Ignificor",health:1e30,maxHealth:1e30,defense:1e12,loot:[this.itemRepoService.items.hellCrownPillars],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e10,unlocked:!0}]}):this.currentHell===Z.MountainOfKnives?this.battleService.addEnemy({name:"Malignus the Murderer Muncher",baseName:"Malignus",health:1e30,maxHealth:1e30,defense:1e12,loot:[this.itemRepoService.items.hellCrownMountainOfKnives],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e10,unlocked:!0}]}):this.currentHell===Z.MountainOfIce?this.battleService.addEnemy({name:"The Cheat",baseName:"Cheat",health:1e30,maxHealth:1e30,defense:1e12,loot:[this.itemRepoService.items.hellCrownMountainOfIce],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e10,unlocked:!0}]}):this.currentHell===Z.CauldronsOfOil?this.battleService.addEnemy({name:"Nestor the Molestor",baseName:"Nestor",health:1e30,maxHealth:1e30,defense:1e12,loot:[this.itemRepoService.items.hellCrownCauldronsOfOil],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e10,unlocked:!0}]}):this.currentHell===Z.CattlePit?this.battleService.addEnemy({name:"The Cow Emperor",baseName:"CowEmperor",health:1e30,maxHealth:1e30,defense:1e12,loot:[this.itemRepoService.items.hellCrownCattlePit],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e10,unlocked:!0}]}):this.currentHell===Z.CrushingBoulder?this.battleService.addEnemy({name:"The Crusher",baseName:"Crusher",health:1e30,maxHealth:1e30,defense:1e12,loot:[this.itemRepoService.items.hellCrownCrushingBoulder],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e10,unlocked:!0}]}):this.currentHell===Z.MortarsAndPestles?this.battleService.addEnemy({name:"Glorbulskath the Gluttonous",baseName:"Glorbulskath",health:1e30,maxHealth:1e30,defense:1e12,loot:[this.itemRepoService.items.hellCrownMortarsAndPestles],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e10,unlocked:!0}]}):this.currentHell===Z.BloodPool?this.battleService.addEnemy({name:"Gnarlyathor the Ever-Bleeding",baseName:"Gnarlyathor",health:1e30,maxHealth:1e30,defense:1e12,loot:[this.itemRepoService.items.hellCrownBloodPool],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e10,unlocked:!0}]}):this.currentHell===Z.WrongfulDead?this.battleService.addEnemy({name:"Azoth-Raketh the Storm Master",baseName:"Azoth-Raketh",health:1e30,maxHealth:1e30,defense:1e12,loot:[this.itemRepoService.items.hellCrownWrongfulDead],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e10,unlocked:!0}]}):this.currentHell===Z.Dismemberment?this.battleService.addEnemy({name:"Druskall the Dismemberer",baseName:"Druskall",health:1e30,maxHealth:1e30,defense:1e12,loot:[this.itemRepoService.items.hellCrownDismemberment],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e10,unlocked:!0}]}):this.currentHell===Z.MountainOfFire?this.battleService.addEnemy({name:"Magmar the Lava King",baseName:"Magmar",health:1e30,maxHealth:1e30,defense:1e12,loot:[this.itemRepoService.items.hellCrownFireMountain],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e10,unlocked:!0}]}):this.currentHell===Z.Mills?this.battleService.addEnemy({name:"Grimstone The Human Grinder",baseName:"Grimstone",health:1e30,maxHealth:1e30,defense:1e12,loot:[this.itemRepoService.items.hellCrownMills],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e10,unlocked:!0}]}):this.currentHell===Z.Saws&&this.battleService.addEnemy({name:"Crognaslark the Corrupter",baseName:"Crognaslark",health:1e30,maxHealth:1e30,defense:1e12,loot:[this.itemRepoService.items.hellCrownSaws],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e10,unlocked:!0}]})}getProperties(){return{inHell:this.inHell,currentHell:this.currentHell,completedHellTasks:this.completedHellTasks,completedHellBosses:this.completedHellBosses,mountainSteps:this.mountainSteps,animalsHealed:this.animalsHealed,boulderHeight:this.boulderHeight,daysFasted:this.daysFasted,swimDepth:this.swimDepth,exitFound:this.exitFound,soulsEscaped:this.soulsEscaped,relicsReturned:this.relicsReturned,timesCrushed:this.timesCrushed,contractsExamined:this.contractsExamined,atonedKills:this.atonedKills,fasterHellMoney:this.fasterHellMoney,burnedMoney:this.burnedMoney}}setProperties(e){this.inHell=e.inHell||!1,this.completedHellTasks=e.completedHellTasks||[],this.completedHellBosses=e.completedHellBosses||[],this.mountainSteps=e.mountainSteps||0,this.animalsHealed=e.animalsHealed||0,this.boulderHeight=e.boulderHeight||0,this.daysFasted=e.daysFasted||0,this.swimDepth=e.swimDepth||0,this.exitFound=e.exitFound||!1,this.soulsEscaped=e.soulsEscaped||0,this.relicsReturned=e.relicsReturned||0,this.timesCrushed=e.timesCrushed||0,this.contractsExamined=e.contractsExamined||0,this.atonedKills=e.atonedKills||0,this.fasterHellMoney=e.fasterHellMoney||!1,this.burnedMoney=e.burnedMoney||0,this.currentHell=e.currentHell??Z.Gates,this.hells[this.currentHell].setPortals()}static{this.\u0275fac=function(n){return new(n||t)(P(we),P(Xi),P(Ie),P(tt),P(bt),P(Gt),P(Vt),P(he),P(Un))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const te="gem",Je="money",Be="hide",K0="fruit",Wi="meat",tu="ore",cp="Right-Handed Weapon",dp="Left-Handed Weapon",jR="Qi Strike",Q0="Pyroclasm",Z0="Metal Fist",up="Qi Shield",hp="Fire Shield",fp="Ice Shield",UR="Fire Essence",zR="Earth Essence",$R="Metal Essence",WR="Wood Essence",GR="Water Essence",iu="Corruption",Wo="Life",nu="Poison",mp="Doom",YR="Explosions",pp="Shielding",KR="Piercing",ru="Haste",ou="Slowing";let Vt=(()=>{class t{constructor(e,n,r,o,a,s,l,c){this.injector=e,this.logService=n,this.characterService=r,this.itemRepoService=o,this.inventoryService=a,this.homeService=s,this.titleCasePipe=c,this.killsByLocation={},this.autoTroubleUnlocked=!1,this.highestDamageTaken=0,this.highestDamageDealt=0,this.totalKills=0,this.skipEnemyAttack=0,this.godSlayersUnlocked=!1,this.godSlayersEnabled=!1,this.totalEnemies=0,this.battleMessageDismissed=!1,this.techniqueDevelopmentCounter=0,this.maxFamilyTechniques=0,this.statusEffects=[],this.potionCooldown=20,this.potionThreshold=50,this.foodCooldown=60,this.foodThresholdStatusType="health",this.foodThreshold=50,this.activeFormation="",this.formationDuration=0,this.formationCooldown=0,this.formationPower=0,this.battlesUnlocked=!1,this.lores=["metalLore","earthLore","waterLore","fireLore","woodLore"],this.elementalFactor=2,this.techniques=[{name:"Basic Strike",description:"A very simple strike that even the weakest mortal could perform.",ticksRequired:10,ticks:0,baseDamage:1,unlocked:!0,attribute:"strength",staminaCost:1},{name:cp,description:"A strike from the weapon in your right hand.",ticksRequired:6,ticks:0,baseDamage:2,unlocked:!1,attribute:"strength",staminaCost:10},{name:dp,description:"A strike from the weapon in your left hand.",ticksRequired:8,ticks:0,baseDamage:2,unlocked:!1,attribute:"strength",staminaCost:10}],this.monsterTypes=[{name:"spider",description:"",location:E.SmallTown,basePower:1,lootType:[te],techniques:[{name:"Sting",ticks:0,ticksRequired:15,baseDamage:1,unlocked:!0}]},{name:"rat",description:"",location:E.SmallTown,basePower:2,lootType:[te,Be],techniques:[{name:"Gnaw",ticks:0,ticksRequired:12,baseDamage:1,unlocked:!0}]},{name:"scorpion",description:"",location:E.Desert,basePower:3,lootType:[te],techniques:[{name:"Sting",ticks:0,ticksRequired:20,baseDamage:3,unlocked:!0},{name:"Claw Snap",ticks:0,ticksRequired:6,baseDamage:.1,unlocked:!0}]},{name:"lizard",description:"",location:E.Desert,basePower:5,lootType:[te,Be]},{name:"snake",description:"",location:E.Desert,basePower:8,element:"fire",lootType:[te,Be]},{name:"jack-o-lantern",description:"",location:E.LargeCity,basePower:10,element:"fire",lootType:[te,Je]},{name:"redcap",description:"",location:E.SmallTown,basePower:12,lootType:[te,Je],techniques:[{name:"Poke",ticks:0,ticksRequired:6,baseDamage:.2,unlocked:!0}]},{name:"gnome",description:"",location:E.LargeCity,basePower:15,element:"earth",lootType:[te,Je]},{name:"gremlin",description:"",location:E.SmallTown,basePower:18,lootType:[te,Je]},{name:"imp",description:"",location:E.LargeCity,basePower:20,element:"water",lootType:[te,Je]},{name:"ooze",description:"",location:E.Forest,basePower:30,lootType:[te],techniques:[{name:"Blorp",ticks:0,ticksRequired:6,baseDamage:.5,unlocked:!0},{name:"Consume",ticks:0,ticksRequired:30,baseDamage:2,effect:Wo,unlocked:!0}]},{name:"jackalope",description:"",location:E.Desert,basePower:40,lootType:[te,Be]},{name:"pixie",description:"",location:E.Forest,basePower:50,lootType:[te,K0]},{name:"goblin",description:"",location:E.Forest,basePower:100,lootType:[te,Je]},{name:"monkey",description:"",location:E.Jungle,basePower:100,element:"metal",lootType:[te,Be,K0]},{name:"boar",description:"",location:E.Forest,basePower:200,element:"water",lootType:[te,Be,Wi],techniques:[{name:"Charge",ticks:0,ticksRequired:60,baseDamage:5,unlocked:!0}]},{name:"skeleton",description:"",location:E.Mine,basePower:300,lootType:[te,Je]},{name:"zombie",description:"",location:E.Dungeon,basePower:400,lootType:[te,Je]},{name:"kelpie",description:"",location:E.SmallPond,basePower:500,element:"water",lootType:[te,Be]},{name:"bunyip",description:"",location:E.SmallPond,basePower:600,element:"water",lootType:[te,Be,Wi]},{name:"hobgoblin",description:"",location:E.LargeCity,basePower:700,lootType:[te,Je]},{name:"kobold",description:"",location:E.Mine,basePower:800,element:"earth",lootType:[te,Je]},{name:"chupacabra",description:"",location:E.Desert,basePower:900,lootType:[te,Be,Wi]},{name:"siren",description:"",location:E.SmallPond,basePower:1e3,element:"water",lootType:[te],techniques:[{name:"Drowning Call",ticks:0,ticksRequired:100,baseDamage:100,unlocked:!0}]},{name:"crocodile",description:"",location:E.SmallPond,basePower:1200,element:"water",lootType:[te,Be,Wi]},{name:"golem",description:"",location:E.LargeCity,basePower:1300,element:"earth",lootType:[te,tu],techniques:[{name:"Stomp",ticks:0,ticksRequired:20,baseDamage:3,unlocked:!0}]},{name:"incubus",description:"",location:E.LargeCity,basePower:1400,lootType:[te,Je]},{name:"succubus",description:"",location:E.LargeCity,basePower:1500,lootType:[te,Je],techniques:[{name:"Seduction",ticks:0,ticksRequired:50,baseDamage:10,effect:Wo,unlocked:!0}]},{name:"jackal",description:"",location:E.Desert,basePower:1800,lootType:[te,Be]},{name:"boogeyman",description:"",location:E.LargeCity,basePower:2e3,lootType:[te,Je]},{name:"basilisk",description:"",location:E.Desert,basePower:2100,element:"earth",lootType:[te,Be]},{name:"mogwai",description:"",location:E.LargeCity,basePower:2500,lootType:[te,Je]},{name:"ghoul",description:"",location:E.Dungeon,basePower:3e3,lootType:[te,Je],techniques:[{name:"Claw",ticks:0,ticksRequired:6,baseDamage:.5,unlocked:!0},{name:"Devour",ticks:0,ticksRequired:30,baseDamage:2,effect:Wo,unlocked:!0}]},{name:"orc",description:"",location:E.LargeCity,basePower:1e3,lootType:[te,Je]},{name:"tiger",description:"",location:E.Jungle,basePower:4e3,element:"wood",lootType:[te,Be]},{name:"hippo",description:"",location:E.SmallPond,basePower:5e3,lootType:[te,Be,Wi]},{name:"rakshasa",description:"",location:E.LargeCity,basePower:6e3,element:"wood",lootType:[te,Be,Je]},{name:"ghost",description:"",location:E.Dungeon,basePower:5e3,lootType:[te],techniques:[{name:"Haunt",ticks:0,ticksRequired:2,baseDamage:.1,unlocked:!0},{name:"Shriek",ticks:0,ticksRequired:10,baseDamage:1.2,unlocked:!0}]},{name:"centaur",description:"",location:E.Forest,basePower:8e3,element:"wood",lootType:[te,Je]},{name:"hellhound",description:"",location:E.Desert,basePower:9e3,element:"fire",lootType:[te,Be]},{name:"troll",description:"",location:E.Dungeon,basePower:1e4,lootType:[te,Je],techniques:[{name:"Club Swipe",ticks:0,ticksRequired:6,baseDamage:.5,unlocked:!0},{name:"Regrowth Bite",ticks:0,ticksRequired:30,baseDamage:2,effect:Wo,unlocked:!0}]},{name:"werewolf",description:"",location:E.Forest,basePower:11e3,lootType:[te,Be]},{name:"ogre",description:"",location:E.Dungeon,basePower:12e3,lootType:[te,Je],techniques:[{name:"Smash",ticks:0,ticksRequired:15,baseDamage:.8,unlocked:!0}]},{name:"manticore",description:"",location:E.Forest,basePower:15e3,element:"wood",lootType:[te,Be,Wi]},{name:"minotaur",description:"",location:E.Dungeon,basePower:18e3,element:"earth",lootType:[te,Be,Je]},{name:"merlion",description:"",location:E.Beach,basePower:2e4,element:"water",lootType:[te,Be]},{name:"mummy",description:"",location:E.Desert,basePower:3e4,lootType:[te,Je]},{name:"landshark",description:"",location:E.Beach,basePower:4e4,lootType:[te,Be]},{name:"bugbear",description:"",location:E.Forest,basePower:5e4,lootType:[te,Be]},{name:"cavebear",description:"",location:E.MountainTops,basePower:7e4,element:"earth",lootType:[te,Be,Wi]},{name:"yeti",description:"",location:E.MountainTops,basePower:8e4,element:"metal",lootType:[te,Be]},{name:"dreameater",description:"",location:E.Dungeon,basePower:1e5,lootType:[te],techniques:[{name:"Nightmare",ticks:0,ticksRequired:6,baseDamage:.5,unlocked:!0}]},{name:"unicorn",description:"",location:E.Forest,basePower:12e4,element:"wood",lootType:[te,Be,Wi]},{name:"banshee",description:"",location:E.Dungeon,basePower:14e4,lootType:[te]},{name:"harpy",description:"",location:E.MountainTops,basePower:15e4,lootType:[te]},{name:"phoenix",description:"",location:E.Desert,basePower:18e4,element:"fire",lootType:[te,Be]},{name:"sphinx",description:"",location:E.Desert,basePower:2e5,element:"fire",lootType:[te,Be,tu]},{name:"oni",description:"",location:E.Dungeon,basePower:3e5,lootType:[te,Je]},{name:"leshy",description:"",location:E.Forest,basePower:3e5,element:"wood",lootType:[te,Je]},{name:"chimaera",description:"",location:E.Dungeon,basePower:4e5,element:"wood",lootType:[te,Be,Wi]},{name:"undine",description:"",location:E.DeepSea,basePower:5e5,element:"water",lootType:[te,Je],techniques:[{name:"Splash",ticks:0,ticksRequired:6,baseDamage:.5,unlocked:!0},{name:"Drown",ticks:0,ticksRequired:600,baseDamage:1e3,unlocked:!0}]},{name:"cyclops",description:"",location:E.MountainTops,basePower:6e5,element:"metal",lootType:[te,Je],techniques:[{name:"Clobber",ticks:0,ticksRequired:20,baseDamage:2,unlocked:!0}]},{name:"nyuk",description:"",location:E.Dungeon,basePower:7e5,lootType:[te,Je]},{name:"wendigo",description:"",location:E.Forest,basePower:8e5,element:"wood",lootType:[te,Be]},{name:"behemoth",description:"",location:E.Desert,basePower:8e5,lootType:[te,Be,Wi]},{name:"dinosaur",description:"",location:E.Jungle,basePower:1e6,lootType:[te,Be,Wi]},{name:"wyvern",description:"",location:E.MountainTops,basePower:2e6,lootType:[te,Be]},{name:"doomworm",description:"",location:E.Desert,basePower:3e6,element:"earth",lootType:[te,Be,Wi,tu],techniques:[{name:"Swallow",ticks:0,ticksRequired:200,baseDamage:1e3,unlocked:!0}]},{name:"lich",description:"",location:E.Dungeon,basePower:5e6,element:"metal",lootType:[te,Je],techniques:[{name:"Magic Missile",ticks:0,ticksRequired:6,baseDamage:.5,unlocked:!0},{name:"Fireball",ticks:0,ticksRequired:40,baseDamage:8,unlocked:!0},{name:"Lifesteal",ticks:0,ticksRequired:40,baseDamage:8,effect:Wo,unlocked:!0}]},{name:"thunderbird",description:"",location:E.MountainTops,basePower:8e6,lootType:[te,Be],techniques:[{name:"Zap",ticks:0,ticksRequired:6,baseDamage:.5,unlocked:!0},{name:"Thunderbolt",ticks:0,ticksRequired:40,baseDamage:8,unlocked:!0}]},{name:"vampire",description:"",location:E.Dungeon,basePower:1e7,lootType:[te,Je],techniques:[{name:"Blood Drain",ticks:0,ticksRequired:10,baseDamage:.2,effect:Wo,unlocked:!0}]},{name:"beholder",description:"",location:E.Dungeon,basePower:15e6,lootType:[te,Je],techniques:[{name:"Gaze",ticks:0,ticksRequired:4,baseDamage:.5,unlocked:!0},{name:"Magic Blast",ticks:0,ticksRequired:25,baseDamage:3,unlocked:!0}]},{name:"hydra",description:"",location:E.DeepSea,basePower:2e7,element:"water",lootType:[te,Be,Wi],techniques:[{name:"Chomp!",ticks:0,ticksRequired:3,baseDamage:1,unlocked:!0}]},{name:"roc",description:"",location:E.MountainTops,basePower:4e7,lootType:[te,Be,Wi]},{name:"wyrm",description:"",location:E.MountainTops,basePower:5e7,lootType:[te,Be]},{name:"giant",description:"",location:E.MountainTops,basePower:6e7,element:"earth",lootType:[te,Je],techniques:[{name:"Stomp",ticks:0,ticksRequired:50,baseDamage:10,unlocked:!0}]},{name:"kraken",description:"",location:E.DeepSea,basePower:8e7,element:"water",lootType:[te,Be],techniques:[{name:"Strangulation",ticks:0,ticksRequired:2,baseDamage:.1,unlocked:!0},{name:"Tentacle Lash",ticks:0,ticksRequired:10,baseDamage:1,unlocked:!0}]},{name:"pazuzu",description:"",location:E.MountainTops,basePower:1e8,lootType:[te,Be,Je],techniques:[{name:"Swift Strike",ticks:0,ticksRequired:5,baseDamage:.5,unlocked:!0}]},{name:"titan",description:"",location:E.MountainTops,basePower:2e8,element:"metal",lootType:[te,Je,tu],techniques:[{name:"Gigastomp",ticks:0,ticksRequired:100,baseDamage:100,unlocked:!0}]},{name:"leviathan",description:"",location:E.DeepSea,basePower:5e8,element:"water",lootType:[te,Be,Wi],techniques:[{name:"Wave Slap",ticks:0,ticksRequired:8,baseDamage:1,unlocked:!0},{name:"Tsunami",ticks:0,ticksRequired:1e3,baseDamage:100,unlocked:!0}]},{name:"stormbringer",description:"",location:E.MountainTops,basePower:1e9,lootType:[te,Be,Wi],techniques:[{name:"Storm Strike",ticks:0,ticksRequired:5,baseDamage:.5,unlocked:!0},{name:"Hurrican Force",ticks:0,ticksRequired:100,baseDamage:10,unlocked:!0}]}],this.monsterQualities=["an infant","a puny","a tiny","a pathetic","a sickly","a starving","a wimpy","a frail","an ill","a weak","a badly wounded","a tired","a poor","a small","a despondent","a frightened","a skinny","a sad","a stinking","a scatterbrained","a mediocre","a typical","an average","a healthy","a big","a tough","a crazy","a strong","a fearsome","a gutsy","a quick","a hefty","a grotesque","a large","a brawny","an athletic","a muscular","a rugged","a resilient","an angry","a clever","a fierce","a brutal","a devious","a mighty","a frightening","a massive","a powerful","a noble","a magical","a dangerous","a murderous","a terrifying","a gargantuan","a flame-shrouded","an abominable","a monstrous","a dominating","a demonic","a diabolical","an infernal"],setTimeout(()=>this.hellService=this.injector.get(We)),setTimeout(()=>this.locationService=this.injector.get(Ml)),this.bigNumberPipe=this.injector.get(It),this.enemies=[],this.currentEnemy=null,this.kills=0,this.godSlayerKills=0,this.yearlyMonsterDay=0,l.tickSubject.subscribe(()=>{if(this.ageFormation(),this.yearlyMonsterDay++,this.homeService.homeValue===$e.SquatterTent&&this.yearlyMonsterDay>100)return this.yearlyMonsterDay=0,this.logService.injury(D.EVENT,"The shabby tent you live in has attracted some nasty mice."),void this.addMouse();if(this.homeService.homeValue===$e.OwnTent&&this.yearlyMonsterDay>150)return this.yearlyMonsterDay=0,this.logService.injury(D.EVENT,"Your increased wealth has attracted a ruffian who's looking to steal your money."),void this.addRuffian();if(this.yearlyMonsterDay>=365){if(this.yearlyMonsterDay=0,""===this.activeFormation){const d=this.characterService.itemPouches.find(u=>"formationKit"===u.item?.type&&"repulsion"===u.item?.effect&&u.quantity>0);d&&d.item&&(d.quantity--,this.inventoryService.useItem(d.item))}"repulsion"!==this.activeFormation&&this.trouble()}}),l.battleTickSubject.subscribe(()=>{if(this.ageFormation(),!this.characterService.dead){this.usePouchItems();for(const d in this.characterService.status){const p=this.characterService.status[d];p.value+=p.battleTickRecovery}this.characterService.checkOverage(),null===this.currentEnemy&&this.enemies.length>0&&(this.currentEnemy=this.enemies[0]),this.handleYourTechniques(),"stealth"!==this.activeFormation&&this.handleEnemyTechniques(),this.characterService.checkForDeath()&&this.clearEnemies()}}),l.longTickSubject.subscribe(()=>{for(const u of this.enemies)u.imageFile||(u.imageFile="assets/images/monsters/"+u.baseName+".png");this.techniques[1].unlocked=null!==this.characterService.equipment.rightHand,this.techniques[2].unlocked=null!==this.characterService.equipment.leftHand;const d=this.techniques.filter(u=>!0===u.familyTechnique);this.techniqueDevelopmentCounter>2e4*Math.pow(10,d.length)&&d.length<this.maxFamilyTechniques&&(this.developNewTechnique(),this.techniqueDevelopmentCounter=0)}),l.reincarnateSubject.subscribe(()=>{this.reset()})}ageFormation(){this.formationDuration>0&&this.formationDuration--,this.formationCooldown>0&&this.formationCooldown--,this.formationDuration<=0&&(this.activeFormation="",this.formationPower=0,this.formationDuration=0)}reset(){this.clearEnemies(),this.kills=0,this.killsByLocation={},this.godSlayerKills=0,this.yearlyMonsterDay=0;for(const e of this.characterService.itemPouches)e.item&&(e.item.cooldown=0)}getProperties(){return{enemies:this.enemies,currentEnemy:this.currentEnemy,kills:this.kills,killsByLocation:this.killsByLocation,godSlayerKills:this.godSlayerKills,totalKills:this.totalKills,autoTroubleUnlocked:this.autoTroubleUnlocked,monthlyMonsterDay:this.yearlyMonsterDay,highestDamageDealt:this.highestDamageDealt,highestDamageTaken:this.highestDamageTaken,godSlayersUnlocked:this.godSlayersUnlocked,godSlayersEnabled:this.godSlayersEnabled,totalEnemies:this.totalEnemies,battleMessageDismissed:this.battleMessageDismissed,techniques:this.techniques,techniqueDevelopmentCounter:this.techniqueDevelopmentCounter,maxFamilyTechniques:this.maxFamilyTechniques,statusEffects:this.statusEffects,potionCooldown:this.potionCooldown,potionThreshold:this.potionThreshold,foodCooldown:this.foodCooldown,foodThresholdStatusType:this.foodThresholdStatusType,foodThreshold:this.foodThreshold,activeFormation:this.activeFormation,formationDuration:this.formationDuration,formationCooldown:this.formationCooldown,formationPower:this.formationPower,battlesUnlocked:this.battlesUnlocked}}setProperties(e){if(this.enemies=e.enemies,this.kills=e.kills,this.killsByLocation=e.killsByLocation,this.godSlayerKills=e.godSlayerKills,this.totalKills=e.totalKills,this.autoTroubleUnlocked=e.autoTroubleUnlocked,this.yearlyMonsterDay=e.monthlyMonsterDay,this.highestDamageDealt=e.highestDamageDealt,this.highestDamageTaken=e.highestDamageTaken,this.godSlayersUnlocked=e.godSlayersUnlocked,this.godSlayersEnabled=e.godSlayersEnabled,this.totalEnemies=e.totalEnemies,this.battleMessageDismissed=e.battleMessageDismissed,this.techniques=e.techniques,this.techniqueDevelopmentCounter=e.techniqueDevelopmentCounter,this.maxFamilyTechniques=e.maxFamilyTechniques,this.statusEffects=e.statusEffects,this.potionCooldown=e.potionCooldown,this.potionThreshold=e.potionThreshold,this.foodCooldown=e.foodCooldown,this.foodThresholdStatusType=e.foodThresholdStatusType,this.foodThreshold=e.foodThreshold,this.activeFormation=e.activeFormation,this.formationDuration=e.formationDuration,this.formationCooldown=e.formationCooldown,this.formationPower=e.formationPower,this.battlesUnlocked=e.battlesUnlocked,this.enemies.length>0)for(const n of this.enemies)n.name===e.currentEnemy?.name&&(this.currentEnemy=n)}usePouchItems(){let e=!1;for(let n=0;n<this.characterService.itemPouches.length;n++){const r=this.characterService.itemPouches[n];if(r&&r.item&&0!==r.quantity&&r.item?.pouchable)if(""===this.activeFormation&&"formationKit"===r.item.type&&r.quantity>0)r.quantity--,this.inventoryService.useItem(r.item);else if((r.item.cooldown||0)<=0)if("potion"===r.item.type){const o=r.item.effect;this.characterService.status[o].value<this.characterService.status[o].max*(this.potionThreshold/100)&&(this.characterService.status[o].value+=r.item.increaseAmount||1,r.quantity--,r.item.cooldown=this.potionCooldown,e=!0)}else"food"===r.item.type&&this.characterService.status[this.foodThresholdStatusType].value<this.characterService.status[this.foodThresholdStatusType].max*(this.foodThreshold/100)&&(this.inventoryService.eatFood(r.item,1),r.quantity--,r.item.cooldown=this.foodCooldown,e=!0);else r.item.cooldown=(r.item?.cooldown||0)-1}e&&this.characterService.checkOverage()}developNewTechnique(){const e=["Northern","Southern","Eastern","Western","Brutal","Devastating","Flowing","Fierce","Verdant","Stealthy","Dragon's","Devilish","Angelic","Fearsome","Ancient","Traditional","Lucky","Imprudent","Reckless","Wild"],n=e[Math.floor(Math.random()*e.length)];let r=0,o=1;"Imprudent"===n?(r=10,o=2):"Reckless"===n?(r=100,o=4):"Wild"===n&&(r=1e3,o=10);const a=Object.keys(this.characterService.attackPower),s=a[Math.floor(Math.random()*a.length)];let l="";"strength"===s?l="Strong":"toughness"===s?l="Tough":"speed"===s?l="Swift":"intelligence"===s?l="Cunning":"charisma"===s?l="Charming":"spirituality"===s?l="Holy":"earthLore"===s?l="Stone":"metalLore"===s?l="Steel":"woodLore"===s?l="Oaken":"waterLore"===s?l="Icy":"fireLore"===s&&(l="Fiery");const c=["Fist","Strike","Kick","Blow","Slam","Slap","Smack","Pumelling","Barrage","Attack"],d=c[Math.floor(Math.random()*c.length)],u=5+Math.floor(10*Math.random()),p=Math.max(Math.floor(20*Math.random())-5,0),g=Math.max(Math.floor(10*Math.random())-5,0);g>1&&(o+=g/10);const m=[UR,zR,$R,WR,GR,nu,mp,YR,pp,KR,ru,ou],b=Math.floor(Math.random()*m.length*5);let C,w="";b<m.length&&(C=m[b],w=" of "+C),this.techniques.push({name:n+" "+l+" "+d+w,description:"A special family technique that can be passed to your descendants.",ticksRequired:u,ticks:0,baseDamage:1,unlocked:!0,attribute:s,familyTechnique:!0,staminaCost:p,healthCost:r,qiCost:g,extraMultiplier:o,effect:C}),this.logService.log(D.EVENT,"Enlightenment! Your combat experience has allowed you to develop a new family technique!")}forsakeTechnique(e){if(!e.familyTechnique)return;const n=this.techniques.indexOf(e);n>2&&this.techniques.splice(n,1)}addQiAttack(){this.techniques.find(e=>e.name===jR)||this.techniques.push({name:jR,description:"Focus your Qi into a concentrated blast. Each use of this ability requires 10 Qi.",ticksRequired:5,ticks:0,baseDamage:2,unlocked:!0,attribute:"intelligence",qiCost:10})}addPyroclasm(){this.techniques.find(e=>e.name===Q0)||this.techniques.push({name:Q0,description:"Focus your Qi and blast your enemies with heat so intense their children's children will get burned. Each use of this ability requires 10,000 Qi.",ticksRequired:20,ticks:0,baseDamage:1e5,unlocked:!0,attribute:"fireLore",qiCost:1e4})}addMetalFist(){this.techniques.find(e=>e.name===Z0)||this.techniques.push({name:Z0,description:"Focus your Qi and summon a massive metal fist to crush your enemy. Each use of this ability requires 10,000 Qi.",ticksRequired:20,ticks:0,baseDamage:1e5,unlocked:!0,attribute:"metalLore",qiCost:1e4})}addQiShield(){this.techniques.find(e=>e.name===up)||this.techniques.push({name:up,description:"Focus your Qi to form a protective shroud around your body, protecting you and decreasing the damage that you take. Each use of this ability requires 10 Qi.",ticksRequired:5,ticks:0,baseDamage:0,unlocked:!0,attribute:"intelligence",qiCost:10,statusEffect:{name:up,description:"A shield of concentrated qi that reduces damage taken.",ticksLeft:5,power:1}})}addFireShield(){this.techniques.find(e=>e.name===hp)||this.techniques.push({name:hp,description:"Bring forth your inner fire to form a blistering barrier around you. Each use of this ability requires 10,000 Qi.",ticksRequired:10,ticks:0,baseDamage:0,unlocked:!0,attribute:"fireLore",qiCost:1e4,statusEffect:{name:hp,description:"A blazing shield tha harms your enemies.",ticksLeft:10,power:1}})}addIceShield(){this.techniques.find(e=>e.name===fp)||this.techniques.push({name:fp,description:"Bring forth the ice inside you to form a freezing barrier around you that will stop your enemy's next attack. Each use of this ability requires 10,000 Qi.",ticksRequired:10,ticks:0,baseDamage:0,unlocked:!0,attribute:"waterLore",qiCost:1e4,statusEffect:{name:fp,description:"A frozen shield that will negate damage from the next enemy attack.",ticksLeft:10,power:1}})}handleEnemyTechniques(){for(const e of this.enemies){let n;if(e.statusEffects)for(let r=e.statusEffects.length-1;r>=0;r--)e.statusEffects[r].ticksLeft<=0?e.statusEffects.splice(r,1):e.statusEffects[r].name===nu?e.health-=.01*e.health:e.statusEffects[r].name===ou&&(n=e.statusEffects[r]),e.statusEffects[r].ticksLeft--;for(const r of e.techniques)r.ticks===r.ticksRequired?(this.enemyAttack(r,e),r.ticks=0):n?n.ticksLeft-=2:r.ticks++}}enemyAttack(e,n){if(this.skipEnemyAttack>0)return void this.skipEnemyAttack--;let r=e.baseDamage;r-=r*(this.characterService.yinYangBalance/2);let o=!1;for(let l=this.statusEffects.length-1;l>=0;l--)if(this.statusEffects[l].name===up)r/=2;else if(this.statusEffects[l].name===pp)r/=2;else if(this.statusEffects[l].name===hp){let c=Math.log(this.characterService.attributes.fireLore.value)/Math.log(100);c<1&&(c=1),c>10&&(c=10),r/=c,this.characterService.status.qi.value-=1e4,o=!0}else this.statusEffects[l].name===fp?(r=0,this.statusEffects.splice(l,1)):this.statusEffects[l].name===iu&&(r*=10);let a=this.characterService.defense;"defense"===this.activeFormation&&(a*=Math.ceil((this.formationPower+"").length/2)),a>=1&&(r/=Math.pow(a,.5)+Math.pow(1e6,(-r+a)/a));const s=this.titleCasePipe.transform(n.name);if(r>0&&(this.logService.injury(D.COMBAT,"Ow! "+s+" hit you for "+this.bigNumberPipe.transform(r)+" damage"),this.characterService.increaseAttribute("toughness",.01),o&&this.damageEnemy(r,"Your shield strikes back! "+s+" receives "+r+" damage.")),r>this.highestDamageTaken&&(this.highestDamageTaken=r),this.characterService.status.health.value-=r,e.effect)if("feeder"===e.effect&&this.hellService)if(void 0!==e.hitTracker&&e.hitTracker<2)e.hitTracker++;else{this.hellService.daysFasted=0;const l=this.characterService.status.health.value/4;this.logService.injury(D.COMBAT,"The hellfire burns as it goes down, damaging you for "+l+" extra damage."),this.characterService.status.health.value-=l}else"theft"===e.effect?this.characterService.updateMoney(0-this.characterService.money/10):e.effect===Wo&&(n.health+=.1*r);"survival"===this.activeFormation&&this.characterService.status.health.value<=0&&(this.activeFormation="",this.formationDuration=0,this.formationPower=0,this.characterService.status.health.value=1)}handleYourTechniques(){if(this.enemies.length<=0)return;let e=0;for(let r=this.statusEffects.length-1;r>=0;r--)this.statusEffects[r].ticksLeft--,this.statusEffects[r].ticksLeft<=0?this.statusEffects.splice(r,1):this.statusEffects[r].name===ru&&(e=this.statusEffects[r].power);let n=0;for(const r of this.techniques)if(r.familyTechnique&&n++,r.unlocked&&!r.disabled)if(r.ticks===r.ticksRequired){if(r.familyTechnique&&r.baseDamage++,this.youAttack(r),"stealth"===this.activeFormation&&(this.activeFormation="",this.formationDuration=0),0===this.enemies.length){for(const o of this.techniques)o.ticks=0;return void(this.statusEffects=[])}r.ticks=0}else r.ticks+=1+e;n<this.maxFamilyTechniques&&this.techniqueDevelopmentCounter++}youAttack(e){if(this.currentEnemy&&!e.disabled){if(e.qiCost){if(this.characterService.status.qi.value<e.qiCost)return;this.characterService.status.qi.value-=e.qiCost}if(e.staminaCost){if(this.characterService.status.stamina.value<e.staminaCost)return;this.characterService.status.stamina.value-=e.staminaCost}if(e.healthCost){if(this.characterService.status.health.value<=e.healthCost)return;this.characterService.status.health.value-=e.healthCost}if(e.statusEffect&&this.statusEffects.push({name:e.statusEffect.name,description:e.statusEffect.description,ticksLeft:e.statusEffect.ticksLeft,power:e.statusEffect.power}),this.currentEnemy&&this.characterService.status.health.value>0){let n=this.characterService.attackPower.strength||1;e.attribute&&(this.lores.includes(e.attribute)?n+=100*(this.characterService.attackPower[e.attribute]||1):n=this.characterService.attackPower[e.attribute]||1);let r=e.effect;e.name===cp?(r=this.characterService.equipment.rightHand?.effect,this.characterService.equipment.rightHand&&(n=Math.floor(n*Math.sqrt(this.characterService.equipment.rightHand.weaponStats?.baseDamage||1))||1)):e.name===dp&&(r=this.characterService.equipment.leftHand?.effect,this.characterService.equipment.leftHand&&(n=Math.floor(n*Math.sqrt(this.characterService.equipment.leftHand.weaponStats?.baseDamage||1))||1));let o=n*e.baseDamage,a=this.currentEnemy.defense;if(this.characterService.status.nutrition.value>.8*this.characterService.status.nutrition.max&&(o*=1.2),e.extraMultiplier&&(o*=e.extraMultiplier),r===iu){o*=10;const c={name:iu,description:"Your corruption has left you vulnerable.",ticksLeft:10,power:1},d=this.statusEffects.find(u=>u.name===iu);d?d.ticksLeft+=c.ticksLeft:this.statusEffects.push(c)}else if(r===Wo){const c=.01*o;this.logService.log(D.COMBAT,"Your attack healed you for "+c+" as you struck the enemy."),this.characterService.status.health.value+=c,this.characterService.checkOverage()}else if(r===UR)this.currentEnemy.element&&("metal"===this.currentEnemy.element||"wood"===this.currentEnemy.element?o*=this.elementalFactor:("water"===this.currentEnemy.element||"earth"===this.currentEnemy.element)&&(o/=this.elementalFactor));else if(r===WR)this.currentEnemy.element&&("water"===this.currentEnemy.element||"earth"===this.currentEnemy.element?o*=this.elementalFactor:("metal"===this.currentEnemy.element||"fire"===this.currentEnemy.element)&&(o/=this.elementalFactor));else if(r===GR)this.currentEnemy.element&&("fire"===this.currentEnemy.element||"metal"===this.currentEnemy.element?o*=this.elementalFactor:("wood"===this.currentEnemy.element||"earth"===this.currentEnemy.element)&&(o/=this.elementalFactor));else if(r===$R)this.currentEnemy.element&&("wood"===this.currentEnemy.element||"earth"===this.currentEnemy.element?o*=this.elementalFactor:("fire"===this.currentEnemy.element||"water"===this.currentEnemy.element)&&(o/=this.elementalFactor));else if(r===zR)this.currentEnemy.element&&("water"===this.currentEnemy.element||"fire"===this.currentEnemy.element?o*=this.elementalFactor:("wood"===this.currentEnemy.element||"metal"===this.currentEnemy.element)&&(o/=this.elementalFactor));else if(r===nu){const c={name:nu,description:"Poison is sapping away at this creature's health.",ticksLeft:10,power:1};if(this.currentEnemy.statusEffects){const d=this.currentEnemy.statusEffects.find(u=>u.name===nu);d?d.ticksLeft+=c.ticksLeft:this.currentEnemy.statusEffects.push(c)}else this.currentEnemy.statusEffects=[c]}else if(r===mp){const c={name:mp,description:"Doom is coming for this creature.",ticksLeft:1e3,power:1};if(this.currentEnemy.statusEffects){const d=this.currentEnemy.statusEffects.find(u=>u.name===mp);d?(d.power+=d.power,d.power>3&&(o*=d.power)):this.currentEnemy.statusEffects.push(c)}else this.currentEnemy.statusEffects=[c]}else if(r===YR)o*=1e3,this.characterService.status.health.value-=o,e.name===cp?this.characterService.equipment.rightHand=null:e.name===dp&&(this.characterService.equipment.leftHand=null);else if(r===pp){const c={name:pp,description:"Your shielding technique is protecting you.",ticksLeft:10,power:1},d=this.statusEffects.find(u=>u.name===iu);d?d.ticksLeft+=c.ticksLeft:this.statusEffects.push(c)}else if(r===KR)a*=.5;else if(r===ru){const c={name:ru,description:"Your attacks strike more quickly, with less time between them.",ticksLeft:10,power:1},d=this.statusEffects.find(u=>u.name===ru);d?d.ticksLeft+=c.ticksLeft:this.statusEffects.push(c)}else if(r===ou){const c={name:ou,description:"Doom is coming for this creature.",ticksLeft:1e3,power:1};if(this.currentEnemy.statusEffects){const d=this.currentEnemy.statusEffects.find(u=>u.name===ou);d?d.ticksLeft+=c.ticksLeft:this.currentEnemy.statusEffects.push(c)}else this.currentEnemy.statusEffects=[c]}"power"===this.activeFormation&&(o*=Math.ceil((this.formationPower+"").length/2)),a>=1&&(o/=Math.pow(a,.2)+Math.pow(2e4,(-o+a)/a)),o<1&&(o=1);let s=!1;if(e.name===Z0){let c=Math.log(this.characterService.attributes.metalLore.value)/Math.log(50);c<1&&(c=1),c>100&&(c=100),o*=c}if(e.name===Q0){let c=Math.log(this.characterService.attributes.fireLore.value)/Math.log(100);c<1&&(c=1),c>10&&(c=10),o*=c,s=!0}o+=o*this.characterService.yinYangBalance,o>this.highestDamageDealt&&(this.highestDamageDealt=o),e.attribute&&this.characterService.increaseAttribute(e.attribute,.01);let l=this.damageEnemy(o);if(s)for(;l>0&&this.enemies.length>0;)this.currentEnemy=this.enemies[0],l=this.damageEnemy(l)}}}damageEnemy(e,n=""){if(!this.currentEnemy)return 0;const r=this.currentEnemy.health;return this.currentEnemy.health=Math.floor(this.currentEnemy.health-e),""===n&&(n="You attack "+this.titleCasePipe.transform(this.currentEnemy.name)+" for "+this.bigNumberPipe.transform(e)+" damage"),e-=r,this.currentEnemy.health<=0?(this.killCurrentEnemy(),(e-r)/2):(this.logService.log(D.COMBAT,n),0)}killCurrentEnemy(){if(!this.currentEnemy)return;this.kills++,this.totalKills++,this.killsByLocation[this.locationService.troubleTarget]=(this.killsByLocation[this.locationService.troubleTarget]||0)+1,this.logService.log(D.COMBAT,"You manage to kill "+this.titleCasePipe.transform(this.currentEnemy.name)),"Death itself"===this.currentEnemy.name&&this.characterService.toast("HURRAY! Check your inventory. You just got something special!",0);for(const n of this.currentEnemy.loot){const r=this.itemRepoService.getItemById(n.id);let o=1;"greed"===this.activeFormation&&(o+=Math.ceil((this.formationPower+"").length/3)),this.inventoryService.addItem(r||n,o)}this.defeatEffect(this.currentEnemy);const e=this.enemies.indexOf(this.currentEnemy);if(this.enemies.splice(e,1),this.currentEnemy=null,0===this.enemies.length)for(const n of this.characterService.itemPouches)n.item&&(n.item.cooldown=0)}fight(e){this.currentEnemy=e}addEnemy(e){this.totalEnemies++,this.logService.log(D.COMBAT,"A new enemy comes to battle: "+this.titleCasePipe.transform(e.name));let n=0;for(const r of this.enemies)r.baseName===e.baseName&&void 0!==r.index&&r.index>=n&&(n=r.index+1);n>0&&(e.name=e.name+" #"+(n+1)),e.index=n,this.enemies.push(e),null===this.currentEnemy&&(this.currentEnemy=this.enemies[0])}clearEnemies(){this.enemies=[],this.currentEnemy=null;for(const e of this.techniques)e.ticks=0}flee(){this.handleEnemyTechniques(),this.handleEnemyTechniques(),this.handleEnemyTechniques(),this.clearEnemies()}trouble(){if(0!==this.enemies.length)return;if(this.hellService&&this.hellService.inHell)return void this.hellService.trouble();if(!this.locationService)return;const e=this.locationService.troubleTarget,n=this.monsterTypes.filter(b=>e===b.location),r=n[(this.killsByLocation[e]||0)%n.length],a=((this.killsByLocation[e]||0)+1)/(5*((r.basePower+"").length+3));let s=Math.floor(a);s>=this.monsterQualities.length&&(s=this.monsterQualities.length-1);const l=r.basePower*a,c=this.monsterQualities[s]+" "+r.name,d=l*l*10,u=l/5,p=l/10,g=[];if(r.lootType){const b=Math.floor(Math.log2(l+2));r.lootType.includes(te)&&g.push(this.inventoryService.generateSpiritGem(b,r.element)),r.lootType.includes(Be)&&g.push(this.inventoryService.getHide(b)),r.lootType.includes(tu)&&g.push(this.inventoryService.getOre(b)),r.lootType.includes(K0)&&g.push(this.itemRepoService.items.pear),r.lootType.includes(Wi)&&g.push(this.inventoryService.getWildMeat(b)),r.lootType.includes(Je)&&g.push(this.inventoryService.getCoinPurse(Math.floor(l)))}const m=[];if(r.techniques)for(const b of r.techniques)m.push({name:b.name,ticks:b.ticks,ticksRequired:b.ticksRequired,baseDamage:u*b.baseDamage,unlocked:b.unlocked});else m.push({name:"Attack",ticks:0,ticksRequired:10,baseDamage:u,unlocked:!0});this.addEnemy({name:c,baseName:r.name,health:d,maxHealth:d,defense:p,loot:g,techniques:m})}addMouse(){this.addEnemy({name:"a gang of nasty mice",baseName:"mouse",health:8,maxHealth:8,defense:0,loot:[],techniques:[{name:"Gnawing Swarm",ticks:0,ticksRequired:8,baseDamage:13,unlocked:!0}]})}addRuffian(){this.addEnemy({name:"a ruffian",baseName:"ruffian",health:20,maxHealth:20,defense:0,loot:[],techniques:[{name:"Mugging",ticks:0,ticksRequired:20,baseDamage:1,effect:"theft",unlocked:!0}]})}addWolf(){this.addEnemy({name:"a hungry wolf",baseName:"wolf",health:20,maxHealth:20,defense:5,loot:[this.inventoryService.getHide()],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:3,unlocked:!0}]})}addArmy(){this.addEnemy({name:"an angry army",baseName:"army",health:2e11,maxHealth:2e11,defense:1e7,loot:[],techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:1e7,unlocked:!0}]})}addDeath(){this.addEnemy({name:"Death itself",baseName:"death",health:1e24,maxHealth:1e24,defense:3e8,loot:[this.itemRepoService.items.immortality],unique:!0,techniques:[{name:"Attack",ticks:0,ticksRequired:10,baseDamage:3e8,unlocked:!0}]})}defeatEffect(e){e.defeatEffect&&"respawnDouble"===e.defeatEffect&&(this.logService.log(D.COMBAT,"They just keep coming! Two more "+this.titleCasePipe.transform(e.name)+" appear!"),this.addEnemy({name:e.name,baseName:e.baseName,health:e.maxHealth,maxHealth:e.maxHealth,defense:e.defense,defeatEffect:e.defeatEffect,loot:e.loot,techniques:e.techniques}),this.addEnemy({name:e.name,baseName:e.baseName,health:e.maxHealth,maxHealth:e.maxHealth,defense:e.defense,defeatEffect:e.defeatEffect,loot:e.loot,techniques:e.techniques}))}static{this.\u0275fac=function(n){return new(n||t)(P(we),P(Xi),P(Ie),P(Un),P(he),P(zt),P(tt),P(Ai))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),tt=(()=>{class t{constructor(e,n){this.injector=e,this.dialog=n,this.tickSubject=new Y,this.homeTickSubject=new Y,this.inventoryTickSubject=new Y,this.activityTickSubject=new Y,this.battleTickSubject=new Y,this.reincarnateSubject=new Y,this.doneReincarnatingSubject=new Y,this.longTickSubject=new Y,this.displayValueTickSubject=new Y,this.yearOrLongTickSubject=new Y,this.pause=!0,this.tickDivider=10,this.tickCount=0,this.totalTicks=0,this.unlockFastSpeed=!1,this.unlockFasterSpeed=!1,this.unlockFastestSpeed=!1,this.topDivider=10,this.unlockAgeSpeed=!1,this.unlockPlaytimeSpeed=!1,this.lastTime=(new Date).getTime(),this.bankedTicks=0,this.offlineDivider=10,this.useBankedTicks=!0,this.scientificNotation=!1,this.earnedTicks=0,this.playMusic=!1,this.timeUnlocked=!1,this.importing=!1,this.gameLoading=!0,this.reincarnating=!1,this.daysSinceLongTick=0,this.daysSinceYearOrLongTick=0,this.lastUsedTickTime=0,setTimeout(()=>this.battleService=this.injector.get(Vt)),this.audio=new Audio("./assets/music/Shaolin-Dub-Rising-Sun-Beat.mp3"),this.audio.volume=.2,this.audio.loop=!0}getProperties(){return{unlockFastSpeed:this.unlockFastSpeed,unlockFasterSpeed:this.unlockFasterSpeed,unlockFastestSpeed:this.unlockFastestSpeed,unlockAgeSpeed:this.unlockAgeSpeed,unlockPlaytimeSpeed:this.unlockPlaytimeSpeed,offlineDivider:this.offlineDivider,lastTime:this.lastTime,tickDivider:this.tickDivider,pause:this.pause,bankedTicks:this.bankedTicks,totalTicks:this.totalTicks,useBankedTicks:this.useBankedTicks,scientificNotation:this.scientificNotation,playMusic:this.playMusic,timeUnlocked:this.timeUnlocked,daysSinceLongTick:this.daysSinceLongTick,daysSinceYearOrLongTick:this.daysSinceYearOrLongTick}}setProperties(e){this.unlockFastSpeed=e.unlockFastSpeed,this.unlockFasterSpeed=e.unlockFasterSpeed,this.unlockFastestSpeed=e.unlockFastestSpeed,this.topDivider=10,this.unlockFastestSpeed?this.topDivider=1:this.unlockFasterSpeed?this.topDivider=2:this.unlockFastSpeed&&(this.topDivider=5),this.unlockAgeSpeed=e.unlockAgeSpeed,this.unlockPlaytimeSpeed=e.unlockPlaytimeSpeed,this.tickDivider=e.tickDivider,this.offlineDivider=e.offlineDivider,this.lastTime=e.lastTime;const n=(new Date).getTime();this.earnedTicks=(n-this.lastTime)/(25*this.offlineDivider),this.bankedTicks=e.bankedTicks+this.earnedTicks,this.lastTime=n,this.totalTicks=e.totalTicks,this.useBankedTicks=e.useBankedTicks,this.scientificNotation=e.scientificNotation,this.playMusic=e.playMusic,this.timeUnlocked=e.timeUnlocked,this.daysSinceLongTick=e.daysSinceLongTick,this.daysSinceYearOrLongTick=e.daysSinceYearOrLongTick,this.gameLoading?(this.pause=!0,this.gameLoading=!1):this.pause=e.pause}playAudio(){this.playMusic?this.audio.play():this.audio.pause()}start(){this.characterService||(this.characterService=this.injector.get(Ie)),this.playAudio(),setTimeout(()=>this.handleTimeout(),25),setTimeout(()=>this.handleLongTickTimeout(),500),setTimeout(()=>this.handleDisplayValueTickTimeout(),250)}handleDisplayValueTickTimeout(){this.displayValueTickSubject.next(),setTimeout(()=>this.handleDisplayValueTickTimeout(),250)}handleLongTickTimeout(){this.longTickSubject.next(this.daysSinceLongTick),this.daysSinceLongTick=0,this.yearOrLongTickSubject.next(this.daysSinceYearOrLongTick),this.daysSinceYearOrLongTick=0,setTimeout(()=>this.handleLongTickTimeout(),500)}handleTimeout(){const e=(new Date).getTime(),n=e-this.lastTime;this.lastTime=e,this.bankedTicks+=n/25;let r=0;this.useBankedTicks&&!this.pause&&this.tickDivider<40?(r=Math.floor(this.bankedTicks/this.tickDivider),r>10&&(r=10),this.bankedTicks-=r*this.tickDivider):!this.pause&&this.lastUsedTickTime<e-25*this.tickDivider&&(this.bankedTicks-=this.tickDivider,r=1);for(let o=0;o<r;o++)this.tick(),this.lastUsedTickTime=e;setTimeout(()=>this.handleTimeout(),25)}tick(){this.daysSinceLongTick++,this.daysSinceYearOrLongTick++,this.daysSinceYearOrLongTick>=365&&(this.yearOrLongTickSubject.next(this.daysSinceYearOrLongTick),this.daysSinceYearOrLongTick=0),this.battleService&&this.battleService.enemies.length>0?this.battleTickSubject.next(1):(this.totalTicks++,this.inventoryTickSubject.next(1),this.activityTickSubject.next(1),this.homeTickSubject.next(1),this.tickSubject.next(1)),this.reincarnating&&(this.reincarnateSubject.next(1),this.reincarnating=!1,this.doneReincarnatingSubject.next(1))}static{this.\u0275fac=function(n){return new(n||t)(P(we),P(Ht))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var X0=function(t){return t.Standard="STANDARD",t.Injury="INJURY",t}(X0||{}),D=function(t){return t.STORY="Story",t.EVENT="Event",t.COMBAT="Combat",t.CRAFTING="Crafting",t.FOLLOWER="Follower",t}(D||{});let Xi=(()=>{class t{constructor(e){this.topicProperties=Object.values(D).reduce((n,r)=>({...n,[r]:{enabled:[D.STORY,D.EVENT].includes(r),hasNewMessages:!1}}),{}),this.logs=Object.values(D).reduce((n,r)=>({...n,[r]:[]}),{}),this.currentLog=[],this.startingStoryLogEntries=["Once in a very long while, a soul emerges from the chaos that is destined for immortality.","You are such a soul.","Your journey to immortality begins as a humble youth leaves home to experience the world.","Choose the activities that will help you cultivate the attributes of an immortal.","Be careful, the world can be a dangerous place.","It may take you many reincarnations before you achieve your goals.","With each new life you will rise with greater aptitudes that allow you to learn and grow faster.","Destiny cannot be denied.","One day, you will be immortal!"],this.longTickCounter=0,e.tickSubject.subscribe(()=>{this.updateLogTopics()}),e.longTickSubject.subscribe(()=>{if(this.startingStoryLogEntries.length>0){if(!(this.longTickCounter>10))return void this.longTickCounter++;this.longTickCounter=0,this.log(D.STORY,this.startingStoryLogEntries[0]),this.startingStoryLogEntries.splice(0,1)}})}log(e,n){setTimeout(()=>this.fullLog(e,X0.Standard,n))}injury(e,n){setTimeout(()=>this.fullLog(e,X0.Injury,n))}fullLog(e,n,r){const o=this.logs[e],a=Date.now(),s=r.replace("<br>"," ");this.isRepeat(s,a,o)?o[o.length-1].repeat=(o[o.length-1].repeat||1)+1:o.push({message:s,type:n,topic:e,timestamp:a}),this.topicProperties[e].enabled||(this.topicProperties[e].hasNewMessages=!0)}isRepeat(e,n,r){return r.length>0&&n-r[r.length-1].timestamp<=5e3&&e===r[r.length-1].message}getProperties(){return{logTopics:Object.entries(this.topicProperties).filter(e=>e[1].enabled).map(e=>e[0]).map(e=>e.toUpperCase()),storyLog:this.logs[D.STORY],startingStoryLogEntries:this.startingStoryLogEntries}}setProperties(e){this.logs[D.STORY]=e.storyLog,e.logTopics.forEach(n=>{this.topicProperties[D[n]].enabled=!0}),this.startingStoryLogEntries=e.startingStoryLogEntries,this.updateLogTopics()}enableLogTopic(e,n){this.topicProperties[e].enabled=n,this.updateLogTopics()}updateLogTopics(){Object.values(D).forEach(e=>{e!==D.STORY&&(this.logs[e]=this.logs[e].slice(-300)),this.topicProperties[e].enabled&&(this.topicProperties[e].hasNewMessages=!1)}),this.currentLog=Object.keys(this.logs).map(e=>e).filter(e=>this.topicProperties[e].enabled).flatMap(e=>this.logs[e]).sort((e,n)=>n.timestamp-e.timestamp).slice(0,299)}static{this.\u0275fac=function(n){return new(n||t)(P(tt))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const VQ=["mat-button",""],qQ=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],jQ=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],zQ=["mat-icon-button",""],$Q=["*"],WQ=new B("MAT_BUTTON_CONFIG"),GQ=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}];let XR=(()=>{class t{_elementRef=_(xe);_ngZone=_(ce);_animationMode=_(Sn,{optional:!0});_focusMonitor=_(Bm);_rippleLoader=_(h7);_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;constructor(){_(jo).load(g0);const e=_(WQ,{optional:!0}),n=this._elementRef.nativeElement,r=n.classList;this.disabledInteractive=e?.disabledInteractive??!1,this.color=e?.color??null,this._rippleLoader?.configureRipple(n,{className:"mat-mdc-button-ripple"});for(const{attribute:o,mdcClasses:a}of GQ)n.hasAttribute(o)&&r.add(...a)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",n){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,n):this._elementRef.nativeElement.focus(n)}_getAriaDisabled(){return null!=this.ariaDisabled?this.ariaDisabled:!(!this.disabled||!this.disabledInteractive)||null}_getDisabledAttribute(){return!(this.disabledInteractive||!this.disabled)||null}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Oe],disabled:[2,"disabled","disabled",Oe],ariaDisabled:[2,"aria-disabled","ariaDisabled",Oe],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Oe]}})}return t})(),YQ=(()=>{class t extends XR{static \u0275fac=(()=>{let e;return function(r){return(e||(e=xt(t)))(r||t)}})();static \u0275cmp=ne({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(n,r){2&n&&(Me("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),Ia(r.color?"mat-"+r.color:""),ot("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[Le],attrs:VQ,ngContentSelectors:jQ,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,r){1&n&&(Dn(qQ),L(0,"span",0),di(1),h(2,"span",1),di(3,1),f(),di(4,2),L(5,"span",2)(6,"span",3)),2&n&&ot("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 12px);height:var(--mdc-text-button-container-height, 40px);font-family:var(--mdc-text-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display, block)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-filled-button-container-height, 40px);font-family:var(--mdc-filled-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-filled-button-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display, block)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-sys-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-filled-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-sys-level1));height:var(--mdc-protected-button-container-height, 40px);font-family:var(--mdc-protected-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-protected-button-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display, block)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-sys-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-protected-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-outlined-button-container-height, 40px);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-sys-corner-full));border-width:var(--mdc-outlined-button-outline-width, 1px);padding:0 var(--mat-outlined-button-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display, block)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-sys-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mdc-outlined-button-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}',"@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}"],encapsulation:2,changeDetection:0})}return t})(),QQ=(()=>{class t extends XR{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(n,r){2&n&&(Me("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),Ia(r.color?"mat-"+r.color:""),ot("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[Le],attrs:zQ,ngContentSelectors:$Q,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,r){1&n&&(Dn(),L(0,"span",0),di(1),L(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 40px);height:var(--mdc-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 40px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size, 24px);color:var(--mdc-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display, block)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',"@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}"],encapsulation:2,changeDetection:0})}return t})(),ZQ=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({imports:[vi,CP,vi]})}return t})();function XQ(t,i){if(1&t){const e=G();h(0,"div",1)(1,"button",2),x("click",function(){return M(e),I(S().action())}),y(2),f()()}if(2&t){const e=S();v(2),j(" ",e.data.action," ")}}const JQ=["label"];function eZ(t,i){}const tZ=Math.pow(2,31)-1;class J0{_overlayRef;instance;containerInstance;_afterDismissed=new Y;_afterOpened=new Y;_onAction=new Y;_durationTimeoutId;_dismissedByAction=!1;constructor(i,e){this._overlayRef=e,this.containerInstance=i,i._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(i){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(i,tZ))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const JR=new B("MatSnackBarData");class gp{politeness="assertive";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"}let eF=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return t})(),tF=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return t})(),iF=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return t})(),iZ=(()=>{class t{snackBarRef=_(J0);data=_(JR);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(n,r){1&n&&(h(0,"div",0),y(1),f(),H(2,XQ,3,1,"div",1)),2&n&&(v(),j(" ",r.data.message,"\n"),v(),A(r.hasAction?2:-1))},dependencies:[YQ,eF,tF,iF],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}return t})();const eS="_mat-snack-bar-enter",tS="_mat-snack-bar-exit";let nF=(()=>{class t extends tp{_ngZone=_(ce);_elementRef=_(xe);_changeDetectorRef=_(ji);_platform=_(xi);_rendersRef;_animationsDisabled="NoopAnimations"===_(Sn,{optional:!0});snackBarConfig=_(gp);_document=_(Ge);_trackedModals=new Set;_enterFallback;_exitFallback;_renders=new Y;_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new Y;_onExit=new Y;_onEnter=new Y;_animationState="void";_live;_label;_role;_liveElementId=_(mo).getId("mat-snack-bar-container-live-");constructor(){super();const e=this.snackBarConfig;this._live="assertive"!==e.politeness||e.announcementMessage?"off"===e.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert")),this._rendersRef=Xh(()=>this._renders.next(),{manualCleanup:!0})}attachComponentPortal(e){this._assertNotAttached();const n=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),n}attachTemplatePortal(e){this._assertNotAttached();const n=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),n}attachDomPortal=e=>{this._assertNotAttached();const n=this._portalOutlet.attachDomPortal(e);return this._afterPortalAttached(),n};onAnimationEnd(e){e===tS?this._completeExit():e===eS&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?this._renders.pipe(pi(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(eS)))}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(eS)},200)))}exit(){return this._destroyed?ue(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?this._renders.pipe(pi(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(tS)))}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(tS),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit(),this._renders.complete(),this._rendersRef.destroy()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){const e=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(a=>e.classList.add(a)):e.classList.add(n)),this._exposeToModals();const r=this._label.nativeElement,o="mdc-snackbar__label";r.classList.toggle(o,!r.querySelector(`.${o}`))}_exposeToModals(){const e=this._liveElementId,n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){const o=n[r],a=o.getAttribute("aria-owns");this._trackedModals.add(o),a?-1===a.indexOf(e)&&o.setAttribute("aria-owns",a+" "+e):o.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{const n=e.getAttribute("aria-owns");if(n){const r=n.replace(this._liveElementId,"").trim();r.length>0?e.setAttribute("aria-owns",r):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;const e=this._elementRef.nativeElement,n=e.querySelector("[aria-hidden]"),r=e.querySelector("[aria-live]");if(n&&r){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&n.contains(document.activeElement)&&(o=document.activeElement),n.removeAttribute("aria-hidden"),r.appendChild(n),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(n,r){if(1&n&&(ti(Ua,7),ti(JQ,7)),2&n){let o;Ye(o=Ke())&&(r._portalOutlet=o.first),Ye(o=Ke())&&(r._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(n,r){1&n&&x("animationend",function(a){return r.onAnimationEnd(a.animationName)})("animationcancel",function(a){return r.onAnimationEnd(a.animationName)}),2&n&&ot("mat-snack-bar-container-enter","visible"===r._animationState)("mat-snack-bar-container-exit","hidden"===r._animationState)("mat-snack-bar-container-animations-enabled",!r._animationsDisabled)},features:[Le],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(n,r){1&n&&(h(0,"div",1)(1,"div",2,0)(3,"div",3),H(4,eZ,0,0,"ng-template",4),f(),L(5,"div"),f()()),2&n&&(v(5),Me("aria-live",r._live)("role",r._role)("id",r._liveElementId))},dependencies:[Ua],styles:["@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}"],encapsulation:2})}return t})();const rZ=new B("mat-snack-bar-default-options",{providedIn:"root",factory:function nZ(){return new gp}});let rF=(()=>{class t{_overlay=_(Mn);_live=_(mP);_injector=_(we);_breakpointObserver=_(QA);_parentSnackBar=_(t,{optional:!0,skipSelf:!0});_defaultConfig=_(rZ);_snackBarRefAtThisLevel=null;simpleSnackBarComponent=iZ;snackBarContainerComponent=nF;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(){}openFromComponent(e,n){return this._attach(e,n)}openFromTemplate(e,n){return this._attach(e,n)}open(e,n="",r){const o={...this._defaultConfig,...r};return o.data={message:e,action:n},o.announcementMessage===e&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,n){const o=we.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:gp,useValue:n}]}),a=new Pl(this.snackBarContainerComponent,n.viewContainerRef,o),s=e.attach(a);return s.instance.snackBarConfig=n,s.instance}_attach(e,n){const r={...new gp,...this._defaultConfig,...n},o=this._createOverlay(r),a=this._attachSnackBarContainer(o,r),s=new J0(a,o);if(e instanceof Ii){const l=new Rl(e,null,{$implicit:r.data,snackBarRef:s});s.instance=a.attachTemplatePortal(l)}else{const l=this._createInjector(r,s),c=new Pl(e,void 0,l),d=a.attachComponentPortal(c);s.instance=d.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(at(o.detachments())).subscribe(l=>{o.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&a._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(s,r),this._openedSnackBarRef=s,this._openedSnackBarRef}_animateSnackBar(e,n){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),n.duration&&n.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(n.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter()}_createOverlay(e){const n=new np;n.direction=e.direction;let r=this._overlay.position().global();const o="rtl"===e.direction,a="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!o||"end"===e.horizontalPosition&&o,s=!a&&"center"!==e.horizontalPosition;return a?r.left("0"):s?r.right("0"):r.centerHorizontally(),"top"===e.verticalPosition?r.top("0"):r.bottom("0"),n.positionStrategy=r,this._overlay.create(n)}_createInjector(e,n){return we.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:J0,useValue:n},{provide:JR,useValue:e.data}]})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function oZ(t,i){1&t&&(h(0,"div",1)(1,"span"),y(2,"Don't worry. Each mortal life is just a drop of time in the vast ocean of eternity. You are destined for immortality, and immortality you will achieve! Your experiences in your previous life will let you learn faster and grow stronger in the next life."),f()())}function aZ(t,i){if(1&t&&(h(0,"div",1)(1,"span"),y(2),f()()),2&t){const e=S();v(2),Fe(e.tip)}}let sZ=(()=>{class t{constructor(e,n,r,o,a,s){this.data=e,this.characterService=n,this.activityService=r,this.inventoryService=o,this.followerSerivce=a,this.impossibleTaskService=s,this.causeOfDeath="",this.attributeGains="",this.tip="",this.causeOfDeath=e.causeOfDeath,this.attributeGains=e.attributeGains,this.tip="",this.characterService.age<9125?this.tip="Life for an aspiring immortal can be brutal in the beginning. You may need to swallow your pride and do whatever is necessary to survive. A better home goes a long way toward keeping you safe.":this.characterService.age<12775&&this.characterService.attributes.intelligence.value<200?this.tip="Life for an aspiring immortal can be frustratingly short. Perhaps increasing your intelligence might open up new avenues for extending your life.":this.characterService.age<51100?this.tip="Life for an aspiring immortal can be frustratingly short. Farming some healthy food might give you just what you need.":this.activityService.completedApprenticeships.length<4&&this.characterService.attributes.spirituality.value<=0?this.tip="Blacksmithing, alchemy, woodworking, and leatherworking are all essential trades for an aspiring immortal. You should master them all.":this.characterService.attributes.spirituality.value<=0?this.tip="Balance is important to aspiring immortals. You'll need to develop all of your attributes if you want to progress in your journey.":this.characterService.attributes.spirituality.value<=10?this.tip="Developing your spirituality is essential. Focusing on your spiritual development will help you on your way to immortality.":this.inventoryService.autoWeaponMergeUnlocked?this.inventoryService.autoArmorMergeUnlocked?this.characterService.bloodlineRank<1||this.characterService.soulCoreRank()<1||this.characterService.meridianRank()<1?this.tip="Ascension provides a pathway to the power you'll need to achieve immortality. Each ascension technique benefits you in unique and important ways.":this.characterService.qiUnlocked?this.characterService.status.stamina.max<200?this.tip="Building up your stamina requires protein. Hunting of fishing can provide you with the food that you need to take on more challenging tasks.":this.followerSerivce.followers.length<5?this.tip="Recruiting more followers will help you advance toward immortality. Perhaps its time to return to politics to build up the charm you'll need to recruit.":this.followerSerivce.highestLevel<=1?this.tip="Your followers are too weak to give you the help you need. Perhaps its time to return to politics to build up the charm you'll need to train them to be stronger.":this.impossibleTaskService.impossibleTasksUnlocked?this.characterService.immortal||(this.tip="You're so close now. If you could only manage to do the impossible, you know you would achieve immortality."):this.tip="Ascensions are the key to your progress now. Push forward!":this.tip="Magic will be required for your journey to immortality. Only by balancing your mastery of the five elements will you be able to access magical powers.":this.tip="Your quest toward immortality will require battling mighty foes. Reliable armor will be critical to surviving.":this.tip="Your quest toward immortality will require battling mighty foes. Powerful weapons will be critical to defeating them."}showLifeSummaryChange(e){e.target instanceof HTMLInputElement&&(this.characterService.showLifeSummary=e.target.checked)}static{this.\u0275fac=function(n){return new(n||t)(T(eu),T(Ie),T(bt),T(he),T(Gt),T(ja))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-life-summary"]],decls:22,vars:5,consts:[[1,"darkMode","lifeSummary"],[1,"textDiv"],["type","checkbox","id","showLifeSummary",3,"change","checked"],["for","showLifeSummary"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"h3"),y(2,"A New Life Begins"),f(),L(3,"hr")(4,"br"),h(5,"div",1)(6,"span"),y(7),f()(),L(8,"br"),H(9,oZ,3,0,"div",1),L(10,"br"),h(11,"div",1)(12,"span"),y(13),f()(),L(14,"br"),H(15,aZ,3,1,"div",1),L(16,"br"),h(17,"div",1)(18,"span")(19,"input",2),x("change",function(a){return r.showLifeSummaryChange(a)}),f(),h(20,"label",3),y(21,"Show this summary at the start of each life"),f()()()()),2&n&&(v(7),j(" ",r.causeOfDeath," "),v(2),A(r.characterService.immortal?-1:9),v(4),Fe(r.attributeGains),v(2),A(r.characterService.showTips?15:-1),v(4),z("checked",r.characterService.showLifeSummary))},styles:[".textDiv[_ngcontent-%COMP%]{white-space:pre-wrap}.lifeSummary[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto}"]})}}return t})(),Ie=(()=>{class t{constructor(e,n,r,o){this.injector=e,this.mainLoopService=n,this.logService=r,this.dialog=o,this.camelToTitlePipe=new Vr,this.forceRebirth=!1,this.fatherGift=!1,this.lifespanTooltip="",this.maxMoney=99999e19,this.totalLives=1,this.dead=!1,this.attributeScalingLimit=10,this.attributeSoftCap=1e5,this.aptitudeGainDivider=5*Math.pow(1.5,9),this.condenseSoulCoreCost=10,this.condenseSoulCoreOriginalCost=10,this.reinforceMeridiansCost=1e3,this.reinforceMeridiansOriginalCost=1e3,this.bloodlineCost=1e3,this.bloodlineRank=0,this.qiUnlocked=!1,this.attackPower={strength:0,toughness:0,speed:0,intelligence:0,charisma:0,spirituality:0,earthLore:0,metalLore:0,woodLore:0,waterLore:0,fireLore:0},this.defense=0,this.healthBonusFood=0,this.healthBonusBath=0,this.healthBonusMagic=0,this.healthBonusSoul=0,this.empowermentFactor=1,this.empowermentMult=1,this.imperial=!1,this.immortal=!1,this.god=!1,this.easyMode=!1,this.ascensionUnlocked=!1,this.yinYangBoosted=!1,this.yin=1,this.yang=1,this.yinYangBalance=0,this.righteousWrathUnlocked=!1,this.bonusMuscles=!1,this.bonusBrains=!1,this.bonusHealth=!1,this.showLifeSummary=!0,this.showTips=!1,this.showUpdateAnimations=!0,this.dialogRef=null,this.moneyUpdates=0,this.statusToFlash=[],this.fengshuiScore=0,this.startingStaminaBoost=!1,this.attributes={strength:{description:"An immortal must have raw physical power.",value:1,displayValue:$(1),lifeStartValue:1,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"fitness_center"},toughness:{description:"An immortal must develop resilience to endure hardship.",value:1,displayValue:$(1),lifeStartValue:1,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"castle"},speed:{description:"An immortal must be quick of foot and hand.",value:1,displayValue:$(1),lifeStartValue:1,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"directions_run"},intelligence:{description:"An immortal must understand the workings of the universe.",value:1,displayValue:$(1),lifeStartValue:1,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"local_library"},charisma:{description:"An immortal must influence the hearts and minds of others.",value:1,displayValue:$(1),lifeStartValue:1,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"forum"},spirituality:{description:"An immortal must find deep connections to the divine.",value:0,displayValue:$(0),lifeStartValue:0,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"self_improvement"},earthLore:{description:"Understanding the earth and how to draw power and materials from it.",value:0,displayValue:$(0),lifeStartValue:0,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"landslide"},metalLore:{description:"Understanding metals and how to forge and use them.",value:0,displayValue:$(0),lifeStartValue:0,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"view_module"},woodLore:{description:"Understanding plants and how to grow and care for them.",value:0,displayValue:$(0),lifeStartValue:0,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"forest"},waterLore:{description:"Understanding potions and pills and how to make and use them.",value:0,displayValue:$(0),lifeStartValue:0,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"emoji_food_beverage"},fireLore:{description:"Burn! Burn! BURN!!!",value:0,displayValue:$(0),lifeStartValue:0,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"local_fire_department"},combatMastery:{description:"Mastery of combat skills.",value:0,displayValue:$(0),lifeStartValue:0,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"sports_martial_arts"},magicMastery:{description:"Mastery of magical skills.",value:0,displayValue:$(0),lifeStartValue:0,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"auto_awesome"},animalHandling:{description:"Skill in working with animals and monsters.",value:0,displayValue:$(0),lifeStartValue:0,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"cruelty_free"},performance:{description:"Skill in manipulating others with your voice.",value:0,displayValue:$(0),lifeStartValue:0,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"record_voice_over"},smithing:{description:"Skill with the forge and anvil.",value:0,displayValue:$(0),lifeStartValue:0,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"hardware"},alchemy:{description:"Mastery of potions and pills.",value:0,displayValue:$(0),lifeStartValue:0,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"emoji_food_beverage"},woodwork:{description:"Skill with saws and chisels.",value:0,displayValue:$(0),lifeStartValue:0,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"carpenter"},leatherwork:{description:"Skill shaping hides into useful items.",value:0,displayValue:$(0),lifeStartValue:0,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"pets"},formationMastery:{description:"Experience creating formation flags.",value:0,displayValue:$(0),lifeStartValue:0,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"flag"},cooking:{description:"Mastery of the wok and other kitchen essentials.",value:0,displayValue:$(0),lifeStartValue:0,aptitude:1,displayAptitude:$(1),aptitudeMult:1,icon:"soup_kitchen"}},this.status={health:{description:"Physical well-being. Take too much damage and you will die.",value:100,displayValue:$(100),max:100,displayMax:$(100),battleTickRecovery:0},stamina:{description:"Physical energy to accomplish tasks. Most activities use stamina, and if you let yourself run down you could get sick and have to stay in bed for a few days.",value:100,displayValue:$(100),max:100,displayMax:$(100),battleTickRecovery:1},qi:{description:"Magical energy required for mysterious spiritual activities.",value:0,displayValue:$(0),max:0,displayMax:$(0),battleTickRecovery:0},nutrition:{description:"Eating is essential to life. You will automatically eat whatever food you have available when you are hungry. If you run out of food, you will automatically spend some money on cheap scraps each day.",value:30,displayValue:$(30),max:30,displayMax:$(30),battleTickRecovery:0}},this.money=0,this.displayMoney=$(this.money),this.stashedMoney=0,this.hellMoney=0,this.age=6570,this.displayAge=$(this.age),this.baseLifespan=10950,this.foodLifespan=0,this.alchemyLifespan=0,this.statLifespan=0,this.spiritualityLifespan=0,this.magicLifespan=0,this.lifespan=this.baseLifespan+this.foodLifespan+this.alchemyLifespan+this.statLifespan+this.spiritualityLifespan+this.magicLifespan,this.displayLifespan=$(this.lifespan),this.equipment={head:null,body:null,leftHand:null,rightHand:null,legs:null,feet:null},this.stashedEquipment={head:null,body:null,leftHand:null,rightHand:null,legs:null,feet:null},this.itemPouches=[],this.highestMoney=0,this.highestAge=0,this.highestHealth=0,this.highestStamina=0,this.highestQi=0,this.highestAttributes={},setTimeout(()=>this.hellService=this.injector.get(We)),setTimeout(()=>this.activityService=this.injector.get(bt)),setTimeout(()=>this.achievementService=this.injector.get(sp)),this.snackBar=this.injector.get(rF),this.bigNumberPipe=this.injector.get(It);let a=this.mainLoopService.totalTicks;n.displayValueTickSubject.subscribe(()=>{this.displayMoney.set(this.money),this.displayAge.set(this.age),this.displayLifespan.set(this.lifespan);const s=Object.keys(this.status);for(const c of s){const d=c;this.status[d].displayValue.set(this.status[d].value),this.status[d].displayMax.set(this.status[d].max)}const l=Object.keys(this.attributes);for(const c of l){const d=c;this.attributes[d].displayValue.set(this.attributes[d].value),this.attributes[d].displayAptitude.set(this.attributes[d].aptitude)}}),n.longTickSubject.subscribe(s=>{const l=this.mainLoopService.totalTicks,c=3650;let d=Math.floor(s/c);a%c>l%c&&d++,d>0&&this.increaseBaseLifespan(d,70),a=l}),n.tickSubject.subscribe(()=>{this.dead||this.age++,this.checkForDeath()}),n.longTickSubject.subscribe(()=>{this.highestMoney<this.money&&(this.highestMoney=this.money),this.highestAge<this.age&&(this.highestAge=this.age),this.highestHealth<this.status.health.value&&(this.highestHealth=this.status.health.value),this.highestStamina<this.status.stamina.value&&(this.highestStamina=this.status.stamina.value),this.highestQi<this.status.qi.value&&(this.highestQi=this.status.qi.value);const s=Object.keys(this.attributes);for(const l in s)this.attributes[s[l]].aptitudeMult=this.getAptitudeMultipier(this.attributes[s[l]].aptitude),("strength"===s[l]||"speed"===s[l]||"toughness"===s[l])&&this.bonusMuscles&&(this.attributes[s[l]].aptitudeMult*=1e3),("intelligence"===s[l]||"charisma"===s[l])&&this.bonusBrains&&(this.attributes[s[l]].aptitudeMult*=1e3);if(!this.dead){if(this.recalculateDerivedStats(),this.hellService?.inHell&&this.hellService.currentHell===Z.CrushingBoulder&&!this.hellService.completedHellTasks.includes(Z.CrushingBoulder))for(const l in this.attackPower)this.attackPower[l]=1;this.setLifespanTooltip()}}),n.doneReincarnatingSubject.subscribe(()=>{this.dead=!1}),this.attributeUpdates={strength:0,toughness:0,speed:0,intelligence:0,charisma:0,spirituality:0,earthLore:0,metalLore:0,woodLore:0,waterLore:0,fireLore:0,animalHandling:0,combatMastery:0,magicMastery:0,performance:0,smithing:0,alchemy:0,woodwork:0,leatherwork:0,formationMastery:0,cooking:0}}checkForDeath(){let e="";if(this.forceRebirth)e="You release your soul from your body at the age of "+this.formatAge()+".";else if(this.age>=this.lifespan&&!this.immortal)e="You reach the end of your natural life and pass away from natural causes at the age of "+this.formatAge()+".";else if(this.status.nutrition.value<=0)if(this.status.nutrition.value=0,this.attributes.spirituality.value>0){const n=Math.max(.2*this.status.health.value,20);this.logService.injury(D.COMBAT,"You take "+this.bigNumberPipe.transform(n)+" damage from starvation."),this.status.health.value-=n,this.status.health.value<0&&(this.status.health.value=0),this.increaseAttribute("spirituality",.1),this.status.health.value<=0&&(this.immortal?this.hellService?.inHell&&(this.hellService.beaten=!0):e="You starve to death at the age of "+this.formatAge()+".")}else this.immortal||(e="You starve to death at the age of "+this.formatAge()+".");else this.status.health.value<=0&&!this.immortal?e=this.activityService.activityDeath?"You die from overwork at the age of "+this.formatAge()+".":"You succumb to your wounds and die at the age of "+this.formatAge()+".":this.immortal&&this.status.health.value<0&&(this.status.health.value=0);return""!==e&&(this.immortal||(this.logService.injury(D.EVENT,e),this.forceRebirth||this.logService.log(D.EVENT,"You have failed to achieve immortality and your life has ended. Don't worry, I'm sure you'll achieve immortality in your next life.")),this.dead=!0,this.showLifeSummary||this.toast("A new life begins."),this.reincarnate(e),this.mainLoopService.reincarnating=!0,this.forceRebirth=!1,this.immortal?this.logService.log(D.EVENT,"You are born anew, still an immortal but with the fresh vigor of youth."):(this.logService.log(D.EVENT,"Congratulations! The cycle of reincarnation has brought you back into the world. You have been born again. You are certain that lucky life number "+this.totalLives+" will be the one."),this.logService.log(D.EVENT,"It takes you a few years to grow up and remember your purpose: to become an immortal. You're all grown up now, so get to it!")),!0)}formatAge(){return Math.floor(this.age/365)+" years, "+this.age%365+" days"}setLifespanTooltip(){if(this.foodLifespan+this.alchemyLifespan+this.statLifespan+this.spiritualityLifespan+this.magicLifespan<=0)return void(this.lifespanTooltip="You have done nothing to extend your lifespan.");let e="Your base lifespan of "+this.yearify(this.baseLifespan)+" is extended by";this.immortal&&(e="You are immortal. If you had remained mortal, your base lifespan of "+this.yearify(this.baseLifespan)+" would be extended by"),this.foodLifespan>0&&(e+="<br>Healthy Food: "+this.yearify(this.foodLifespan)),this.alchemyLifespan>0&&(e+="<br>Alchemy: "+this.yearify(this.alchemyLifespan)),this.statLifespan>0&&(e+="<br>Basic Attributes: "+this.yearify(this.statLifespan)),this.spiritualityLifespan>0&&(e+="<br>Spirituality: "+this.yearify(this.spiritualityLifespan)),this.magicLifespan>0&&(e+="<br>Magic: "+this.yearify(this.magicLifespan)),this.lifespanTooltip=e}yearify(e){return e<365?"< 1 year":e<730?"1 year":this.bigNumberPipe.transform(Math.floor(e/365))+" years"}resetAptitudes(){const e=Object.keys(this.attributes);for(const n in e){const r=this.attributes[e[n]];r.lifeStartValue=0,r.aptitude=1+r.aptitude/this.aptitudeGainDivider,r.value=parseInt(n)<5?1:0}this.activityService.checkRequirements(!0),this.forceRebirth=!0,this.mainLoopService.tick()}condenseSoulCore(){this.aptitudeGainDivider<=5||(this.logService.log(D.STORY,"Your spirituality coelesces around the core of your soul, strengthening it and reforging it into something stronger."),this.logService.log(D.STORY,"You now gain additional aptitude each time you reincarnate."),this.condenseSoulCoreCost*=10,this.aptitudeGainDivider/=1.5,this.resetAptitudes())}soulCoreRank(){return Math.log10(this.condenseSoulCoreCost/this.condenseSoulCoreOriginalCost)}reinforceMeridians(){this.attributeScalingLimit>=10240||(this.logService.log(D.STORY,"The pathways that carry your chi through your body have been strengthened and reinforced."),this.logService.log(D.STORY,"Your aptitudes can now give you a greater increase when gaining attributes."),this.reinforceMeridiansCost*=10,this.attributeScalingLimit*=2,this.resetAptitudes())}meridianRank(){return Math.log10(this.reinforceMeridiansCost/this.reinforceMeridiansOriginalCost)}upgradeBloodline(){this.bloodlineRank>=9||(this.logService.log(D.STORY,"You sacrifice your current life to strengthen a permanent bloodline that will pass on to all of your descendants."),this.logService.log(D.STORY,"You will be reborn into your own family line and reap greater benefits from your previous lives."),this.bloodlineCost*=100,this.bloodlineRank++,this.resetAptitudes())}stashWeapons(){this.stashedEquipment.rightHand=this.equipment.rightHand,this.stashedEquipment.leftHand=this.equipment.leftHand,this.equipment.rightHand=null,this.equipment.leftHand=null}restoreWeapons(){this.equipment.rightHand=this.stashedEquipment.rightHand,this.equipment.leftHand=this.stashedEquipment.leftHand,this.stashedEquipment.rightHand=null,this.stashedEquipment.leftHand=null}stashArmor(){this.stashedEquipment.head=this.equipment.head,this.stashedEquipment.body=this.equipment.body,this.stashedEquipment.legs=this.equipment.legs,this.stashedEquipment.feet=this.equipment.feet,this.equipment.head=null,this.equipment.body=null,this.equipment.legs=null,this.equipment.feet=null}restoreArmor(){this.equipment.head=this.stashedEquipment.head,this.equipment.body=this.stashedEquipment.body,this.equipment.legs=this.stashedEquipment.legs,this.equipment.feet=this.stashedEquipment.feet,this.stashedEquipment.head=null,this.stashedEquipment.body=null,this.stashedEquipment.legs=null,this.stashedEquipment.feet=null}stashMoney(){this.stashedMoney=this.money,this.money=0}restoreMoney(){this.money=this.stashedMoney,this.stashedMoney=0}toast(e,n=5e3){const r=this.snackBar.open(e,"Close",{duration:n,horizontalPosition:"right",verticalPosition:"bottom",panelClass:["snackBar","darkMode"]});this.snackBarObservable=r.onAction().subscribe(()=>{this.snackBarObservable?.unsubscribe()})}reincarnate(e){this.totalLives++;let n="";const r=Object.keys(this.attributes);for(const a in r)if(this.attributes[r[a]].value>0){const s=(this.attributes[r[a]].value-(this.attributes[r[a]].lifeStartValue||0))/this.aptitudeGainDivider;if(s>0){this.attributes[r[a]].aptitude+=s;const l="Your aptitude for "+this.camelToTitlePipe.transform(r[a])+" increased by "+this.bigNumberPipe.transform(s)+"\n    New aptitude: "+this.bigNumberPipe.transform(this.attributes[r[a]].aptitude);this.logService.log(D.EVENT,l),n+=l+"\n    New starting value: "+this.bigNumberPipe.transform(this.getAttributeStartingValue(this.attributes[r[a]].value,this.attributes[r[a]].aptitude))+"\n"}this.attributes[r[a]].value=this.getAttributeStartingValue(this.attributes[r[a]].value,this.attributes[r[a]].aptitude),this.attributes[r[a]].lifeStartValue=this.attributes[r[a]].value}this.showLifeSummary&&(this.dialogRef&&this.dialogRef.close(),this.dialogRef=this.dialog.open(sZ,{width:"600px",data:{causeOfDeath:e,attributeGains:n},autoFocus:!1})),this.status.health.value=100,this.status.health.max=100,this.startingStaminaBoost?(this.status.stamina.value=1e3,this.status.stamina.max=1e3):(this.status.stamina.value=100,this.status.stamina.max=100),this.status.nutrition.value=30,this.status.nutrition.max=30,this.qiUnlocked?(this.status.qi.max=1,this.status.qi.value=1):(this.status.qi.max=0,this.status.qi.value=0),this.healthBonusFood=0,this.healthBonusBath=0,this.healthBonusMagic=0,this.age=6570,this.foodLifespan=0,this.alchemyLifespan=0,this.spiritualityLifespan=0,this.magicLifespan=0;let o=0;o+=this.attributes.strength.aptitude+this.attributes.toughness.aptitude+this.attributes.speed.aptitude+this.attributes.intelligence.aptitude+this.attributes.charisma.aptitude,this.statLifespan=this.getAptitudeMultipier(o/5),this.statLifespan*=this.bloodlineRank<5?.1:5,this.money<0&&(this.money=0),this.money=this.bloodlineRank<3?0:this.bloodlineRank<4?this.money/8:4*this.money,this.money>this.maxMoney&&(this.money=this.maxMoney),this.hellMoney=0,this.recalculateDerivedStats(),0===this.bloodlineRank?this.equipment={head:null,body:null,leftHand:null,rightHand:null,legs:null,feet:null}:this.bloodlineRank<=1&&(this.equipment.body=null,this.equipment.head=null,this.equipment.legs=null,this.equipment.feet=null),this.yin=1,this.yang=1}getAttributeStartingValue(e,n){return e<=0?0:(n<0&&(n=0),e<1?e/10:n<this.attributeSoftCap?1+n/10:this.attributeSoftCap/10+Math.log2(n-(this.attributeSoftCap-1)))}recalculateDerivedStats(){let e=1;this.bonusHealth&&(e=5),e+=this.fengshuiScore/20,this.status.health.max=(100+this.healthBonusFood+this.healthBonusBath+this.healthBonusMagic+this.healthBonusSoul+Math.floor(5*Math.log2(this.attributes.toughness.value+2)))*e,this.money>this.maxMoney&&(this.money=this.maxMoney),this.hellMoney>this.maxMoney&&(this.hellMoney=this.maxMoney);const n=Object.keys(this.attributes);for(const c in n)this.attributes[n[c]].aptitudeMult=this.getAptitudeMultipier(this.attributes[n[c]].aptitude);this.spiritualityLifespan=5*this.getAptitudeMultipier(this.attributes.spirituality.value,!0),this.lifespan=this.baseLifespan+this.foodLifespan+this.alchemyLifespan+this.statLifespan+this.spiritualityLifespan+this.magicLifespan;let r=1,o=1,a=1,s=1;this.equipment.head&&(r=this.equipment.head.armorStats?.defense||1),this.equipment.body&&(o=this.equipment.body.armorStats?.defense||1),this.equipment.legs&&(a=this.equipment.legs.armorStats?.defense||1),this.equipment.feet&&(s=this.equipment.feet.armorStats?.defense||1);for(const c in this.attackPower){const d=c,u=Math.sqrt(this.attributes[d].value)||1;this.attackPower[d]=Math.floor(u)||1,this.attributes.combatMastery.value>1&&(this.attackPower[d]*=Math.log(this.attributes.combatMastery.value+100)/4.605170185988092),this.righteousWrathUnlocked&&(this.attackPower[d]*=2)}const l=Math.sqrt(this.attributes.toughness.value)||1;this.defense=Math.floor(l*(r+o+a+s))||1,this.righteousWrathUnlocked&&(this.defense*=2),this.yinYangBalance=this.yinYangBoosted?Math.max(10-10*Math.abs(this.yang-this.yin)/((this.yang+this.yin)/2),0):Math.max(1-Math.abs(this.yang-this.yin)/((this.yang+this.yin)/2),0),this.empowermentMult=this.getEmpowermentMult()}getEmpowermentMult(){let r=1+198/(1+Math.pow(1.02,-(this.empowermentFactor-1)/3))-99;return this.easyMode&&(r*=100),r}getAptitudeMultipier(e,n=!1){e<0&&(e=0);const r=n?1:this.empowermentMult;let o=1;if(e<this.attributeScalingLimit)o=e*r;else if(e<10*this.attributeScalingLimit)o=(this.attributeScalingLimit+(e-this.attributeScalingLimit)/4)*r;else if(e<100*this.attributeScalingLimit)o=(this.attributeScalingLimit+9*this.attributeScalingLimit/4+(e-10*this.attributeScalingLimit)/20)*r;else if(e<=this.attributeSoftCap)o=(this.attributeScalingLimit+9*this.attributeScalingLimit/4+90*this.attributeScalingLimit/20+(e-100*this.attributeScalingLimit)/100)*r;else{const s=this.attributeScalingLimit+9*this.attributeScalingLimit/4+90*this.attributeScalingLimit/20+(this.attributeSoftCap-100*this.attributeScalingLimit)/100;o=(Math.pow((e-this.attributeSoftCap)*Math.pow(this.attributeScalingLimit/1e13,.15),.5)+s)*r}if(this.bloodlineRank>=8)return o;let a=365e3;return a+=this.yinYangBoosted?this.yinYangBalance*a:this.yinYangBalance*a*.1,a/(-1-Math.log((o+a)/a))+a}updateMoney(e){this.money+=e*(1+this.fengshuiScore/100),this.showUpdateAnimations&&(this.moneyUpdates+=e)}flashStatus(e){this.statusToFlash.includes(e)||this.statusToFlash.push(e)}increaseAttribute(e,n){let r=n*this.attributes[e].aptitudeMult;return r*=2*this.achievementService.unlockedAchievements.length/100,r<n&&(r=n),this.attributes[e].value+=r,(!this.highestAttributes[e]||this.highestAttributes[e]<this.attributes[e].value)&&(this.highestAttributes[e]=this.attributes[e].value),this.showUpdateAnimations&&(this.attributeUpdates[e]+=r),r}increaseAptitudeDaily(e){const n=Object.keys(this.attributes),r=["combatMastery","magicMastery"];for(const o in n)r.includes(o)?this.attributes[n[o]].aptitude+=this.attributes[n[o]].value/1e14*e:this.attributes[n[o]].aptitude+=this.attributes[n[o]].value/1e7*e}increaseBaseLifespan(e,n){return this.baseLifespan+e<365*n?(this.baseLifespan+=e,!0):(this.baseLifespan<365*n&&(this.baseLifespan=365*n),!1)}checkOverage(){this.healthBonusFood>19e3&&(this.healthBonusFood=19e3),this.healthBonusBath>8e4&&(this.healthBonusBath=8e4);let e=1e6,n=2e6;this.yinYangBoosted&&(e+=2*this.yinYangBalance*e,n+=2*this.yinYangBalance*n),this.healthBonusMagic>e&&(this.healthBonusMagic=e),this.healthBonusSoul>n&&(this.healthBonusSoul=n),this.status.stamina.max>1e6&&(this.status.stamina.max=1e6),this.status.qi.max>1e6&&(this.status.qi.max=1e6),this.status.nutrition.max>1e3&&(this.status.nutrition.max=1e3),this.status.health.value>this.status.health.max&&(this.status.health.value=this.status.health.max),this.status.stamina.value>this.status.stamina.max&&(this.status.stamina.value=this.status.stamina.max),this.status.nutrition.value>this.status.nutrition.max&&(this.status.nutrition.value=this.status.nutrition.max),this.status.qi.value>this.status.qi.max&&(this.status.qi.value=this.status.qi.max),this.money>this.maxMoney&&(this.money=this.maxMoney),this.hellMoney>this.maxMoney&&(this.hellMoney=this.maxMoney)}getProperties(){return{attributes:this.attributes,money:this.money,stashedMoney:this.stashedMoney,hellMoney:this.hellMoney,equipment:this.equipment,stashedEquipment:this.stashedEquipment,itemPouches:this.itemPouches,age:this.age,status:this.status,baseLifespan:this.baseLifespan,foodLifespan:this.foodLifespan,alchemyLifespan:this.alchemyLifespan,statLifespan:this.statLifespan,spiritualityLifespan:this.spiritualityLifespan,magicLifespan:this.magicLifespan,attributeScalingLimit:this.attributeScalingLimit,attributeSoftCap:this.attributeSoftCap,aptitudeGainDivider:this.aptitudeGainDivider,condenseSoulCoreCost:this.condenseSoulCoreCost,reinforceMeridiansCost:this.reinforceMeridiansCost,bloodlineRank:this.bloodlineRank,qiUnlocked:this.qiUnlocked,totalLives:this.totalLives,healthBonusFood:this.healthBonusFood,healthBonusBath:this.healthBonusBath,healthBonusMagic:this.healthBonusMagic,healthBonusSoul:this.healthBonusSoul,empowermentFactor:this.empowermentFactor,immortal:this.immortal,god:this.god,easyMode:this.easyMode,highestMoney:this.highestMoney,highestAge:this.highestAge,highestHealth:this.highestHealth,highestStamina:this.highestStamina,highestQi:this.highestQi,highestAttributes:this.highestAttributes,yinYangBoosted:this.yinYangBoosted,yin:this.yin,yang:this.yang,righteousWrathUnlocked:this.righteousWrathUnlocked,bonusMuscles:this.bonusMuscles,bonusBrains:this.bonusBrains,bonusHealth:this.bonusHealth,showLifeSummary:this.showLifeSummary,showTips:this.showTips,showUpdateAnimations:this.showUpdateAnimations,startingStaminaBoost:this.startingStaminaBoost}}setProperties(e){this.attributes=e.attributes,this.money=e.money,this.stashedMoney=e.stashedMoney,this.hellMoney=e.hellMoney,this.money>this.maxMoney&&(this.money=this.maxMoney),this.hellMoney>this.maxMoney&&(this.hellMoney=this.maxMoney),this.equipment=e.equipment,this.stashedEquipment=e.stashedEquipment,this.itemPouches=e.itemPouches,this.age=e.age,this.status=e.status,this.baseLifespan=e.baseLifespan,this.foodLifespan=e.foodLifespan,this.alchemyLifespan=e.alchemyLifespan,this.statLifespan=e.statLifespan,this.spiritualityLifespan=e.spiritualityLifespan,this.magicLifespan=e.magicLifespan,this.condenseSoulCoreCost=e.condenseSoulCoreCost,this.aptitudeGainDivider=5*Math.pow(1.5,9-Math.log10(this.condenseSoulCoreCost/this.condenseSoulCoreOriginalCost)),this.reinforceMeridiansCost=e.reinforceMeridiansCost,this.attributeScalingLimit=10*Math.pow(2,Math.log10(this.reinforceMeridiansCost/this.reinforceMeridiansOriginalCost)),this.attributeSoftCap=e.attributeSoftCap,this.bloodlineRank=e.bloodlineRank,this.bloodlineCost=1e3*Math.pow(100,this.bloodlineRank),this.qiUnlocked=e.qiUnlocked,this.totalLives=e.totalLives,this.healthBonusFood=e.healthBonusFood,this.healthBonusBath=e.healthBonusBath,this.healthBonusMagic=e.healthBonusMagic,this.healthBonusSoul=e.healthBonusSoul,this.empowermentFactor=e.empowermentFactor,this.immortal=e.immortal,this.god=e.god,this.easyMode=e.easyMode,this.highestMoney=e.highestMoney,this.highestAge=e.highestAge,this.highestHealth=e.highestHealth,this.highestStamina=e.highestStamina,this.highestQi=e.highestQi,this.highestAttributes=e.highestAttributes,this.yinYangBoosted=e.yinYangBoosted,this.yin=e.yin,this.yang=e.yang,this.righteousWrathUnlocked=e.righteousWrathUnlocked,this.bonusMuscles=e.bonusMuscles,this.bonusBrains=e.bonusBrains,this.bonusHealth=e.bonusHealth,this.showLifeSummary=e.showLifeSummary,this.showTips=e.showTips,this.showUpdateAnimations=e.showUpdateAnimations,this.startingStaminaBoost=e.startingStaminaBoost,this.recalculateDerivedStats()}static{this.\u0275fac=function(n){return new(n||t)(P(we),P(tt),P(Xi),P(Ht))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),iS=(()=>{class t{constructor(){this.mainLoopService=_(tt),this.characterService=_(Ie),this.yinColor="#000000",this.yangColor="#ffffff",this.balanceString="perfect",this.flashHealth=!1,this.flashStamina=!1,this.flashQi=!1,this.flashNutrition=!1,this.moneyUpdates=[],this.popupCounter=0,this.mainLoopService.longTickSubject.subscribe(()=>{this.flashHealth=this.characterService.statusToFlash.includes("health"),this.flashStamina=this.characterService.statusToFlash.includes("stamina"),this.flashQi=this.characterService.statusToFlash.includes("qi"),this.flashNutrition=this.characterService.statusToFlash.includes("nutrition"),this.characterService.statusToFlash=[],this.popupCounter<1?this.popupCounter++:(this.popupCounter=0,0!==this.characterService.moneyUpdates&&(this.moneyUpdates.push(this.characterService.moneyUpdates),this.characterService.moneyUpdates=0),this.updateYinYang())})}updateYinYang(){let e=this.characterService.yang,n=this.characterService.yin;if(n<1&&(n=1),e<1&&(e=1),e>=n){this.yangColor="#ffffff";const l=(255-Math.round(n/e*255)).toString(16);this.yinColor="#"+l+l+l}else{this.yinColor="#000000";const l=Math.round(e/n*255).toString(16);this.yangColor="#"+l+l+l}const r=["perfect","exceptional","excellent","good","fair","poor","terrible","abysmal","non-existent"],o=Math.max(Math.abs(e-n)/((e+n)/2)*1e4,1),a=Math.min(Math.floor(Math.log(o)/Math.log(5)),r.length-1);this.balanceString=r[a]}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),lZ=(()=>{class t{constructor(){this.text=""}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ne({type:t,selectors:[["app-tooltip"]],inputs:{text:"text"},decls:1,vars:2,consts:[[3,"innerHTML"]],template:function(n,r){1&n&&L(0,"div",0),2&n&&(re("innerHTML",r.text,ff),z("@tooltip",void 0))},styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{background-color:#292929;border:1px solid white;color:#fff;padding:.5rem 1rem;border-radius:4px}"],data:{animation:[Em("tooltip",[Fd(":enter",[jn({opacity:0}),Rd(300,jn({opacity:1}))]),Fd(":leave",[Rd(300,jn({opacity:0}))])])]}})}}return t})(),nS=!1,et=(()=>{class t{constructor(e,n,r){this.overlay=e,this.overlayPositionBuilder=n,this.elementRef=r,this.text="",this.timeoutId=0,this.delay=300}ngOnDestroy(){this.timeoutId&&clearTimeout(this.timeoutId),this.overlayRef.detach(),this.overlayRef.dispose()}ngOnInit(){const e=this.overlayPositionBuilder.flexibleConnectedTo(this.elementRef).withPositions([{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom",offsetY:-8},{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:8}]);this.overlayRef=this.overlay.create({positionStrategy:e})}show(){nS||(nS=!0,this.timeoutId=window.setTimeout(()=>{0!==this.text.trim().length&&(this.overlayRef.attach(new Pl(lZ)).instance.text=this.text)},this.delay))}hide(){nS=!1,this.timeoutId&&window.clearTimeout(this.timeoutId),this.overlayRef.detach()}static{this.\u0275fac=function(n){return new(n||t)(T(Mn),T(TR),T(xe))}}static{this.\u0275dir=ie({type:t,selectors:[["","tooltip",""]],hostBindings:function(n,r){1&n&&x("mouseover",function(a){return r.show(a)})("touchstart",function(a){return r.show(a)})("mouseout",function(){return r.hide()})("mouseleave",function(){return r.hide()})("touchend",function(){return r.hide()})("touchcancel",function(){return r.hide()})("change",function(){return r.hide()})("click",function(){return r.hide()})("drag",function(){return r.hide()})("invalid",function(){return r.hide()})("unload",function(){return r.hide()})},inputs:{text:[0,"tooltip","text"]}})}}return t})(),aF=(()=>{class t{constructor(){this.characterService=_(Ie),this.healthService=_(iS)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ne({type:t,selectors:[["app-yin-yang"]],decls:12,vars:16,consts:[[1,"yinYang",3,"tooltip"],["xmlns","http://www.w3.org/2000/svg","width","100%","height","100%","viewBox","0 0 250 250"],["id","f"],["stdDeviation","3.5"],["cx","125","cy","125","r","116.6","fill","#7f7f7f","opacity","0.5","filter","url(#f)"],["cx","125","cy","125","r","113.2"],["d","m125,11.8 a56.6,56.6 0 0 1 0,113.2 56.6,56.6 0 0 0 0,113.2 113.2,113.2 0 0 0 0,-226.4"],["cx","125","cy","68.4","r","17.6"],["cx","125","cy","181.6","r","17.6"]],template:function(n,r){1&n&&(h(0,"div",0),O(1,"bigNumber"),O(2,"bigNumber"),Dv(),h(3,"svg",1)(4,"defs")(5,"filter",2),L(6,"feGaussianBlur",3),f()(),L(7,"circle",4)(8,"circle",5)(9,"path",6)(10,"circle",7)(11,"circle",8),f()()),2&n&&(Zf("tooltip","Yang: ",V(1,12,r.characterService.yang),"<br>\n    Yin: ",V(2,14,r.characterService.yin),"<br>\n    Your balance is ",r.healthService.balanceString,".<br>\n    A proper balance of Yin and Yang will strengthen you in combat and allow you develop your aptitudes more effectively."),v(3),Dt("fill",r.healthService.yinColor),v(5),Dt("fill",r.healthService.yangColor),v(2),Dt("fill",r.healthService.yinColor),v(),Dt("fill",r.healthService.yangColor))},dependencies:[et,It],styles:[".yinYang[_ngcontent-%COMP%]{width:var(--yin-yang-size);max-width:var(--yin-yang-size);height:var(--yin-yang-size);max-height:var(--yin-yang-size);overflow:hidden}"]})}}return t})();const cZ=(t,i)=>({popupTextColor:t,popupTextNegativeColor:i});function dZ(t,i){1&t&&(h(0,"div",2),L(1,"app-yin-yang",17)(2,"div",18),f())}function uZ(t,i){if(1&t&&(h(0,"span"),y(1),f()),2&t){const e=S(2);v(),j("Age ",e.Math.floor(e.characterService.displayAge()/365),"")}}function hZ(t,i){if(1&t&&(h(0,"span"),y(1),O(2,"bigNumber"),f()),2&t){const e=S(2);v(),j("Age ",V(2,1,e.characterService.displayAge()/365),"")}}function fZ(t,i){if(1&t&&(h(0,"span"),y(1),O(2,"number"),f()),2&t){const e=S(2);v(),j(".",pr(2,1,e.characterService.displayAge()%365,"1.0-0"),"")}}function mZ(t,i){1&t&&(h(0,"div"),y(1,"You expect to live forever."),f())}function pZ(t,i){if(1&t&&(h(0,"div"),y(1),O(2,"bigNumber"),f()),2&t){const e=S(2);v(),j("You expect to live ",V(2,1,e.characterService.displayLifespan()/365)," years.")}}function gZ(t,i){if(1&t&&(h(0,"div",19)(1,"mat-icon",20),y(2,"timer"),f(),h(3,"div"),H(4,uZ,2,1,"span")(5,hZ,3,3,"span")(6,fZ,3,4,"span"),h(7,"span"),y(8," years old."),f()()(),h(9,"div",21),H(10,mZ,2,0,"div")(11,pZ,3,3,"div"),f()),2&t){const e=S(),n=ib(5);v(),re("tooltip",e.characterService.lifespanTooltip),v(3),A(e.characterService.displayAge()<n?4:5),v(2),A(e.characterService.displayAge()<n?6:-1),v(4),A(e.characterService.immortal?10:11)}}function vZ(t,i){1&t&&y(0," Forever ")}function yZ(t,i){1&t&&(y(0),O(1,"bigNumber")),2&t&&j(" ",V(1,1,S(3).characterService.displayLifespan()/365)," ")}function _Z(t,i){if(1&t&&(y(0),H(1,vZ,1,0)(2,yZ,2,3)),2&t){const e=S(2);j(" ",e.Math.floor(e.characterService.displayAge()/365)," / "),v(),A(e.characterService.immortal?1:2)}}function bZ(t,i){1&t&&y(0," Forever ")}function SZ(t,i){1&t&&(y(0),O(1,"bigNumber")),2&t&&j(" ",V(1,1,S(3).characterService.displayLifespan()/365)," ")}function wZ(t,i){if(1&t&&(y(0),O(1,"bigNumber"),H(2,bZ,1,0)(3,SZ,2,3)),2&t){const e=S(2);j(" ",V(1,2,e.characterService.displayAge()/365)," / "),v(2),A(e.characterService.immortal?2:3)}}function CZ(t,i){if(1&t&&(h(0,"span"),H(1,_Z,3,2)(2,wZ,4,4),f()),2&t){const e=S(),n=ib(5);v(),A(e.characterService.displayAge()<n?1:2)}}function kZ(t,i){1&t&&(h(0,"div",5),y(1,"Wealth"),f())}function DZ(t,i){1&t&&(h(0,"span"),y(1,"+"),f())}function TZ(t,i){if(1&t){const e=G();h(0,"span",8),x("@popupText.done",function(){return M(e),I(S().animationDoneEvent())}),H(1,DZ,2,0,"span"),y(2),O(3,"bigNumber"),f()}if(2&t){const e=i.$implicit;z("ngClass",Tn(6,cZ,e>0,e<0))("@popupText",e),v(),A(e>0?1:-1),v(),j(" ",V(3,4,e)," ")}}function xZ(t,i){if(1&t&&(h(0,"div",9),y(1),O(2,"bigNumber"),f()),2&t){const e=S();v(),j(" ",V(2,1,e.characterService.hellMoney)," Hell Money ")}}function EZ(t,i){if(1&t&&(h(0,"span"),y(1),O(2,"bigNumber"),f()),2&t){const e=S();v(),qi("",V(2,2,e.homeService.land)," Empty ",1===e.homeService.land?"Plot":"Plots"," of Land")}}function MZ(t,i){1&t&&(h(0,"div",5),y(1,"Health"),f())}function IZ(t,i){1&t&&(h(0,"div",5),y(1,"Stamina"),f())}function AZ(t,i){1&t&&(h(0,"div",5),y(1,"Nutrition"),f())}function PZ(t,i){1&t&&(h(0,"div",5),y(1,"Qi"),f())}let RZ=(()=>{class t{constructor(){this.characterService=_(Ie),this.healthService=_(iS),this.homeService=_(zt),this.Math=Math,this.isCollapsed=!1}animationDoneEvent(){for(;this.healthService.moneyUpdates.length>0;)this.healthService.moneyUpdates.pop()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ne({type:t,selectors:[["app-mobile-health"]],decls:47,vars:53,consts:[[1,"healthContainer",3,"click"],[1,"upper-row"],[1,"yin-yang-container"],[1,"statusRow","top"],[1,"flexColumn"],[1,"label"],[1,"moneyContainer"],[1,"moneyColumn"],[1,"popupText",3,"ngClass"],["tooltip","Money accepted as legal tender in hell.",1,"moneyColumn"],[1,"statusRow","progress-bars-row"],[1,"status-column"],[1,"statusCell","barCell","health",3,"tooltip"],[1,"progress-bar",3,"ngClass"],[1,"statusCell","barCell","stamina",3,"tooltip"],[1,"statusCell","barCell","nutrition",3,"tooltip"],[1,"statusCell","barCell","qi",3,"tooltip"],[1,"yin-yang-dimensions"],[1,"yin-yang-overlay","yin-yang-dimensions"],[1,"statusCell","age"],[3,"tooltip"],[1,"statusCell"]],template:function(n,r){if(1&n){const o=G();h(0,"div",0),x("click",function(){return M(o),I(r.isCollapsed=!r.isCollapsed)}),h(1,"div",1),H(2,dZ,3,0,"div",2),h(3,"div",3)(4,"div",4),tb(5),H(6,gZ,12,4)(7,CZ,3,1,"span"),f(),h(8,"div",4),H(9,kZ,2,0,"div",5),h(10,"div",6)(11,"div",7)(12,"div"),be(13,TZ,4,9,"span",8,_t),h(15,"span"),y(16),O(17,"bigNumber"),f()(),H(18,xZ,3,3,"div",9)(19,EZ,3,4,"span"),f()()()()(),h(20,"div",10)(21,"div",11)(22,"div",12),H(23,MZ,2,0,"div",5),h(24,"div",13),O(25,"bigNumber"),O(26,"bigNumber"),L(27,"span"),f()(),h(28,"div",14),H(29,IZ,2,0,"div",5),h(30,"div",13),O(31,"bigNumber"),O(32,"bigNumber"),L(33,"span"),f()()(),h(34,"div",11)(35,"div",15),H(36,AZ,2,0,"div",5),h(37,"div",13),O(38,"bigNumber"),O(39,"bigNumber"),L(40,"span"),f()(),h(41,"div",16),H(42,PZ,2,0,"div",5),h(43,"div",13),O(44,"bigNumber"),O(45,"bigNumber"),L(46,"span"),f()()()()()}2&n&&(v(2),A(r.isCollapsed?-1:2),v(3),function MM(t){return wn("NgLet"),eb(Ce(),q(),Li(),t),t}(365e4),v(),A(r.isCollapsed?7:6),v(3),A(r.isCollapsed?-1:9),v(4),Se(r.healthService.moneyUpdates),v(3),j("",V(17,35,r.characterService.displayMoney())," Taels"),v(2),A(r.characterService.hellMoney>0?18:-1),v(),A(r.homeService.land>0?19:-1),v(3),re("tooltip",r.characterService.status.health.description),v(),A(r.isCollapsed?-1:23),v(),z("ngClass",r.healthService.flashHealth?"flash":""),Me("value",V(25,37,r.Math.floor(r.characterService.immortal&&r.characterService.status.health.displayValue()<0?0:r.characterService.status.health.displayValue())))("max",V(26,39,r.Math.floor(r.characterService.status.health.displayMax()))),v(3),Dt("width",100*r.Math.floor(r.characterService.immortal&&r.characterService.status.health.displayValue()<0?0:r.characterService.status.health.displayValue())/r.Math.floor(r.characterService.status.health.displayMax()),"%"),v(),re("tooltip",r.characterService.status.stamina.description),v(),A(r.isCollapsed?-1:29),v(),z("ngClass",r.healthService.flashStamina?"flash":""),Me("value",V(31,41,r.Math.floor(r.characterService.immortal&&r.characterService.status.stamina.displayValue()<0?0:r.characterService.status.stamina.displayValue())))("max",V(32,43,r.Math.floor(r.characterService.status.stamina.displayMax()))),v(3),Dt("width",100*r.Math.floor(r.characterService.immortal&&r.characterService.status.stamina.displayValue()<0?0:r.characterService.status.stamina.displayValue())/r.Math.floor(r.characterService.status.stamina.displayMax()),"%"),v(2),re("tooltip",r.characterService.status.nutrition.description),v(),A(r.isCollapsed?-1:36),v(),z("ngClass",r.healthService.flashNutrition?"flash":""),Me("value",V(38,45,r.Math.floor(r.characterService.status.nutrition.displayValue())))("max",V(39,47,r.Math.floor(r.characterService.status.nutrition.displayMax()))),v(3),Dt("width",100*r.Math.floor(r.characterService.status.nutrition.displayValue())/r.Math.floor(r.characterService.status.nutrition.displayMax()),"%"),v(),re("tooltip",r.characterService.status.qi.description),v(),A(r.isCollapsed?-1:42),v(),z("ngClass",r.healthService.flashNutrition?"flash":""),Me("value",V(44,49,r.Math.floor(r.characterService.status.qi.displayValue())))("max",V(45,51,r.Math.floor(r.characterService.status.qi.displayMax()))),v(3),Dt("width",100*r.Math.floor(r.characterService.status.qi.displayValue())/r.Math.floor(r.characterService.status.qi.displayMax()),"%"))},dependencies:[It,Vo,fi,yl,$o,Lt,et,aF],styles:[".progress-bar[_ngcontent-%COMP%]{vertical-align:-.4em;margin-left:4px;margin-right:4px;flex-grow:1;width:unset}.health[_ngcontent-%COMP%] > .progress-bar[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background-color:var(--healthColor)}.stamina[_ngcontent-%COMP%] > .progress-bar[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background-color:var(--staminaColor)}.nutrition[_ngcontent-%COMP%] > .progress-bar[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background-color:var(--nutritionColor)}.qi[_ngcontent-%COMP%] > .progress-bar[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background-color:var(--qiColor)}.statusRow[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:2px}.statusRow.top[_ngcontent-%COMP%]{justify-content:space-between;position:relative;z-index:1}.status-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.flexColumn[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:4px}.statusCell[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}.barCell[_ngcontent-%COMP%]{display:flex;flex-direction:column}td[_ngcontent-%COMP%]{font-size:12px}.flash[_ngcontent-%COMP%]{box-shadow:0 0 5px 5px #48abe0;transition:box-shadow ease-out .5s}.healthContainer[_ngcontent-%COMP%]{overflow-y:hidden;display:flex;flex-direction:column;flex-grow:1}.popupTextColor[_ngcontent-%COMP%]{color:var(--popupTextColor)}.popupTextNegativeColor[_ngcontent-%COMP%]{color:red}.popupText[_ngcontent-%COMP%]{position:absolute;transform:translateZ(0);translate:-10px;z-index:10000;font-size:x-small}.yin-yang-container[_ngcontent-%COMP%]{position:absolute;width:100%;display:flex;justify-content:center}app-yin-yang[_ngcontent-%COMP%]{box-shadow:0 0 10px 10px light-dark(white,#333333);width:fit-content;height:fit-content}.yin-yang-dimensions[_ngcontent-%COMP%]{margin:10px;border-radius:50%}.yin-yang-overlay[_ngcontent-%COMP%]{background:light-dark(#ffffffc9,#333333c9);position:absolute;height:var(--yin-yang-size);width:var(--yin-yang-size)}.upper-row[_ngcontent-%COMP%]{position:relative}.age[_ngcontent-%COMP%]{display:flex;align-items:center}.progress-bars-row[_ngcontent-%COMP%]{z-index:1}"],data:{animation:[Em("popupText",[e0("in",jn({position:"fixed"})),Fd(":leave",[Rd(1e3,NA([jn({transform:"translate(0%, 0%)"}),jn({transform:"translate(0%, -150%)"})]))])])]}})}}return t})(),FZ=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ne({type:t,selectors:[["app-changelog-panel"]],decls:11,vars:0,consts:[[1,"darkMode"],[1,"changeLogContainer"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"h3"),y(2,"Change Log"),f(),L(3,"hr"),h(4,"div",1)(5,"table")(6,"tr")(7,"td"),y(8,"v2.0.0"),f(),h(9,"td"),y(10,"A whole new version of the game."),f()()()()())},styles:["table[_ngcontent-%COMP%]{border-spacing:4px}.changeLogContainer[_ngcontent-%COMP%]{max-height:600px}td[_ngcontent-%COMP%]{vertical-align:top}"]})}}return t})();class OZ extends Y{constructor(i=1/0,e=1/0,n=Xb){super(),this._bufferSize=i,this._windowTime=e,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,i),this._windowTime=Math.max(1,e)}next(i){const{isStopped:e,_buffer:n,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:a}=this;e||(n.push(i),!r&&n.push(o.now()+a)),this._trimBuffer(),super.next(i)}_subscribe(i){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(i),{_infiniteTimeWindow:n,_buffer:r}=this,o=r.slice();for(let a=0;a<o.length&&!i.closed;a+=n?1:2)i.next(o[a]);return this._checkFinalizedStatuses(i),e}_trimBuffer(){const{_bufferSize:i,_timestampProvider:e,_buffer:n,_infiniteTimeWindow:r}=this,o=(r?1:2)*i;if(i<1/0&&o<n.length&&n.splice(0,n.length-o),!r){const a=e.now();let s=0;for(let l=1;l<n.length&&n[l]<=a;l+=2)s=l;s&&n.splice(0,s+1)}}}class NZ{_box;_destroyed=new Y;_resizeSubject=new Y;_resizeObserver;_elementObservables=new Map;constructor(i){this._box=i,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(i){return this._elementObservables.has(i)||this._elementObservables.set(i,new st(e=>{const n=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(i,{box:this._box}),()=>{this._resizeObserver?.unobserve(i),n.unsubscribe(),this._elementObservables.delete(i)}}).pipe(Qe(e=>e.some(n=>n.target===i)),function LZ(t,i,e){let n,r=!1;return t&&"object"==typeof t?({bufferSize:n=1/0,windowTime:i=1/0,refCount:r=!1,scheduler:e}=t):n=t??1/0,MP({connector:()=>new OZ(n,i,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}({bufferSize:1,refCount:!0}),at(this._destroyed))),this._elementObservables.get(i)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let BZ=(()=>{class t{_cleanupErrorListener;_observers=new Map;_ngZone=_(ce);constructor(){}ngOnDestroy(){for(const[,e]of this._observers)e.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(e,n){const r=n?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new NZ(r)),this._observers.get(r).observe(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yi(t,i){return Bt((e,n)=>{let r=null,o=0,a=!1;const s=()=>a&&!r&&n.complete();e.subscribe(wt(n,l=>{r?.unsubscribe();let c=0;const d=o++;un(t(l,d)).subscribe(r=wt(n,u=>n.next(i?i(l,u,d,c++):u),()=>{r=null,s()}))},()=>{a=!0,s()}))})}const rS=["*"];function HZ(t,i){1&t&&di(0)}const VZ=["tabListContainer"],qZ=["tabList"],jZ=["tabListInner"],UZ=["nextPaginator"],zZ=["previousPaginator"],$Z=["content"];function WZ(t,i){}const GZ=["tabBodyWrapper"],YZ=["tabHeader"];function KZ(t,i){}function QZ(t,i){1&t&&H(0,KZ,0,0,"ng-template",12),2&t&&z("cdkPortalOutlet",S().$implicit.templateLabel)}function ZZ(t,i){1&t&&y(0),2&t&&Fe(S().$implicit.textLabel)}function XZ(t,i){if(1&t){const e=G();h(0,"div",7,2),x("click",function(){const r=M(e),o=r.$implicit,a=r.$index,s=S(),l=Pa(1);return I(s._handleClick(o,l,a))})("cdkFocusChange",function(r){const o=M(e).$index;return I(S()._tabFocusChanged(r,o))}),L(2,"span",8)(3,"div",9),h(4,"span",10)(5,"span",11),H(6,QZ,1,1,null,12)(7,ZZ,1,1),f()()()}if(2&t){const e=i.$implicit,n=i.$index,r=Pa(1),o=S();Ia(e.labelClass),ot("mdc-tab--active",o.selectedIndex===n),z("id",o._getTabLabelId(n))("disabled",e.disabled)("fitInkBarToContent",o.fitInkBarToContent),Me("tabIndex",o._getTabIndex(n))("aria-posinset",n+1)("aria-setsize",o._tabs.length)("aria-controls",o._getTabContentId(n))("aria-selected",o.selectedIndex===n)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null),v(3),z("matRippleTrigger",r)("matRippleDisabled",e.disabled||o.disableRipple),v(3),A(e.templateLabel?6:7)}}function JZ(t,i){1&t&&di(0)}function eX(t,i){if(1&t){const e=G();h(0,"mat-tab-body",13),x("_onCentered",function(){return M(e),I(S()._removeTabBodyWrapperHeight())})("_onCentering",function(r){return M(e),I(S()._setTabBodyWrapperHeight(r))})("_beforeCentering",function(r){return M(e),I(S()._bodyCentered(r))}),f()}if(2&t){const e=i.$implicit,n=i.$index,r=S();Ia(e.bodyClass),z("id",r._getTabContentId(n))("content",e.content)("position",e.position)("animationDuration",r.animationDuration)("preserveContent",r.preserveContent),Me("tabindex",null!=r.contentTabIndex&&r.selectedIndex===n?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(n))("aria-hidden",r.selectedIndex!==n)}}const tX=new B("MatTabContent");let iX=(()=>{class t{template=_(Ii);constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,selectors:[["","matTabContent",""]],features:[qe([{provide:tX,useExisting:t}])]})}return t})();const nX=new B("MatTabLabel"),sF=new B("MAT_TAB");let lF=(()=>{class t extends aQ{_closestTab=_(sF,{optional:!0});static \u0275fac=(()=>{let e;return function(r){return(e||(e=xt(t)))(r||t)}})();static \u0275dir=ie({type:t,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[qe([{provide:nX,useExisting:t}]),Le]})}return t})();const cF=new B("MAT_TAB_GROUP");let vp=(()=>{class t{_viewContainerRef=_(Vi);_closestTabGroup=_(cF,{optional:!0});disabled=!1;get templateLabel(){return this._templateLabel}set templateLabel(e){this._setTemplateLabelInput(e)}_templateLabel;_explicitContent=void 0;_implicitContent;textLabel="";ariaLabel;ariaLabelledby;labelClass;bodyClass;_contentPortal=null;get content(){return this._contentPortal}_stateChanges=new Y;position=null;origin=null;isActive=!1;constructor(){_(jo).load(g0)}ngOnChanges(e){(e.hasOwnProperty("textLabel")||e.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new Rl(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(e){e&&e._closestTab===this&&(this._templateLabel=e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["mat-tab"]],contentQueries:function(n,r,o){if(1&n&&(ln(o,lF,5),ln(o,iX,7,Ii)),2&n){let a;Ye(a=Ke())&&(r.templateLabel=a.first),Ye(a=Ke())&&(r._explicitContent=a.first)}},viewQuery:function(n,r){if(1&n&&ti(Ii,7),2&n){let o;Ye(o=Ke())&&(r._implicitContent=o.first)}},hostAttrs:["hidden",""],inputs:{disabled:[2,"disabled","disabled",Oe],textLabel:[0,"label","textLabel"],ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],features:[qe([{provide:sF,useExisting:t}]),Oi],ngContentSelectors:rS,decls:1,vars:0,template:function(n,r){1&n&&(Dn(),H(0,HZ,1,0,"ng-template"))},encapsulation:2})}return t})();const oS="mdc-tab-indicator--active",dF="mdc-tab-indicator--no-transition";class rX{_items;_currentItem;constructor(i){this._items=i}hide(){this._items.forEach(i=>i.deactivateInkBar()),this._currentItem=void 0}alignToElement(i){const e=this._items.find(r=>r.elementRef.nativeElement===i),n=this._currentItem;if(e!==n&&(n?.deactivateInkBar(),e)){const r=n?.elementRef.nativeElement.getBoundingClientRect?.();e.activateInkBar(r),this._currentItem=e}}}let oX=(()=>{class t{_elementRef=_(xe);_inkBarElement;_inkBarContentElement;_fitToContent=!1;get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(e){this._fitToContent!==e&&(this._fitToContent=e,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(e){const n=this._elementRef.nativeElement;if(!e||!n.getBoundingClientRect||!this._inkBarContentElement)return void n.classList.add(oS);const r=n.getBoundingClientRect(),o=e.width/r.width,a=e.left-r.left;n.classList.add(dF),this._inkBarContentElement.style.setProperty("transform",`translateX(${a}px) scaleX(${o})`),n.getBoundingClientRect(),n.classList.remove(dF),n.classList.add(oS),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(oS)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){const e=this._elementRef.nativeElement.ownerDocument||document,n=this._inkBarElement=e.createElement("span"),r=this._inkBarContentElement=e.createElement("span");n.className="mdc-tab-indicator",r.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",n.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){(this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement).appendChild(this._inkBarElement)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,inputs:{fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",Oe]}})}return t})(),uF=(()=>{class t extends oX{elementRef=_(xe);disabled=!1;focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}static \u0275fac=(()=>{let e;return function(r){return(e||(e=xt(t)))(r||t)}})();static \u0275dir=ie({type:t,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(n,r){2&n&&(Me("aria-disabled",!!r.disabled),ot("mat-mdc-tab-disabled",r.disabled))},inputs:{disabled:[2,"disabled","disabled",Oe]},features:[Le]})}return t})();const hF={passive:!0};let cX=(()=>{class t{_elementRef=_(xe);_changeDetectorRef=_(ji);_viewportRuler=_(Il);_dir=_(br,{optional:!0});_ngZone=_(ce);_platform=_(xi);_sharedResizeObserver=_(BZ);_injector=_(we);_renderer=_(Hi);_animationMode=_(Sn,{optional:!0});_eventCleanups;_scrollDistance=0;_selectedIndexChanged=!1;_destroyed=new Y;_showPaginationControls=!1;_disableScrollAfter=!0;_disableScrollBefore=!0;_tabLabelCount;_scrollDistanceChanged;_keyManager;_currentTextContent;_stopScrolling=new Y;disablePagination=!1;get selectedIndex(){return this._selectedIndex}set selectedIndex(e){const n=isNaN(e)?0:e;this._selectedIndex!=n&&(this._selectedIndexChanged=!0,this._selectedIndex=n,this._keyManager&&this._keyManager.updateActiveItem(n))}_selectedIndex=0;selectFocusedIndex=new le;indexFocused=new le;constructor(){this._eventCleanups=this._ngZone.runOutsideAngular(()=>[this._renderer.listen(this._elementRef.nativeElement,"mouseleave",()=>this._stopInterval())])}ngAfterViewInit(){this._eventCleanups.push(zi(this._renderer,this._previousPaginator.nativeElement,"touchstart",()=>this._handlePaginatorPress("before"),hF),zi(this._renderer,this._nextPaginator.nativeElement,"touchstart",()=>this._handlePaginatorPress("after"),hF))}ngAfterContentInit(){const e=this._dir?this._dir.change:ue("ltr"),n=this._sharedResizeObserver.observe(this._elementRef.nativeElement).pipe(wl(32),at(this._destroyed)),r=this._viewportRuler.change(150).pipe(at(this._destroyed)),o=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new f9(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),Xn(o,{injector:this._injector}),Ti(e,r,n,this._items.changes,this._itemsResized()).pipe(at(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),o()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(a=>{this.indexFocused.emit(a),this._setTabFocus(a)})}_itemsResized(){return"function"!=typeof ResizeObserver?qn:this._items.changes.pipe($i(this._items),yi(e=>new st(n=>this._ngZone.runOutsideAngular(()=>{const r=new ResizeObserver(o=>n.next(o));return e.forEach(o=>r.observe(o.elementRef.nativeElement)),()=>{r.disconnect()}}))),c0(1),Qe(e=>e.some(n=>n.contentRect.width>0&&n.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._eventCleanups.forEach(e=>e()),this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(e){if(!Nr(e))switch(e.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){const n=this._items.get(this.focusIndex);n&&!n.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e))}break;default:this._keyManager.onKeydown(e)}}_onContentChanges(){const e=this._elementRef.nativeElement.textContent;e!==this._currentTextContent&&(this._currentTextContent=e||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(e){!this._isValidIndex(e)||this.focusIndex===e||!this._keyManager||this._keyManager.setActiveItem(e)}_isValidIndex(e){return!this._items||!!this._items.toArray()[e]}_setTabFocus(e){if(this._showPaginationControls&&this._scrollToLabel(e),this._items&&this._items.length){this._items.toArray()[e].focus();const n=this._tabListContainer.nativeElement;n.scrollLeft="ltr"==this._getLayoutDirection()?0:n.scrollWidth-n.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const e=this.scrollDistance,n="ltr"===this._getLayoutDirection()?-e:e;this._tabList.nativeElement.style.transform=`translateX(${Math.round(n)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(e){this._scrollTo(e)}_scrollHeader(e){return this._scrollTo(this._scrollDistance+("before"==e?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(e){this._stopInterval(),this._scrollHeader(e)}_scrollToLabel(e){if(this.disablePagination)return;const n=this._items?this._items.toArray()[e]:null;if(!n)return;const r=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:o,offsetWidth:a}=n.elementRef.nativeElement;let s,l;"ltr"==this._getLayoutDirection()?(s=o,l=s+a):(l=this._tabListInner.nativeElement.offsetWidth-o,s=l-a);const c=this.scrollDistance,d=this.scrollDistance+r;s<c?this.scrollDistance-=c-s:l>d&&(this.scrollDistance+=Math.min(l-d,s-c))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const r=this._tabListInner.nativeElement.scrollWidth-this._elementRef.nativeElement.offsetWidth>=5;r||(this.scrollDistance=0),r!==this._showPaginationControls&&(this._showPaginationControls=r,this._changeDetectorRef.markForCheck())}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const e=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,n=e?e.elementRef.nativeElement:null;n?this._inkBar.alignToElement(n):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(e,n){n&&null!=n.button&&0!==n.button||(this._stopInterval(),V0(650,100).pipe(at(Ti(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:r,distance:o}=this._scrollHeader(e);(0===o||o>=r)&&this._stopInterval()}))}_scrollTo(e){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const n=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(n,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:n,distance:this._scrollDistance}}static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,inputs:{disablePagination:[2,"disablePagination","disablePagination",Oe],selectedIndex:[2,"selectedIndex","selectedIndex",pl]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"}})}return t})(),dX=(()=>{class t extends cX{_items;_tabListContainer;_tabList;_tabListInner;_nextPaginator;_previousPaginator;_inkBar;ariaLabel;ariaLabelledby;disableRipple=!1;ngAfterContentInit(){this._inkBar=new rX(this._items),super.ngAfterContentInit()}_itemSelected(e){e.preventDefault()}static \u0275fac=(()=>{let e;return function(r){return(e||(e=xt(t)))(r||t)}})();static \u0275cmp=ne({type:t,selectors:[["mat-tab-header"]],contentQueries:function(n,r,o){if(1&n&&ln(o,uF,4),2&n){let a;Ye(a=Ke())&&(r._items=a)}},viewQuery:function(n,r){if(1&n&&(ti(VZ,7),ti(qZ,7),ti(jZ,7),ti(UZ,5),ti(zZ,5)),2&n){let o;Ye(o=Ke())&&(r._tabListContainer=o.first),Ye(o=Ke())&&(r._tabList=o.first),Ye(o=Ke())&&(r._tabListInner=o.first),Ye(o=Ke())&&(r._nextPaginator=o.first),Ye(o=Ke())&&(r._previousPaginator=o.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(n,r){2&n&&ot("mat-mdc-tab-header-pagination-controls-enabled",r._showPaginationControls)("mat-mdc-tab-header-rtl","rtl"==r._getLayoutDirection())},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],disableRipple:[2,"disableRipple","disableRipple",Oe]},features:[Le],ngContentSelectors:rS,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled"]],template:function(n,r){if(1&n){const o=G();Dn(),h(0,"div",5,0),x("click",function(){return M(o),I(r._handlePaginatorClick("before"))})("mousedown",function(s){return M(o),I(r._handlePaginatorPress("before",s))})("touchend",function(){return M(o),I(r._stopInterval())}),L(2,"div",6),f(),h(3,"div",7,1),x("keydown",function(s){return M(o),I(r._handleKeydown(s))}),h(5,"div",8,2),x("cdkObserveContent",function(){return M(o),I(r._onContentChanges())}),h(7,"div",9,3),di(9),f()()(),h(10,"div",10,4),x("mousedown",function(s){return M(o),I(r._handlePaginatorPress("after",s))})("click",function(){return M(o),I(r._handlePaginatorClick("after"))})("touchend",function(){return M(o),I(r._stopInterval())}),L(12,"div",6),f()}2&n&&(ot("mat-mdc-tab-header-pagination-disabled",r._disableScrollBefore),z("matRippleDisabled",r._disableScrollBefore||r.disableRipple),v(3),ot("_mat-animation-noopable","NoopAnimations"===r._animationMode),v(2),Me("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby||null),v(5),ot("mat-mdc-tab-header-pagination-disabled",r._disableScrollAfter),z("matRippleDisabled",r._disableScrollAfter||r.disableRipple))},dependencies:[v0,s9],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;outline:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color, var(--mat-sys-on-surface))}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height, 1px);border-bottom-color:var(--mat-tab-header-divider-color, var(--mat-sys-surface-variant))}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height, 1px);border-top-color:var(--mat-tab-header-divider-color, var(--mat-sys-surface-variant))}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.cdk-drop-list .mat-mdc-tab-labels,.mat-mdc-tab-labels.cdk-drop-list{min-height:var(--mdc-secondary-navigation-tab-container-height, 48px)}.mat-mdc-tab::before{margin:5px}@media(forced-colors: active){.mat-mdc-tab[aria-disabled=true]{color:GrayText}}"],encapsulation:2})}return t})();const uX=new B("MAT_TABS_CONFIG");let fF=(()=>{class t extends Ua{_host=_(aS);_centeringSub=je.EMPTY;_leavingSub=je.EMPTY;constructor(){super()}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe($i(this._host._isCenterPosition())).subscribe(e=>{this._host._content&&e&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,selectors:[["","matTabBodyHost",""]],features:[Le]})}return t})(),aS=(()=>{class t{_elementRef=_(xe);_dir=_(br,{optional:!0});_ngZone=_(ce);_injector=_(we);_renderer=_(Hi);_animationsModule=_(Sn,{optional:!0});_eventCleanups;_initialized;_fallbackTimer;_positionIndex;_dirChangeSubscription=je.EMPTY;_position;_previousPosition;_onCentering=new le;_beforeCentering=new le;_afterLeavingCenter=new le;_onCentered=new le(!0);_portalHost;_contentElement;_content;animationDuration="500ms";preserveContent=!1;set position(e){this._positionIndex=e,this._computePositionAnimationState()}constructor(){if(this._dir){const e=_(ji);this._dirChangeSubscription=this._dir.change.subscribe(n=>{this._computePositionAnimationState(n),e.markForCheck()})}}ngOnInit(){this._bindTransitionEvents(),"center"===this._position&&(this._setActiveClass(!0),Xn(()=>this._onCentering.emit(this._elementRef.nativeElement.clientHeight),{injector:this._injector})),this._initialized=!0}ngOnDestroy(){clearTimeout(this._fallbackTimer),this._eventCleanups?.forEach(e=>e()),this._dirChangeSubscription.unsubscribe()}_bindTransitionEvents(){this._ngZone.runOutsideAngular(()=>{const e=this._elementRef.nativeElement,n=r=>{r.target===this._contentElement?.nativeElement&&(this._elementRef.nativeElement.classList.remove("mat-tab-body-animating"),"transitionend"===r.type&&this._transitionDone())};this._eventCleanups=[this._renderer.listen(e,"transitionstart",r=>{r.target===this._contentElement?.nativeElement&&(this._elementRef.nativeElement.classList.add("mat-tab-body-animating"),this._transitionStarted())}),this._renderer.listen(e,"transitionend",n),this._renderer.listen(e,"transitioncancel",n)]})}_transitionStarted(){clearTimeout(this._fallbackTimer);const e="center"===this._position;this._beforeCentering.emit(e),e&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_transitionDone(){"center"===this._position?this._onCentered.emit():"center"===this._previousPosition&&this._afterLeavingCenter.emit()}_setActiveClass(e){this._elementRef.nativeElement.classList.toggle("mat-mdc-tab-body-active",e)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(){return 0===this._positionIndex}_computePositionAnimationState(e=this._getLayoutDirection()){this._previousPosition=this._position,this._position=this._positionIndex<0?"ltr"==e?"left":"right":this._positionIndex>0?"ltr"==e?"right":"left":"center",this._animationsDisabled()?this._simulateTransitionEvents():this._initialized&&("center"===this._position||"center"===this._previousPosition)&&(clearTimeout(this._fallbackTimer),this._fallbackTimer=this._ngZone.runOutsideAngular(()=>setTimeout(()=>this._simulateTransitionEvents(),100)))}_simulateTransitionEvents(){this._transitionStarted(),Xn(()=>this._transitionDone(),{injector:this._injector})}_animationsDisabled(){return"NoopAnimations"===this._animationsModule||"0ms"===this.animationDuration||"0s"===this.animationDuration}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["mat-tab-body"]],viewQuery:function(n,r){if(1&n&&(ti(fF,5),ti($Z,5)),2&n){let o;Ye(o=Ke())&&(r._portalHost=o.first),Ye(o=Ke())&&(r._contentElement=o.first)}},hostAttrs:[1,"mat-mdc-tab-body"],hostVars:1,hostBindings:function(n,r){2&n&&Me("inert","center"===r._position?null:"")},inputs:{_content:[0,"content","_content"],animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_onCentered:"_onCentered"},decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(n,r){1&n&&(h(0,"div",1,0),H(2,WZ,0,0,"ng-template",2),f()),2&n&&ot("mat-tab-body-content-left","left"===r._position)("mat-tab-body-content-right","right"===r._position)("mat-tab-body-content-can-animate","center"===r._position||"center"===r._previousPosition)},dependencies:[fF,Xd],styles:[".mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto;transform:none;visibility:hidden}.mat-tab-body-animating>.mat-mdc-tab-body-content,.mat-mdc-tab-body-active>.mat-mdc-tab-body-content{visibility:visible}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-tab-body-content-can-animate{transition:transform var(--mat-tab-animation-duration) 1ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable .mat-tab-body-content-can-animate{transition:none}.mat-tab-body-content-left{transform:translate3d(-100%, 0, 0)}.mat-tab-body-content-right{transform:translate3d(100%, 0, 0)}"],encapsulation:2})}return t})(),sS=(()=>{class t{_elementRef=_(xe);_changeDetectorRef=_(ji);_ngZone=_(ce);_tabsSubscription=je.EMPTY;_tabLabelSubscription=je.EMPTY;_tabBodySubscription=je.EMPTY;_animationMode=_(Sn,{optional:!0});_allTabs;_tabBodies;_tabBodyWrapper;_tabHeader;_tabs=new Is;_indexToSelect=0;_lastFocusedTabIndex=null;_tabBodyWrapperHeight=0;color;get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(e){this._fitInkBarToContent=e,this._changeDetectorRef.markForCheck()}_fitInkBarToContent=!1;stretchTabs=!0;alignTabs=null;dynamicHeight=!1;get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this._indexToSelect=isNaN(e)?null:e}_selectedIndex=null;headerPosition="above";get animationDuration(){return this._animationDuration}set animationDuration(e){const n=e+"";this._animationDuration=/^\d+$/.test(n)?e+"ms":n}_animationDuration;get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(e){this._contentTabIndex=isNaN(e)?null:e}_contentTabIndex;disablePagination=!1;disableRipple=!1;preserveContent=!1;get backgroundColor(){return this._backgroundColor}set backgroundColor(e){const n=this._elementRef.nativeElement.classList;n.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),e&&n.add("mat-tabs-with-background",`mat-background-${e}`),this._backgroundColor=e}_backgroundColor;ariaLabel;ariaLabelledby;selectedIndexChange=new le;focusChange=new le;animationDone=new le;selectedTabChange=new le(!0);_groupId;_isServer=!_(xi).isBrowser;constructor(){const e=_(uX,{optional:!0});this._groupId=_(mo).getId("mat-tab-group-"),this.animationDuration=e&&e.animationDuration?e.animationDuration:"500ms",this.disablePagination=!(!e||null==e.disablePagination)&&e.disablePagination,this.dynamicHeight=!(!e||null==e.dynamicHeight)&&e.dynamicHeight,null!=e?.contentTabIndex&&(this.contentTabIndex=e.contentTabIndex),this.preserveContent=!!e?.preserveContent,this.fitInkBarToContent=!(!e||null==e.fitInkBarToContent)&&e.fitInkBarToContent,this.stretchTabs=!e||null==e.stretchTabs||e.stretchTabs,this.alignTabs=e&&null!=e.alignTabs?e.alignTabs:null}ngAfterContentChecked(){const e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=e){const n=null==this._selectedIndex;if(!n){this.selectedTabChange.emit(this._createChangeEvent(e));const r=this._tabBodyWrapper.nativeElement;r.style.minHeight=r.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((r,o)=>r.isActive=o===e),n||(this.selectedIndexChange.emit(e),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((n,r)=>{n.position=r-e,null!=this._selectedIndex&&0==n.position&&!n.origin&&(n.origin=e-this._selectedIndex)}),this._selectedIndex!==e&&(this._selectedIndex=e,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const e=this._clampTabIndex(this._indexToSelect);if(e===this._selectedIndex){const n=this._tabs.toArray();let r;for(let o=0;o<n.length;o++)if(n[o].isActive){this._indexToSelect=this._selectedIndex=o,this._lastFocusedTabIndex=null,r=n[o];break}!r&&n[e]&&Promise.resolve().then(()=>{n[e].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(e))})}this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._tabBodySubscription=this._tabBodies.changes.subscribe(()=>this._bodyCentered(!0))}_subscribeToAllTabChanges(){this._allTabs.changes.pipe($i(this._allTabs)).subscribe(e=>{this._tabs.reset(e.filter(n=>n._closestTabGroup===this||!n._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe(),this._tabBodySubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(e){const n=this._tabHeader;n&&(n.focusIndex=e)}_focusChanged(e){this._lastFocusedTabIndex=e,this.focusChange.emit(this._createChangeEvent(e))}_createChangeEvent(e){const n=new hX;return n.index=e,this._tabs&&this._tabs.length&&(n.tab=this._tabs.toArray()[e]),n}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=Ti(...this._tabs.map(e=>e._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(e){return Math.min(this._tabs.length-1,Math.max(e||0,0))}_getTabLabelId(e){return`${this._groupId}-label-${e}`}_getTabContentId(e){return`${this._groupId}-content-${e}`}_setTabBodyWrapperHeight(e){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return void(this._tabBodyWrapperHeight=e);const n=this._tabBodyWrapper.nativeElement;n.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(n.style.height=e+"px")}_removeTabBodyWrapperHeight(){const e=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=e.clientHeight,e.style.height="",this._ngZone.run(()=>this.animationDone.emit())}_handleClick(e,n,r){n.focusIndex=r,e.disabled||(this.selectedIndex=r)}_getTabIndex(e){return e===(this._lastFocusedTabIndex??this.selectedIndex)?0:-1}_tabFocusChanged(e,n){e&&"mouse"!==e&&"touch"!==e&&(this._tabHeader.focusIndex=n)}_bodyCentered(e){e&&this._tabBodies?.forEach((n,r)=>n._setActiveClass(r===this._selectedIndex))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["mat-tab-group"]],contentQueries:function(n,r,o){if(1&n&&ln(o,vp,5),2&n){let a;Ye(a=Ke())&&(r._allTabs=a)}},viewQuery:function(n,r){if(1&n&&(ti(GZ,5),ti(YZ,5),ti(aS,5)),2&n){let o;Ye(o=Ke())&&(r._tabBodyWrapper=o.first),Ye(o=Ke())&&(r._tabHeader=o.first),Ye(o=Ke())&&(r._tabBodies=o)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:11,hostBindings:function(n,r){2&n&&(Me("mat-align-tabs",r.alignTabs),Ia("mat-"+(r.color||"primary")),Dt("--mat-tab-animation-duration",r.animationDuration),ot("mat-mdc-tab-group-dynamic-height",r.dynamicHeight)("mat-mdc-tab-group-inverted-header","below"===r.headerPosition)("mat-mdc-tab-group-stretch-tabs",r.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",Oe],stretchTabs:[2,"mat-stretch-tabs","stretchTabs",Oe],alignTabs:[0,"mat-align-tabs","alignTabs"],dynamicHeight:[2,"dynamicHeight","dynamicHeight",Oe],selectedIndex:[2,"selectedIndex","selectedIndex",pl],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[2,"contentTabIndex","contentTabIndex",pl],disablePagination:[2,"disablePagination","disablePagination",Oe],disableRipple:[2,"disableRipple","disableRipple",Oe],preserveContent:[2,"preserveContent","preserveContent",Oe],backgroundColor:"backgroundColor",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"]},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],features:[qe([{provide:cF,useExisting:t}])],ngContentSelectors:rS,decls:9,vars:8,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination","aria-label","aria-labelledby"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","class","content","position","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","_beforeCentering","id","content","position","animationDuration","preserveContent"]],template:function(n,r){if(1&n){const o=G();Dn(),h(0,"mat-tab-header",3,0),x("indexFocused",function(s){return M(o),I(r._focusChanged(s))})("selectFocusedIndex",function(s){return M(o),I(r.selectedIndex=s)}),be(2,XZ,8,17,"div",4,_t),f(),H(4,JZ,1,0),h(5,"div",5,1),be(7,eX,1,10,"mat-tab-body",6,_t),f()}2&n&&(z("selectedIndex",r.selectedIndex||0)("disableRipple",r.disableRipple)("disablePagination",r.disablePagination)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby),v(2),Se(r._tabs),v(2),A(r._isServer?4:-1),v(),ot("_mat-animation-noopable","NoopAnimations"===r._animationMode),v(2),Se(r._tabs))},dependencies:[dX,uF,O9,v0,Ua,aS],styles:['.mdc-tab{min-width:90px;padding:0 24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;z-index:1}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab--active .mdc-tab__text-label{transition-delay:100ms}._mat-animation-noopable .mdc-tab__text-label{transition:none}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transition:var(--mat-tab-animation-duration, 250ms) transform cubic-bezier(0.4, 0, 0.2, 1);transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}._mat-animation-noopable .mdc-tab-indicator__content,.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mat-mdc-tab-ripple.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;height:var(--mdc-secondary-navigation-tab-container-height, 48px);font-family:var(--mat-tab-header-label-text-font, var(--mat-sys-title-small-font));font-size:var(--mat-tab-header-label-text-size, var(--mat-sys-title-small-size));letter-spacing:var(--mat-tab-header-label-text-tracking, var(--mat-sys-title-small-tracking));line-height:var(--mat-tab-header-label-text-line-height, var(--mat-sys-title-small-line-height));font-weight:var(--mat-tab-header-label-text-weight, var(--mat-sys-title-small-weight))}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mdc-tab-indicator-active-indicator-height, 2px);border-radius:var(--mdc-tab-indicator-active-indicator-shape, 0)}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color, var(--mat-sys-primary))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color, var(--mat-sys-primary))}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color, var(--mat-sys-on-surface));display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2})}return t})();class hX{index;tab}let fX=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({imports:[vi,vi]})}return t})();function mX(t,i){1&t&&(h(0,"span",4),y(1,"The Game"),f())}function pX(t,i){1&t&&(h(0,"span",4),y(1,"Attributes and Activities"),f())}function gX(t,i){1&t&&(h(0,"span",4),y(1,"Status"),f())}function vX(t,i){1&t&&(h(0,"span",4),y(1,"Your Home"),f())}function yX(t,i){1&t&&(h(0,"span",4),y(1,"Food"),f())}function _X(t,i){1&t&&(h(0,"span",4),y(1,"Achievements"),f())}function bX(t,i){1&t&&(h(0,"span",4),y(1,"Good Luck!"),f())}let SX=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ne({type:t,selectors:[["app-tutorial-panel"]],decls:41,vars:0,consts:[[1,"darkMode"],[1,"tutorialDiv"],["mat-tab-label",""],[1,"tutorialSection"],[1,"tab-label"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"h3"),y(2,"Tutorial"),f(),L(3,"hr"),h(4,"div",1)(5,"mat-tab-group")(6,"mat-tab"),H(7,mX,2,0,"ng-template",2),h(8,"div",3)(9,"span"),y(10," Immortality Idle 2 is a time management incremental game inspired by cultivation stories. You can choose your daily activities to survive, grow, and thrive with the goal of achieving immortality. You will probably not achieve your goal during your first lifetime. Don't worry if you die before you succeed! The attributes you develop during each life will improve your aptitudes when you are reincarnated, making your future efforts even more effective. If you persist in your growth, find balance, and seek insights, you will ultimately develop magical abilities, perform impossible tasks, and become an immortal. "),f()()(),h(11,"mat-tab"),H(12,pX,2,0,"ng-template",2),h(13,"div",3)(14,"span"),y(15," Your attributes govern what you are able to do. At first, you will only be able to perform some very simple activities. As your attributes increase, you will find new activities appearing that you can try. Many of these activities will earn you money (taels), but the amount you earn depends on your attributes and knowledge of the related lore for the job. A strong and tough blacksmith with good knowledge of metal lore will make much more each day than a weak one just beginning the trade. Many activities have advanced ranks that you can achieve by increasing your attributes, and you may even create some items so good that you want to keep them for yourself. "),f()()(),h(16,"mat-tab"),H(17,gX,2,0,"ng-template",2),h(18,"div",3)(19,"span"),y(20," Your health shows how much damage you can take before dying. Your stamina determines how much work you can do before you are exhausted. Some stamina can be recovered automatically each day depending on what kind of home and furniture you have, but you may need to take a rest day occasionally. "),f()()(),h(21,"mat-tab"),H(22,vX,2,0,"ng-template",2),h(23,"div",3)(24,"span"),y(25," Once you've played for a few days, A panel for your home will unlock. Your home is an important part of your life. A meager tent leaves you vulnerable to wild animals while a solid house can help you recover each day. Keeping up a home requires money each day, and better homes cost more. Not even an aspiring immortal can avoid their bills. "),f()()(),h(26,"mat-tab"),H(27,yX,2,0,"ng-template",2),h(28,"div",3)(29,"span"),y(30," You will need to eat each day to survive. If you have food in your inventory, you will automatically eat some each day. If you don't have food, but you have money, you will spend a tael to buy enough scraps to keep you from starving. If don't have any food or money, you put yourself at risk of starvation. Eating a healthy diet can lead to better health, more stamina, and even a longer life. "),f()()(),h(31,"mat-tab"),H(32,_X,2,0,"ng-template",2),h(33,"div",3)(34,"span"),y(35," As you move forward on your journey toward immortality, you will unlock many achievements. Each one can provide you with a benefit. Some achievements will allow you to purchase valuable manuals that will provide you with new abilities essential to your immortal progression. The Story messages in the game's log can help you remember your major accomplishments. "),f()()(),h(36,"mat-tab"),H(37,bX,2,0,"ng-template",2),h(38,"div",3)(39,"span"),y(40," There are many secrets to discover and insights to learn. Many things will give you more information if you hover the mouse over them. If you find the game too difficult, an easy mode is available in the options panel. Now, it's time to develop your potential for immortality. Get to it! "),f()()()()()())},dependencies:()=>[sS,vp,lF],styles:[".tutorialDiv[_ngcontent-%COMP%]{max-height:600px}[_nghost-%COMP%]     .mat-mdc-tab-group{flex-direction:row}[_nghost-%COMP%]     .mat-mdc-tab-header{border-bottom:none}[_nghost-%COMP%]     .mat-mdc-tab-header-pagination{display:none!important}[_nghost-%COMP%]     .mat-mdc-tab-labels{flex-direction:column}[_nghost-%COMP%]     .mat-mdc-ink-bar{height:100%;left:98%!important}[_nghost-%COMP%]     .mat-mdc-tab-body-wrapper{flex:1 1 auto}.tutorialSection[_ngcontent-%COMP%]{margin:8px}"]})}}return t})();const wX=t=>({selectedItem:t}),CX=(t,i)=>({selectedItem:t,ownedItem:i}),kX=(t,i)=>i.id+i.value;function DX(t,i){1&t&&L(0,"img",4),2&t&&pt("src","assets/images/items/",S().landItem.imageFile,".png",Bi)}function TX(t,i){1&t&&L(0,"img",4),2&t&&pt("src","assets/images/items/",S().$implicit.imageFile,".png",Bi)}function xX(t,i){if(1&t){const e=G();h(0,"div")(1,"div",3),x("click",function(){const r=M(e).$implicit;return I(S().slotClicked(r))}),h(2,"div"),H(3,TX,1,2,"img",4),f(),h(4,"div"),y(5),O(6,"titlecase"),f(),h(7,"div"),y(8),O(9,"bigNumber"),f()()()}if(2&t){const e=i.$implicit,n=S();v(),re("tooltip",e.description),z("ngClass",Tn(9,CX,e===n.storeService.selectedItem,e.owned&&e.owned())),v(2),A(e.imageFile?3:-1),v(2),Fe(V(6,5,e.name)),v(3),j("$ ",V(9,7,2*e.value),"")}}let EX=(()=>{class t{constructor(e,n,r,o,a,s,l){this.storeService=e,this.homeService=n,this.inventoryService=r,this.characterService=o,this.itemRepoService=a,this.gameStateService=s,this.buyDisabled=!0,this.landItem={id:"land",name:"land",description:"A plot of empty land, suitable for building a home on or plowing into a farm field.<br>Price increases with each plot purchased",value:100,type:"land",imageFile:"land"},this.landItem.value=this.homeService.landPrice,l.reincarnateSubject.subscribe(()=>{this.landItem.value=this.homeService.landPrice})}slotClicked(e){this.storeService.selectedItem===e?(this.storeService.selectedItem=null,this.buyDisabled=!0):(this.storeService.selectedItem=e,this.buyDisabled=!1)}buyItem(e){const n=this.storeService.selectedItem;if(n)if(n===this.landItem)this.homeService.buyLand(e),this.landItem.value=this.homeService.landPrice;else{const r=e*n.value*2;this.characterService.money>r&&(this.inventoryService.addItem(n,e),this.characterService.updateMoney(0-r))}}static{this.\u0275fac=function(n){return new(n||t)(T(jr),T(zt),T(he),T(Ie),T(Un),T(Ut),T(tt))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-store-modal"]],decls:24,vars:14,consts:[[1,"darkMode"],[1,"inventoryContainer"],[1,"inventoryGrid"],["tabindex","0",1,"itemSlot",3,"click","ngClass","tooltip"],["width","48","height","48",1,"itemImage",3,"src"],[3,"click","disabled"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"span"),y(2,"Regular People Shop"),f(),L(3,"hr"),h(4,"div",1)(5,"div",2)(6,"div")(7,"div",3),x("click",function(){return r.slotClicked(r.landItem)}),h(8,"div"),H(9,DX,1,2,"img",4),f(),h(10,"div"),y(11),O(12,"titlecase"),f(),h(13,"div"),y(14),O(15,"bigNumber"),f()()(),be(16,xX,10,12,"div",null,kX),f()(),h(18,"button",5),x("click",function(){return r.buyItem(1)}),y(19," Buy "),f(),h(20,"button",5),x("click",function(){return r.buyItem(10)}),y(21," Buy 10 "),f(),h(22,"button",5),x("click",function(){return r.buyItem(100)}),y(23," Buy 100 "),f()()),2&n&&(v(7),re("tooltip",r.landItem.description),z("ngClass",dt(12,wX,r.landItem===r.storeService.selectedItem)),v(2),A(r.landItem.imageFile?9:-1),v(2),Fe(V(12,8,r.landItem.name)),v(3),j("$ ",V(15,10,r.landItem.value),""),v(2),Se(r.storeService.regularStoreItems),v(2),z("disabled",r.buyDisabled),v(2),z("disabled",r.buyDisabled),v(2),z("disabled",r.buyDisabled))},dependencies:()=>[fi,Ai,It,et],styles:[".inventoryContainer[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto}.inventoryGrid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:3px;justify-content:center}.itemSlot[_ngcontent-%COMP%]{width:90px;height:90px;background-color:var(--storeButtonColor);line-height:12px}.selectedItem[_ngcontent-%COMP%]{background-color:var(--itemSlotHighlight)}button[_ngcontent-%COMP%]{margin-top:4px;width:100%}"]})}}return t})();const MX=(t,i)=>({selectedItem:t,ownedItem:i}),IX=(t,i)=>i.id;function AX(t,i){if(1&t&&(h(0,"div"),y(1),O(2,"bigNumber"),f()),2&t){const e=S().$implicit;v(),j("$ ",V(2,1,e.value),"")}}function PX(t,i){1&t&&(h(0,"div"),y(1,"OWNED"),f())}function RX(t,i){if(1&t){const e=G();h(0,"div")(1,"div",4),x("click",function(){const r=M(e).$implicit;return I(S().slotClicked(r))}),h(2,"div")(3,"mat-icon"),y(4,"menu_book"),f()(),h(5,"div"),y(6),O(7,"titlecase"),f(),H(8,AX,3,3,"div")(9,PX,2,0,"div"),f()()}if(2&t){const e=i.$implicit,n=S();v(),re("tooltip",e.description),z("ngClass",Tn(7,MX,e===n.storeService.selectedItem,e.owned&&e.owned())),v(5),Fe(V(7,5,e.name)),v(2),A(e.owned&&!e.owned()?8:-1),v(),A(e.owned&&e.owned()?9:-1)}}let FX=(()=>{class t{constructor(e){this.storeService=e,this.buyDisabled=!0,e.storeOpened=!0}slotClicked(e){this.storeService.selectedItem===e?(this.storeService.selectedItem=null,this.buyDisabled=!0):(this.storeService.selectedItem=e,this.buyDisabled=!(!e.owned||!e.owned()))}static{this.\u0275fac=function(n){return new(n||t)(T(jr))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-store-modal"]],decls:10,vars:1,consts:[[1,"darkMode"],[1,"inventoryContainer"],[1,"inventoryGrid"],[3,"click","disabled"],["tabindex","0",1,"itemSlot",3,"click","ngClass","tooltip"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"span"),y(2,"Manuals Shop"),f(),L(3,"hr"),h(4,"div",1)(5,"div",2),be(6,RX,10,10,"div",null,IX),f()(),h(8,"button",3),x("click",function(){return r.storeService.buyManual()}),y(9," Buy "),f()()),2&n&&(v(6),Se(r.storeService.manuals),v(2),z("disabled",r.buyDisabled))},dependencies:()=>[fi,Lt,Ai,It,et],styles:[".inventoryContainer[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto}.inventoryGrid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:3px;justify-content:center}.itemSlot[_ngcontent-%COMP%]{width:90px;height:90px;background-color:var(--storeButtonColor);line-height:12px}.selectedItem[_ngcontent-%COMP%]{background-color:var(--itemSlotHighlight)}.ownedItem[_ngcontent-%COMP%]{background-color:var(--storeButtonDisabledColor)!important;border:1px solid var(--storeButtonDisabledColor)!important}button[_ngcontent-%COMP%]{margin-top:4px;width:100%}"]})}}return t})(),mF=(()=>{class t{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,n){this._renderer=e,this._elementRef=n}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(n){return new(n||t)(T(Hi),T(xe))};static \u0275dir=ie({type:t})}return t})(),$a=(()=>{class t extends mF{static \u0275fac=(()=>{let e;return function(r){return(e||(e=xt(t)))(r||t)}})();static \u0275dir=ie({type:t,features:[Le]})}return t})();const Ur=new B("");function cS(t){return null==t||0===dS(t)}function dS(t){return null==t?null:Array.isArray(t)||"string"==typeof t?t.length:t instanceof Set?t.size:null}const Ji=new B(""),Go=new B(""),HX=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class VX{static min(i){return function gF(t){return i=>{if(null==i.value||null==t)return null;const e=parseFloat(i.value);return!isNaN(e)&&e<t?{min:{min:t,actual:i.value}}:null}}(i)}static max(i){return function vF(t){return i=>{if(null==i.value||null==t)return null;const e=parseFloat(i.value);return!isNaN(e)&&e>t?{max:{max:t,actual:i.value}}:null}}(i)}static required(i){return function yF(t){return cS(t.value)?{required:!0}:null}(i)}static requiredTrue(i){return function _F(t){return!0===t.value?null:{required:!0}}(i)}static email(i){return function bF(t){return cS(t.value)||HX.test(t.value)?null:{email:!0}}(i)}static minLength(i){return function SF(t){return i=>{const e=i.value?.length??dS(i.value);return null===e||0===e?null:e<t?{minlength:{requiredLength:t,actualLength:e}}:null}}(i)}static maxLength(i){return function wF(t){return i=>{const e=i.value?.length??dS(i.value);return null!==e&&e>t?{maxlength:{requiredLength:t,actualLength:e}}:null}}(i)}static pattern(i){return function CF(t){if(!t)return yp;let i,e;return"string"==typeof t?(e="","^"!==t.charAt(0)&&(e+="^"),e+=t,"$"!==t.charAt(t.length-1)&&(e+="$"),i=new RegExp(e)):(e=t.toString(),i=t),n=>{if(cS(n.value))return null;const r=n.value;return i.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(i)}static nullValidator(i){return null}static compose(i){return MF(i)}static composeAsync(i){return IF(i)}}function yp(t){return null}function kF(t){return null!=t}function DF(t){return dd(t)?mi(t):t}function TF(t){let i={};return t.forEach(e=>{i=null!=e?{...i,...e}:i}),0===Object.keys(i).length?null:i}function xF(t,i){return i.map(e=>e(t))}function EF(t){return t.map(i=>function qX(t){return!t.validate}(i)?i:e=>i.validate(e))}function MF(t){if(!t)return null;const i=t.filter(kF);return 0==i.length?null:function(e){return TF(xF(e,i))}}function uS(t){return null!=t?MF(EF(t)):null}function IF(t){if(!t)return null;const i=t.filter(kF);return 0==i.length?null:function(e){return EP(xF(e,i).map(DF)).pipe(me(TF))}}function hS(t){return null!=t?IF(EF(t)):null}function AF(t,i){return null===t?[i]:Array.isArray(t)?[...t,i]:[t,i]}function PF(t){return t._rawValidators}function RF(t){return t._rawAsyncValidators}function fS(t){return t?Array.isArray(t)?t:[t]:[]}function _p(t,i){return Array.isArray(t)?t.includes(i):t===i}function FF(t,i){const e=fS(i);return fS(t).forEach(r=>{_p(e,r)||e.push(r)}),e}function OF(t,i){return fS(i).filter(e=>!_p(t,e))}class LF{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(i){this._rawValidators=i||[],this._composedValidatorFn=uS(this._rawValidators)}_setAsyncValidators(i){this._rawAsyncValidators=i||[],this._composedAsyncValidatorFn=hS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(i){this._onDestroyCallbacks.push(i)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(i=>i()),this._onDestroyCallbacks=[]}reset(i=void 0){this.control&&this.control.reset(i)}hasError(i,e){return!!this.control&&this.control.hasError(i,e)}getError(i,e){return this.control?this.control.getError(i,e):null}}class hn extends LF{name;get formDirective(){return null}get path(){return null}}class po extends LF{_parent=null;name=null;valueAccessor=null}const su="VALID",Sp="INVALID",Ol="PENDING",lu="DISABLED";class Ll{}class HF extends Ll{value;source;constructor(i,e){super(),this.value=i,this.source=e}}class gS extends Ll{pristine;source;constructor(i,e){super(),this.pristine=i,this.source=e}}class vS extends Ll{touched;source;constructor(i,e){super(),this.touched=i,this.source=e}}class wp extends Ll{status;source;constructor(i,e){super(),this.status=i,this.source=e}}class QX extends Ll{source;constructor(i){super(),this.source=i}}class ZX extends Ll{source;constructor(i){super(),this.source=i}}function yS(t){return(Cp(t)?t.validators:t)||null}function _S(t,i){return(Cp(i)?i.asyncValidators:t)||null}function Cp(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class bS{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(i,e){this._assignValidators(i),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(i){this._rawValidators=this._composedValidatorFn=i}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(i){this._rawAsyncValidators=this._composedAsyncValidatorFn=i}get parent(){return this._parent}get status(){return si(this.statusReactive)}set status(i){si(()=>this.statusReactive.set(i))}_status=gr(()=>this.statusReactive());statusReactive=$(void 0);get valid(){return this.status===su}get invalid(){return this.status===Sp}get pending(){return this.status==Ol}get disabled(){return this.status===lu}get enabled(){return this.status!==lu}errors;get pristine(){return si(this.pristineReactive)}set pristine(i){si(()=>this.pristineReactive.set(i))}_pristine=gr(()=>this.pristineReactive());pristineReactive=$(!0);get dirty(){return!this.pristine}get touched(){return si(this.touchedReactive)}set touched(i){si(()=>this.touchedReactive.set(i))}_touched=gr(()=>this.touchedReactive());touchedReactive=$(!1);get untouched(){return!this.touched}_events=new Y;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(i){this._assignValidators(i)}setAsyncValidators(i){this._assignAsyncValidators(i)}addValidators(i){this.setValidators(FF(i,this._rawValidators))}addAsyncValidators(i){this.setAsyncValidators(FF(i,this._rawAsyncValidators))}removeValidators(i){this.setValidators(OF(i,this._rawValidators))}removeAsyncValidators(i){this.setAsyncValidators(OF(i,this._rawAsyncValidators))}hasValidator(i){return _p(this._rawValidators,i)}hasAsyncValidator(i){return _p(this._rawAsyncValidators,i)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(i={}){const e=!1===this.touched;this.touched=!0;const n=i.sourceControl??this;this._parent&&!i.onlySelf&&this._parent.markAsTouched({...i,sourceControl:n}),e&&!1!==i.emitEvent&&this._events.next(new vS(!0,n))}markAllAsTouched(i={}){this.markAsTouched({onlySelf:!0,emitEvent:i.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(i))}markAsUntouched(i={}){const e=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const n=i.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:i.emitEvent,sourceControl:n})}),this._parent&&!i.onlySelf&&this._parent._updateTouched(i,n),e&&!1!==i.emitEvent&&this._events.next(new vS(!1,n))}markAsDirty(i={}){const e=!0===this.pristine;this.pristine=!1;const n=i.sourceControl??this;this._parent&&!i.onlySelf&&this._parent.markAsDirty({...i,sourceControl:n}),e&&!1!==i.emitEvent&&this._events.next(new gS(!1,n))}markAsPristine(i={}){const e=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const n=i.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:i.emitEvent})}),this._parent&&!i.onlySelf&&this._parent._updatePristine(i,n),e&&!1!==i.emitEvent&&this._events.next(new gS(!0,n))}markAsPending(i={}){this.status=Ol;const e=i.sourceControl??this;!1!==i.emitEvent&&(this._events.next(new wp(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.markAsPending({...i,sourceControl:e})}disable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=lu,this.errors=null,this._forEachChild(r=>{r.disable({...i,onlySelf:!0})}),this._updateValue();const n=i.sourceControl??this;!1!==i.emitEvent&&(this._events.next(new HF(this.value,n)),this._events.next(new wp(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...i,skipPristineCheck:e},this),this._onDisabledChange.forEach(r=>r(!0))}enable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=su,this._forEachChild(n=>{n.enable({...i,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent}),this._updateAncestors({...i,skipPristineCheck:e},this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(i,e){this._parent&&!i.onlySelf&&(this._parent.updateValueAndValidity(i),i.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(i){this._parent=i}getRawValue(){return this.value}updateValueAndValidity(i={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===su||this.status===Ol)&&this._runAsyncValidator(n,i.emitEvent)}const e=i.sourceControl??this;!1!==i.emitEvent&&(this._events.next(new HF(this.value,e)),this._events.next(new wp(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.updateValueAndValidity({...i,sourceControl:e})}_updateTreeValidity(i={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(i)),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lu:su}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(i,e){if(this.asyncValidator){this.status=Ol,this._hasOwnPendingAsyncValidator={emitEvent:!1!==e};const n=DF(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:i})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const i=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,i}return!1}setErrors(i,e={}){this.errors=i,this._updateControlsErrors(!1!==e.emitEvent,this,e.shouldHaveEmitted)}get(i){let e=i;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(i,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[i]:null}hasError(i,e){return!!this.getError(i,e)}get root(){let i=this;for(;i._parent;)i=i._parent;return i}_updateControlsErrors(i,e,n){this.status=this._calculateStatus(),i&&this.statusChanges.emit(this.status),(i||n)&&this._events.next(new wp(this.status,e)),this._parent&&this._parent._updateControlsErrors(i,e,n)}_initObservables(){this.valueChanges=new le,this.statusChanges=new le}_calculateStatus(){return this._allControlsDisabled()?lu:this.errors?Sp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ol)?Ol:this._anyControlsHaveStatus(Sp)?Sp:su}_anyControlsHaveStatus(i){return this._anyControls(e=>e.status===i)}_anyControlsDirty(){return this._anyControls(i=>i.dirty)}_anyControlsTouched(){return this._anyControls(i=>i.touched)}_updatePristine(i,e){const n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!i.onlySelf&&this._parent._updatePristine(i,e),r&&this._events.next(new gS(this.pristine,e))}_updateTouched(i={},e){this.touched=this._anyControlsTouched(),this._events.next(new vS(this.touched,e)),this._parent&&!i.onlySelf&&this._parent._updateTouched(i,e)}_onDisabledChange=[];_registerOnCollectionChange(i){this._onCollectionChange=i}_setUpdateStrategy(i){Cp(i)&&null!=i.updateOn&&(this._updateOn=i.updateOn)}_parentMarkedDirty(i){return!i&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(i){return null}_assignValidators(i){this._rawValidators=Array.isArray(i)?i.slice():i,this._composedValidatorFn=function XX(t){return Array.isArray(t)?uS(t):t||null}(this._rawValidators)}_assignAsyncValidators(i){this._rawAsyncValidators=Array.isArray(i)?i.slice():i,this._composedAsyncValidatorFn=function JX(t){return Array.isArray(t)?hS(t):t||null}(this._rawAsyncValidators)}}class SS extends bS{constructor(i,e,n){super(yS(e),_S(n,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(i,e){return this.controls[i]?this.controls[i]:(this.controls[i]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(i,e,n={}){this.registerControl(i,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(i,e,n={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],e&&this.registerControl(i,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(i){return this.controls.hasOwnProperty(i)&&this.controls[i].enabled}setValue(i,e={}){(function qF(t,i,e){t._forEachChild((n,r)=>{if(void 0===e[r])throw new N(1002,"")})})(this,0,i),Object.keys(i).forEach(n=>{(function VF(t,i,e){const n=t.controls;if(!(i?Object.keys(n):n).length)throw new N(1e3,"");if(!n[e])throw new N(1001,"")})(this,!0,n),this.controls[n].setValue(i[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(Object.keys(i).forEach(n=>{const r=this.controls[n];r&&r.patchValue(i[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i={},e={}){this._forEachChild((n,r)=>{n.reset(i?i[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(i,e,n)=>(i[n]=e.getRawValue(),i))}_syncPendingControls(){let i=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&i(n,e)})}_setUpControls(){this._forEachChild(i=>{i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(i){for(const[e,n]of Object.entries(this.controls))if(this.contains(e)&&i(n))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(i,e){let n=i;return this._forEachChild((r,o)=>{n=e(n,r,o)}),n}_allControlsDisabled(){for(const i of Object.keys(this.controls))if(this.controls[i].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(i){return this.controls.hasOwnProperty(i)?this.controls[i]:null}}const Nl=new B("",{providedIn:"root",factory:()=>kp}),kp="always";function cu(t,i,e=kp){wS(t,i),i.valueAccessor.writeValue(t.value),(t.disabled||"always"===e)&&i.valueAccessor.setDisabledState?.(t.disabled),function iJ(t,i){i.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&jF(t,i)})}(t,i),function rJ(t,i){const e=(n,r)=>{i.valueAccessor.writeValue(n),r&&i.viewToModelUpdate(n)};t.registerOnChange(e),i._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,i),function nJ(t,i){i.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&jF(t,i),"submit"!==t.updateOn&&t.markAsTouched()})}(t,i),function tJ(t,i){if(i.valueAccessor.setDisabledState){const e=n=>{i.valueAccessor.setDisabledState(n)};t.registerOnDisabledChange(e),i._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,i)}function Tp(t,i,e=!0){const n=()=>{};i.valueAccessor&&(i.valueAccessor.registerOnChange(n),i.valueAccessor.registerOnTouched(n)),Ep(t,i),t&&(i._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function xp(t,i){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(i)})}function wS(t,i){const e=PF(t);null!==i.validator?t.setValidators(AF(e,i.validator)):"function"==typeof e&&t.setValidators([e]);const n=RF(t);null!==i.asyncValidator?t.setAsyncValidators(AF(n,i.asyncValidator)):"function"==typeof n&&t.setAsyncValidators([n]);const r=()=>t.updateValueAndValidity();xp(i._rawValidators,r),xp(i._rawAsyncValidators,r)}function Ep(t,i){let e=!1;if(null!==t){if(null!==i.validator){const r=PF(t);if(Array.isArray(r)&&r.length>0){const o=r.filter(a=>a!==i.validator);o.length!==r.length&&(e=!0,t.setValidators(o))}}if(null!==i.asyncValidator){const r=RF(t);if(Array.isArray(r)&&r.length>0){const o=r.filter(a=>a!==i.asyncValidator);o.length!==r.length&&(e=!0,t.setAsyncValidators(o))}}}const n=()=>{};return xp(i._rawValidators,n),xp(i._rawAsyncValidators,n),e}function jF(t,i){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),i.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function UF(t,i){wS(t,i)}function zF(t,i){t._syncPendingControls(),i.forEach(e=>{const n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}const cJ={provide:hn,useExisting:Pt(()=>uu)},du=Promise.resolve();let uu=(()=>{class t extends hn{callSetDisabledState;get submitted(){return si(this.submittedReactive)}_submitted=gr(()=>this.submittedReactive());submittedReactive=$(!1);_directives=new Set;form;ngSubmit=new le;options;constructor(e,n,r){super(),this.callSetDisabledState=r,this.form=new SS({},uS(e),hS(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){du.then(()=>{const n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),cu(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){du.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){du.then(()=>{const n=this._findContainer(e.path),r=new SS({});UF(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){du.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){du.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),zF(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(n){return new(n||t)(T(Ji,10),T(Go,10),T(Nl,8))};static \u0275dir=ie({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){1&n&&x("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[qe([cJ]),Le]})}return t})();function $F(t,i){const e=t.indexOf(i);e>-1&&t.splice(e,1)}function WF(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const GF=class extends bS{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(i=null,e,n){super(yS(e),_S(n,e)),this._applyFormState(i),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cp(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=WF(i)?i.value:i)}setValue(i,e={}){this.value=this._pendingValue=i,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(i,e={}){this.setValue(i,e)}reset(i=this.defaultValue,e={}){this._applyFormState(i),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(i){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(i){this._onChange.push(i)}_unregisterOnChange(i){$F(this._onChange,i)}registerOnDisabledChange(i){this._onDisabledChange.push(i)}_unregisterOnDisabledChange(i){$F(this._onDisabledChange,i)}_forEachChild(i){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(i){WF(i)?(this.value=this._pendingValue=i.value,i.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=i}};Promise.resolve();const SJ={provide:hn,useExisting:Pt(()=>hu)};let hu=(()=>{class t extends hn{callSetDisabledState;get submitted(){return si(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=gr(()=>this._submittedReactive());_submittedReactive=$(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new le;constructor(e,n,r){super(),this.callSetDisabledState=r,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ep(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const n=this.form.get(e.path);return cu(n,e,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){Tp(e.control||null,e,!1),function lJ(t,i){const e=t.indexOf(i);e>-1&&t.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this._submittedReactive.set(!0),zF(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new QX(this.control)),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new ZX(this.form))}_updateDomValue(){this.directives.forEach(e=>{const n=e.control,r=this.form.get(e.path);n!==r&&(Tp(n||null,e),(t=>t instanceof GF)(r)&&(cu(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const n=this.form.get(e.path);UF(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const n=this.form.get(e.path);n&&function oJ(t,i){return Ep(t,i)}(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wS(this.form,this),this._oldForm&&Ep(this._oldForm,this)}static \u0275fac=function(n){return new(n||t)(T(Ji,10),T(Go,10),T(Nl,8))};static \u0275dir=ie({type:t,selectors:[["","formGroup",""]],hostBindings:function(n,r){1&n&&x("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[qe([SJ]),Le,Oi]})}return t})();const DJ={provide:Ur,useExisting:Pt(()=>TS),multi:!0};function nO(t,i){return null==t?`${i}`:(i&&"object"==typeof i&&(i="Object"),`${t}: ${i}`.slice(0,50))}let TS=(()=>{class t extends $a{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;const r=nO(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=n=>{this.value=this._getOptionValue(n),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),e))return n;return null}_getOptionValue(e){const n=function TJ(t){return t.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=xt(t)))(r||t)}})();static \u0275dir=ie({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){1&n&&x("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[qe([DJ]),Le]})}return t})(),rO=(()=>{class t{_element;_renderer;_select;id;constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(nO(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(n){return new(n||t)(T(xe),T(Hi),T(TS,9))};static \u0275dir=ie({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();const xJ={provide:Ur,useExisting:Pt(()=>xS),multi:!0};function oO(t,i){return null==t?`${i}`:("string"==typeof i&&(i=`'${i}'`),i&&"object"==typeof i&&(i="Object"),`${t}: ${i}`.slice(0,50))}let xS=(()=>{class t extends $a{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){let n;if(this.value=e,Array.isArray(e)){const r=e.map(o=>this._getOptionId(o));n=(o,a)=>{o._setSelected(r.indexOf(a.toString())>-1)}}else n=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(e){this.onChange=n=>{const r=[],o=n.selectedOptions;if(void 0!==o){const a=o;for(let s=0;s<a.length;s++){const c=this._getOptionValue(a[s].value);r.push(c)}}else{const a=n.options;for(let s=0;s<a.length;s++){const l=a[s];if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){const n=(this._idCounter++).toString();return this._optionMap.set(n,e),n}_getOptionId(e){for(const n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,e))return n;return null}_getOptionValue(e){const n=function EJ(t){return t.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=xt(t)))(r||t)}})();static \u0275dir=ie({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){1&n&&x("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[qe([xJ]),Le]})}return t})(),aO=(()=>{class t{_element;_renderer;_select;id;_value;constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(oO(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(oO(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(n){return new(n||t)(T(xe),T(Hi),T(xS,9))};static \u0275dir=ie({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),NJ=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({})}return t})(),MS=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Nl,useValue:e.callSetDisabledState??kp}]}}static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({imports:[NJ]})}return t})();function HJ(t,i){1&t&&(h(0,"span"),y(1," \xa0\xa0Only starting your journey to immortality from the beginning again (Hard Reset) will prove you never took the easy path. "),f())}let VJ=(()=>{class t{constructor(e,n,r,o,a,s,l,c){this.homeService=e,this.farmService=n,this.characterService=r,this.inventoryService=o,this.gameStateService=a,this.followerService=s,this.mainLoopService=l,this.dialog=c}hardResetClicked(e){e.preventDefault(),confirm("This will reset everything permanently. Are you sure?")&&"reset"===prompt("For real, this will reset the whole game as if you've never played it. If you're really sure, type \"RESET\" to start all the way over.")?.toLowerCase()&&this.gameStateService.hardReset()}rebirthClicked(e){e.preventDefault(),confirm("This will end your current life. Are you sure?")&&this.gameStateService.rebirth()}darkModeToggle(){this.gameStateService.isDarkMode=!this.gameStateService.isDarkMode}easyModeChange(e){if(e.target instanceof HTMLInputElement)if(e.preventDefault(),e.stopPropagation(),this.characterService.easyMode)this.characterService.easyMode=!1;else{if(!this.gameStateService.easyModeEver){if(!confirm("This will enable easy mode and mark your save permanently. Are you sure?"))return void(e.target.checked=!1);this.gameStateService.easyModeEver=!0}this.characterService.easyMode=!0}}autoBuyFoodChange(e){e.target instanceof HTMLInputElement&&(this.inventoryService.autoBuyFood=e.target.checked)}playMusicChange(e){e.target instanceof HTMLInputElement&&(this.mainLoopService.playMusic=e.target.checked,this.mainLoopService.playAudio())}showLifeSummaryChange(e){e.target instanceof HTMLInputElement&&(this.characterService.showLifeSummary=e.target.checked)}showTipsChange(e){e.target instanceof HTMLInputElement&&(this.characterService.showTips=e.target.checked)}showUpdateAnimationsChange(e){e.target instanceof HTMLInputElement&&(this.characterService.showUpdateAnimations=e.target.checked)}scientificNotationChange(e){e.target instanceof HTMLInputElement&&(this.mainLoopService.scientificNotation=e.target.checked,this.gameStateService.savetoLocalStorage(),window.location.href=window.location.href)}importGameFileClick(e){const r=e.target?.files?.[0];if(r){const o=new FileReader,a=this.gameStateService,s=this.mainLoopService;o.readAsText(r,"UTF-8"),o.onload=function(){"string"==typeof o.result&&(s.importing=!0,a.importGame(o.result),a.savetoLocalStorage(),setTimeout(()=>{window.location.reload()},10))}}}exportGameFileClick(){const e=document.createElement("a");e.setAttribute("href",`data:text/plain;charset=utf-8,${encodeURIComponent(this.gameStateService.getGameExport())}`),e.setAttribute("download",`Immortality_Idle_${this.gameStateService.isExperimental?"Experimental":"v"+um.appVersion}_${(new Date).toISOString()}.txt`);const n=new MouseEvent("click");e.dispatchEvent(n)}importLayoutFileClick(e){const r=e.target?.files?.[0];if(r){const o=new FileReader,a=this.gameStateService;o.readAsText(r,"UTF-8"),o.onload=function(){"string"==typeof o.result&&(a.importLayout(o.result),a.savetoLocalStorage())}}}exportLayoutFileClick(){const e=document.createElement("a");e.setAttribute("href",`data:text/plain;charset=utf-8,${encodeURIComponent(this.gameStateService.getLayoutExport())}`),e.setAttribute("download",`Immortality_Idle_Layout_${this.gameStateService.isExperimental?"Experimental":"v"+um.appVersion}_${(new Date).toISOString()}.txt`);const n=new MouseEvent("click");e.dispatchEvent(n)}autoSaveInterval(e){e.target instanceof HTMLInputElement&&this.gameStateService.changeAutoSaveInterval(parseInt(e.target.value))}static{this.\u0275fac=function(n){return new(n||t)(T(zt),T(wr),T(Ie),T(he),T(Ut),T(Gt),T(tt),T(Ht))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-options-modal"]],decls:75,vars:10,consts:[["importLayoutFile",""],["importGameFile",""],[1,"darkMode","optionsDiv"],[1,"optionField"],["tooltip","This game is much too hard and takes much too long to play to the end.<br>Click this to make it easier and allow you to rush through the game.<br>\n      Be warned:<br>you will forever be known as a cultivator who took the easy path to immortality."],["type","checkbox","id","easyMode",3,"change","checked"],["for","easyMode"],["type","checkbox","id","autoBuyFood",3,"change","checked"],["for","autoBuyFood"],["type","checkbox","id","showLifeSummary",3,"change","checked"],["for","showLifeSummary"],["type","checkbox","id","showTips",3,"change","checked"],["for","showTips"],["type","checkbox","id","showUpdateAnimations",3,"change","checked"],["for","showUpdateAnimations"],["type","checkbox","id","scientificNotation",3,"change","checked"],["for","scientificNotation"],[1,"spaced","warning"],["tooltip","Enable background music (this allows the game to run in the background without throttling on some browsers)."],["type","checkbox","id","backgroundMusic",3,"change","checked"],["for","backgroundMusic"],["for","autoSaveInterval"],["type","number","min","1","max","900","step","1","id","autoSaveInterval",3,"change","value"],["tooltip","Voluntarily end this life, allowing your current attributes to strengthen your aptitudes in the next life.",3,"click"],["type","checkbox","id","darkMode",3,"change","checked"],["for","darkMode"],["type","file","id","importLayoutFile",3,"change"],[3,"click"],["type","file","id","importGameFile",3,"change"],["tooltip","Completely restart your journey toward immortality.",1,"warning",3,"click"]],template:function(n,r){if(1&n){const o=G();h(0,"div",2)(1,"span"),y(2,"Game Options"),f(),L(3,"hr"),h(4,"div",3)(5,"span",4)(6,"input",5),x("change",function(s){return M(o),I(r.easyModeChange(s))}),f(),h(7,"label",6),y(8,"Easy Mode"),f()(),H(9,HJ,2,0,"span"),f(),h(10,"div",3)(11,"span")(12,"input",7),x("change",function(s){return M(o),I(r.autoBuyFoodChange(s))}),f(),h(13,"label",8),y(14,"Automatically buy scraps each day if you have no food to avoid starvation."),f()()(),h(15,"div",3)(16,"span")(17,"input",9),x("change",function(s){return M(o),I(r.showLifeSummaryChange(s))}),f(),h(18,"label",10),y(19,"Show a previous life summary at the start of each life"),f()()(),h(20,"div",3)(21,"span")(22,"input",11),x("change",function(s){return M(o),I(r.showTipsChange(s))}),f(),h(23,"label",12),y(24,"Include tips in the life summary. Warning, this can spoil the fun of discovering things for yourself."),f()()(),h(25,"div",3)(26,"span")(27,"input",13),x("change",function(s){return M(o),I(r.showUpdateAnimationsChange(s))}),f(),h(28,"label",14),y(29,"Show animated updates when attributes or money values change."),f()()(),h(30,"div",3)(31,"span")(32,"input",15),x("change",function(s){return M(o),I(r.scientificNotationChange(s))}),f(),h(33,"label",16),y(34,"Turn on numbers with scientific notation."),f(),y(35,"\xa0 "),h(36,"span",17),y(37,"Changing this will save and reload immediately."),f()()(),h(38,"div",3)(39,"span",18)(40,"input",19),x("change",function(s){return M(o),I(r.playMusicChange(s))}),f(),h(41,"label",20),y(42,"Background Music (also improves background play)"),f()()(),h(43,"div",3)(44,"span")(45,"label",21),y(46,"Change how often the game autosaves (in seconds) "),f(),h(47,"input",22),x("change",function(s){return M(o),I(r.autoSaveInterval(s))}),f(),y(48,"\xa0 "),f()(),h(49,"div",3)(50,"button",23),x("click",function(s){return M(o),I(r.rebirthClicked(s))}),y(51," Reincarnate "),f()(),h(52,"div",3)(53,"span")(54,"input",24),x("change",function(){return M(o),I(r.darkModeToggle())}),f(),h(55,"label",25),y(56,"Dark Mode"),f()()(),h(57,"div",3)(58,"div")(59,"input",26,0),x("change",function(s){return M(o),I(r.importLayoutFileClick(s))}),f(),h(61,"button",27),x("click",function(){return M(o),I(Pa(60).click())}),y(62,"Import Layout File"),f(),h(63,"button",27),x("click",function(){return M(o),I(r.exportLayoutFileClick())}),y(64,"Export Layout File"),f()(),h(65,"div")(66,"input",28,1),x("change",function(s){return M(o),I(r.importGameFileClick(s))}),f(),h(68,"button",27),x("click",function(){return M(o),I(Pa(67).click())}),y(69,"Import Game File"),f(),h(70,"button",27),x("click",function(){return M(o),I(r.exportGameFileClick())}),y(71,"Export Game File"),f()()(),h(72,"div",3)(73,"button",29),x("click",function(s){return M(o),I(r.hardResetClicked(s))}),y(74,"Hard Reset"),f()()()}2&n&&(v(6),z("checked",r.characterService.easyMode),v(3),A(r.gameStateService.easyModeEver?9:-1),v(3),z("checked",r.inventoryService.autoBuyFood),v(5),z("checked",r.characterService.showLifeSummary),v(5),z("checked",r.characterService.showTips),v(5),z("checked",r.characterService.showUpdateAnimations),v(5),z("checked",r.mainLoopService.scientificNotation),v(8),z("checked",r.mainLoopService.playMusic),v(7),re("value",r.gameStateService.saveInterval),v(7),z("checked",r.gameStateService.isDarkMode))},dependencies:()=>[MS],styles:[".optionsDiv[_ngcontent-%COMP%]{overflow-y:auto;max-height:600px;min-height:250px}.inputBox[_ngcontent-%COMP%]{width:70px}.optionField[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{margin-top:2px}.scrollingDiv[_ngcontent-%COMP%]{max-height:200px;overflow:auto}.warning[_ngcontent-%COMP%]{color:red}.priorityTable[_ngcontent-%COMP%]{background:var(--itemSlotColor);border:1px solid var(--panelBorder);border-radius:4px;margin:5px 10px 10px}.priorityTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:x-small;font-weight:400;line-height:1}.priorityTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{text-align:left}.priorityTable[_ngcontent-%COMP%]   .priorityTableNameColumn[_ngcontent-%COMP%]{width:100px;padding-left:5px}.priorityTable[_ngcontent-%COMP%]   .priorityTableCheckboxColumn[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;width:50px}.priorityTable[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none}.priorityTable[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{color:var(--disabledText);cursor:default}.tab-label[_ngcontent-%COMP%]{color:var(--disabledText)}#importLayoutFile[_ngcontent-%COMP%], #importGameFile[_ngcontent-%COMP%]{display:none}"]})}}return t})();function qJ(t,i){if(1&t&&(h(0,"span"),y(1),O(2,"bigNumber"),f()),2&t){const e=S();v(),No(" Next rank requires ",V(2,3,e.characterService.condenseSoulCoreCost)," spirituality and a grade ",e.storeService.soulCoreRank+12," spirit gem",e.storeService.soulCoreRank>2?" of each element":"",". ")}}function jJ(t,i){1&t&&(h(0,"span"),y(1," Max Rank "),f())}function UJ(t,i){if(1&t&&(h(0,"span"),y(1),O(2,"bigNumber"),f()),2&t){const e=S();v(),No(" Next rank requires ",V(2,3,e.characterService.reinforceMeridiansCost)," spirituality and a grade ",e.storeService.meridianRank+16," spirit gem",e.storeService.meridianRank>2?" of each element":"",". ")}}function zJ(t,i){1&t&&(h(0,"span"),y(1," Max Rank "),f())}function $J(t,i){if(1&t&&(h(0,"span"),y(1),O(2,"bigNumber"),f()),2&t){const e=S();v(),qi(" Next rank requires ",V(2,2,e.characterService.bloodlineCost)," spirituality and a ",e.storeService.bloodLineHomeRequirement.name,". ")}}function WJ(t,i){1&t&&(h(0,"span"),y(1," Max Rank "),f())}function GJ(t,i){if(1&t&&(h(0,"span"),y(1),O(2,"number"),O(3,"number"),f()),2&t){const e=S();v(),qi(" You have consumed ",pr(2,2,100*(e.characterService.empowermentFactor-1),"1.0-0")," Empowerment Pills which multiplies all your attribute gains by ",pr(3,5,e.characterService.getEmpowermentMult(),"1.0-3"),". You will always keep this bonus, even after ascending. ")}}let YJ=(()=>{class t{constructor(e,n){this.storeService=e,this.characterService=n}static{this.\u0275fac=function(n){return new(n||t)(T(jr),T(Ie))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-ascension-store-modal"]],decls:45,vars:12,consts:[[1,"darkMode"],[1,"ascensionContainer"],[3,"click","disabled"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"div")(2,"span"),y(3,"Ascension Techniques"),f()(),L(4,"hr"),h(5,"div")(6,"span"),y(7,"Ascension techniques are powerful steps that can permanently increase your potential. Be warned: after ascending, you will find yourself temporarily weakened and vulnerable to all sorts of threats. Wise sages have warned that you may even need to seek more humble dwellings and avoid stronger monsters until you have regained your full strength."),f()(),L(8,"hr"),h(9,"div",1)(10,"table")(11,"tr")(12,"td")(13,"button",2),x("click",function(){return r.storeService.condenseSoulCore()}),y(14,"Condense Soul Core"),f()(),h(15,"td"),y(16," End your current life, sacrifice all attributes and aptitudes that are not protected by the power of your previous soul core ascensions, and permanently increase the amount of aptitude gained on each Reincarnation and Ascension. "),L(17,"br"),y(18),L(19,"br"),H(20,qJ,3,5,"span")(21,jJ,2,0,"span"),f()(),h(22,"tr")(23,"td")(24,"button",2),x("click",function(){return r.storeService.reinforceMeridians()}),y(25,"Reinforce Meridians"),f()(),h(26,"td"),y(27," End your current life, sacrifice all attributes and aptitudes that are not protected by the power of your previous soul core ascensions, and permanently increase the power of your aptitudes to improve your attribute gains. "),L(28,"br"),y(29),L(30,"br"),H(31,UJ,3,5,"span")(32,zJ,2,0,"span"),f()(),h(33,"tr")(34,"td")(35,"button",2),x("click",function(){return r.storeService.upgradeBloodline()}),y(36),f()(),h(37,"td"),y(38),L(39,"br"),y(40),L(41,"br"),H(42,$J,3,4,"span")(43,WJ,2,0,"span"),f()()(),H(44,GJ,4,8,"span"),f()()),2&n&&(v(13),z("disabled",r.storeService.soulCoreRank>8),v(5),j(" Current Rank: ",r.storeService.soulCoreRank," "),v(2),A(r.storeService.soulCoreRank<9?20:21),v(4),z("disabled",r.storeService.meridianRank>8),v(5),j(" Current Rank: ",r.storeService.meridianRank," "),v(2),A(r.storeService.meridianRank<9?31:32),v(4),z("disabled",r.characterService.bloodlineRank>=9),v(),Fe(r.storeService.bloodlineLabel),v(2),j(" ",r.storeService.bloodlineDescription," "),v(2),j(" Current Rank: ",r.characterService.bloodlineRank," "),v(2),A(r.characterService.bloodlineRank<9?42:43),v(2),A(r.characterService.empowermentFactor>1?44:-1))},dependencies:()=>[yl,It],styles:["table[_ngcontent-%COMP%]{border-spacing:8px}td[_ngcontent-%COMP%]{border-bottom:1px var(--tableDividerColor) solid}button[_ngcontent-%COMP%]{margin-top:2px}.ascensionContainer[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto}"]})}}return t})();class QJ{constructor(i,e){this.value=i,this.interval=e}}let gO=(()=>{class t{constructor(e){this.daysPerSecond=0,e.longTickSubject.pipe(function KJ(t=Sl){return Bt((i,e)=>{let n=t.now();i.subscribe(wt(e,r=>{const o=t.now(),a=o-n;n=o,e.next(new QJ(r,a))}))})}(),me(r=>r.value/(r.interval/1e3)),function ZJ(t,...i){var e,n;const r=null!==(e=bl(i))&&void 0!==e?e:Sl,o=null!==(n=i[0])&&void 0!==n?n:null,a=i[1]||1/0;return Bt((s,l)=>{let c=[],d=!1;const u=m=>{const{buffer:b,subs:C}=m;C.unsubscribe(),dc(c,m),l.next(b),d&&p()},p=()=>{if(c){const m=new je;l.add(m);const C={buffer:[],subs:m};c.push(C),_r(m,r,()=>u(C),t)}};null!==o&&o>=0?_r(l,r,p,o,!0):d=!0,p();const g=wt(l,m=>{const b=c.slice();for(const C of b){const{buffer:w}=C;w.push(m),a<=w.length&&u(C)}},()=>{for(;c?.length;)l.next(c.shift().buffer);g?.unsubscribe(),l.complete(),l.unsubscribe()},void 0,()=>c=null);s.subscribe(g)})}(5e3),me(r=>r.reduce((o,a)=>o+a,0)/r.length)).subscribe(r=>{this.daysPerSecond=r})}static{this.\u0275fac=function(n){return new(n||t)(P(tt))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function XJ(t,i){if(1&t&&(h(0,"tr")(1,"td"),y(2),O(3,"camelToTitle"),f(),h(4,"td"),y(5),f()()),2&t){const e=i.$implicit,n=S();v(2),j(" Days of ",V(3,2,n.getActivityName(e.key))," "),v(3),j(" ",e.value," ")}}function JJ(t,i){if(1&t&&(h(0,"tr")(1,"td"),y(2),O(3,"camelToTitle"),f(),h(4,"td"),y(5),O(6,"bigNumber"),f()()),2&t){const e=i.$implicit;v(2),j(" Highest ",V(3,2,e.key)," "),v(3),j(" ",V(6,4,e.value)," ")}}let eee=(()=>{class t{constructor(e,n,r,o,a,s,l,c,d,u,p){this.mainLoopService=e,this.storeService=n,this.inventoryService=r,this.homeService=o,this.farmService=a,this.followerService=s,this.characterService=l,this.battleService=c,this.activityService=d,this.achievementService=u,this.statisticsService=p,this.originalOrder=()=>0}getActivityName(e){return this.activityService.getActivityName(parseInt(e))}static{this.\u0275fac=function(n){return new(n||t)(T(tt),T(jr),T(he),T(zt),T(wr),T(Gt),T(Ie),T(Vt),T(bt),T(sp),T(gO))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-statistics-panel"]],decls:246,vars:72,consts:[[1,"darkMode"],[1,"statisticsDiv"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"h3"),y(2,"Statistics"),f(),L(3,"hr"),h(4,"div",1),L(5,"br")(6,"br"),h(7,"span"),y(8,"This Life's Activities"),f(),L(9,"br"),h(10,"table"),be(11,XJ,6,4,"tr",null,_t),O(13,"keyvalue"),f(),L(14,"br"),h(15,"table")(16,"tr")(17,"td"),y(18," Enemies killed this life: "),f(),h(19,"td"),y(20),f()(),h(21,"tr")(22,"td"),y(23," Items used: "),f(),h(24,"td"),y(25),f()(),h(26,"tr")(27,"td"),y(28," Healthy Food Eaten: "),f(),h(29,"td"),y(30),f()(),h(31,"tr")(32,"td"),y(33," Items sold: "),f(),h(34,"td"),y(35),f()(),h(36,"tr")(37,"td"),y(38," Potions used: "),f(),h(39,"td"),y(40),f()(),h(41,"tr")(42,"td"),y(43," Pills used: "),f(),h(44,"td"),y(45),f()(),h(46,"tr")(47,"td"),y(48," Gems sold: "),f(),h(49,"td"),y(50),f()()(),L(51,"br")(52,"br"),h(53,"span"),y(54,"Across All Lives"),f(),L(55,"br"),h(56,"table")(57,"tr")(58,"td"),y(59," Game days per real second: "),f(),h(60,"td"),y(61),O(62,"number"),f()(),h(63,"tr")(64,"td"),y(65," Game years per real minute: "),f(),h(66,"td"),y(67),O(68,"number"),f()(),h(69,"tr")(70,"td"),y(71," Game years per real hour: "),f(),h(72,"td"),y(73),O(74,"number"),f()(),h(75,"tr")(76,"td"),y(77," Total days lived: "),f(),h(78,"td"),y(79),O(80,"bigNumber"),f()(),h(81,"tr")(82,"td"),y(83," Total lives lived: "),f(),h(84,"td"),y(85),f()(),h(86,"tr")(87,"td"),y(88," Total enemies killed: "),f(),h(89,"td"),y(90),f()(),h(91,"tr")(92,"td"),y(93," Enemies killed this life: "),f(),h(94,"td"),y(95),f()(),h(96,"tr")(97,"td"),y(98," Manuals discovered: "),f(),h(99,"td"),y(100),f()(),h(101,"tr")(102,"td"),y(103," Inventory Capacity: "),f(),h(104,"td"),y(105),f()(),h(106,"tr")(107,"td"),y(108," Automatically sold items: "),f(),h(109,"td"),y(110),f()(),h(111,"tr")(112,"td"),y(113," Automatically used items: "),f(),h(114,"td"),y(115),f()(),h(116,"tr")(117,"td"),y(118," Automatically balanced items: "),f(),h(119,"td"),y(120),f()(),h(121,"tr")(122,"td"),y(123," Items overflowed: "),f(),h(124,"td"),y(125),f()(),h(126,"tr")(127,"td"),y(128," Unlocked Achievements: "),f(),h(129,"td"),y(130),f()(),h(131,"tr")(132,"td"),y(133," Most land owned: "),f(),h(134,"td"),y(135),O(136,"bigNumber"),f()(),h(137,"tr")(138,"td"),y(139," Highest land price: "),f(),h(140,"td"),y(141),O(142,"bigNumber"),f()(),h(143,"tr")(144,"td"),y(145," Most fields owned: "),f(),h(146,"td"),y(147),O(148,"bigNumber"),f()(),h(149,"tr")(150,"td"),y(151," Best home owned: "),f(),h(152,"td"),y(153),f()(),h(154,"tr")(155,"td"),y(156," Follower recruited: "),f(),h(157,"td"),y(158),f()(),h(159,"tr")(160,"td"),y(161," Followers recruited lately: "),f(),h(162,"td"),y(163),f()(),h(164,"tr")(165,"td"),y(166," Followers died: "),f(),h(167,"td"),y(168),f()(),h(169,"tr")(170,"td"),y(171," Followers dismissed: "),f(),h(172,"td"),y(173),f()(),h(174,"tr")(175,"td"),y(176," Highest follower level: "),f(),h(177,"td"),y(178),f()(),h(179,"tr")(180,"td"),y(181," Most money: "),f(),h(182,"td"),y(183),O(184,"bigNumber"),f()(),h(185,"tr")(186,"td"),y(187," Oldest age: "),f(),h(188,"td"),y(189),f()(),be(190,JJ,7,6,"tr",null,_t),O(192,"keyvalue"),h(193,"tr")(194,"td"),y(195," Highest health: "),f(),h(196,"td"),y(197),f()(),h(198,"tr")(199,"td"),y(200," Highest stamina: "),f(),h(201,"td"),y(202),f()(),h(203,"tr")(204,"td"),y(205," Highest qi: "),f(),h(206,"td"),y(207),f()(),h(208,"tr")(209,"td"),y(210," Highest damage dealt: "),f(),h(211,"td"),y(212),O(213,"bigNumber"),f()(),h(214,"tr")(215,"td"),y(216," Highest damage taken: "),f(),h(217,"td"),y(218),O(219,"bigNumber"),f()(),h(220,"tr")(221,"td"),y(222," Days spent exhausted "),f(),h(223,"td"),y(224),O(225,"bigNumber"),f()(),h(226,"tr")(227,"td"),y(228," Completed Apprenticeships "),f(),h(229,"td"),y(230),f()(),h(231,"tr")(232,"td"),y(233," Open apprenticeships: "),f(),h(234,"td"),y(235),f()(),h(236,"tr")(237,"td"),y(238," Consecutive harvest days: "),f(),h(239,"td"),y(240),f()(),h(241,"tr")(242,"td"),y(243," Pieces of equipment created: "),f(),h(244,"td"),y(245),f()()()()()),2&n&&(v(11),Se(pr(13,42,r.activityService.lifeActivities,r.originalOrder)),v(9),j(" ",r.battleService.kills," "),v(5),j(" ",r.inventoryService.lifetimeUsedItems," "),v(5),j(" ",r.inventoryService.lifetimeUsedFood," "),v(5),j(" ",r.inventoryService.lifetimeSoldItems," "),v(5),j(" ",r.inventoryService.lifetimePotionsUsed," "),v(5),j(" ",r.inventoryService.lifetimePillsUsed," "),v(5),j(" ",r.inventoryService.lifetimeGemsSold," "),v(11),j(" ",pr(62,45,r.statisticsService.daysPerSecond,"1.0-2")," "),v(6),j(" ",pr(68,48,60*r.statisticsService.daysPerSecond/365,"1.0-2")," "),v(6),j(" ",pr(74,51,60*r.statisticsService.daysPerSecond*60/365,"1.0-2")," "),v(6),j(" ",V(80,54,r.mainLoopService.totalTicks)," "),v(6),j(" ",r.characterService.totalLives," "),v(5),j(" ",r.battleService.totalKills," "),v(5),j(" ",r.battleService.kills," "),v(5),j(" ",r.storeService.manuals.length," "),v(5),j(" ",r.inventoryService.maxItems," "),v(5),j(" ",r.inventoryService.autoSellEntries.length," "),v(5),j(" ",r.inventoryService.autoUseEntries.length," "),v(5),j(" ",r.inventoryService.autoBalanceItems.length," "),v(5),j(" ",r.inventoryService.thrownAwayItems," "),v(5),j(" ",r.achievementService.unlockedAchievements.length," "),v(5),j(" ",V(136,56,r.homeService.highestLand)," "),v(6),j(" ",V(142,58,r.homeService.highestLandPrice)," "),v(6),j(" ",V(148,60,r.farmService.mostFields)," "),v(6),j(" ",r.homeService.homesList[r.homeService.bestHome].name," "),v(5),j(" ",r.followerService.totalRecruited," "),v(5),j(" ",r.followerService.followersRecruited," "),v(5),j(" ",r.followerService.totalDied," "),v(5),j(" ",r.followerService.totalDismissed," "),v(5),j(" ",r.followerService.highestLevel," "),v(5),j(" ",V(184,62,r.characterService.highestMoney)," "),v(6),j(" ",r.characterService.yearify(r.characterService.highestAge)," "),v(),Se(V(192,64,r.characterService.highestAttributes)),v(7),j(" ",r.characterService.highestHealth," "),v(5),j(" ",r.characterService.highestStamina," "),v(5),j(" ",r.characterService.highestQi," "),v(5),j(" ",V(213,66,r.battleService.highestDamageDealt)," "),v(6),j(" ",V(219,68,r.battleService.highestDamageTaken)," "),v(6),j(" ",V(225,70,r.activityService.totalExhaustedDays)," "),v(6),j(" ",r.activityService.completedApprenticeships.length," "),v(5),j(" ",r.activityService.openApprenticeships," "),v(5),j(" ",r.farmService.consecutiveHarvests," "),v(5),j(" ",r.inventoryService.equipmentCreated," "))},dependencies:()=>[yl,Cm,Vr,It],styles:["table[_ngcontent-%COMP%]{width:100%}.statisticsDiv[_ngcontent-%COMP%]{width:100%;height:500px;overflow:auto}td[_ngcontent-%COMP%]{width:45%}"]})}}return t})();const tee=(t,i)=>t+""+i.unlocked;function iee(t,i){if(1&t&&(h(0,"div"),y(1),f()),2&t){const e=S(2).$implicit;v(),Fe(e.displayName)}}function nee(t,i){if(1&t&&(h(0,"div"),y(1),f()),2&t){const e=S(2).$implicit;v(),Fe(e.name)}}function ree(t,i){if(1&t&&(h(0,"div",3),H(1,iee,2,1,"div")(2,nee,2,1,"div"),f()),2&t){const e=S().$implicit;re("tooltip",e.description),v(),A(e.displayName?1:-1),v(),A(e.displayName?-1:2)}}function oee(t,i){1&t&&(h(0,"div",4),y(1," ? "),f()),2&t&&re("tooltip",S().$implicit.hint)}function aee(t,i){if(1&t&&(h(0,"div"),H(1,ree,3,3,"div",3)(2,oee,2,1,"div",4),f()),2&t){const e=i.$implicit;v(),A(e.unlocked?1:2)}}let see=(()=>{class t{constructor(e){this.achievementService=e}static{this.\u0275fac=function(n){return new(n||t)(T(sp))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-achievement-panel"]],decls:12,vars:3,consts:[[1,"darkMode"],[1,"achievementContainer"],[1,"achievementGrid"],["tabindex","0",1,"itemSlot",3,"tooltip"],[1,"itemSlot",3,"tooltip"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"h3"),y(2),f(),L(3,"hr"),h(4,"div",1)(5,"div",2),be(6,aee,3,1,"div",null,tee),f()(),h(8,"div")(9,"span"),y(10),f()()(),L(11,"br")),2&n&&(v(2),qi("Achievements (",r.achievementService.unlockedAchievements.length," / ",r.achievementService.achievements.length,")"),v(4),Se(r.achievementService.achievements),v(4),j("Your achievements increase attribute growth by ",2*r.achievementService.unlockedAchievements.length,"%"))},dependencies:()=>[et],styles:[".itemSlot[_ngcontent-%COMP%]{width:90px;height:90px;font-size:small;display:table-cell;vertical-align:middle;cursor:default}.achievementGrid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;border-spacing:4px;max-height:600px}.itemSlot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{line-height:12px}.iconButton[_ngcontent-%COMP%]{float:right}.achievementContainer[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto}"]})}}return t})(),lee=(()=>{class t{constructor(e){this.gameStateService=e}static{this.\u0275fac=function(n){return new(n||t)(T(Ut))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-credits-modal"]],decls:43,vars:0,consts:[[1,"darkMode"],[1,"creditsContainer"],["href","https://github.com/immortalityidle/immortalityidle.github.io","target","_blank"],["href","/assets/music/Shaolin-Dub-Rising-Sun-Beat.mp3","download",""],["href","https://creativecommons.org/licenses/by-nc-nd/4.0/","target","_blank"],["href","https://a.co/d/j9fztjO","target","_blank",3,"click"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"h3"),y(2,"Credits"),f(),L(3,"hr"),h(4,"div",1)(5,"div")(6,"span"),y(7," Hi! My name is Christian Bradley, and I made this game for you. I write boring old regular software by day, but by night I write sci-fi and fantasy novels and create this cultivation idle game. "),f()(),L(8,"br"),h(9,"div")(10,"span"),y(11," Everything involved in this project (the game, the code, the art, and the music) is all open source and free. "),f()(),L(12,"br"),h(13,"div")(14,"span"),y(15," The code for the game is hosted on github "),h(16,"a",2),y(17,"here"),f(),y(18,", and they also host the playable game. "),f()(),L(19,"br"),h(20,"div")(21,"span"),y(22," A bunch of friendly people have contributed to the game's code on github, including my brother James (jimboradley), who helped me with the initial design of the game and made the current version's mobile support possible. Other contributors include: Patriot, Caldwell-74, VladFurman, slaymaker1907, LiquidAlmond, vhaldemar, kagejohn, Hornsoup, OneMoreGuy, KneeAwnn, jmrd98, 1234abcdcba4321, WilliamDickerson, ghost, PotatoArt, tobbez, Ch1pless, Croebh, owenpearson, ChandlerFerry, Kleptichron, illo210, and Lamphobic. I'd like to give a big thanks to all of them and everyone from the game's Discord who contributed ideas and helped test and make this game what it is today. "),f()(),L(23,"br"),h(24,"div")(25,"span"),y(26," The background music is "),h(27,"a",3),y(28,"Rising Sun Beat by Shaolin Dub"),f(),y(29,", released for free under the "),h(30,"a",4),y(31,"Creative Commons License"),f(),y(32,". "),f()(),L(33,"br"),h(34,"div")(35,"span"),y(36," Want to support and encourage me in this and my other creative efforts? Tell a friend about the game! My motivation in creating this game is making people happy, and I'd like as many people to enjoy it as possible. "),f()(),L(37,"br"),h(38,"div")(39,"span"),y(40," Really, really want to support me and enjoy reading? "),h(41,"a",5),x("click",function(){return r.gameStateService.supportClicked=!0}),y(42,"Give my books a shot."),f()()()()())},encapsulation:2})}}return t})(),IS=(()=>{class t{constructor(){this.dialog=_(Ht),this.characterService=_(Ie),this.gameStateService=_(Ut),this.storeService=_(jr)}changelogClicked(){this.dialog.open(FZ,{autoFocus:!1})}tutorialClicked(){this.dialog.open(SX,{autoFocus:!1})}storeClicked(){this.dialog.open(EX,{autoFocus:!1})}manualStoreClicked(){this.dialog.open(FX,{autoFocus:!1})}optionsClicked(){this.dialog.open(VJ,{autoFocus:!1})}ascensionStoreClicked(){this.storeService.updateAscensions(),this.dialog.open(YJ,{autoFocus:!1})}statisticsClicked(){this.dialog.open(eee,{autoFocus:!1})}achievementsClicked(){this.dialog.open(see,{autoFocus:!1})}saveClicked(){this.gameStateService.savetoLocalStorage(),this.characterService.toast("Manual Save Complete")}creditsClicked(){this.gameStateService.creditsClicked=!0,this.dialog.open(lee,{autoFocus:!1})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),pee=(()=>{class t{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t})}return t})();const gee=new B("MatFormField");let vee=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({imports:[vi,tP,vi]})}return t})();class _ee{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new Y;constructor(i=!1,e,n=!0,r){this._multiple=i,this._emitChanges=n,this.compareWith=r,e&&e.length&&(i?e.forEach(o=>this._markSelected(o)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...i){this._verifyValueAssignment(i),i.forEach(n=>this._markSelected(n));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...i){this._verifyValueAssignment(i),i.forEach(n=>this._unmarkSelected(n));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...i){this._verifyValueAssignment(i);const e=this.selected,n=new Set(i.map(o=>this._getConcreteValue(o)));i.forEach(o=>this._markSelected(o)),e.filter(o=>!n.has(this._getConcreteValue(o,n))).forEach(o=>this._unmarkSelected(o));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(i){return this.isSelected(i)?this.deselect(i):this.select(i)}clear(i=!0){this._unmarkAll();const e=this._hasQueuedChanges();return i&&this._emitChangeEvent(),e}isSelected(i){return this._selection.has(this._getConcreteValue(i))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(i){this._multiple&&this.selected&&this._selected.sort(i)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(i){i=this._getConcreteValue(i),this.isSelected(i)||(this._multiple||this._unmarkAll(),this.isSelected(i)||this._selection.add(i),this._emitChanges&&this._selectedToEmit.push(i))}_unmarkSelected(i){i=this._getConcreteValue(i),this.isSelected(i)&&(this._selection.delete(i),this._emitChanges&&this._deselectedToEmit.push(i))}_unmarkAll(){this.isEmpty()||this._selection.forEach(i=>this._unmarkSelected(i))}_verifyValueAssignment(i){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(i,e){if(this.compareWith){e=e??this._selection;for(let n of e)if(this.compareWith(i,n))return n;return i}return i}}const bee=["trigger"],See=["panel"],wee=[[["mat-select-trigger"]],"*"],Cee=["mat-select-trigger","*"];function kee(t,i){if(1&t&&(h(0,"span",4),y(1),f()),2&t){const e=S();v(),Fe(e.placeholder)}}function Dee(t,i){1&t&&di(0)}function Tee(t,i){if(1&t&&(h(0,"span",11),y(1),f()),2&t){const e=S(2);v(),Fe(e.triggerValue)}}function xee(t,i){if(1&t&&(h(0,"span",5),H(1,Dee,1,0)(2,Tee,2,1,"span",11),f()),2&t){const e=S();v(),A(e.customTrigger?1:2)}}function Eee(t,i){if(1&t){const e=G();h(0,"div",12,1),x("keydown",function(r){return M(e),I(S()._handleKeydown(r))}),di(2,1),f()}if(2&t){const e=S();(function xE(t,i,e){mr(Pn,Lr,el(q(),t,i,e),!0)})("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),ot("mat-select-panel-animations-enabled",!e._animationsDisabled),z("ngClass",e.panelClass),Me("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const vO=new B("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{const t=_(Mn);return()=>t.scrollStrategies.reposition()}}),Iee=new B("MAT_SELECT_CONFIG"),Aee={provide:vO,deps:[Mn],useFactory:function Mee(t){return()=>t.scrollStrategies.reposition()}},Pee=new B("MatSelectTrigger");class Ree{source;value;constructor(i,e){this.source=i,this.value=e}}let yO=(()=>{class t{_viewportRuler=_(Il);_changeDetectorRef=_(ji);_elementRef=_(xe);_dir=_(br,{optional:!0});_idGenerator=_(mo);_renderer=_(Hi);_parentFormField=_(gee,{optional:!0});ngControl=_(po,{self:!0,optional:!0});_liveAnnouncer=_(mP);_defaultOptions=_(Iee,{optional:!0});_animationsDisabled="NoopAnimations"===_(Sn,{optional:!0});_initialized=new Y;_cleanupDetach;options;optionGroups;customTrigger;_positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}];_scrollOptionIntoView(e){const n=this.options.toArray()[e];if(n){const r=this.panel.nativeElement,o=function l7(t,i,e){if(e.length){let n=i.toArray(),r=e.toArray(),o=0;for(let a=0;a<t+1;a++)n[a].group&&n[a].group===r[o]&&o++;return o}return 0}(e,this.options,this.optionGroups),a=n._getHostElement();r.scrollTop=0===e&&1===o?0:function c7(t,i,e,n){return t<e?t:t+i>e+n?Math.max(0,t-n+i):e}(a.offsetTop,a.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new Ree(this,e)}_scrollStrategyFactory=_(vO);_panelOpen=!1;_compareWith=(e,n)=>e===n;_uid=this._idGenerator.getId("mat-select-");_triggerAriaLabelledBy=null;_previousControl;_destroy=new Y;_errorStateTracker;stateChanges=new Y;disableAutomaticLabeling=!0;userAriaDescribedBy;_selectionModel;_keyManager;_preferredOverlayOrigin;_overlayWidth;_onChange=()=>{};_onTouched=()=>{};_valueId=this._idGenerator.getId("mat-select-value-");_scrollStrategy;_overlayPanelClass=this._defaultOptions?.overlayPanelClass||"";get focused(){return this._focused||this._panelOpen}_focused=!1;controlType="mat-select";trigger;panel;_overlayDir;panelClass;disabled=!1;disableRipple=!1;tabIndex=0;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1;get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}_placeholder;get required(){return this._required??this.ngControl?.control?.hasValidator(VX.required)??!1}set required(e){this._required=e,this.stateChanges.next()}_required;get multiple(){return this._multiple}set multiple(e){this._multiple=e}_multiple=!1;disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1;get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}_value;ariaLabel="";ariaLabelledby;get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}typeaheadDebounceInterval;sortComparator;get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}_id;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto";canSelectNullableOptions=this._defaultOptions?.canSelectNullableOptions??!1;optionSelectionChanges=Fl(()=>{const e=this.options;return e?e.changes.pipe($i(e),yi(()=>Ti(...e.map(n=>n.onSelectionChange)))):this._initialized.pipe(yi(()=>this.optionSelectionChanges))});openedChange=new le;_openedStream=this.openedChange.pipe(Qe(e=>e),me(()=>{}));_closedStream=this.openedChange.pipe(Qe(e=>!e),me(()=>{}));selectionChange=new le;valueChange=new le;constructor(){const e=_(J9),n=_(uu,{optional:!0}),r=_(hu,{optional:!0}),o=_(new r1("tabindex"),{optional:!0});this.ngControl&&(this.ngControl.valueAccessor=this),null!=this._defaultOptions?.typeaheadDebounceInterval&&(this.typeaheadDebounceInterval=this._defaultOptions.typeaheadDebounceInterval),this._errorStateTracker=new G9(e,this.ngControl,r,n,this.stateChanges),this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=null==o?0:parseInt(o)||0,this.id=this.id}ngOnInit(){this._selectionModel=new _ee(this.multiple),this.stateChanges.next(),this._viewportRuler.change().pipe(at(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(at(this._destroy)).subscribe(e=>{e.added.forEach(n=>n.select()),e.removed.forEach(n=>n.deselect())}),this.options.changes.pipe($i(null),at(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),n=this.ngControl;if(e!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(void 0!==this._previousControl&&null!==n.disabled&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._cleanupDetach?.(),this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._cleanupDetach?.(),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._overlayDir.positionChange.pipe(pi(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()}),this._overlayDir.attachOverlay(),this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next(),Promise.resolve().then(()=>this.openedChange.emit(!0)))}_trackedModal=null;_applyModalPanelOwnership(){const e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;const n=`${this.id}-panel`;this._trackedModal&&nP(this._trackedModal,"aria-owns",n),function l9(t,i,e){const n=rP(t,i);e=e.trim(),!n.some(r=>r.trim()===e)&&(n.push(e),t.setAttribute(i,n.join(" ")))}(e,"aria-owns",n),this._trackedModal=e}_clearFromModal(){this._trackedModal&&(nP(this._trackedModal,"aria-owns",`${this.id}-panel`),this._trackedModal=null)}close(){this._panelOpen&&(this._panelOpen=!1,this._exitAndDetach(),this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next(),Promise.resolve().then(()=>this.openedChange.emit(!1)))}_exitAndDetach(){if(this._animationsDisabled||!this.panel)return void this._detachOverlay();this._cleanupDetach?.(),this._cleanupDetach=()=>{n(),clearTimeout(r),this._cleanupDetach=void 0};const e=this.panel.nativeElement,n=this._renderer.listen(e,"animationend",o=>{"_mat-select-exit"===o.animationName&&(this._cleanupDetach?.(),this._detachOverlay())}),r=setTimeout(()=>{this._cleanupDetach?.(),this._detachOverlay()},200);e.classList.add("mat-select-panel-exit")}_detachOverlay(){this._overlayDir.detachOverlay(),this._changeDetectorRef.markForCheck()}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const n=e.keyCode,r=40===n||38===n||37===n||39===n,o=13===n||32===n,a=this._keyManager;if(!a.isTyping()&&o&&!Nr(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){const s=this.selected;a.onKeydown(e);const l=this.selected;l&&s!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){const n=this._keyManager,r=e.keyCode,o=40===r||38===r,a=n.isTyping();if(o&&e.altKey)e.preventDefault(),this.close();else if(a||13!==r&&32!==r||!n.activeItem||Nr(e))if(!a&&this._multiple&&65===r&&e.ctrlKey){e.preventDefault();const s=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(s?l.select():l.deselect())})}else{const s=n.activeItemIndex;n.onKeydown(e),this._multiple&&o&&e.shiftKey&&n.activeItem&&n.activeItemIndex!==s&&n.activeItem._selectViaInteraction()}else e.preventDefault(),n.activeItem._selectViaInteraction()}_handleOverlayKeydown(e){27===e.keyCode&&!Nr(e)&&(e.preventDefault(),this.close())}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{const n=this._selectOptionByValue(e);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const n=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return(null!=r.value||this.canSelectNullableOptions)&&this._compareWith(r.value,e)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_skipPredicate=e=>!this.panelOpen&&e.disabled;_getOverlayWidth(e){return"auto"===this.panelWidth?(e instanceof rp?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:null===this.panelWidth?"":this.panelWidth}_syncParentProperties(){if(this.options)for(const e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new h9(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=Ti(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(at(e)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Ti(...this.options.map(n=>n._stateChanges)).pipe(at(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,n){const r=this._selectionModel.isSelected(e);this.canSelectNullableOptions||null!=e.value||this._multiple?(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),n&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),n&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((n,r)=>this.sortComparator?this.sortComparator(n,r,e):e.indexOf(n)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let n;n=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:e,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let n=0;n<this.options.length;n++)if(!this.options.get(n).disabled){e=n;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0&&!!this._overlayDir}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId()||null;return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let n=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["mat-select"]],contentQueries:function(n,r,o){if(1&n&&(ln(o,Pee,5),ln(o,y0,5),ln(o,DP,5)),2&n){let a;Ye(a=Ke())&&(r.customTrigger=a.first),Ye(a=Ke())&&(r.options=a),Ye(a=Ke())&&(r.optionGroups=a)}},viewQuery:function(n,r){if(1&n&&(ti(bee,5),ti(See,5),ti(ER,5)),2&n){let o;Ye(o=Ke())&&(r.trigger=o.first),Ye(o=Ke())&&(r.panel=o.first),Ye(o=Ke())&&(r._overlayDir=o.first)}},hostAttrs:["role","combobox","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(n,r){1&n&&x("keydown",function(a){return r._handleKeydown(a)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),2&n&&(Me("id",r.id)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-activedescendant",r._getAriaActiveDescendant()),ot("mat-mdc-select-disabled",r.disabled)("mat-mdc-select-invalid",r.errorState)("mat-mdc-select-required",r.required)("mat-mdc-select-empty",r.empty)("mat-mdc-select-multiple",r.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",Oe],disableRipple:[2,"disableRipple","disableRipple",Oe],tabIndex:[2,"tabIndex","tabIndex",e=>null==e?0:pl(e)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Oe],placeholder:"placeholder",required:[2,"required","required",Oe],multiple:[2,"multiple","multiple",Oe],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",Oe],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",pl],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth",canSelectNullableOptions:[2,"canSelectNullableOptions","canSelectNullableOptions",Oe]},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[qe([{provide:pee,useExisting:t},{provide:kP,useExisting:t}]),Oi],ngContentSelectors:Cee,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","overlayKeydown","cdkConnectedOverlayDisableClose","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(n,r){if(1&n){const o=G();Dn(wee),h(0,"div",2,0),x("click",function(){return M(o),I(r.open())}),h(3,"div",3),H(4,kee,2,1,"span",4)(5,xee,3,1,"span",5),f(),h(6,"div",6)(7,"div",7),Dv(),h(8,"svg",8),L(9,"path",9),f()()()(),H(10,Eee,3,10,"ng-template",10),x("backdropClick",function(){return M(o),I(r.close())})("overlayKeydown",function(s){return M(o),I(r._handleOverlayKeydown(s))})}if(2&n){const o=Pa(1);v(3),Me("id",r._valueId),v(),A(r.empty?4:5),v(6),z("cdkConnectedOverlayDisableClose",!0)("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",r._preferredOverlayOrigin||o)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayWidth",r._overlayWidth)}},dependencies:[rp,ER,fi],styles:['@keyframes _mat-select-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-select-exit{from{opacity:1}to{opacity:0}}.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-sys-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-sys-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-disabled .mat-mdc-select-placeholder{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-sys-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}@media(forced-colors: active){.mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .mat-mdc-select-arrow svg{fill:GrayText}}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-select-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-select-panel-animations-enabled{animation:_mat-select-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-select-panel-animations-enabled.mat-select-panel-exit{animation:_mat-select-exit 100ms linear}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field:not(.mat-form-field-animations-enabled) .mat-mdc-select-placeholder,._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform, translateY(-8px))}'],encapsulation:2,changeDetection:0})}return t})(),_O=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({providers:[Aee],imports:[$0,TP,vi,Al,vee,TP,vi]})}return t})();const AS=(t,i)=>i.name;function Fee(t,i){if(1&t){const e=G();h(0,"input",11),x("change",function(r){return M(e),I(S().pauseOnDeath(r))}),f()}2&t&&z("checked",S().activityService.pauseOnDeath)}function Oee(t,i){1&t&&(h(0,"label",3),y(1,"Pause on Death"),f())}function Lee(t,i){if(1&t){const e=G();h(0,"input",14),x("change",function(r){return M(e),I(S(2).pauseBeforeDeath(r))}),f(),h(1,"label",15),y(2,"Pause Before Death - This will pause one day before the end of your expected lifespan."),f()}2&t&&z("checked",S(2).activityService.pauseBeforeDeath)}function Nee(t,i){if(1&t){const e=G();h(0,"div")(1,"span")(2,"input",12),x("change",function(r){return M(e),I(S().autoPauseThugs(r))}),f(),h(3,"label",13),y(4,"Automatically pause if you can't afford your home."),f()()(),h(5,"div")(6,"span"),H(7,Lee,3,1),f()()}if(2&t){const e=S();v(2),z("checked",e.homeService.thugPause),v(5),A(e.activityService.autoRestart?7:-1)}}function Bee(t,i){if(1&t){const e=G();h(0,"div",9)(1,"span",16),y(2),f(),h(3,"button",17),x("click",function(){const r=M(e).$implicit;return I(S().loadActivityLoop(r.name))}),y(4," Load "),f(),h(5,"button",18),x("click",function(){const r=M(e).$implicit;return I(S().removeActivityLoop(r.name))}),y(6," Remove "),f()()}if(2&t){const e=i.$implicit;v(2),Fe(e.name)}}function Hee(t,i){1&t&&(h(0,"div")(1,"span"),y(2," No saved schedules to trigger "),f()())}function Vee(t,i){if(1&t&&(h(0,"mat-option",21),y(1),f()),2&t){const e=i.$implicit;re("value",e.name),v(),Fe(e.name)}}function qee(t,i){if(1&t){const e=G();h(0,"div",9)(1,"span",6),y(2,"On rebirth, load"),f(),h(3,"mat-select",20),hl("valueChange",function(r){M(e);const o=S().$implicit;return bd(o.scheduleName,r)||(o.scheduleName=r),I(r)}),be(4,Vee,2,2,"mat-option",21,AS),f()()}if(2&t){const e=S().$implicit,n=S(2);v(3),ul("value",e.scheduleName),v(),Se(n.activityService.savedActivityLoops)}}function jee(t,i){if(1&t&&(h(0,"mat-option",21),y(1),O(2,"camelToTitle"),f()),2&t){const e=i.$implicit;re("value",e),v(),Fe(V(2,2,e))}}function Uee(t,i){if(1&t&&(h(0,"mat-option",21),y(1),f()),2&t){const e=i.$implicit;re("value",e.name),v(),Fe(e.name)}}function zee(t,i){if(1&t){const e=G();h(0,"div",9)(1,"span",6),y(2,"When"),f(),h(3,"mat-select",20),hl("valueChange",function(r){M(e);const o=S().$implicit;return bd(o.attribute,r)||(o.attribute=r),I(r)}),be(4,jee,3,4,"mat-option",21,_t),f(),h(6,"span",6),y(7," reaches "),f(),h(8,"input",22),x("change",function(r){M(e);const o=S().$implicit;return I(S(2).triggerValueChange(r,o))}),f(),h(9,"span",6),y(10," then load "),f(),h(11,"mat-select",20),hl("valueChange",function(r){M(e);const o=S().$implicit;return bd(o.scheduleName,r)||(o.scheduleName=r),I(r)}),be(12,Uee,2,2,"mat-option",21,AS),f()()}if(2&t){const e=S().$implicit,n=S(2);v(3),ul("value",e.attribute),v(),Se(n.attributeKeys),v(4),re("value",e.value),v(3),ul("value",e.scheduleName),v(),Se(n.activityService.savedActivityLoops)}}function $ee(t,i){1&t&&H(0,qee,6,1,"div",9)(1,zee,14,3,"div",9),2&t&&A(0===i.$index?0:1)}function Wee(t,i){if(1&t){const e=G();h(0,"button",19),x("click",function(){return M(e),I(S().addTrigger())}),y(1," Add a Trigger "),f(),be(2,$ee,2,1,null,null,_t)}if(2&t){const e=S();v(2),Se(e.activityService.loopChangeTriggers)}}let PS=(()=>{class t{constructor(e,n,r){this.activityService=e,this.homeService=n,this.characterService=r,this.inputSave="Saved Schedule #1",this.attributeKeys=Object.keys(this.characterService.attributes)}pauseOnDeath(e){e.target instanceof HTMLInputElement&&(this.activityService.pauseOnDeath=e.target.checked)}pauseBeforeDeath(e){e.target instanceof HTMLInputElement&&(this.activityService.pauseBeforeDeath=e.target.checked)}autoPauseThugs(e){e.target instanceof HTMLInputElement&&(this.homeService.thugPause=!this.homeService.thugPause)}inputSaveChange(e){e.target instanceof HTMLInputElement&&(this.inputSave=e.target.value)}saveActivityLoop(){this.activityService.saveActivityLoop(this.inputSave)}loadActivityLoop(e){this.activityService.loadActivityLoop(e)}removeActivityLoop(e){this.activityService.removeActivityLoop(e)}triggerValueChange(e,n){e.target instanceof HTMLInputElement&&(n.value=parseInt(e.target.value))}addTrigger(){this.activityService.loopChangeTriggers.push({attribute:"strength",value:100,scheduleName:""})}static{this.\u0275fac=function(n){return new(n||t)(T(bt),T(zt),T(Ie))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-time-options-panel"]],decls:25,vars:5,consts:[[1,"darkMode"],["label","Auto-Pause"],["type","checkbox","id","pauseOnDeath",3,"checked"],["for","pauseOnDeath"],["label","Saved Schedules"],["tooltip","Save your current schedule of actviities.",1,"saveButton",3,"click"],[1,"spacedSpan"],["min","0","type","text",1,"inputBox",3,"change","value"],["tooltip","Clear your current schedule of actviities.",1,"saveButton",3,"click"],[1,"optionsRow"],["label","Schedule Triggers"],["type","checkbox","id","pauseOnDeath",3,"change","checked"],["type","checkbox","id","autoBuyFood",3,"change","checked"],["for","autoBuyFood"],["type","checkbox","id","pauseBeforeDeath",3,"change","checked"],["for","pauseBeforeDeath"],[1,"grower"],["tooltip","Load this saved schedule of actviities.",1,"saveButton",3,"click"],["tooltip","Remove this saved schedule of actviities.",1,"saveButton",3,"click"],["tooltip","Add a trigger to change schedules automatically.<br>Triggers are activated in order, once per lifetime, as the selected attributes reach the chosen values.",1,"saveButton",3,"click"],[1,"selectSave",3,"valueChange","value"],[3,"value"],["min","0","type","number",1,"smallInputBox",3,"change","value"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"span"),y(2,"Schedule Options"),f(),h(3,"mat-tab-group")(4,"mat-tab",1)(5,"div")(6,"span"),H(7,Fee,1,1,"input",2)(8,Oee,2,0,"label",3),f()(),H(9,Nee,8,2),f(),h(10,"mat-tab",4)(11,"div")(12,"button",5),x("click",function(){return r.saveActivityLoop()}),y(13," Save Current Schedule "),f(),h(14,"span",6),y(15,"as"),f(),h(16,"input",7),x("change",function(a){return r.inputSaveChange(a)}),f()(),h(17,"div")(18,"button",8),x("click",function(){return r.activityService.activityLoop=[]}),y(19," Clear Current Schedule "),f()(),be(20,Bee,7,1,"div",9,AS),f(),h(22,"mat-tab",10),H(23,Hee,3,0,"div")(24,Wee,4,0),f()()()),2&n&&(v(7),A(r.activityService.autoRestart?7:-1),v(),A(r.activityService.autoRestart?8:-1),v(),A(r.activityService.autoPauseUnlocked?9:-1),v(7),re("value",r.inputSave),v(4),Se(r.activityService.savedActivityLoops),v(3),A(0===r.activityService.savedActivityLoops.length?23:24))},dependencies:()=>[_O,yO,y0,sS,vp,Vr,et],styles:[".saveButton[_ngcontent-%COMP%]{height:30px;margin:4px}.selectSave[_ngcontent-%COMP%]{width:300px;color:var(--bodyText);border:1px solid var(--bodyText);font-size:small;margin:4px}.smallInputBox[_ngcontent-%COMP%]{width:100px}[_nghost-%COMP%]     .mat-mdc-select-arrow{color:var(--bodyText)!important}.optionsRow[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-basis:0;border-top:1px solid var(--panelBorder)}.grower[_ngcontent-%COMP%]{flex-grow:1;align-content:center}.spacedSpan[_ngcontent-%COMP%]{margin-left:4px;margin-right:4px;align-content:center}"]})}}return t})();const Bl=t=>({iconActive:t});function Gee(t,i){if(1&t){const e=G();h(0,"mat-icon",8),x("click",function(){return M(e),I(S().fastClick())}),y(1," fast_forward "),f()}if(2&t){const e=S();z("ngClass",dt(1,Bl,5===e.mainLoopService.tickDivider&&!e.mainLoopService.pause))}}function Yee(t,i){if(1&t){const e=G();h(0,"mat-icon",9),x("click",function(){return M(e),I(S().fasterClick())}),y(1," skip_next "),f()}if(2&t){const e=S();z("ngClass",dt(1,Bl,2===e.mainLoopService.tickDivider&&!e.mainLoopService.pause))}}function Kee(t,i){if(1&t){const e=G();h(0,"mat-icon",10),x("click",function(){return M(e),I(S().fastestClick())}),y(1," bolt "),f()}if(2&t){const e=S();z("ngClass",dt(1,Bl,1===e.mainLoopService.tickDivider&&!e.mainLoopService.pause))}}function Qee(t,i){if(1&t){const e=G();h(0,"mat-icon",11),x("click",function(){return M(e),I(S().timeOptions())}),y(1," settings "),f()}}let Zee=(()=>{class t{constructor(){this.commonButtonsService=_(IS),this.activityService=_(bt),this.dialog=_(Ht),this.mainLoopService=_(tt)}pauseClick(){this.mainLoopService.pause?this.mainLoopService.tick():this.mainLoopService.pause=!0}slowClick(){this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=40}standardClick(){this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=10}fastClick(){this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=5}fasterClick(){this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=2}fastestClick(){this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=1}timeOptions(){this.dialog.open(PS,{width:"700px",data:{someField:"foo"},autoFocus:!1})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ne({type:t,selectors:[["app-mobile-time-buttons"]],decls:11,vars:13,consts:[[1,"main-btns"],["tooltip","Pause the game.<br>\n      Hotkey: Alt-0 to pause or spacebar to toggle.<br>\n      Clicking this again while paused will step time forward a single day.<br>\n      When paused, you can also advance one day by pressing the Enter key.","aria-label","Pause","aria-hidden","false",1,"iconButton",3,"click","ngClass"],["tooltip","Slow Game Speed (1 day/sec).<br>\n      Hotkey: Alt-1","aria-label","Slow Speed","aria-hidden","false",1,"iconButton",3,"click","ngClass"],["tooltip","Standard Game Speed.<br>\n      Hotkey: Alt-2","aria-label","Standard Speed","aria-hidden","false",1,"iconButton",3,"click","ngClass"],["tooltip","Fast Game Speed.<br>Hotkey: Alt-3","aria-label","Fast Speed","aria-hidden","false",1,"iconButton",3,"ngClass"],["tooltip","Faster Game Speed.<br>\n      Hotkey: Alt-4","aria-label","Faster Speed","aria-hidden","false",1,"iconButton",3,"ngClass"],["tooltip","Fastest Game Speed.<br>\n      Hotkey: Alt-5","aria-label","Fastest Speed","aria-hidden","false",1,"iconButton",3,"ngClass"],["tooltip","Options","aria-label","Time Options","aria-hidden","false",1,"iconButton"],["tooltip","Fast Game Speed.<br>Hotkey: Alt-3","aria-label","Fast Speed","aria-hidden","false",1,"iconButton",3,"click","ngClass"],["tooltip","Faster Game Speed.<br>\n      Hotkey: Alt-4","aria-label","Faster Speed","aria-hidden","false",1,"iconButton",3,"click","ngClass"],["tooltip","Fastest Game Speed.<br>\n      Hotkey: Alt-5","aria-label","Fastest Speed","aria-hidden","false",1,"iconButton",3,"click","ngClass"],["tooltip","Options","aria-label","Time Options","aria-hidden","false",1,"iconButton",3,"click"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"mat-icon",1),x("click",function(){return r.pauseClick()}),y(2," pause "),f(),h(3,"mat-icon",2),x("click",function(){return r.slowClick()}),y(4," slow_motion_video "),f(),h(5,"mat-icon",3),x("click",function(){return r.standardClick()}),y(6," play_arrow "),f(),H(7,Gee,2,3,"mat-icon",4)(8,Yee,2,3,"mat-icon",5)(9,Kee,2,3,"mat-icon",6),f(),H(10,Qee,2,0,"mat-icon",7)),2&n&&(v(),z("ngClass",dt(7,Bl,r.mainLoopService.pause)),v(2),z("ngClass",dt(9,Bl,40===r.mainLoopService.tickDivider&&!r.mainLoopService.pause)),v(2),z("ngClass",dt(11,Bl,10===r.mainLoopService.tickDivider&&!r.mainLoopService.pause)),v(2),A(r.mainLoopService.unlockFastSpeed?7:-1),v(),A(r.mainLoopService.unlockFasterSpeed?8:-1),v(),A(r.mainLoopService.unlockFastestSpeed?9:-1),v(),A(r.activityService.autoRestart?10:-1))},dependencies:[Vo,fi,$o,Lt,et],styles:["[_nghost-%COMP%]{display:flex;justify-content:space-between}.iconActive[_ngcontent-%COMP%]{color:var(--panelBackground);background:var(--bodyText)}.main-btns[_ngcontent-%COMP%]{display:flex;gap:1px}mat-icon[_ngcontent-%COMP%]{font-size:44px;width:min-content;height:min-content}"]})}}return t})();function bO(t){return me(()=>t)}const SO=["*"],Xee=["content"],Jee=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],ete=["mat-drawer","mat-drawer-content","*"];function tte(t,i){if(1&t){const e=G();h(0,"div",1),x("click",function(){return M(e),I(S()._onBackdropClicked())}),f()}2&t&&ot("mat-drawer-shown",S()._isShowingBackdrop())}function ite(t,i){1&t&&(h(0,"mat-drawer-content"),di(1,2),f())}const nte=new B("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function rte(){return!1}}),wO=new B("MAT_DRAWER_CONTAINER");let Pp=(()=>{class t extends Xd{_platform=_(xi);_changeDetectorRef=_(ji);_container=_(kO);constructor(){super(_(xe),_(ep),_(ce))}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}_shouldBeHidden(){if(this._platform.isBrowser)return!1;const{start:e,end:n}=this._container;return null!=e&&"over"!==e.mode&&e.opened||null!=n&&"over"!==n.mode&&n.opened}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:6,hostBindings:function(n,r){2&n&&(Dt("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px"),ot("mat-drawer-content-hidden",r._shouldBeHidden()))},features:[qe([{provide:Xd,useExisting:t}]),Le],ngContentSelectors:SO,decls:1,vars:0,template:function(n,r){1&n&&(Dn(),di(0))},encapsulation:2,changeDetection:0})}return t})(),CO=(()=>{class t{_elementRef=_(xe);_focusTrapFactory=_(hP);_focusMonitor=_(Bm);_platform=_(xi);_ngZone=_(ce);_renderer=_(Hi);_interactivityChecker=_(d0);_doc=_(Ge,{optional:!0});_container=_(wO,{optional:!0});_focusTrap=null;_elementFocusedBeforeDrawerWasOpened=null;_eventCleanups;_isAttached;_anchor;get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}_position="start";get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}_mode="over";get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=La(e)}_disableClose=!1;get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=La(e)),this._autoFocus=e}_autoFocus;get opened(){return this._opened}set opened(e){this.toggle(La(e))}_opened=!1;_openedVia;_animationStarted=new Y;_animationEnd=new Y;openedChange=new le(!0);_openedStream=this.openedChange.pipe(Qe(e=>e),me(()=>{}));openedStart=this._animationStarted.pipe(Qe(()=>this.opened),bO(void 0));_closedStream=this.openedChange.pipe(Qe(e=>!e),me(()=>{}));closedStart=this._animationStarted.pipe(Qe(()=>!this.opened),bO(void 0));_destroyed=new Y;onPositionChanged=new le;_content;_modeChanged=new Y;_injector=_(we);_changeDetectorRef=_(ji);constructor(){this.openedChange.pipe(at(this._destroyed)).subscribe(e=>{e?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{const e=this._elementRef.nativeElement;Zi(e,"keydown").pipe(Qe(n=>27===n.keyCode&&!this.disableClose&&!Nr(n)),at(this._destroyed)).subscribe(n=>this._ngZone.run(()=>{this.close(),n.stopPropagation(),n.preventDefault()})),this._eventCleanups=[this._renderer.listen(e,"transitionrun",this._handleTransitionEvent),this._renderer.listen(e,"transitionend",this._handleTransitionEvent),this._renderer.listen(e,"transitioncancel",this._handleTransitionEvent)]}),this._animationEnd.subscribe(()=>{this.openedChange.emit(this._opened)})}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{o(),a(),e.removeAttribute("tabindex")},o=this._renderer.listen(e,"blur",r),a=this._renderer.listen(e,"mousedown",r)})),e.focus(n)}_focusByCssSelector(e,n){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,n)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":Xn(()=>{!this._focusTrap.focusInitialElement()&&"function"==typeof e.focus&&e.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,"end"===this._position&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngOnDestroy(){this._eventCleanups.forEach(e=>e()),this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,n){e&&n&&(this._openedVia=n);const r=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),r}_setOpen(e,n,r){return e===this._opened?Promise.resolve(e?"open":"close"):(this._opened=e,this._container?._transitionsEnabled?this._setIsAnimating(!0):setTimeout(()=>{this._animationStarted.next(),this._animationEnd.next()}),this._elementRef.nativeElement.classList.toggle("mat-drawer-opened",e),!e&&n&&this._restoreFocus(r),this._changeDetectorRef.markForCheck(),this._updateFocusTrapState(),new Promise(o=>{this.openedChange.pipe(pi(1)).subscribe(a=>o(a?"open":"close"))}))}_setIsAnimating(e){this._elementRef.nativeElement.classList.toggle("mat-drawer-animating",e)}_getWidth(){return this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop&&this.opened)}_updatePositionInParent(e){if(!this._platform.isBrowser)return;const n=this._elementRef.nativeElement,r=n.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,n)),r.appendChild(n)):this._anchor&&this._anchor.parentNode.insertBefore(n,this._anchor)}_handleTransitionEvent=e=>{e.target===this._elementRef.nativeElement&&this._ngZone.run(()=>{"transitionrun"===e.type?this._animationStarted.next(e):("transitionend"===e.type&&this._setIsAnimating(!1),this._animationEnd.next(e))})};static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["mat-drawer"]],viewQuery:function(n,r){if(1&n&&ti(Xee,5),2&n){let o;Ye(o=Ke())&&(r._content=o.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:11,hostBindings:function(n,r){2&n&&(Me("align",null),Dt("visibility",r._container||r.opened?null:"hidden"),ot("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:SO,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(n,r){1&n&&(Dn(),h(0,"div",1,0),di(2),f())},dependencies:[Xd],encapsulation:2,changeDetection:0})}return t})(),kO=(()=>{class t{_dir=_(br,{optional:!0});_element=_(xe);_ngZone=_(ce);_changeDetectorRef=_(ji);_animationMode=_(Sn,{optional:!0});_transitionsEnabled=!1;_allDrawers;_drawers=new Is;_content;_userContent;get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=La(e)}_autosize=_(nte);get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(e){this._backdropOverride=null==e?null:La(e)}_backdropOverride;backdropClick=new le;_start;_end;_left;_right;_destroyed=new Y;_doCheckSubject=new Y;_contentMargins={left:null,right:null};_contentMarginChanges=new Y;get scrollable(){return this._userContent||this._content}_injector=_(we);constructor(){const e=_(xi),n=_(Il);this._dir?.change.pipe(at(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),n.change().pipe(at(this._destroyed)).subscribe(()=>this.updateContentMargins()),"NoopAnimations"!==this._animationMode&&e.isBrowser&&this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._element.nativeElement.classList.add("mat-drawer-transition"),this._transitionsEnabled=!0},200)})}ngAfterContentInit(){this._allDrawers.changes.pipe($i(this._allDrawers),at(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(n=>!n._container||n._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe($i(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(wl(10),at(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,n=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const r=this._left._getWidth();e+=r,n-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)n+=this._right._getWidth();else if("push"==this._right.mode){const r=this._right._getWidth();n+=r,e-=r}e=e||null,n=n||null,(e!==this._contentMargins.left||n!==this._contentMargins.right)&&(this._contentMargins={left:e,right:n},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(at(this._drawers.changes)).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(at(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){e.onPositionChanged.pipe(at(this._drawers.changes)).subscribe(()=>{Xn({read:()=>this._validateDrawers()},{injector:this._injector})})}_watchDrawerMode(e){e._modeChanged.pipe(at(Ti(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const n=this._element.nativeElement.classList,r="mat-drawer-container-has-open";e?n.add(r):n.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._drawerHasBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(e){return null!=e&&e.opened}_drawerHasBackdrop(e){return null==this._backdropOverride?!!e&&"side"!==e.mode:this._backdropOverride}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(n,r,o){if(1&n&&(ln(o,Pp,5),ln(o,CO,5)),2&n){let a;Ye(a=Ke())&&(r._content=a.first),Ye(a=Ke())&&(r._allDrawers=a)}},viewQuery:function(n,r){if(1&n&&ti(Pp,5),2&n){let o;Ye(o=Ke())&&(r._userContent=o.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(n,r){2&n&&ot("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[qe([{provide:wO,useExisting:t}])],ngContentSelectors:ete,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(n,r){1&n&&(Dn(Jee),H(0,tte,1,2,"div",0),di(1),di(2,1),H(3,ite,2,0,"mat-drawer-content")),2&n&&(A(r.hasBackdrop?0:-1),v(3),A(r._content?-1:3))},dependencies:[Pp],styles:[".mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}"],encapsulation:2,changeDetection:0})}return t})(),ote=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({imports:[vi,Al,Al,vi]})}return t})(),ate=(()=>{class t{get vertical(){return this._vertical}set vertical(e){this._vertical=La(e)}_vertical=!1;get inset(){return this._inset}set inset(e){this._inset=La(e)}_inset=!1;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(n,r){2&n&&(Me("aria-orientation",r.vertical?"vertical":"horizontal"),ot("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(n,r){},styles:[".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0})}return t})(),ste=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({imports:[vi,vi]})}return t})();const lte=t=>({highlighted:t});function cte(t,i){if(1&t){const e=G();h(0,"div",0)(1,"mat-icon",8),x("click",function(){return M(e),I(S().commonButtonsService.ascensionStoreClicked())}),y(2," keyboard_double_arrow_up "),f(),y(3," Ascension Techniques\n"),f()}}let dte=(()=>{class t{constructor(){this.commonButtonsService=_(IS),this.characterService=_(Ie),this.storeService=_(jr)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ne({type:t,selectors:[["app-mobile-drawer"]],decls:29,vars:4,consts:[[1,"menu-item"],["tooltip","Confused?<br>Click here for a tutorial.","aria-label","Tutorial","aria-hidden","false",1,"iconButton",3,"click"],["tooltip","Statistics!",1,"iconButton",3,"click"],["tooltip","Regular People Shop<br>A store that sells regular stuff for regular mortals.<br>You are destined for immortality, but you might want some stuff from here anyway.","aria-label","Store","aria-hidden","false",1,"iconButton",3,"click"],["tooltip","Manuals Shop<br>A store that sells special manuals for aspiring immortals.","aria-label","Manual Store","aria-hidden","false",1,"iconButton",3,"click","ngClass"],["tooltip","Game Options","aria-label","Options","aria-hidden","false",1,"iconButton",3,"click"],["tooltip","Achievements!","aria-label","Achievements","aria-hidden","false",1,"iconButton",3,"click"],["tooltip","Save<br>The game autosaves every few minutes, but click here if you want to manually save the game right now.","aria-label","Save","aria-hidden","false",1,"iconButton",3,"click"],["tooltip","Ascension Techniques.","aria-label","Ascension","aria-hidden","false",1,"iconButton",3,"click"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"mat-icon",1),x("click",function(){return r.commonButtonsService.tutorialClicked()}),y(2," help "),f(),y(3," Tutorial\n"),f(),h(4,"div",0)(5,"mat-icon",2),x("click",function(){return r.commonButtonsService.statisticsClicked()}),y(6," format_list_numbered_rtl "),f(),y(7," Statistics\n"),f(),h(8,"div",0)(9,"mat-icon",3),x("click",function(){return r.commonButtonsService.storeClicked()}),y(10," store "),f(),y(11," Regular People Shop\n"),f(),h(12,"div",0)(13,"mat-icon",4),x("click",function(){return r.commonButtonsService.manualStoreClicked()}),y(14," local_library "),f(),y(15," Manuals Shop\n"),f(),h(16,"div",0)(17,"mat-icon",5),x("click",function(){return r.commonButtonsService.optionsClicked()}),y(18," settings "),f(),y(19," Game Options\n"),f(),h(20,"div",0)(21,"mat-icon",6),x("click",function(){return r.commonButtonsService.achievementsClicked()}),y(22," military_tech "),f(),y(23," Achievements\n"),f(),H(24,cte,4,0,"div",0),h(25,"div",0)(26,"mat-icon",7),x("click",function(){return r.commonButtonsService.saveClicked()}),y(27," save "),f(),y(28," Save\n"),f()),2&n&&(v(13),z("ngClass",dt(2,lte,r.storeService.isManualAvailable())),v(11),A(r.characterService.ascensionUnlocked?24:-1))},dependencies:[Vo,fi,$o,Lt,et],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;padding:8px;gap:8px}.menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}"]})}}return t})();function RS(t){return"number"==typeof t}function FS(t){return"string"==typeof t}function Rp(t){return"boolean"==typeof t}function DO(t){return"[object Object]"===Object.prototype.toString.call(t)}function Yt(t){return Math.abs(t)}function OS(t){return Math.sign(t)}function mu(t,i){return Yt(t-i)}function pu(t){return vu(t).map(Number)}function Cr(t){return t[gu(t)]}function gu(t){return Math.max(0,t.length-1)}function LS(t,i){return i===gu(t)}function TO(t,i=0){return Array.from(Array(t),(e,n)=>i+n)}function vu(t){return Object.keys(t)}function xO(t,i){return[t,i].reduce((e,n)=>(vu(n).forEach(r=>{const o=e[r],a=n[r],s=DO(o)&&DO(a);e[r]=s?xO(o,a):a}),e),{})}function NS(t,i){return typeof i.MouseEvent<"u"&&t instanceof i.MouseEvent}function yu(){let t=[];const n={add:function i(r,o,a,s={passive:!0}){let l;if("addEventListener"in r)r.addEventListener(o,a,s),l=()=>r.removeEventListener(o,a,s);else{const c=r;c.addListener(a),l=()=>c.removeListener(a)}return t.push(l),n},clear:function e(){t=t.filter(r=>r())}};return n}function Ga(t=0,i=0){const e=Yt(t-i);function n(c){return c<t}function r(c){return c>i}function o(c){return n(c)||r(c)}return{length:e,max:i,min:t,constrain:function a(c){return o(c)?n(c)?t:i:c},reachedAny:o,reachedMax:r,reachedMin:n,removeOffset:function s(c){return e?c-e*Math.ceil((c-i)/e):c}}}function EO(t,i,e){const{constrain:n}=Ga(0,t),r=t+1;let o=a(i);function a(p){return e?Yt((r+p)%r):n(p)}function s(){return o}function d(){return EO(t,s(),e)}const u={get:s,set:function l(p){return o=a(p),u},add:function c(p){return d().set(s()+p)},clone:d};return u}function gte(t,i,e,n,r,o,a,s,l,c,d,u,p,g,m,b,C,w,k){const{cross:F,direction:U}=t,X=["INPUT","SELECT","TEXTAREA"],J={passive:!1},ee=yu(),se=yu(),Ee=Ga(50,225).constrain(g.measure(20)),ut={mouse:300,touch:400},St={mouse:500,touch:600},ni=m?43:25;let In=!1,Gn=0,Yn=0,oe=!1,de=!1,pe=!1,Ne=!1;function gt(ge){if(!NS(ge,n)&&ge.touches.length>=2)return Kt(ge);const bi=o.readPoint(ge),pn=o.readPoint(ge,F),Yr=mu(bi,Gn),_o=mu(pn,Yn);if(!(de||Ne||ge.cancelable&&(de=Yr>_o,de)))return Kt(ge);const rs=o.pointerMove(ge);Yr>b&&(pe=!0),c.useFriction(.3).useDuration(.75),s.start(),r.add(U(rs)),ge.preventDefault()}function Kt(ge){const bi=d.byDistance(0,!1).index!==u.get(),pn=o.pointerUp(ge)*function it(){return(m?St:ut)[Ne?"mouse":"touch"]}(),Yr=function Zo(ge,Nt){const bi=u.add(-1*OS(ge)),pn=d.byDistance(ge,!m).distance;return m||Yt(ge)<Ee?pn:C&&Nt?.5*pn:d.byIndex(bi.get(),0).distance}(U(pn),bi),_o=function ute(t,i){if(0===t||0===i||Yt(t)<=Yt(i))return 0;const e=mu(Yt(t),Yt(i));return Yt(e/t)}(pn,Yr),rs=ni-10*_o,Xo=w+_o/50;de=!1,oe=!1,se.clear(),c.useDuration(rs).useFriction(Xo),l.distance(Yr,!m),Ne=!1,p.emit("pointerUp")}function ri(ge){pe&&(ge.stopPropagation(),ge.preventDefault(),pe=!1)}return{init:function $t(ge){if(!k)return;function Nt(pn){(Rp(k)||k(ge,pn))&&function ns(ge){const Nt=NS(ge,n);Ne=Nt,pe=m&&Nt&&!ge.buttons&&In,In=mu(r.get(),a.get())>=2,(!Nt||0===ge.button)&&(function mn(ge){return X.includes(ge.nodeName||"")}(ge.target)||(oe=!0,o.pointerDown(ge),c.useFriction(0).useDuration(0),r.set(a),function _i(){const ge=Ne?e:i;se.add(ge,"touchmove",gt,J).add(ge,"touchend",Kt).add(ge,"mousemove",gt,J).add(ge,"mouseup",Kt)}(),Gn=o.readPoint(ge),Yn=o.readPoint(ge,F),p.emit("pointerDown")))}(pn)}const bi=i;ee.add(bi,"dragstart",pn=>pn.preventDefault(),J).add(bi,"touchmove",()=>{},J).add(bi,"touchend",()=>{}).add(bi,"touchstart",Nt).add(bi,"mousedown",Nt).add(bi,"touchcancel",Kt).add(bi,"contextmenu",Kt).add(bi,"click",ri,!0)},destroy:function li(){ee.clear(),se.clear()},pointerDown:function Gi(){return oe}}}function vte(t,i){let n,r;function o(u){return u.timeStamp}function a(u,p){const m="client"+("x"===(p||t.scroll)?"X":"Y");return(NS(u,i)?u:u.touches[0])[m]}return{pointerDown:function s(u){return n=u,r=u,a(u)},pointerMove:function l(u){const p=a(u)-a(r),g=o(u)-o(n)>170;return r=u,g&&(n=u),p},pointerUp:function c(u){if(!n||!r)return 0;const p=a(r)-a(n),g=o(u)-o(n),m=o(u)-o(r)>170,b=p/g;return g&&!m&&Yt(b)>.1?b:0},readPoint:a}}function bte(t,i,e,n,r,o,a){const s=[t].concat(n);let l,c,d=[],u=!1;function p(C){return r.measureSize(a.measure(C))}return{init:function g(C){o&&(c=p(t),d=n.map(p),l=new ResizeObserver(k=>{(Rp(o)||o(C,k))&&function w(k){for(const F of k){if(u)return;const U=F.target===t,X=n.indexOf(F.target),J=U?c:d[X];if(Yt(p(U?t:n[X])-J)>=.5){C.reInit(),i.emit("resize");break}}}(k)}),e.requestAnimationFrame(()=>{s.forEach(k=>l.observe(k))}))},destroy:function m(){u=!0,l&&l.disconnect()}}}function wte(t,i,e,n,r){const o=r.measure(10),a=r.measure(50),s=Ga(.1,.99);let l=!1;function c(){return!(l||!t.reachedAny(e.get())||!t.reachedAny(i.get()))}return{shouldConstrain:c,constrain:function d(g){if(!c())return;const m=t.reachedMin(i.get())?"min":"max",b=Yt(t[m]-i.get()),C=e.get()-i.get(),w=s.constrain(b/a);e.subtract(C*w),!g&&Yt(C)<o&&(e.set(t.constrain(e.get())),n.useDuration(25).useBaseFriction())},toggleActive:function u(g){l=!g}}}function Dte(t,i,e,n){const o=i.min+.1,a=i.max+.1,{reachedMin:s,reachedMax:l}=Ga(o,a);return{loop:function d(p){if(!function c(p){return 1===p?l(e.get()):-1===p&&s(e.get())}(p))return;const g=t*(-1*p);n.forEach(m=>m.add(g))}}}function _u(t){let i=t;function a(l){return RS(l)?l:l.get()}return{get:function e(){return i},set:function n(l){i=a(l)},add:function r(l){i+=a(l)},subtract:function o(l){i-=a(l)}}}function MO(t,i){const e="x"===t.scroll?function a(p){return`translate3d(${p}px,0px,0px)`}:function s(p){return`translate3d(0px,${p}px,0px)`},n=i.style;let r=null,o=!1;return{clear:function d(){o||(n.transform="",i.getAttribute("style")||i.removeAttribute("style"))},to:function l(p){if(o)return;const g=function hte(t){return Math.round(100*t)/100}(t.direction(p));g!==r&&(n.transform=e(g),r=g)},toggleActive:function c(p){o=!p}}}function Pte(t,i,e,n,r,o,a,s,l){const d=pu(r),u=pu(r).reverse(),p=function w(){return C(m(u,a[0]),e,!1)}().concat(function k(){return C(m(d,i-a[0]-1),-e,!0)}());function g(ee,se){return ee.reduce((Ee,ut)=>Ee-r[ut],se)}function m(ee,se){return ee.reduce((Ee,ut)=>g(Ee,se)>0?Ee.concat([ut]):Ee,[])}function C(ee,se,Ee){const ut=function b(ee){return o.map((se,Ee)=>({start:se-n[Ee]+.5+ee,end:se+i-.5+ee}))}(se);return ee.map(St=>{const ni=Ee?0:-e,In=Ee?e:0,Yn=ut[St][Ee?"end":"start"];return{index:St,loopPoint:Yn,slideLocation:_u(-1),translate:MO(t,l[St]),target:()=>s.get()>Yn?ni:In}})}return{canLoop:function F(){return p.every(({index:ee})=>g(d.filter(Ee=>Ee!==ee),i)<=.1)},clear:function X(){p.forEach(ee=>ee.translate.clear())},loop:function U(){p.forEach(ee=>{const{target:se,translate:Ee,slideLocation:ut}=ee,St=se();St!==ut.get()&&(Ee.to(St),ut.set(St))})},loopPoints:p}}function Rte(t,i,e){let n,r=!1;return{init:function o(l){e&&(n=new MutationObserver(d=>{r||(Rp(e)||e(l,d))&&function c(d){for(const u of d)if("childList"===u.type){l.reInit(),i.emit("slidesChanged");break}}(d)}),n.observe(t,{childList:!0}))},destroy:function a(){n&&n.disconnect(),r=!0}}}function Nte(t,i,e,n,r,o,a){const{align:s,axis:l,direction:c,startIndex:d,loop:u,duration:p,dragFree:g,dragThreshold:m,inViewThreshold:b,slidesToScroll:C,skipSnaps:w,containScroll:k,watchResize:F,watchSlides:U,watchDrag:X,watchFocus:J}=o,se={measure:function t(e){const{offsetTop:n,offsetLeft:r,offsetWidth:o,offsetHeight:a}=e;return{top:n,right:r+o,bottom:n+a,left:r,width:o,height:a}}},Ee=se.measure(i),ut=e.map(se.measure),St=function pte(t,i){const e="rtl"===i,n="y"===t,a=!n&&e?-1:1;return{scroll:n?"y":"x",cross:n?"x":"y",startEdge:function d(){return n?"top":e?"right":"left"}(),endEdge:function u(){return n?"bottom":e?"left":"right"}(),measureSize:function c(m){const{height:b,width:C}=m;return n?b:C},direction:function p(m){return m*a}}}(l,c),ni=St.measureSize(Ee),In=function _te(t){return{measure:function i(n){return t*(n/100)}}}(ni),Gn=function fte(t,i){const e={start:function n(){return 0},center:function r(l){return o(l)/2},end:o};function o(l){return i-l}return{measure:function a(l,c){return FS(t)?e[t](l):t(i,l,c)}}}(s,ni),Yn=!u&&!!k,oe=u||!!k,{slideSizes:de,slideSizesWithGaps:pe,startGap:Ne,endGap:$t}=function Ote(t,i,e,n,r,o){const{measureSize:a,startEdge:s,endEdge:l}=t,c=e[0]&&r,d=function m(){return c?Yt(i[s]-e[0][s]):0}(),u=function b(){if(!c)return 0;const k=o.getComputedStyle(Cr(n));return parseFloat(k.getPropertyValue(`margin-${l}`))}(),p=e.map(a),g=function C(){return e.map((k,F,U)=>{const X=!F,J=LS(U,F);return X?p[F]+d:J?p[F]+u:U[F+1][s]-k[s]}).map(Yt)}();return{slideSizes:p,slideSizesWithGaps:g,startGap:d,endGap:u}}(St,Ee,ut,e,oe,r),li=function Lte(t,i,e,n,r,o,a,s,l){const{startEdge:c,endEdge:d,direction:u}=t,p=RS(e);return{groupSlides:function b(w){return p?function g(w,k){return pu(w).filter(F=>F%k==0).map(F=>w.slice(F,F+k))}(w,e):function m(w){return w.length?pu(w).reduce((k,F,U)=>{const X=Cr(k)||0,J=0===X,ee=F===gu(w),se=r[c]-o[X][c],Ee=r[c]-o[F][d],ut=!n&&J?u(a):0,ni=Yt(Ee-(!n&&ee?u(s):0)-(se+ut));return U&&ni>i+l&&k.push(F),ee&&k.push(w.length),k},[]).map((k,F,U)=>{const X=Math.max(U[F-1]||0);return w.slice(X,k)}):[]}(w)}}}(St,ni,C,u,Ee,ut,Ne,$t,2),{snaps:_i,snapsAligned:mn}=function xte(t,i,e,n,r){const{startEdge:o,endEdge:a}=t,{groupSlides:s}=r,l=function u(){return s(n).map(b=>Cr(b)[a]-b[0][o]).map(Yt)}().map(i.measure),c=function p(){return n.map(b=>e[o]-b[o]).map(b=>-Yt(b))}(),d=function g(){return s(c).map(b=>b[0]).map((b,C)=>b+l[C])}();return{snaps:c,snapsAligned:d}}(St,Gn,Ee,ut,li),it=-Cr(_i)+Cr(pe),{snapsContained:Zo,scrollContainLimit:ns}=function Cte(t,i,e,n,r){const o=Ga(-i+t,0),a=function u(){return e.map((m,b)=>{const{min:C,max:w}=o,k=o.constrain(m),F=!b,U=LS(e,b);return F?w:U||c(C,k)?C:c(w,k)?w:k}).map(m=>parseFloat(m.toFixed(3)))}(),s=function d(){const m=a[0],b=Cr(a);return Ga(a.lastIndexOf(m),a.indexOf(b)+1)}();function c(m,b){return mu(m,b)<=1}return{snapsContained:function p(){if(i<=t+r)return[o.max];if("keepSnaps"===n)return a;const{min:m,max:b}=s;return a.slice(m,b)}(),scrollContainLimit:s}}(ni,it,mn,k,2),gt=Yn?Zo:mn,{limit:Kt}=function kte(t,i,e){const n=i[0];return{limit:Ga(e?n-t:Cr(i),n)}}(it,gt,u),ri=EO(gu(gt),d,u),Gi=ri.clone(),At=pu(e),bi=function mte(t,i,e,n){const r=yu(),o=1e3/60;let a=null,s=0,l=0;function u(C){if(!l)return;a||(a=C,e(),e());const w=C-a;for(a=C,s+=w;s>=o;)e(),s-=o;n(s/o),l&&(l=i.requestAnimationFrame(u))}function g(){i.cancelAnimationFrame(l),a=null,s=0,l=0}return{init:function c(){r.add(t,"visibilitychange",()=>{t.hidden&&function m(){a=null,s=0}()})},destroy:function d(){g(),r.clear()},start:function p(){l||(l=i.requestAnimationFrame(u))},stop:g,update:e,render:n}}(n,r,()=>(({dragHandler:ic,scrollBody:dC,scrollBounds:uC,options:{loop:Dg}})=>{Dg||uC.constrain(ic.pointerDown()),dC.seek()})(cC),ic=>(({scrollBody:ic,translate:dC,location:uC,offsetLocation:Dg,previousLocation:Xue,scrollLooper:Jue,slideLooper:ehe,dragHandler:the,animation:ihe,eventHandler:m2,scrollBounds:nhe,options:{loop:p2}},g2)=>{const v2=ic.settled(),rhe=!nhe.shouldConstrain(),y2=p2?v2:v2&&rhe,_2=y2&&!the.pointerDown();_2&&ihe.stop();const ohe=uC.get()*g2+Xue.get()*(1-g2);Dg.set(ohe),p2&&(Jue.loop(ic.direction()),ehe.loop()),dC.to(Dg.get()),_2&&m2.emit("settle"),y2||m2.emit("scroll")})(cC,ic)),Yr=gt[ri.get()],_o=_u(Yr),rs=_u(Yr),Xo=_u(Yr),os=_u(Yr),Ku=function Ste(t,i,e,n,r,o){let a=0,s=0,l=r,c=o,d=t.get(),u=0;function F(J){return l=J,X}function U(J){return c=J,X}const X={direction:function b(){return s},duration:function m(){return l},velocity:function C(){return a},seek:function p(){const J=n.get()-t.get();let se=0;return l?(e.set(t),a+=J/l,a*=c,d+=a,t.add(a),se=d-u):(a=0,e.set(n),t.set(n),se=J),s=OS(se),u=d,X},settled:function g(){return Yt(n.get()-i.get())<.001},useBaseFriction:function k(){return U(o)},useBaseDuration:function w(){return F(r)},useFriction:U,useDuration:F};return X}(_o,Xo,rs,os,p,.68),sC=function Mte(t,i,e,n,r){const{reachedAny:o,removeOffset:a,constrain:s}=n;function l(m){return m.concat().sort((b,C)=>Yt(b)-Yt(C))[0]}function d(m,b){const C=[m,m+e,m-e];if(!t)return m;if(!b)return l(C);const w=C.filter(k=>OS(k)===b);return w.length?l(w):Cr(C)-e}return{byDistance:function p(m,b){const C=r.get()+m,{index:w,distance:k}=function c(m){const b=t?a(m):s(m),C=i.map((k,F)=>({diff:d(k-b,0),index:F})).sort((k,F)=>Yt(k.diff)-Yt(F.diff)),{index:w}=C[0];return{index:w,distance:b}}(C),F=!t&&o(C);return!b||F?{index:w,distance:m}:{index:w,distance:m+d(i[w]-k,0)}},byIndex:function u(m,b){return{index:m,distance:d(i[m]-r.get(),b)}},shortcut:d}}(u,gt,it,Kt,os),lC=function Ite(t,i,e,n,r,o,a){function s(u){const p=u.distance,g=u.index!==i.get();o.add(p),p&&(n.duration()?t.start():(t.update(),t.render(1),t.update())),g&&(e.set(i.get()),i.set(u.index),a.emit("select"))}return{distance:function l(u,p){s(r.byDistance(u,p))},index:function c(u,p){const g=i.clone().set(u);s(r.byIndex(g.get(),p))}}}(bi,ri,Gi,Ku,sC,os,a),u2=function Tte(t){const{max:i,length:e}=t;return{get:function n(o){return e?(o-i)/-e:0}}}(Kt),h2=yu(),Que=function Fte(t,i,e,n){const r={};let s,o=null,a=null,l=!1;return{init:function c(){s=new IntersectionObserver(m=>{l||(m.forEach(b=>{const C=i.indexOf(b.target);r[C]=b}),o=null,a=null,e.emit("slidesInView"))},{root:t.parentElement,threshold:n}),i.forEach(m=>s.observe(m))},destroy:function d(){s&&s.disconnect(),l=!0},get:function p(m=!0){if(m&&o)return o;if(!m&&a)return a;const b=function u(m){return vu(r).reduce((b,C)=>{const w=parseInt(C),{isIntersecting:k}=r[w];return(m&&k||!m&&!k)&&b.push(w),b},[])}(m);return m&&(o=b),m||(a=b),b}}}(i,e,a,b),{slideRegistry:f2}=function Ete(t,i,e,n,r,o){const{groupSlides:a}=r,{min:s,max:l}=n;return{slideRegistry:function d(){const p=a(o);return 1===e.length?[o]:t&&"keepSnaps"!==i?p.slice(s,l).map((m,b,C)=>{const w=!b,k=LS(C,b);return w?TO(Cr(C[0])+1):k?TO(gu(o)-Cr(C)[0]+1,Cr(C)[0]):m}):p}()}}(Yn,k,gt,ns,li,At),Zue=function Ate(t,i,e,n,r,o,a,s){const l={passive:!0,capture:!0};let c=0;function u(g){"Tab"===g.code&&(c=(new Date).getTime())}return{init:function d(g){s&&(o.add(document,"keydown",u,!1),i.forEach((b,C)=>{o.add(b,"focus",w=>{(Rp(s)||s(g,w))&&function m(b){if((new Date).getTime()-c>10)return;a.emit("slideFocusStart"),t.scrollLeft=0;const k=e.findIndex(F=>F.includes(b));RS(k)&&(r.useDuration(0),n.index(k,0),a.emit("slideFocus"))}(C)},l)}))}}}(t,e,f2,lC,Ku,h2,a,J),cC={ownerDocument:n,ownerWindow:r,eventHandler:a,containerRect:Ee,slideRects:ut,animation:bi,axis:St,dragHandler:gte(St,t,n,r,os,vte(St,r),_o,bi,lC,Ku,sC,ri,a,In,g,m,w,.68,X),eventStore:h2,percentOfView:In,index:ri,indexPrevious:Gi,limit:Kt,location:_o,offsetLocation:Xo,previousLocation:rs,options:o,resizeHandler:bte(i,a,r,e,St,F,se),scrollBody:Ku,scrollBounds:wte(Kt,Xo,os,Ku,In),scrollLooper:Dte(it,Kt,Xo,[_o,Xo,rs,os]),scrollProgress:u2,scrollSnapList:gt.map(u2.get),scrollSnaps:gt,scrollTarget:sC,scrollTo:lC,slideLooper:Pte(St,ni,it,de,pe,_i,gt,Xo,e),slideFocus:Zue,slidesHandler:Rte(i,a,U),slidesInView:Que,slideIndexes:At,slideRegistry:f2,slidesToScroll:li,target:os,translate:MO(St,i)};return cC}const Hte={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function Vte(t){function i(o,a){return xO(o,a||{})}return{mergeOptions:i,optionsAtMedia:function e(o){const a=o.breakpoints||{},s=vu(a).filter(l=>t.matchMedia(l).matches).map(l=>a[l]).reduce((l,c)=>i(l,c),{});return i(o,s)},optionsMediaQueries:function n(o){return o.map(a=>vu(a.breakpoints||{})).reduce((a,s)=>a.concat(s),[]).map(t.matchMedia)}}}function BS(t,i,e){const n=t.ownerDocument,r=n.defaultView,o=Vte(r),a=function qte(t){let i=[];return{init:function e(o,a){return i=a.filter(({options:s})=>!1!==t.optionsAtMedia(s).active),i.forEach(s=>s.init(o,t)),a.reduce((s,l)=>Object.assign(s,{[l.name]:l}),{})},destroy:function n(){i=i.filter(o=>o.destroy())}}}(o),s=yu(),l=function Bte(){let i,t={};function n(c){return t[c]||[]}const l={init:function e(c){i=c},emit:function r(c){return n(c).forEach(d=>d(i,c)),l},off:function a(c,d){return t[c]=n(c).filter(u=>u!==d),l},on:function o(c,d){return t[c]=n(c).concat([d]),l},clear:function s(){t={}}};return l}(),{mergeOptions:c,optionsAtMedia:d,optionsMediaQueries:u}=o,{on:p,off:g,emit:m}=l,b=St;let w,X,J,ee,C=!1,k=c(Hte,BS.globalOptions),F=c(k),U=[];function Ee(At){const ge=Nte(t,J,ee,n,r,At,l);return At.loop&&!ge.slideLooper.canLoop()?Ee(Object.assign({},At,{loop:!1})):ge}function ut(At,ge){C||(k=c(k,At),F=d(k),U=ge||U,function se(){const{container:At,slides:ge}=F;J=(FS(At)?t.querySelector(At):At)||t.children[0];const bi=FS(ge)?J.querySelectorAll(ge):ge;ee=[].slice.call(bi||J.children)}(),w=Ee(F),u([k,...U.map(({options:Nt})=>Nt)]).forEach(Nt=>s.add(Nt,"change",St)),F.active&&(w.translate.to(w.location.get()),w.animation.init(),w.slidesInView.init(),w.slideFocus.init(Gi),w.eventHandler.init(Gi),w.resizeHandler.init(Gi),w.slidesHandler.init(Gi),w.options.loop&&w.slideLooper.loop(),J.offsetParent&&ee.length&&w.dragHandler.init(Gi),X=a.init(Gi,U)))}function St(At,ge){const Nt=li();ni(),ut(c({startIndex:Nt},At),ge),l.emit("reInit")}function ni(){w.dragHandler.destroy(),w.eventStore.clear(),w.translate.clear(),w.slideLooper.clear(),w.resizeHandler.destroy(),w.slidesHandler.destroy(),w.slidesInView.destroy(),w.animation.destroy(),a.destroy(),s.clear()}function Gn(At,ge,Nt){!F.active||C||(w.scrollBody.useBaseFriction().useDuration(!0===ge?0:F.duration),w.scrollTo.index(At,Nt||0))}function li(){return w.index.get()}const Gi={canScrollNext:function de(){return w.index.add(1).get()!==li()},canScrollPrev:function pe(){return w.index.add(-1).get()!==li()},containerNode:function Kt(){return J},internalEngine:function ns(){return w},destroy:function In(){C||(C=!0,s.clear(),ni(),l.emit("destroy"),l.clear())},off:g,on:p,emit:m,plugins:function Zo(){return X},previousScrollSnap:function _i(){return w.indexPrevious.get()},reInit:b,rootNode:function gt(){return t},scrollNext:function Yn(At){Gn(w.index.add(1).get(),At,-1)},scrollPrev:function oe(At){Gn(w.index.add(-1).get(),At,1)},scrollProgress:function $t(){return w.scrollProgress.get(w.offsetLocation.get())},scrollSnapList:function Ne(){return w.scrollSnapList},scrollTo:Gn,selectedScrollSnap:li,slideNodes:function ri(){return ee},slidesInView:function mn(){return w.slidesInView.get()},slidesNotInView:function it(){return w.slidesInView.get(!1)}};return ut(i,e),setTimeout(()=>l.emit("init"),0),Gi}function jte(t,i){if(1&t&&(h(0,"div",3),L(1,"img",4),f()),2&t){const e=S();v(),re("src",e.imageFile,Bi)}}BS.globalOptions=void 0;let bu=(()=>{class t{constructor(e){this.data=e,this.titleText="",this.bodyText="",this.imageFile="",this.titleText=e.titleText,this.bodyText=e.bodyText,this.imageFile=e.imageFile}static{this.\u0275fac=function(n){return new(n||t)(T(eu))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-text-panel"]],decls:7,vars:3,consts:[[1,"darkMode"],[1,"textDiv"],[3,"innerHTML"],[1,"imageDiv"],["alt","An activity image goes here","width","160","height","200",3,"src"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"h3"),y(2),f(),L(3,"hr"),h(4,"div",1),L(5,"span",2),f(),H(6,jte,2,1,"div",3),f()),2&n&&(v(2),Fe(r.titleText),v(3),re("innerHTML",r.bodyText,ff),v(),A(""!==r.imageFile?6:-1))},styles:[".textDiv[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto;white-space:pre-line}.imageDiv[_ngcontent-%COMP%]{text-align:center}"]})}}return t})(),IO=(()=>{class t{constructor(){this.activityService=_(bt),this.battleService=_(Vt),this.bigNumberPipe=_(It),this.dialog=_(Ht),this.characterService=_(Ie),this.followersService=_(Gt),this.hellService=_(We),this.inventoryService=_(he),this.logService=_(Xi),this.mainLoopService=_(tt),this.camelToTitle=new Vr}joinTheGodsClick(){confirm("Are you sure you are ready for this? You will need to leave all your money and most of your followers and possessions behind as you leave this mortal realm.")&&this.dialog.open(bu,{width:"700px",data:{titleText:"Joining the Gods",bodyText:'You take to the skies, soaring far above the human realms. Over the Kunlun mountains, past Mount Tai, and beyond the Jade Mountains, you find the great sea and finally the island where Mount Penglai stands tall, rising up into the clouds. Above the pure white slopes, the mountain is crowned with a golden palace surrounded by an orchard of trees that grow the finest jewels and the most delectable fruits that grant perfect health and eternal youth to whoever eats them. Suddenly you feel a twinge of doubt. Your own peaches never looked so inviting, no matter how hard you worked your land to cultivate them.\n\nYou push down your feelings of inadequacy and press onward toward the gates of the golden palace. You are immortal now, after all. You have earned your place here. As you stride into the large courtyard, you find an assembly of gods there, seated on golden thrones. The eight immortals are there, each holding their artifact of power as they laugh raucously at each other\'s jokes. Nuwa and Fuxi, the great ancestors of humanity, sit idly chatting as the Queen Mother of the West exchanges quiet words with Caishen in his most fine of all silks. In the center of them all, Shangti, the Jade Emperor himself, sits on his elevated throne. As you approach, he claps his hands for silence. You were clearly expected.\n\n"Ah. The young upstart who has caused so much trouble in the mortal realm has finally arrived."\n\nThe other gods greet you with nothing but steely stares. You nod in acknowledgement and take another step toward the thrones. You notice that one of them off to the side is empty. A place for you, perhaps?\n\n"I suppose you feel you deserve a place here with us now, do you?" the Jade Emperor continues. "Fight a few monsters, improve yourself a bit, conquer a few of your fellow mortals, and suddenly you\'ve earned the right to call yourself a god, eh?"\n\nYou nod again, preparing to recount the long journey of cultivation and devotion that led you to this point, when a towering figure to your right cuts you off before you can begin.\n\n"Nonsense!" the ominous voice thunders. "This upstart destroyed one of my best servants and committed uncountable sins for which no price has been paid."\n\n"And what would you suggest be done with this new immortal, Lord Yama?" the Emperor asks. "This one clearly shows the necessary power, and has no shortage of determination. One way or another, sooner or later that empty throne will be filled."\n\n"Let this one come to my domain," Lord Yama declares. "The eighteen hells will show whether they have the character fitting for a throne in the Penglai Palace."\n\nThe other gods look back and forth at each other for a moment. "That seems only fair," One of them says, a short, hairy man with horns growing from his head. "This new immortal still has much to learn, and much to atone for. Why, they can barely tell their yin from their and yang. They may be ready one day for this company, but a few millenia in Yama\'s realm will do them good."\n\nThe other gods murmer and nod agreement. Shangti rises to his feet. "Your words are wise, as always Pan Gu. Let this one be cast down to the eighteen hells. If they can master yin and yang and prove their worth through the trials of Yama\'s realm, we will welcome them as part of our celestial court."\n\nBefore you can say a word of protest, The Jade emperor waves one hand and you find yourself in a vast, bare, circular stone room. The walls are broken by eighteen open gates, each one leading to a different world of pain and suffering.\n\nIt looks like you have a new challenge ahead: Escape this underworld and prove your worth to the gods.'},autoFocus:!1}).afterClosed().subscribe(()=>{this.hellService.inHell=!0,this.hellService.moveToHell(Z.Gates),this.characterService.money=0,this.inventoryService.stashInventory(),this.followersService.hellPurge(),this.activityService.checkRequirements(!0)})}doActivity(e){if(this.battleService.enemies.length>0)return;if(!this.activityService.meetsRequirements(e))return void this.logService.log(D.EVENT,e.name[e.level]+" is unavailable now.");const n=this.activityService.checkResourceUse(e);if(""!==n)return this.characterService.flashStatus(n),void this.logService.log(D.EVENT,"You don't meet the requirements to do "+e.name[e.level]+" right now.");this.activityService.immediateActivity=e,this.mainLoopService.tick(),this.activityService.immediateActivity=null}getActivityTooltip(e,n=!1){if(e.activityType>=R.Hell||e.activityType===R.EscapeHell)return"";if(e.unlocked){if(n)return"Spend a day doing this activity";{let r="";return this.characterService.qiUnlocked&&(r="<br>Right-click to set this as your spriritual projection activity"),"Add this activity to your schedule<br>Shift- or Ctrl-click to repeat it 10x<br>Shift-Ctrl-click to repeat it 100x<br>Alt-click to add it to the top"+r}}{let r=["This activity is locked until you have the attributes required for it. You will need:<br>",...Object.entries(e.requirements[0]).map(o=>o[1]?`${this.camelToTitle.transform(o[0])}: ${this.bigNumberPipe.transform(o[1])}`:void 0)].filter(o=>o).join("<br>");return e.landRequirements&&(r+="<br>Land: "+e.landRequirements),e.fallowLandRequirements&&(r+="<br>Fallow Land: "+e.fallowLandRequirements),e.farmedLandRequirements&&(r+="<br>Farmed Land: "+e.farmedLandRequirements),r}}showActivity(e,n){e.stopPropagation();let r=n.description[n.level]+"\n\n"+n.consequenceDescription[n.level];r+=this.activityService.getYinYangDescription(n.yinYangEffect[n.level]),n.projectionOnly&&(r+="\n\nThis activity can only be performed by a spiritual projection of yourself back in the mortal realm.");const o={titleText:n.name[n.level],bodyText:r,imageFile:""};n.imageBaseName&&(o.imageFile="assets/images/activities/"+n.imageBaseName+n.level+".png"),this.dialog.open(bu,{width:"400px",data:o,autoFocus:!1})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const zte=t=>({lockedActivity:t}),$te=(t,i)=>({projectionOnly:t,lockedActivity:i});function Wte(t,i){if(1&t){const e=G();h(0,"div",4),x("click",function(){M(e);const r=S().$implicit;return I(S(2).activityPanelService.doActivity(r))}),h(1,"div",5)(2,"span"),y(3),f()(),h(4,"div",6)(5,"mat-icon",7),x("click",function(r){M(e);const o=S().$implicit;return I(S(2).activityPanelService.showActivity(r,o))}),y(6," help "),f()()()}if(2&t){const e=S().$implicit,n=S(2);z("ngClass",dt(4,zte,!e.unlocked||n.battleService.enemies.length>0))("tabindex",0),v(),re("tooltip",n.activityPanelService.getActivityTooltip(e,!0)),v(2),Fe(e.name[e.level])}}function Gte(t,i){if(1&t&&H(0,Wte,7,6,"div",3),2&t){const e=i.$implicit;A(e.discovered||e.unlocked?0:-1)}}function Yte(t,i){1&t&&be(0,Gte,1,1,null,null,_t),2&t&&Se(S().activityService.portals)}function Kte(t,i){if(1&t){const e=G();h(0,"mat-icon",13),x("click",function(r){M(e);const o=S(2).$implicit;return I(S().scheduleActivity(o,r))})("contextmenu",function(r){M(e);const o=S(2).$implicit;return I(S().rightClick(o,r))}),y(1," event "),f()}if(2&t){const e=S(2).$implicit;re("tooltip",S().activityPanelService.getActivityTooltip(e))}}function Qte(t,i){1&t&&(h(0,"mat-icon",10),y(1," model_training "),f())}function Zte(t,i){1&t&&(h(0,"mat-icon",11),y(1," supervisor_account "),f())}function Xte(t,i){1&t&&(h(0,"mat-icon",12),O(1,"bigNumber"),y(2," attach_money "),f()),2&t&&pt("tooltip","Exactly how much will you make doing this job?<br>It can depend on your attributes, but the last time you did this job you made<br>",V(1,2,S(2).$implicit.lastIncome)," taels.")}function Jte(t,i){if(1&t){const e=G();h(0,"div",4),x("click",function(){M(e);const r=S().$implicit;return I(S().activityPanelService.doActivity(r))}),h(1,"div",5)(2,"span"),y(3),f()(),h(4,"div",6)(5,"div",8),H(6,Kte,2,1,"mat-icon",9),f(),h(7,"div",8),H(8,Qte,2,0,"mat-icon",10)(9,Zte,2,0,"mat-icon",11)(10,Xte,3,4,"mat-icon",12),h(11,"mat-icon",7),x("click",function(r){M(e);const o=S().$implicit;return I(S().activityPanelService.showActivity(r,o))}),y(12," help "),f()()()()}if(2&t){const e=S().$implicit,n=S();z("ngClass",Tn(8,$te,e.projectionOnly,!e.unlocked||n.battleService.enemies.length>0))("tabindex",0),v(),re("tooltip",n.activityPanelService.getActivityTooltip(e,!0)),v(2),Fe(e.name[e.level]),v(3),A(n.mainLoopService.timeUnlocked?6:-1),v(2),A(e.skipApprenticeshipLevel>0&&!n.activityService.completedApprenticeships.includes(e.activityType)?8:-1),v(),A(n.activityService.familySpecialty===e.activityType?9:-1),v(),A(e.lastIncome&&e.lastIncome>0?10:-1)}}function eie(t,i){if(1&t&&H(0,Jte,13,11,"div",3),2&t){const e=i.$implicit;A(e.discovered||e.unlocked?0:-1)}}let tie=(()=>{class t{constructor(){this.Math=Math,this.activityService=_(bt),this.activityPanelService=_(IO),this.battleService=_(Vt),this.characterService=_(Ie),this.hellService=_(We),this.mainLoopService=_(tt)}scheduleActivity(e,n){if(n.stopPropagation(),e.projectionOnly)return void(this.activityService.spiritActivity=e.activityType);let r=1;r*=n.shiftKey||n.altKey?10:1,r*=n.ctrlKey||n.metaKey?10:1,n.altKey?this.activityService.activityLoop.unshift({activity:e.activityType,repeatTimes:r}):this.activityService.activityLoop.push({activity:e.activityType,repeatTimes:r})}rightClick(e,n){n.preventDefault(),n.stopPropagation(),this.activityService.spiritActivity=e.activityType}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ne({type:t,selectors:[["app-mobile-activities"]],decls:6,vars:1,consts:[[1,"activitiesContainer"],[1,"overflow"],["cdkDropList","","cdkDropListSortingDisabled","",1,"activityGrid"],[1,"activitySlot",3,"ngClass","tabindex"],[1,"activitySlot",3,"click","ngClass","tabindex"],[1,"activityLabel",3,"tooltip"],[1,"activityButtons"],["tooltip","What is this activity?<br>Click to learn all about it!","aria-label","Help","aria-hidden","false",1,"iconButton",3,"click"],[1,"activity-btn-group"],["aria-label","Schedule this activity","aria-hidden","false",1,"iconButton",3,"tooltip"],["tooltip","This activity requires that you go through an apprenticeship.<br>You can only do one apprenticeship in each lifetime, so choose carefully what trade you want to learn.<br>Once you've started, other trades may be closed off until your next life.","aria-label","Requires an apprenticeship","aria-hidden","false"],["tooltip","This activity is a family specialty, and you will do it better than you could if your ancestors hadn't practiced this so much.","aria-label","Family Specialty","aria-hidden","false"],["aria-label","Earns money","aria-hidden","false",3,"tooltip"],["aria-label","Schedule this activity","aria-hidden","false",1,"iconButton",3,"click","contextmenu","tooltip"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"div",1)(2,"div",2),H(3,Yte,2,0),be(4,eie,1,1,null,null,_t),f()()()),2&n&&(v(3),A(r.hellService.inHell?3:-1),v(),Se(r.activityService.activities))},dependencies:[Vo,fi,$o,Lt,et,It],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;overflow-y:auto}td[_ngcontent-%COMP%]{font-size:12px;padding-left:6px;padding-right:2px;position:relative;border-bottom:1px solid var(--tableDividerColor)}td[_ngcontent-%COMP%]:not(:last-child):before{content:"";position:absolute;width:1px;background:var(--tableDividerColor);right:0;top:10%;bottom:10%}.activitiesHeader[_ngcontent-%COMP%]{display:flex}.activitiesContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:4px;overflow:auto}.activityGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:3px;overflow-anchor:none}.activitySlot[_ngcontent-%COMP%]{position:relative;border-radius:4px;border:1px solid var(--panelBorder);padding:2px;border-spacing:0px;cursor:pointer;background-color:var(--itemSlotColor);color:var(--bodyText);box-sizing:border-box;width:calc(50vw - 6px);display:flex;flex-direction:column;gap:4px}button[_ngcontent-%COMP%]{font-size:12px;min-width:130px}.noWrap[_ngcontent-%COMP%]{white-space:nowrap;width:100%}.standardHeader[_ngcontent-%COMP%]{flex:1;white-space:nowrap}.customHeader[_ngcontent-%COMP%]{flex:4;display:inline-block;width:100%;text-align:center}.projectionOnly[_ngcontent-%COMP%]{border:1px solid var(--itemSlotHighlight);background-color:var(--qiColor)}.lockedActivity[_ngcontent-%COMP%]{background-color:var(--disabledActivity)}.activityButton[_ngcontent-%COMP%]{white-space:normal;max-width:150px}.progress-bar[_ngcontent-%COMP%]{height:24px;vertical-align:-.7em;font-size:11px;width:100px}.activityLabel[_ngcontent-%COMP%]{font-size:120%;flex-grow:1}.activityButtons[_ngcontent-%COMP%]{flex-grow:0;display:flex;justify-content:space-between}.activity-btn-group[_ngcontent-%COMP%]{display:flex}']})}}return t})();const iie=t=>({indeterminate:t}),AO=(t,i)=>({currentRow:t,disabled:i}),nie=(t,i)=>i.activity;function rie(t,i){if(1&t){const e=G();h(0,"div")(1,"span",4),y(2,"BATTLING!!!"),f()(),h(3,"div")(4,"span"),y(5,"Your schedule will resume when the battle is over."),f()(),h(6,"div")(7,"span"),y(8,"Days will not pass, but your perception of time will influence the speed of the battle."),f()(),h(9,"div")(10,"button",5),x("click",function(){return M(e),I(S().battleService.battleMessageDismissed=!0)}),y(11,"Got it. Now let me see my schedule anyway during battles."),f()()}}function oie(t,i){if(1&t){const e=G();h(0,"tr")(1,"td"),y(2),f(),h(3,"td")(4,"div",9),L(5,"span"),f()(),h(6,"td")(7,"mat-icon",10),x("click",function(){return M(e),I(S(3).removeSpiritActivity())}),y(8,"clear"),f()()()}if(2&t){const e=S(3);v(2),Fe(e.activityService.getActivityName(e.activityService.spiritActivity)),v(2),z("ngClass",dt(2,iie,e.activityService.spiritActivityProgress&&!e.mainLoopService.pause))}}function aie(t,i){if(1&t&&(h(0,"table",6)(1,"tr")(2,"td",8),y(3," Spiritual Projection "),f()(),H(4,oie,9,4,"tr"),f()),2&t){const e=S(2);v(4),A(null!==e.activityService.spiritActivity?4:-1)}}function sie(t,i){if(1&t){const e=G();h(0,"div",11)(1,"mat-icon",12),x("click",function(r){M(e);const o=S().$implicit;return I(S(2).showActivity(r,o.activity))}),y(2," help "),f(),h(3,"div",13)(4,"div"),y(5),f(),h(6,"div",14),L(7,"span"),f()()(),h(8,"div",11)(9,"mat-icon",15),x("click",function(r){M(e);const o=S().$implicit;return I(S(2).onMinusClick(o,r))}),y(10,"remove"),f(),h(11,"mat-icon",16),x("click",function(r){M(e);const o=S().$implicit;return I(S(2).onPlusClick(o,r))}),y(12,"add"),f(),h(13,"mat-icon",17),x("click",function(){M(e);const r=S().$implicit;return I(S(2).onDisableClick(r))}),y(14,"cancel"),f(),h(15,"mat-icon",10),x("click",function(){M(e);const r=S().$implicit;return I(S(2).onRemoveClick(r))}),y(16,"clear"),f()()}if(2&t){const e=S(),n=e.$implicit,r=e.$index,o=S(2);pt("id","activityLoopIndex0",r,""),z("ngClass",Tn(11,AO,r===o.activityService.currentIndex,n.disabled||n.userDisabled||o.battleService.enemies.length>0)),v(5),No(" ",o.activityService.getActivityName(n.activity)," (",n.repeatTimes," ",1===n.repeatTimes?"day":"days",") "),v(2),Dt("width",100*(r!==o.activityService.currentIndex||n.disabled||n.userDisabled?n.repeatTimes:o.activityService.currentTickCount)/n.repeatTimes,"%"),v(),pt("id","activityLoopIndex1",r,""),z("ngClass",Tn(14,AO,r===o.activityService.currentIndex,n.disabled||n.userDisabled||o.battleService.enemies.length>0))}}function lie(t,i){if(1&t&&H(0,sie,17,17),2&t){const e=i.$implicit;A(""!==S(2).activityService.getActivityName(e.activity)?0:-1)}}function cie(t,i){if(1&t){const e=G();h(0,"div",3)(1,"button",5),x("click",function(){return M(e),I(S().enableAllClick())}),y(2,"Enable All"),f(),h(3,"button",5),x("click",function(){return M(e),I(S().disableAllClick())}),y(4,"Disable All"),f(),H(5,aie,5,1,"table",6),h(6,"div",7),be(7,lie,1,1,null,null,nie),f()()}if(2&t){const e=S();v(5),A(e.characterService.qiUnlocked?5:-1),v(2),Se(e.activityService.activityLoop)}}let die=(()=>{class t{constructor(){this.activityService=_(bt),this.battleService=_(Vt),this.characterService=_(Ie),this.mainLoopService=_(tt),this.dialog=_(Ht)}onPlusClick(e,n){n.preventDefault(),n.stopPropagation();let r=1;r*=n.shiftKey||n.altKey?10:1,r*=n.ctrlKey||n.metaKey?10:1,e.repeatTimes+=r}onMinusClick(e,n){n.preventDefault(),n.stopPropagation();let r=1;r*=n.shiftKey||n.altKey?10:1,r*=n.ctrlKey||n.metaKey?10:1,e.repeatTimes-=r,e.repeatTimes<0&&(e.repeatTimes=0)}onRemoveClick(e){const n=this.activityService.activityLoop.indexOf(e);this.activityService.currentIndex>=this.activityService.activityLoop.length-1&&(this.activityService.currentIndex=0),this.activityService.activityLoop.splice(n,1)}onDisableClick(e){e.userDisabled=!e.userDisabled,e.userDisabled||this.activityService.checkRequirements(!0)}disableAllClick(){for(const e of this.activityService.activityLoop)e.userDisabled=!0}enableAllClick(){for(const e of this.activityService.activityLoop)e.userDisabled=!1}removeSpiritActivity(){this.activityService.spiritActivity=null}useSavedTicks(e){e.target instanceof HTMLInputElement&&(this.mainLoopService.useBankedTicks=e.target.checked)}showActivity(e,n){e.stopPropagation();const r=this.activityService.getActivityByType(n);if(null===r)return;let o=r.description[r.level]+"\n\n"+r.consequenceDescription[r.level];o+=this.activityService.getYinYangDescription(r.yinYangEffect[r.level]),r.projectionOnly&&(o+="\n\nThis activity can only be performed by a spiritual projection of yourself back in the mortal realm.");const a={titleText:r.name[r.level],bodyText:o,imageFile:""};r.imageBaseName&&(a.imageFile="assets/images/activities/"+r.imageBaseName+r.level+".png"),this.dialog.open(bu,{width:"400px",data:a,autoFocus:!1})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ne({type:t,selectors:[["app-mobile-time"]],decls:8,vars:5,consts:[["id","activityDropDiv",1,"dropAccepter"],["type","checkbox","id","useSavedTicks",3,"change","checked"],["for","useSavedTicks"],["cdkDropList","","cdkDropListSortingDisabled","",1,"overflow"],[1,"battleWarning"],[3,"click"],["id","spiritActivity",1,"spiritActivityPanel"],[1,"schedule-grid"],["tooltip","You can project your spiritual self to take on a second activity while your physical body continues its work.<br>Whatever activity you drop here will be completed each day as long as you have enough Qi to support the effort.<br>Requires 5 Qi per day in addition to the regular requirements of the activity.",1,"spiritProjectionLabel"],[1,"progress-bar",3,"ngClass"],["tooltip","Remove this activity from the schedule.","aria-label","Remove Activity","aria-hidden","false",1,"iconButton",3,"click"],[1,"grid-cell",3,"ngClass","id"],["tooltip","What is this activity?<br>Click to learn all about it!","aria-label","Help","aria-hidden","false",3,"click"],[1,"activity-title-and-bar"],[1,"progress-bar"],["tooltip","Spend fewer days on this.<br>Shift- or Ctrl-click to remove 10x<br>Shift-Ctrl-click to remove 100x","aria-label","Remove Days","aria-hidden","false",1,"iconButton",3,"click"],["tooltip","Spend more days on this.<br>Shift- or Ctrl-click to add 10x<br>Shift-Ctrl-click to add 100x","aria-label","Add Days","aria-hidden","false",1,"iconButton",3,"click"],["tooltip","Disable this activity on the schedule.","aria-label","Disable Activity","aria-hidden","false",1,"iconButton",3,"click"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"h6")(2,"input",1),x("change",function(a){return r.useSavedTicks(a)}),f(),h(3,"label",2),y(4),O(5,"bigNumber"),f()(),H(6,rie,12,0)(7,cie,9,1,"div",3),f()),2&n&&(v(2),z("checked",r.mainLoopService.useBankedTicks),v(2),j("Use banked time to accelerate reality. ",V(5,3,r.mainLoopService.bankedTicks)," banked moments left."),v(2),A(r.battleService.enemies.length>0&&!r.battleService.battleMessageDismissed?6:7))},dependencies:[Vo,fi,$o,Lt,et,It],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden}.dropAccepter[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;overflow-y:auto}table[_ngcontent-%COMP%]{width:100%;border-spacing:0}td[_ngcontent-%COMP%]{border-bottom:1px var(--tableDividerColor) solid;white-space:nowrap;font-size:12px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){text-align:end}mat-icon[_ngcontent-%COMP%]{height:32px;min-width:32px;width:32px;font-size:32px;margin:4px 1px;vertical-align:middle}.progress-bar[_ngcontent-%COMP%]{width:100%}label[_ngcontent-%COMP%]{font-size:10px;vertical-align:top}h6[_ngcontent-%COMP%]{margin-bottom:0}.spiritActivityPanel[_ngcontent-%COMP%]{border:1px solid var(--itemSlotHighlight);width:100%;background-color:var(--qiColor)}.spiritProjectionLabel[_ngcontent-%COMP%]{font-size:x-small;border-bottom:none}.currentRow[_ngcontent-%COMP%]{background-color:var(--itemSlotColor)}.disabled[_ngcontent-%COMP%]{background-color:var(--disabledActivity)}input[_ngcontent-%COMP%]{vertical-align:middle}.overflow[_ngcontent-%COMP%]{overflow:auto}.spaceLeft[_ngcontent-%COMP%]{margin-left:16px}.disabledSchedule[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{background-color:var(--disabledActivity)}.battleWarning[_ngcontent-%COMP%]{color:var(--healthColor);font-size:x-large}.schedule-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto min-content;gap:4px}.grid-cell[_ngcontent-%COMP%]{display:flex;white-space:nowrap;align-items:center}.activity-title-and-bar[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}"]})}}return t})();function uie(t,i){if(1&t){const e=G();h(0,"span",5),x("@popupText.done",function(r){M(e);const o=S(2).$implicit;return I(S(2).animationDoneEvent(r,o.key))}),y(1),O(2,"bigNumber"),f()}if(2&t){const e=i.$implicit;z("@popupText",e),v(),j("+",V(2,2,e),"")}}function hie(t,i){if(1&t&&(h(0,"div",2)(1,"div",4)(2,"mat-icon"),y(3),f(),h(4,"span"),y(5),O(6,"camelToTitle"),f()(),h(7,"div",4),O(8,"bigNumber"),O(9,"camelToTitle"),O(10,"bigNumber"),h(11,"span"),y(12),O(13,"bigNumber"),f()(),h(14,"div",3)(15,"span"),y(16),O(17,"bigNumber"),f(),be(18,uie,3,4,"span",5,_t),f()()),2&t){const e=S().$implicit,n=S(2);v(),re("tooltip",e.value.description),v(2),Fe(e.value.icon),v(2),j(" ",V(6,9,e.key)," "),v(2),Zf("tooltip","Your aptitude of ",V(8,11,e.value.displayAptitude())," multiplies your ",V(9,13,e.key)," gains by ",V(10,15,e.value.displayAptitude()),"."),v(5),j(" ",V(13,17,e.value.displayAptitude())," "),v(4),j(" ",V(17,19,e.value.displayValue())," "),v(2),Se(n.getAttributeUpdates(e.key))}}function fie(t,i){if(1&t&&H(0,hie,20,21,"div",2),2&t){const e=i.$implicit,n=S(2);A(0!==e.value.displayValue()||n.characterService.highestAttributes[e.key]?0:-1)}}function mie(t,i){if(1&t&&(h(0,"div",2)(1,"span"),y(2),O(3,"camelToTitle"),f()(),be(4,fie,1,1,null,null,_t),O(6,"keyvalue")),2&t){const e=i.$implicit,n=S();v(2),j(" ",V(3,1,e)," "),v(2),Se(pr(6,3,n.attributesByGroup[e],n.originalOrder))}}let PO=(()=>{class t{constructor(e,n){this.characterService=e,this.mainLoopService=n,this.attributeUpdates={strength:[],toughness:[],speed:[],intelligence:[],charisma:[],spirituality:[],earthLore:[],metalLore:[],woodLore:[],waterLore:[],fireLore:[],animalHandling:[],combatMastery:[],magicMastery:[],performance:[],smithing:[],alchemy:[],woodwork:[],leatherwork:[],formationMastery:[],cooking:[]},this.popupCounter=0,this.groups=["baseAttributes","lores","skills"],this.originalOrder=()=>0,this.mainLoopService.longTickSubject.subscribe(()=>{if(this.popupCounter<1)this.popupCounter++;else{this.popupCounter=0;for(const r in this.characterService.attributeUpdates){const o=r;0!==this.characterService.attributeUpdates[o]&&(this.attributeUpdates[o].push(this.characterService.attributeUpdates[o]),this.characterService.attributeUpdates[o]=0)}}}),this.attributesByGroup={baseAttributes:{strength:this.characterService.attributes.strength,speed:this.characterService.attributes.speed,toughness:this.characterService.attributes.toughness,charisma:this.characterService.attributes.charisma,intelligence:this.characterService.attributes.intelligence,spirituality:this.characterService.attributes.spirituality},lores:{fireLore:this.characterService.attributes.fireLore,woodLore:this.characterService.attributes.woodLore,earthLore:this.characterService.attributes.earthLore,metalLore:this.characterService.attributes.metalLore,waterLore:this.characterService.attributes.waterLore},skills:{performance:this.characterService.attributes.performance,cooking:this.characterService.attributes.cooking,smithing:this.characterService.attributes.smithing,woodwork:this.characterService.attributes.woodwork,leatherwork:this.characterService.attributes.leatherwork,alchemy:this.characterService.attributes.alchemy,formationMastery:this.characterService.attributes.formationMastery,animalHandling:this.characterService.attributes.animalHandling,combatMastery:this.characterService.attributes.combatMastery,magicMastery:this.characterService.attributes.magicMastery}}}animationDoneEvent(e,n){const r=n;for(;this.attributeUpdates[r].length>0;)this.attributeUpdates[r].pop()}getAttributeUpdates(e){return this.attributeUpdates[e]}static{this.\u0275fac=function(n){return new(n||t)(T(Ie),T(tt))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-attributes-panel"]],decls:13,vars:0,consts:[[1,"attributesContainer"],[1,"attributesTable"],[1,"attributeLine"],[1,"attributeColumn"],[1,"attributeColumn",3,"tooltip"],[1,"popupText"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),L(4,"span"),f(),h(5,"div",3)(6,"span"),y(7,"Aptitude"),f()(),h(8,"div",3)(9,"span"),y(10,"Value"),f()()(),be(11,mie,7,6,null,null,_t),f()()),2&n&&(v(11),Se(r.groups))},dependencies:()=>[Lt,Cm,Vr,It,et],styles:["h3[_ngcontent-%COMP%]{width:100%}mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;margin:2px;vertical-align:middle;color:var(--bodyText)}span[_ngcontent-%COMP%]{font-size:14px}.optionsIcon[_ngcontent-%COMP%]{float:right}.UNMAXED[_ngcontent-%COMP%]{color:var(--bodyText)}.MAXED[_ngcontent-%COMP%]{color:var(--textHighlight)}.smallerIcon[_ngcontent-%COMP%]{float:right;height:12px;width:12px;margin-top:1px;margin-bottom:0;vertical-align:top}.attributesContainer[_ngcontent-%COMP%]{display:flex;overflow-y:auto;flex:auto;width:100%;height:100%}.attributesTable[_ngcontent-%COMP%]{flex:1;border-collapse:collapse;margin-left:4px;margin-right:4px;display:flex;flex-direction:column}.attributeColumn[_ngcontent-%COMP%]{margin-left:2px;margin-right:2px;flex-grow:1;flex-basis:0;overflow:hidden}.attributeLine[_ngcontent-%COMP%]{height:20px;margin-top:2px;padding-bottom:2px;border-bottom:1px var(--tableDividerColor) solid;display:flex;flex-direction:row}.attributeValueCell[_ngcontent-%COMP%]{position:relative}.popupText[_ngcontent-%COMP%]{position:relative;color:var(--popupTextColor);z-index:10000;font-size:x-small;transform:translateZ(0)}"],data:{animation:[Em("popupText",[e0("in",jn({})),Fd(":leave",[Rd("800ms",jn({opacity:0}))])])]}})}}return t})();const pie=(t,i)=>i.id;function gie(t,i){1&t&&(h(0,"div"),y(1,"OWNED"),f())}function vie(t,i){if(1&t&&(h(0,"div"),y(1),O(2,"number"),f()),2&t){const e=S().$implicit;v(),j("$ ",pr(2,1,e.value,"1.0-0"),"")}}function yie(t,i){if(1&t){const e=G();h(0,"div")(1,"div",2),x("click",function(){const r=M(e).$implicit;return I(S().storeService.buyFurniture(r))}),h(2,"div"),y(3),O(4,"titlecase"),f(),H(5,gie,2,0,"div")(6,vie,3,4,"div"),f()()}if(2&t){const e=i.$implicit,n=S();v(),re("tooltip",n.homeService.getFurnitureTooltip(e)),v(2),Fe(V(4,3,e.name)),v(2),A(n.homeService.ownedFurniture.includes(e.id)?5:6)}}let _ie=(()=>{class t{constructor(e,n,r,o,a,s){this.storeService=e,this.characterService=n,this.homeService=r,this.inventoryService=o,this.itemRepoService=a,this.gameStateService=s,this.buyDisabled=!0}static{this.\u0275fac=function(n){return new(n||t)(T(jr),T(Ie),T(zt),T(he),T(Un),T(Ut))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-furniture-store-modal"]],decls:8,vars:0,consts:[[1,"darkMode","furnitureModal"],[1,"inventoryGrid"],["tabindex","0",1,"itemSlot",3,"click","tooltip"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"span"),y(2,"Furniture Shop"),f(),L(3,"hr")(4,"br"),h(5,"div",1),be(6,yie,7,5,"div",null,pie),f()()),2&n&&(v(6),Se(r.itemRepoService.furniture))},dependencies:()=>[yl,Ai,et],styles:[".furnitureModal[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:scroll;max-height:600px}.itemSlot[_ngcontent-%COMP%]{width:75px;height:75px;background-color:var(--storeButtonColor);line-height:12px}.ownedItem[_ngcontent-%COMP%]{background-color:var(--storeButtonDisabledColor)!important;border:1px solid var(--storeButtonDisabledColor)!important}.inventoryGrid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:3px;margin-bottom:1em;text-align:center;justify-content:center}hr[_ngcontent-%COMP%]{margin-top:2px}button[_ngcontent-%COMP%]{width:90%;display:inline-block;margin-top:4px}"]})}}return t})();function bie(t,i){1&t&&(h(0,"div")(1,"span"),y(2," Your home is a distant memory, and can't help you here in hell. "),f()())}function Sie(t,i){if(1&t){const e=G();h(0,"mat-icon",4),x("click",function(){return M(e),I(S(2).homeService.upgradeToNextHome())}),y(1," add_home "),f()}2&t&&re("tooltip",S(2).homeService.nextHome.upgradeToTooltip)}function wie(t,i){if(1&t){const e=G();h(0,"mat-icon",5),x("click",function(){return M(e),I(S(2).homeService.downgradeHome())}),y(1," keyboard_double_arrow_down "),f()}}function Cie(t,i){if(1&t&&(h(0,"div",6),L(1,"span"),f(),L(2,"span",7)),2&t){const e=S(2);Me("value",e.buildTimeYears()),v(),Dt("width",100*e.homeService.houseBuildingProgress,"%")}}function kie(t,i){if(1&t&&(h(0,"div",3)(1,"span"),y(2),O(3,"bigNumber"),f()()),2&t){const e=S(2);v(2),qi("It costs ",V(3,2,e.homeService.home.costPerDay)," ",1===e.homeService.home.costPerDay?"tael":"taels"," per day to maintain your home")}}function Die(t,i){if(1&t&&(h(0,"span"),y(1),f()),2&t){const e=S(3);v(),qi(" has room for ",e.homeService.openBedroomFurnitureSlots," more piece",e.homeService.openBedroomFurnitureSlots>1?"s":""," of furniture")}}function Tie(t,i){if(1&t){const e=G();L(0,"hr"),h(1,"div")(2,"span"),y(3,"Your Bedroom"),f(),H(4,Die,2,2,"span"),f(),h(5,"table",8)(6,"tr")(7,"td",9),x("click",function(){return M(e),I(S(2).selectFurniture(0))}),y(8),O(9,"titlecase"),f(),h(10,"td",9),x("click",function(){return M(e),I(S(2).selectFurniture(1))}),y(11),O(12,"titlecase"),f(),h(13,"td",9),x("click",function(){return M(e),I(S(2).selectFurniture(2))}),y(14),O(15,"titlecase"),f(),h(16,"td")(17,"span",10),y(18),f()()(),h(19,"tr")(20,"td",9),x("click",function(){return M(e),I(S(2).selectFurniture(3))}),y(21),O(22,"titlecase"),f(),h(23,"td",9),x("click",function(){return M(e),I(S(2).selectFurniture(4))}),y(24),O(25,"titlecase"),f(),h(26,"td",9),x("click",function(){return M(e),I(S(2).selectFurniture(5))}),y(27),O(28,"titlecase"),f()(),h(29,"tr")(30,"td",9),x("click",function(){return M(e),I(S(2).selectFurniture(6))}),y(31),O(32,"titlecase"),f(),h(33,"td",9),x("click",function(){return M(e),I(S(2).selectFurniture(7))}),y(34),O(35,"titlecase"),f(),h(36,"td",9),x("click",function(){return M(e),I(S(2).selectFurniture(8))}),y(37),O(38,"titlecase"),f()(),h(39,"tr")(40,"td",11),y(41," Door "),f()()()}if(2&t){const e=S(2);v(4),A(e.homeService.openBedroomFurnitureSlots>0?4:-1),v(3),re("tooltip",e.homeService.getFurnitureSlotTooltip(0)),v(),j(" ",V(9,20,null==e.homeService.bedroomFurniture[0]?null:e.homeService.bedroomFurniture[0].name)," "),v(2),re("tooltip",e.homeService.getFurnitureSlotTooltip(1)),v(),j(" ",V(12,22,null==e.homeService.bedroomFurniture[1]?null:e.homeService.bedroomFurniture[1].name)," "),v(2),re("tooltip",e.homeService.getFurnitureSlotTooltip(2)),v(),j(" ",V(15,24,null==e.homeService.bedroomFurniture[2]?null:e.homeService.bedroomFurniture[2].name)," "),v(4),j("Feng Shui Score: ",e.characterService.fengshuiScore,""),v(2),re("tooltip",e.homeService.getFurnitureSlotTooltip(3)),v(),j(" ",V(22,26,null==e.homeService.bedroomFurniture[3]?null:e.homeService.bedroomFurniture[3].name)," "),v(2),re("tooltip",e.homeService.getFurnitureSlotTooltip(4)),v(),j(" ",V(25,28,null==e.homeService.bedroomFurniture[4]?null:e.homeService.bedroomFurniture[4].name)," "),v(2),re("tooltip",e.homeService.getFurnitureSlotTooltip(5)),v(),j(" ",V(28,30,null==e.homeService.bedroomFurniture[5]?null:e.homeService.bedroomFurniture[5].name)," "),v(3),re("tooltip",e.homeService.getFurnitureSlotTooltip(6)),v(),j(" ",V(32,32,null==e.homeService.bedroomFurniture[6]?null:e.homeService.bedroomFurniture[6].name)," "),v(2),re("tooltip",e.homeService.getFurnitureSlotTooltip(7)),v(),j(" ",V(35,34,null==e.homeService.bedroomFurniture[7]?null:e.homeService.bedroomFurniture[7].name)," "),v(2),re("tooltip",e.homeService.getFurnitureSlotTooltip(8)),v(),j(" ",V(38,36,null==e.homeService.bedroomFurniture[8]?null:e.homeService.bedroomFurniture[8].name)," ")}}function xie(t,i){if(1&t&&(h(0,"div"),H(1,Sie,2,1,"mat-icon",1)(2,wie,2,0,"mat-icon",2)(3,Cie,3,3),h(4,"div")(5,"span"),y(6),f()()(),h(7,"div",3)(8,"span"),y(9),f()(),h(10,"div"),H(11,kie,4,4,"div",3)(12,Tie,42,38),f()),2&t){const e=S();v(),A(e.homeService.home.name!==e.homeService.nextHome.name?1:-1),v(),A(e.homeService.home.name!==e.homeService.previousHome.name?2:-1),v(),A(e.homeService.upgrading?3:-1),v(3),j(" You live in a ",e.homeService.home.name," "),v(3),Fe(e.homeService.home.description),v(2),A(e.hellService.inHell||e.characterService.god?-1:11),v(),A(e.homeService.home.maxFurniture>0&&(!e.hellService.inHell||e.homeService.hellHome)?12:-1)}}let RO=(()=>{class t{constructor(e,n,r,o,a,s,l){this.characterService=e,this.homeService=n,this.followerService=r,this.hellService=o,this.dialog=a,this.storeService=s,this.bignumber=l,this.Math=Math}buildTimeYears(){return this.bignumber.transform((1-this.homeService.houseBuildingProgress)*this.homeService.nextHome.daysToBuild/(1+this.followerService.jobs.builder.totalPower)/365)+" years"}selectFurniture(e){this.homeService.bedroomFurniture[e]?this.homeService.setFurniture(null,e):(this.storeService.setFurnitureIndex(e),this.dialog.open(_ie,{width:"600px",data:{someField:"foo"},autoFocus:!1}))}static{this.\u0275fac=function(n){return new(n||t)(T(Ie),T(zt),T(Gt),T(We),T(Ht),T(jr),T(It))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-home-panel"]],decls:4,vars:1,consts:[[1,"homeContainer","overflow"],["aria-label","Upgrade Home","aria-hidden","false",1,"iconButton","floatRight",3,"tooltip"],["aria-label","Downgrade Home","aria-hidden","false","tooltip","Is your new home too expensive? Downgrade to your previous home.",1,"iconButton","floatRight"],[1,"homeInfo"],["aria-label","Upgrade Home","aria-hidden","false",1,"iconButton","floatRight",3,"click","tooltip"],["aria-label","Downgrade Home","aria-hidden","false","tooltip","Is your new home too expensive? Downgrade to your previous home.",1,"iconButton","floatRight",3,"click"],["tooltip","Upgrading your home.",1,"progress-bar"],[2,"margin-left","4px"],[1,"furnitureSlots"],[1,"itemSlot",3,"click","tooltip"],["tooltip","The Feng Shui of your home can improve your health and wealth."],[1,"itemSlot","doorText"]],template:function(n,r){1&n&&(h(0,"div",0),H(1,bie,3,0,"div")(2,xie,13,7),f(),L(3,"br")),2&n&&(v(),A(r.hellService.inHell&&!r.homeService.hellHome?1:2))},dependencies:()=>[Lt,Ai,It,et],styles:[".homeContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-left:2px;padding-right:2px;flex:auto;overflow:auto}.homeInfo[_ngcontent-%COMP%]{font-size:12px;margin-top:2px;margin-bottom:2px}.mouseWarning[_ngcontent-%COMP%]{font-size:12px;margin-top:6px;margin-right:6px}.buttons[_ngcontent-%COMP%]{border-top:1px solid var(--panelBorder);display:flex;justify-content:space-between;white-space:nowrap}.button-group[_ngcontent-%COMP%]{white-space:nowrap}mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;margin-top:2px;margin-bottom:2px;vertical-align:middle;color:var(--bodyText)}.furnitureSlots[_ngcontent-%COMP%]{margin-bottom:2px}.itemSlot[_ngcontent-%COMP%]{line-height:normal;width:50px;height:50px}.doorText[_ngcontent-%COMP%]{width:50px;height:10px;line-height:normal}.progress-bar[_ngcontent-%COMP%]{width:180px;margin-left:4px;vertical-align:middle}.overflow[_ngcontent-%COMP%]{overflow:auto}.hellDisabled[_ngcontent-%COMP%]{opacity:.3}.floatRight[_ngcontent-%COMP%]{float:right}.inputsContainer[_ngcontent-%COMP%]{display:flex;flex-direction:row}.inputSlot[_ngcontent-%COMP%]{width:52px;height:52px;display:flex;line-height:normal;flex-direction:row;overflow:hidden;position:relative;border-radius:4px;border:1px solid var(--panelBorder);padding:2px;font-size:x-small;text-align:center;border-spacing:0px;cursor:pointer;background-color:var(--itemSlotColor);color:var(--bodyText);box-sizing:border-box}.itemQuantity[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;line-height:15px;padding:0 4px;width:fit-content;height:fit-content;background:inherit;filter:brightness(80%);border-radius:3px;z-index:1}.itemImagePlaceholder[_ngcontent-%COMP%]{width:48px;min-width:48px;height:48px;min-height:48px;border:solid 1px white}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.5}.workstationContainer[_ngcontent-%COMP%]{margin:2px;border:1px solid var(--panelBorder);padding:2px}"]})}}return t})();function Eie(t,i){1&t&&(h(0,"span",4),y(1," (new)"),f())}function Mie(t,i){if(1&t){const e=G();h(0,"input",2),x("change",function(r){const o=M(e).$implicit;return I(S().topicFilter(r,o))}),f(),h(1,"label",3),y(2),H(3,Eie,2,0,"span",4),f(),L(4,"br")}if(2&t){const e=i.$implicit,n=S();z("id","filter"+e)("checked",n.logService.topicProperties[e].enabled),v(),z("for","filter"+e),v(),j(" Show ",e," Log Entries "),v(),A(n.logService.topicProperties[e].hasNewMessages?3:-1)}}let Iie=(()=>{class t{constructor(e){this.logService=e,this.logTopics=Object.values(D),this.LogTopic=D}topicFilter(e,n){e.target instanceof HTMLInputElement&&this.logService.enableLogTopic(n,e.target.checked)}static{this.\u0275fac=function(n){return new(n||t)(T(Xi))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-log-filter-panel"]],decls:6,vars:0,consts:[[1,"darkMode"],[1,"filters"],["type","checkbox",3,"change","id","checked"],[3,"for"],[1,"highlightText"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"h3"),y(2,"Log Filters"),f(),h(3,"span",1),be(4,Mie,5,5,null,null,_t),f()()),2&n&&(v(4),Se(r.logTopics))},encapsulation:2})}}return t})();const Aie=(t,i)=>i.message+i.timestamp;function Pie(t,i){if(1&t&&(h(0,"span"),y(1),f()),2&t){const e=S().$implicit;v(),j(" (",e.repeat," times)")}}function Rie(t,i){if(1&t&&(h(0,"div",5),y(1),H(2,Pie,2,1,"span"),f()),2&t){const e=i.$implicit;z("ngClass",e.type),v(),j(" ",e.message,""),v(),A(e.repeat?2:-1)}}let FO=(()=>{class t{constructor(e,n,r){this.logService=e,this.gameStateService=n,this.dialog=r}topicFilter(e,n){e.target instanceof HTMLInputElement&&this.logService.enableLogTopic(n,e.target.checked)}logFilterClicked(){this.dialog.open(Iie,{width:"700px",data:{someField:"foo"},autoFocus:!1})}static{this.\u0275fac=function(n){return new(n||t)(T(Xi),T(Ut),T(Ht))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-log-panel"]],decls:10,vars:0,consts:[[1,"log"],["aria-label","Filter Log","aria-hidden","false","tooltip","Manage Log Filters",1,"iconButton","optionsIcon",3,"click"],[1,"headerNote"],[1,"logBoxContainer"],[1,"logBox"],[1,"logEntryDiv",3,"ngClass"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"h3")(2,"mat-icon",1),x("click",function(){return r.logFilterClicked()}),y(3," filter_alt "),f(),h(4,"span",2),y(5,"Newest messages appear at the top."),f()(),h(6,"div",3)(7,"div",4),be(8,Rie,3,3,"div",5,Aie),f()()()),2&n&&(v(8),Se(r.logService.currentLog))},dependencies:()=>[Lt,fi,et],styles:[".log[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:0;flex-grow:1}.STANDARD[_ngcontent-%COMP%]{color:var(--bodyText)}.INJURY[_ngcontent-%COMP%]{color:var(--healthColor)}.logEntryDiv[_ngcontent-%COMP%]{border-top:1px var(--tableDividerColor) dotted;font-size:12px;line-height:12px;margin-left:2px;margin-top:1px}.logBoxContainer[_ngcontent-%COMP%]{overflow:auto;display:flex;flex-direction:column;flex-grow:1}.logBox[_ngcontent-%COMP%]{overflow-anchor:none;display:flex;flex-direction:column;flex-wrap:nowrap}.headerNote[_ngcontent-%COMP%]{margin-left:100px;font-size:x-small}.highlightText[_ngcontent-%COMP%]{color:var(--healthColor)}mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;margin:4px 1px;vertical-align:middle;color:var(--bodyText)}"]})}}return t})(),Fie=(()=>{class t{constructor(e,n,r){this.battleService=e,this.characterService=n,this.inventoryService=r}potionThresholdChange(e){e.target instanceof HTMLInputElement&&(this.battleService.potionThreshold=Math.floor(parseFloat(e.target.value)))}foodThresholdChange(e){e.target instanceof HTMLInputElement&&(this.battleService.foodThreshold=Math.floor(parseFloat(e.target.value)))}static{this.\u0275fac=function(n){return new(n||t)(T(Vt),T(Ie),T(he))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-battle-options-panel"]],decls:21,vars:5,consts:[[1,"darkMode"],["tooltip","Drink potions in your equipment pouches when the status they restore gets below this percentage."],["min","0","type","number",1,"inputBox",3,"change","value"],[3,"tooltip"],[1,"selectFoodStatus",3,"valueChange","value"],["value","health"],["value","stamina"],["value","qi"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"span"),y(2,"Battle Options"),f(),L(3,"hr"),h(4,"div")(5,"span",1),y(6,"Potion Threshold "),h(7,"input",2),x("change",function(a){return r.potionThresholdChange(a)}),f(),y(8,"% "),f()(),h(9,"div")(10,"span",3),y(11,"Pouch Food Threshold "),h(12,"mat-select",4),hl("valueChange",function(a){return bd(r.battleService.foodThresholdStatusType,a)||(r.battleService.foodThresholdStatusType=a),a}),h(13,"mat-option",5),y(14,"Health"),f(),h(15,"mat-option",6),y(16,"Stamina"),f(),h(17,"mat-option",7),y(18,"Qi"),f()(),h(19,"input",2),x("change",function(a){return r.foodThresholdChange(a)}),f(),y(20,"% "),f()()()),2&n&&(v(7),re("value",r.battleService.potionThreshold),v(3),pt("tooltip","Eat Soul Food in your equipment pouches when the selected status gets below this percentage.<br>You are limited to eating ",r.inventoryService.maxFoodPerDay," food per day."),v(2),ul("value",r.battleService.foodThresholdStatusType),v(7),re("value",r.battleService.foodThreshold))},dependencies:()=>[_O,yO,y0,et],styles:[".selectFoodStatus[_ngcontent-%COMP%]{width:100px;color:var(--bodyText);border:1px solid var(--bodyText);font-size:small;margin:4px}[_nghost-%COMP%]     .mat-mdc-select-arrow{color:var(--bodyText)!important}"]})}}return t})();const OO=(t,i)=>i.name+i.ticks,LO=(t,i)=>i.name+i.ticksLeft,Oie=(t,i)=>i.name;function Lie(t,i){if(1&t){const e=G();h(0,"span")(1,"mat-icon",5),x("click",function(){return M(e),I(S().battleOptions())}),y(2," settings "),f()()}}function Nie(t,i){if(1&t&&(h(0,"div")(1,"span"),y(2),O(3,"titlecase"),f()()),2&t){const e=S();v(2),qi(" ",V(3,2,e.battleService.activeFormation)," formation active for ",e.battleService.formationDuration," ticks ")}}function Bie(t,i){if(1&t){const e=G();h(0,"div",6)(1,"div",7)(2,"input",8),x("change",function(r){M(e);const o=S().$implicit;return I(S().techniqueEnableChange(r,o))}),f(),h(3,"span"),y(4),f()(),h(5,"div",9),O(6,"bigNumber"),O(7,"bigNumber"),L(8,"span"),f()()}if(2&t){const e=S().$implicit,n=S();v(2),z("checked",!e.disabled),v(2),Fe(e.name),v(),Me("value",V(6,6,n.Math.floor(e.ticks)))("max",V(7,8,n.Math.floor(e.ticksRequired))),v(3),Dt("width",100*n.Math.floor(e.ticks)/n.Math.floor(e.ticksRequired),"%")}}function Hie(t,i){1&t&&H(0,Bie,9,10,"div",6),2&t&&A(i.$implicit.unlocked?0:-1)}function Vie(t,i){if(1&t&&(h(0,"div",4)(1,"div",7)(2,"span"),y(3),f()()()),2&t){const e=i.$implicit;re("tooltip",e.description),v(3),qi("",e.name," ",e.ticksLeft,"")}}function qie(t,i){if(1&t){const e=G();h(0,"div")(1,"button",10),x("click",function(){return M(e),I(S().battleService.flee())}),y(2,"Flee Like A Coward"),f()()}}function jie(t,i){if(1&t){const e=G();h(0,"button",10),x("click",function(){M(e);const r=S().$implicit;return I(S().battleService.fight(r))}),y(1,"Fight"),f()}}function Uie(t,i){1&t&&(h(0,"span"),y(1,"Fighting "),f())}function zie(t,i){if(1&t&&(h(0,"div",6)(1,"div",7)(2,"span"),y(3),f()(),h(4,"div",9),O(5,"bigNumber"),O(6,"bigNumber"),L(7,"span"),f()()),2&t){const e=i.$implicit,n=S(2);v(3),Fe(e.name),v(),Me("value",V(5,5,n.Math.floor(e.ticks)))("max",V(6,7,n.Math.floor(e.ticksRequired))),v(3),Dt("width",100*n.Math.floor(e.ticks)/n.Math.floor(e.ticksRequired),"%")}}function $ie(t,i){if(1&t&&(h(0,"div",4)(1,"div",7)(2,"span"),y(3),f()()()),2&t){const e=i.$implicit;re("tooltip",e.description),v(3),qi("",e.name," ",e.ticksLeft,"")}}function Wie(t,i){if(1&t&&(h(0,"div"),L(1,"img",15),f()),2&t){const e=S().$implicit;v(),re("src",e.imageFile,Bi)}}function Gie(t,i){if(1&t&&(h(0,"div"),H(1,jie,2,0,"button")(2,Uie,2,0,"span"),h(3,"span",11),y(4),O(5,"titlecase"),f()(),h(6,"div",1)(7,"div",2)(8,"div")(9,"span",12)(10,"mat-icon"),y(11,"shield"),f(),y(12),O(13,"bigNumber"),f()(),h(14,"div",13)(15,"div",14),O(16,"bigNumber"),O(17,"bigNumber"),L(18,"span"),f()(),be(19,zie,8,9,"div",6,OO),be(21,$ie,4,3,"div",4,LO),f(),h(23,"div",2),H(24,Wie,2,1,"div"),f()()),2&t){const e=i.$implicit,n=S();v(),A(n.battleService.currentEnemy!==e?1:2),v(3),Fe(V(5,8,e.name)),v(8),Fe(V(13,10,e.defense)),v(3),Me("value",V(16,12,n.Math.floor(e.health)))("max",V(17,14,n.Math.floor(e.maxHealth))),v(3),Dt("width",100*n.Math.floor(e.health)/n.Math.floor(e.maxHealth),"%"),v(),Se(e.techniques),v(2),Se(e.statusEffects),v(3),A(e.imageFile?24:-1)}}let NO=(()=>{class t{constructor(e,n,r){this.battleService=e,this.characterService=n,this.dialog=r,this.Math=Math}battleOptions(){this.dialog.open(Fie,{width:"700px",data:{someField:"foo"},autoFocus:!1})}techniqueEnableChange(e,n){e.target instanceof HTMLInputElement&&(n.disabled=!e.target.checked)}static{this.\u0275fac=function(n){return new(n||t)(T(Vt),T(Ie),T(Ht))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-battle-panel"]],decls:24,vars:3,consts:[[1,"battleContainer"],[1,"columnDiv"],[1,"splitDiv"],[1,"headerDiv"],[1,"techniqueLine",3,"tooltip"],["tooltip","Options","aria-label","Battle Settings","aria-hidden","false",1,"iconButton","rightAligned",3,"click"],[1,"techniqueLine"],[1,"techniqueName"],["type","checkbox",3,"change","checked"],[1,"technique-bar"],[3,"click"],[1,"enemyName"],["tooltip","Defense"],[1,"health"],[1,"progress-bar"],["alt","A Monster!","width","80","height","100",1,"monsterImage",3,"src"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"h3"),H(2,Lie,3,0,"span"),f(),h(3,"div")(4,"div",1)(5,"div",2)(6,"div",3)(7,"span"),y(8,"Your Techniques"),f()(),H(9,Nie,4,4,"div"),be(10,Hie,1,1,null,null,OO),L(12,"br"),be(13,Vie,4,3,"div",4,LO),L(15,"br"),H(16,qie,3,0,"div"),f(),h(17,"div",2)(18,"div",3)(19,"span"),y(20,"Your Enemies"),f()(),be(21,Gie,25,16,null,null,Oie),f()()()(),L(23,"br")),2&n&&(v(2),A(r.characterService.itemPouches.length>0?2:-1),v(7),A(""!==r.battleService.activeFormation?9:-1),v(),Se(r.battleService.techniques),v(3),Se(r.battleService.statusEffects),v(3),A(r.battleService.enemies.length>0?16:-1),v(5),Se(r.battleService.enemies))},dependencies:()=>[Lt,Ai,It,et],styles:["h3[_ngcontent-%COMP%]{margin-bottom:0}.progress-bar[_ngcontent-%COMP%]{vertical-align:-.3em}.technique-bar[_ngcontent-%COMP%]{vertical-align:-.5em}.health[_ngcontent-%COMP%] > .progress-bar[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background-color:var(--healthColor)}mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;margin:2px;vertical-align:middle}.rightAligned[_ngcontent-%COMP%]{float:right;margin-right:6px}.clashTable[_ngcontent-%COMP%]{border-spacing:0px}.fixedCell[_ngcontent-%COMP%]{width:16px}.clashIcon[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.battleContainer[_ngcontent-%COMP%]{overflow-y:auto;flex-grow:1;margin:4px}.columnDiv[_ngcontent-%COMP%]{display:flex;flex-direction:row}.splitDiv[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;margin-left:2px;margin-right:2px}.headerDiv[_ngcontent-%COMP%]{border-bottom:1px solid var(--panelBorder)}.monsterImage[_ngcontent-%COMP%]{border:3px solid var(--panelBorder);margin-right:4px}.enemyName[_ngcontent-%COMP%]{min-width:200px}.techniqueLine[_ngcontent-%COMP%]{margin-top:2px}.techniqueName[_ngcontent-%COMP%]{margin-right:2px}"]})}}return t})();function BO(t=0,i=Sl){return t<0&&(t=0),V0(t,t,i)}function HO(t){const i=t.cloneNode(!0),e=i.querySelectorAll("[id]"),n=t.nodeName.toLowerCase();i.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return"canvas"===n?jO(t,i):("input"===n||"select"===n||"textarea"===n)&&qO(t,i),VO("canvas",t,i,jO),VO("input, textarea, select",t,i,qO),i}function VO(t,i,e,n){const r=i.querySelectorAll(t);if(r.length){const o=e.querySelectorAll(t);for(let a=0;a<r.length;a++)n(r[a],o[a])}}let Yie=0;function qO(t,i){"file"!==i.type&&(i.value=t.value),"radio"===i.type&&i.name&&(i.name=`mat-clone-${i.name}-${Yie++}`)}function jO(t,i){const e=i.getContext("2d");if(e)try{e.drawImage(t,0,0)}catch{}}function HS(t){const i=t.getBoundingClientRect();return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height,x:i.x,y:i.y}}function VS(t,i,e){const{top:n,bottom:r,left:o,right:a}=t;return e>=n&&e<=r&&i>=o&&i<=a}function Su(t,i,e){t.top+=i,t.bottom=t.top+t.height,t.left+=e,t.right=t.left+t.width}function UO(t,i,e,n){const{top:r,right:o,bottom:a,left:s,width:l,height:c}=t,d=l*i,u=c*i;return n>r-u&&n<a+u&&e>s-d&&e<o+d}class zO{_document;positions=new Map;constructor(i){this._document=i}clear(){this.positions.clear()}cache(i){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),i.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:HS(e)})})}handleScroll(i){const e=xn(i),n=this.positions.get(e);if(!n)return null;const r=n.scrollPosition;let o,a;if(e===this._document){const c=this.getViewportScrollPosition();o=c.top,a=c.left}else o=e.scrollTop,a=e.scrollLeft;const s=r.top-o,l=r.left-a;return this.positions.forEach((c,d)=>{c.clientRect&&e!==d&&e.contains(d)&&Su(c.clientRect,s,l)}),r.top=o,r.left=a,{top:s,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function $O(t,i){const e=t.rootNodes;if(1===e.length&&e[0].nodeType===i.ELEMENT_NODE)return e[0];const n=i.createElement("div");return e.forEach(r=>n.appendChild(r)),n}function qS(t,i,e){for(let n in i)if(i.hasOwnProperty(n)){const r=i[n];r?t.setProperty(n,r,e?.has(n)?"important":""):t.removeProperty(n)}return t}function Hl(t,i){const e=i?"":"none";qS(t.style,{"touch-action":i?"":"none","-webkit-user-drag":i?"":"none","-webkit-tap-highlight-color":i?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function WO(t,i,e){qS(t.style,{position:i?"":"fixed",top:i?"":"0",opacity:i?"":"0",left:i?"":"-999em"},e)}function Fp(t,i){return i&&"none"!=i?t+" "+i:t}function GO(t,i){t.style.width=`${i.width}px`,t.style.height=`${i.height}px`,t.style.transform=Op(i.left,i.top)}function Op(t,i){return`translate3d(${Math.round(t)}px, ${Math.round(i)}px, 0)`}function YO(t){const i=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*i}function jS(t,i){return t.getPropertyValue(i).split(",").map(n=>n.trim())}const Qie=new Set(["position"]);class Zie{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(i,e,n,r,o,a,s,l,c,d){this._document=i,this._rootElement=e,this._direction=n,this._initialDomRect=r,this._previewTemplate=o,this._previewClass=a,this._pickupPositionOnPage=s,this._initialTransform=l,this._zIndex=c,this._renderer=d}attach(i){this._preview=this._createPreview(),i.appendChild(this._preview),KO(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(i){this._preview.style.transform=i}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(i){this._preview.classList.add(i)}getTransitionDuration(){return function Kie(t){const i=getComputedStyle(t),e=jS(i,"transition-property"),n=e.find(s=>"transform"===s||"all"===s);if(!n)return 0;const r=e.indexOf(n),o=jS(i,"transition-duration"),a=jS(i,"transition-delay");return YO(o[r])+YO(a[r])}(this._preview)}addEventListener(i,e){return this._renderer.listen(this._preview,i,e)}_createPreview(){const i=this._previewTemplate,e=this._previewClass,n=i?i.template:null;let r;if(n&&i){const o=i.matchSize?this._initialDomRect:null,a=i.viewContainer.createEmbeddedView(n,i.context);a.detectChanges(),r=$O(a,this._document),this._previewEmbeddedView=a,i.matchSize?GO(r,o):r.style.transform=Op(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=HO(this._rootElement),GO(r,this._initialDomRect),this._initialTransform&&(r.style.transform=this._initialTransform);return qS(r.style,{"pointer-events":"none",margin:KO(r)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},Qie),Hl(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("popover","manual"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(o=>r.classList.add(o)):r.classList.add(e)),r}}function KO(t){return"showPopover"in t}const Xie={passive:!0},QO={passive:!1},Jie={passive:!1,capture:!0},ZO=new Set(["position"]);class tne{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_anchor;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=$(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new Y;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=je.EMPTY;_pointerUpSubscription=je.EMPTY;_scrollSubscription=je.EMPTY;_resizeSubscription=je.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(i){i!==this._disabled&&(this._disabled=i,this._toggleNativeDragInteractions(),this._handles.forEach(e=>Hl(e,i)))}_disabled=!1;beforeStarted=new Y;started=new Y;released=new Y;ended=new Y;entered=new Y;exited=new Y;dropped=new Y;moved=this._moveEvents;data;constrainPosition;constructor(i,e,n,r,o,a,s){this._config=e,this._document=n,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=a,this._renderer=s,this.withRootElement(i).withParent(e.parentDragRef||null),this._parentPositions=new zO(n),a.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(i){this._handles=i.map(n=>En(n)),this._handles.forEach(n=>Hl(n,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&e.add(n)}),this._disabledHandles=e,this}withPreviewTemplate(i){return this._previewTemplate=i,this}withPlaceholderTemplate(i){return this._placeholderTemplate=i,this}withRootElement(i){const e=En(i);return e!==this._rootElement&&(this._removeRootElementListeners(),this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[zi(this._renderer,e,"mousedown",this._pointerDown,QO),zi(this._renderer,e,"touchstart",this._pointerDown,Xie),zi(this._renderer,e,"dragstart",this._nativeDragStart,QO)]),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(i){return this._boundaryElement=i?En(i):null,this._resizeSubscription.unsubscribe(),i&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(i){return this._parentDragRef=i,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(i){!this._disabledHandles.has(i)&&this._handles.indexOf(i)>-1&&(this._disabledHandles.add(i),Hl(i,!0))}enableHandle(i){this._disabledHandles.has(i)&&(this._disabledHandles.delete(i),Hl(i,this.disabled))}withDirection(i){return this._direction=i,this}_withDropContainer(i){this._dropContainer=i}getFreeDragPosition(){const i=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:i.x,y:i.y}}setFreeDragPosition(i){return this._activeTransform={x:0,y:0},this._passiveTransform.x=i.x,this._passiveTransform.y=i.y,this._dropContainer||this._applyRootElementTransform(i.x,i.y),this}withPreviewContainer(i){return this._previewContainer=i,this}_sortFromLastPointerPosition(){const i=this._lastKnownPointerPosition;i&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(i),i)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_pointerDown=i=>{if(this.beforeStarted.next(),this._handles.length){const e=this._getTargetHandle(i);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,i)}else this.disabled||this._initializeDragSequence(this._rootElement,i)};_pointerMove=i=>{const e=this._getPointerPositionOnPage(i);if(!this._hasStartedDragging()){if(Math.abs(e.x-this._pickupPositionOnPage.x)+Math.abs(e.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const s=Date.now()>=this._dragStartTime+this._getDragStartDelay(i),l=this._dropContainer;if(!s)return void this._endDragSequence(i);(!l||!l.isDragging()&&!l.isReceiving())&&(i.cancelable&&i.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(i)))}return}i.cancelable&&i.preventDefault();const n=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(n),this._dropContainer)this._updateActiveDropContainer(n,e);else{const r=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=n.x-r.x+this._passiveTransform.x,o.y=n.y-r.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:n,event:i,distance:this._getDragDistance(n),delta:this._pointerDirectionDelta})})};_pointerUp=i=>{this._endDragSequence(i)};_endDragSequence(i){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging()))if(this.released.next({source:this,event:i}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(i),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(i);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:i})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(i){wu(i)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._getShadowRoot(),n=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=zi(this._renderer,e,"selectstart",ine,Jie)}),n){const r=this._rootElement,o=r.parentNode,a=this._placeholder=this._createPlaceholderElement(),s=this._anchor=this._anchor||this._document.createComment("");o.insertBefore(s,r),this._initialTransform=r.style.transform||"",this._preview=new Zie(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,e)),WO(r,!1,ZO),this._document.body.appendChild(o.replaceChild(a,r)),this.started.next({source:this,event:i}),n.start(),this._initialContainer=n,this._initialIndex=n.getItemIndex(this)}else this.started.next({source:this,event:i}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(n?n.getScrollableParents():[])}_initializeDragSequence(i,e){this._parentDragRef&&e.stopPropagation();const n=this.isDragging(),r=wu(e),o=!r&&0!==e.button,a=this._rootElement,s=xn(e),l=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),c=r?h0(e):u0(e);if(s&&s.draggable&&"mousedown"===e.type&&e.preventDefault(),n||o||l||c)return;if(this._handles.length){const p=a.style;this._rootElementTapHighlight=p.webkitTapHighlightColor||"",p.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(p=>this._updateOnScroll(p)),this._boundaryElement&&(this._boundaryRect=HS(this._boundaryElement));const d=this._previewTemplate;this._pickupPositionInElement=d&&d.template&&!d.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,i,e);const u=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:u.x,y:u.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(i){WO(this._rootElement,!0,ZO),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,n=e.getItemIndex(this),r=this._getPointerPositionOnPage(i),o=this._getDragDistance(r),a=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:o,dropPoint:r,event:i}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:o,dropPoint:r,event:i}),e.drop(this,n,this._initialIndex,this._initialContainer,a,o,r,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:i,y:e},{x:n,y:r}){let o=this._initialContainer._getSiblingContainerFromPosition(this,i,e);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,e)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,i,e,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,r),this._dropContainer._sortItem(this,i,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(i,e):this._applyPreviewTransform(i-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const i=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(i.left,i.top);const e=this._preview.getTransitionDuration();return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{const r=s=>{(!s||this._preview&&xn(s)===this._preview.element&&"transform"===s.propertyName)&&(a(),n(),clearTimeout(o))},o=setTimeout(r,1.5*e),a=this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const i=this._placeholderTemplate,e=i?i.template:null;let n;return e?(this._placeholderRef=i.viewContainer.createEmbeddedView(e,i.context),this._placeholderRef.detectChanges(),n=$O(this._placeholderRef,this._document)):n=HO(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(i,e,n){const r=e===this._rootElement?null:e,o=r?r.getBoundingClientRect():i,a=wu(n)?n.targetTouches[0]:n,s=this._getViewportScrollPosition();return{x:o.left-i.left+(a.pageX-o.left-s.left),y:o.top-i.top+(a.pageY-o.top-s.top)}}_getPointerPositionOnPage(i){const e=this._getViewportScrollPosition(),n=wu(i)?i.touches[0]||i.changedTouches[0]||{pageX:0,pageY:0}:i,r=n.pageX-e.left,o=n.pageY-e.top;if(this._ownerSVGElement){const a=this._ownerSVGElement.getScreenCTM();if(a){const s=this._ownerSVGElement.createSVGPoint();return s.x=r,s.y=o,s.matrixTransform(a.inverse())}}return{x:r,y:o}}_getConstrainedPointerPosition(i){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:r}=this.constrainPosition?this.constrainPosition(i,this,this._initialDomRect,this._pickupPositionInElement):i;if("x"===this.lockAxis||"x"===e?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===e)&&(n=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:o,y:a}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,s=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),d=s.top+a,u=s.bottom-(c-a);n=XO(n,s.left+o,s.right-(l-o)),r=XO(r,d,u)}return{x:n,y:r}}_updatePointerDirectionDelta(i){const{x:e,y:n}=i,r=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,a=Math.abs(e-o.x),s=Math.abs(n-o.y);return a>this._config.pointerDirectionChangeThreshold&&(r.x=e>o.x?1:-1,o.x=e),s>this._config.pointerDirectionChangeThreshold&&(r.y=n>o.y?1:-1,o.y=n),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const i=this._handles.length>0||!this.isDragging();i!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=i,Hl(this._rootElement,i))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(i=>i()),this._rootElementCleanups=void 0}_applyRootElementTransform(i,e){const n=1/this.scale,r=Op(i*n,e*n),o=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=o.transform&&"none"!=o.transform?o.transform:""),o.transform=Fp(r,this._initialTransform)}_applyPreviewTransform(i,e){const n=this._previewTemplate?.template?void 0:this._initialTransform,r=Op(i,e);this._preview.setTransform(Fp(r,n))}_getDragDistance(i){const e=this._pickupPositionOnPage;return e?{x:i.x-e.x,y:i.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:i,y:e}=this._passiveTransform;if(0===i&&0===e||this.isDragging()||!this._boundaryElement)return;const n=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===n.width&&0===n.height)return;const o=r.left-n.left,a=n.right-r.right,s=r.top-n.top,l=n.bottom-r.bottom;r.width>n.width?(o>0&&(i+=o),a>0&&(i-=a)):i=0,r.height>n.height?(s>0&&(e+=s),l>0&&(e-=l)):e=0,(i!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:i})}_getDragStartDelay(i){const e=this.dragStartDelay;return"number"==typeof e?e:wu(i)?e.touch:e?e.mouse:0}_updateOnScroll(i){const e=this._parentPositions.handleScroll(i);if(e){const n=xn(i);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&Su(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Pm(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(i,e){const n=this._previewContainer||"global";if("parent"===n)return i;if("global"===n){const r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return En(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=i=>{if(this._handles.length){const e=this._getTargetHandle(i);e&&!this._disabledHandles.has(e)&&!this.disabled&&i.preventDefault()}else this.disabled||i.preventDefault()};_getTargetHandle(i){return this._handles.find(e=>i.target&&(i.target===e||e.contains(i.target)))}}function XO(t,i,e){return Math.max(i,Math.min(e,t))}function wu(t){return"t"===t.type[0]}function ine(t){t.preventDefault()}function JO(t,i,e){const n=Cu(i,t.length-1),r=Cu(e,t.length-1);if(n===r)return;const o=t[n],a=r<n?-1:1;for(let s=n;s!==r;s+=a)t[s]=t[s+a];t[r]=o}function Cu(t,i){return Math.max(0,Math.min(i,t))}class eL{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(i){this._dragDropRegistry=i}_previousSwap={drag:null,delta:0,overlaps:!1};start(i){this.withItems(i)}sort(i,e,n,r){const o=this._itemPositions,a=this._getItemIndexFromPointerPosition(i,e,n,r);if(-1===a&&o.length>0)return null;const s="horizontal"===this.orientation,l=o.findIndex(C=>C.drag===i),c=o[a],u=c.clientRect,p=l>a?1:-1,g=this._getItemOffsetPx(o[l].clientRect,u,p),m=this._getSiblingOffsetPx(l,o,p),b=o.slice();return JO(o,l,a),o.forEach((C,w)=>{if(b[w]===C)return;const k=C.drag===i,F=k?g:m,U=k?i.getPlaceholderElement():C.drag.getRootElement();C.offset+=F;const X=Math.round(C.offset*(1/C.drag.scale));s?(U.style.transform=Fp(`translate3d(${X}px, 0, 0)`,C.initialTransform),Su(C.clientRect,0,F)):(U.style.transform=Fp(`translate3d(0, ${X}px, 0)`,C.initialTransform),Su(C.clientRect,F,0))}),this._previousSwap.overlaps=VS(u,e,n),this._previousSwap.drag=c.drag,this._previousSwap.delta=s?r.x:r.y,{previousIndex:l,currentIndex:a}}enter(i,e,n,r){const o=null==r||r<0?this._getItemIndexFromPointerPosition(i,e,n):r,a=this._activeDraggables,s=a.indexOf(i),l=i.getPlaceholderElement();let c=a[o];if(c===i&&(c=a[o+1]),!c&&(null==o||-1===o||o<a.length-1)&&this._shouldEnterAsFirstChild(e,n)&&(c=a[0]),s>-1&&a.splice(s,1),c&&!this._dragDropRegistry.isDragging(c)){const d=c.getRootElement();d.parentElement.insertBefore(l,d),a.splice(o,0,i)}else this._element.appendChild(l),a.push(i);l.style.transform="",this._cacheItemPositions()}withItems(i){this._activeDraggables=i.slice(),this._cacheItemPositions()}withSortPredicate(i){this._sortPredicate=i}reset(){this._activeDraggables?.forEach(i=>{const e=i.getRootElement();if(e){const n=this._itemPositions.find(r=>r.drag===i)?.initialTransform;e.style.transform=n||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(i){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===i)}updateOnScroll(i,e){this._itemPositions.forEach(({clientRect:n})=>{Su(n,i,e)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}withElementContainer(i){this._element=i}_cacheItemPositions(){const i="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(e=>{const n=e.getVisibleElement();return{drag:e,offset:0,initialTransform:n.style.transform||"",clientRect:HS(n)}}).sort((e,n)=>i?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top)}_getItemOffsetPx(i,e,n){const r="horizontal"===this.orientation;let o=r?e.left-i.left:e.top-i.top;return-1===n&&(o+=r?e.width-i.width:e.height-i.height),o}_getSiblingOffsetPx(i,e,n){const r="horizontal"===this.orientation,o=e[i].clientRect,a=e[i+-1*n];let s=o[r?"width":"height"]*n;if(a){const l=r?"left":"top",c=r?"right":"bottom";-1===n?s-=a.clientRect[l]-o[c]:s+=o[l]-a.clientRect[c]}return s}_shouldEnterAsFirstChild(i,e){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,r="horizontal"===this.orientation;if(n[0].drag!==this._activeDraggables[0]){const a=n[n.length-1].clientRect;return r?i>=a.right:e>=a.bottom}{const a=n[0].clientRect;return r?i<=a.left:e<=a.top}}_getItemIndexFromPointerPosition(i,e,n,r){const o="horizontal"===this.orientation,a=this._itemPositions.findIndex(({drag:s,clientRect:l})=>s!==i&&((!r||s!==this._previousSwap.drag||!this._previousSwap.overlaps||(o?r.x:r.y)!==this._previousSwap.delta)&&(o?e>=Math.floor(l.left)&&e<Math.floor(l.right):n>=Math.floor(l.top)&&n<Math.floor(l.bottom))));return-1!==a&&this._sortPredicate(a,i)?a:-1}}class nne{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(i,e){this._document=i,this._dragDropRegistry=e}start(i){const e=this._element.childNodes;this._relatedNodes=[];for(let n=0;n<e.length;n++){const r=e[n];this._relatedNodes.push([r,r.nextSibling])}this.withItems(i)}sort(i,e,n,r){const o=this._getItemIndexFromPointerPosition(i,e,n),a=this._previousSwap;if(-1===o||this._activeItems[o]===i)return null;const s=this._activeItems[o];if(a.drag===s&&a.overlaps&&a.deltaX===r.x&&a.deltaY===r.y)return null;const l=this.getItemIndex(i),c=i.getPlaceholderElement(),d=s.getRootElement();o>l?d.after(c):d.before(c),JO(this._activeItems,l,o);const u=this._getRootNode().elementFromPoint(e,n);return a.deltaX=r.x,a.deltaY=r.y,a.drag=s,a.overlaps=d===u||d.contains(u),{previousIndex:l,currentIndex:o}}enter(i,e,n,r){let o=null==r||r<0?this._getItemIndexFromPointerPosition(i,e,n):r;-1===o&&(o=this._getClosestItemIndexToPointer(i,e,n));const a=this._activeItems[o],s=this._activeItems.indexOf(i);s>-1&&this._activeItems.splice(s,1),a&&!this._dragDropRegistry.isDragging(a)?(this._activeItems.splice(o,0,i),a.getRootElement().before(i.getPlaceholderElement())):(this._activeItems.push(i),this._element.appendChild(i.getPlaceholderElement()))}withItems(i){this._activeItems=i.slice()}withSortPredicate(i){this._sortPredicate=i}reset(){const i=this._element,e=this._previousSwap;for(let n=this._relatedNodes.length-1;n>-1;n--){const[r,o]=this._relatedNodes[n];r.parentNode===i&&r.nextSibling!==o&&(null===o?i.appendChild(r):o.parentNode===i&&i.insertBefore(r,o))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(i){return this._activeItems.indexOf(i)}updateOnScroll(){this._activeItems.forEach(i=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(i){i!==this._element&&(this._element=i,this._rootNode=void 0)}_getItemIndexFromPointerPosition(i,e,n){const r=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(n)),o=r?this._activeItems.findIndex(a=>{const s=a.getRootElement();return r===s||s.contains(r)}):-1;return-1!==o&&this._sortPredicate(o,i)?o:-1}_getRootNode(){return this._rootNode||(this._rootNode=Pm(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(i,e,n){if(0===this._activeItems.length)return-1;if(1===this._activeItems.length)return 0;let r=1/0,o=-1;for(let a=0;a<this._activeItems.length;a++){const s=this._activeItems[a];if(s!==i){const{x:l,y:c}=s.getRootElement().getBoundingClientRect(),d=Math.hypot(e-l,n-c);d<r&&(r=d,o=a)}}return o}}var rr=function(t){return t[t.NONE=0]="NONE",t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t}(rr||{}),fn=function(t){return t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t}(fn||{});class rne{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new Y;entered=new Y;exited=new Y;dropped=new Y;sorted=new Y;receivingStarted=new Y;receivingStopped=new Y;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=je.EMPTY;_verticalScrollDirection=rr.NONE;_horizontalScrollDirection=fn.NONE;_scrollNode;_stopScrollTimers=new Y;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(i,e,n,r,o){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=o;const a=this.element=En(i);this._document=n,this.withOrientation("vertical").withElementContainer(a),e.registerDropContainer(this),this._parentPositions=new zO(n)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(i,e,n,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(i)),this._sortStrategy.enter(i,e,n,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:i,container:this,currentIndex:this.getItemIndex(i)})}exit(i){this._reset(),this.exited.next({item:i,container:this})}drop(i,e,n,r,o,a,s,l={}){this._reset(),this.dropped.next({item:i,currentIndex:e,previousIndex:n,container:this,previousContainer:r,isPointerOverContainer:o,distance:a,dropPoint:s,event:l})}withItems(i){const e=this._draggables;return this._draggables=i,i.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>-1===i.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(i){return this._direction=i,this._sortStrategy instanceof eL&&(this._sortStrategy.direction=i),this}connectedTo(i){return this._siblings=i.slice(),this}withOrientation(i){if("mixed"===i)this._sortStrategy=new nne(this._document,this._dragDropRegistry);else{const e=new eL(this._dragDropRegistry);e.direction=this._direction,e.orientation=i,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,n)=>this.sortPredicate(e,n,this)),this}withScrollableParents(i){const e=this._container;return this._scrollableElements=-1===i.indexOf(e)?[e,...i]:i.slice(),this}withElementContainer(i){if(i===this._container)return this;En(this.element);const n=this._scrollableElements.indexOf(this._container),r=this._scrollableElements.indexOf(i);return n>-1&&this._scrollableElements.splice(n,1),r>-1&&this._scrollableElements.splice(r,1),this._sortStrategy&&this._sortStrategy.withElementContainer(i),this._cachedShadowRoot=null,this._scrollableElements.unshift(i),this._container=i,this}getScrollableParents(){return this._scrollableElements}getItemIndex(i){return this._isDragging?this._sortStrategy.getItemIndex(i):this._draggables.indexOf(i)}isReceiving(){return this._activeSiblings.size>0}_sortItem(i,e,n,r){if(this.sortingDisabled||!this._domRect||!UO(this._domRect,.05,e,n))return;const o=this._sortStrategy.sort(i,e,n,r);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:i})}_startScrollingIfNecessary(i,e){if(this.autoScrollDisabled)return;let n,r=rr.NONE,o=fn.NONE;if(this._parentPositions.positions.forEach((a,s)=>{s===this._document||!a.clientRect||n||UO(a.clientRect,.05,i,e)&&([r,o]=function one(t,i,e,n,r){const o=nL(i,r),a=rL(i,n);let s=rr.NONE,l=fn.NONE;if(o){const c=t.scrollTop;o===rr.UP?c>0&&(s=rr.UP):t.scrollHeight-c>t.clientHeight&&(s=rr.DOWN)}if(a){const c=t.scrollLeft;"rtl"===e?a===fn.RIGHT?c<0&&(l=fn.RIGHT):t.scrollWidth+c>t.clientWidth&&(l=fn.LEFT):a===fn.LEFT?c>0&&(l=fn.LEFT):t.scrollWidth-c>t.clientWidth&&(l=fn.RIGHT)}return[s,l]}(s,a.clientRect,this._direction,i,e),(r||o)&&(n=s))}),!r&&!o){const{width:a,height:s}=this._viewportRuler.getViewportSize(),l={width:a,height:s,top:0,right:a,bottom:s,left:0};r=nL(l,e),o=rL(l,i),n=window}n&&(r!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=o,this._scrollNode=n,(r||o)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const i=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=i.msScrollSnapType||i.scrollSnapType||"",i.scrollSnapType=i.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;const i=this._container.style;i.scrollSnapType=i.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),BO(0,B0).pipe(at(this._stopScrollTimers)).subscribe(()=>{const i=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===rr.UP?i.scrollBy(0,-e):this._verticalScrollDirection===rr.DOWN&&i.scrollBy(0,e),this._horizontalScrollDirection===fn.LEFT?i.scrollBy(-e,0):this._horizontalScrollDirection===fn.RIGHT&&i.scrollBy(e,0)})};_isOverContainer(i,e){return null!=this._domRect&&VS(this._domRect,i,e)}_getSiblingContainerFromPosition(i,e,n){return this._siblings.find(r=>r._canReceive(i,e,n))}_canReceive(i,e,n){if(!this._domRect||!VS(this._domRect,e,n)||!this.enterPredicate(i,this))return!1;const r=this._getShadowRoot().elementFromPoint(e,n);return!!r&&(r===this._container||this._container.contains(r))}_startReceiving(i,e){const n=this._activeSiblings;!n.has(i)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(n.add(i),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:i,receiver:this,items:e}))}_stopReceiving(i){this._activeSiblings.delete(i),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:i,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(i=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(i);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const i=Pm(this._container);this._cachedShadowRoot=i||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const i=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,i))}}function nL(t,i){const{top:e,bottom:n,height:r}=t,o=.05*r;return i>=e-o&&i<=e+o?rr.UP:i>=n-o&&i<=n+o?rr.DOWN:rr.NONE}function rL(t,i){const{left:e,right:n,width:r}=t,o=.05*r;return i>=e-o&&i<=e+o?fn.LEFT:i>=n-o&&i<=n+o?fn.RIGHT:fn.NONE}const ku={capture:!0},US={passive:!1,capture:!0};let ane=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(n,r){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}"],encapsulation:2,changeDetection:0})}return t})(),zS=(()=>{class t{_ngZone=_(ce);_document=_(Ge);_styleLoader=_(jo);_renderer=_(Hn).createRenderer(null,null);_cleanupDocumentTouchmove;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=$([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new Y;pointerUp=new Y;scroll=new Y;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=zi(this._renderer,this._document,"touchmove",this._persistentTouchmoveListener,US)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._cleanupDocumentTouchmove?.()}startDragging(e,n){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(ane),this._activeDragInstances.update(r=>[...r,e]),1===this._activeDragInstances().length)){const r=n.type.startsWith("touch"),o=s=>this.pointerUp.next(s),a=[["scroll",s=>this.scroll.next(s),ku],["selectstart",this._preventDefaultWhileDragging,US]];r?a.push(["touchend",o,ku],["touchcancel",o,ku]):a.push(["mouseup",o,ku]),r||a.push(["mousemove",s=>this.pointerMove.next(s),US]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=a.map(([s,l,c])=>zi(this._renderer,this._document,s,l,c))})}}stopDragging(e){this._activeDragInstances.update(n=>{const r=n.indexOf(e);return r>-1?(n.splice(r,1),[...n]):n}),0===this._activeDragInstances().length&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){const n=[this.scroll];return e&&e!==this._document&&n.push(new st(r=>this._ngZone.runOutsideAngular(()=>{const o=zi(this._renderer,e,"scroll",a=>{this._activeDragInstances().length&&r.next(a)},ku);return()=>{o()}}))),Ti(...n)}registerDirectiveNode(e,n){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,n)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const sne={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let $S=(()=>{class t{_document=_(Ge);_ngZone=_(ce);_viewportRuler=_(Il);_dragDropRegistry=_(zS);_renderer=_(Hn).createRenderer(null,null);constructor(){}createDrag(e,n=sne){return new tne(e,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new rne(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Du=new B("CDK_DRAG_PARENT"),oL=new B("CdkDragHandle"),aL=new B("CDK_DRAG_CONFIG"),sL=new B("CdkDropList");let Vl=(()=>{class t{element=_(xe);dropContainer=_(sL,{optional:!0,skipSelf:!0});_ngZone=_(ce);_viewContainerRef=_(Vi);_dir=_(br,{optional:!0});_changeDetectorRef=_(ji);_selfHandle=_(oL,{optional:!0,self:!0});_parentDrag=_(Du,{optional:!0,skipSelf:!0});_dragDropRegistry=_(zS);_destroyed=new Y;_handles=new Yi([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!(!this.dropContainer||!this.dropContainer.disabled)}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new le;released=new le;ended=new le;entered=new le;exited=new le;dropped=new le;moved=new st(e=>{const n=this._dragRef.moved.pipe(me(r=>({source:this,pointerPosition:r.pointerPosition,event:r.event,delta:r.delta,distance:r.distance}))).subscribe(e);return()=>{n.unsubscribe()}});_injector=_(we);constructor(){const e=this.dropContainer,n=_(aL,{optional:!0}),r=_($S);this._dragRef=r.createDrag(this.element,{dragStartThreshold:n&&null!=n.dragStartThreshold?n.dragStartThreshold:5,pointerDirectionChangeThreshold:n&&null!=n.pointerDirectionChangeThreshold?n.pointerDirectionChangeThreshold:5,zIndex:n?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),n&&this._assignDefaults(n),e&&(this._dragRef._withDropContainer(e._dropListRef),e.addItem(this),e._dropListRef.beforeStarted.pipe(at(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){Xn(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){const n=e.rootElementSelector,r=e.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){const n=this._handles.getValue();n.push(e),this._handles.next(n)}_removeHandle(e){const n=this._handles.getValue(),r=n.indexOf(e);r>-1&&(n.splice(r,1),this._handles.next(n))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){const e=this.element.nativeElement;let n=e;this.rootElementSelector&&(n=void 0!==e.closest?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(n||e)}_getBoundaryElement(){const e=this.boundaryElement;return e?"string"==typeof e?this.element.nativeElement.closest(e):En(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const n=this._dir,r=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay="object"==typeof r&&r?r:Hd(r),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),n&&e.withDirection(n.value)}}),e.beforeStarted.pipe(pi(1)).subscribe(()=>{if(this._parentDrag)return void e.withParent(this._parentDrag._dragRef);let n=this.element.nativeElement.parentElement;for(;n;){const r=this._dragDropRegistry.getDragDirectiveForNode(n);if(r){e.withParent(r._dragRef);break}n=n.parentElement}})}_handleEvents(e){e.started.subscribe(n=>{this.started.emit({source:this,event:n.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(n=>{this.released.emit({source:this,event:n.event})}),e.ended.subscribe(n=>{this.ended.emit({source:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(n=>{this.entered.emit({container:n.container.data,item:this,currentIndex:n.currentIndex})}),e.exited.subscribe(n=>{this.exited.emit({container:n.container.data,item:this})}),e.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,isPointerOverContainer:n.isPointerOverContainer,item:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event})})}_assignDefaults(e){const{lockAxis:n,dragStartDelay:r,constrainPosition:o,previewClass:a,boundaryElement:s,draggingDisabled:l,rootElementSelector:c,previewContainer:d}=e;this.disabled=l??!1,this.dragStartDelay=r||0,n&&(this.lockAxis=n),o&&(this.constrainPosition=o),a&&(this.previewClass=a),s&&(this.boundaryElement=s),c&&(this.rootElementSelector=c),d&&(this.previewContainer=d)}_setupHandlesListener(){this._handles.pipe(ii(e=>{const n=e.map(r=>r.element);this._selfHandle&&this.rootElementSelector&&n.push(this.element),this._dragRef.withHandles(n)}),yi(e=>Ti(...e.map(n=>n._stateChanges.pipe($i(n))))),at(this._destroyed)).subscribe(e=>{const n=this._dragRef,r=e.element.nativeElement;e.disabled?n.disableHandle(r):n.enableHandle(r)})}static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(n,r){2&n&&ot("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Oe],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",pl]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[qe([{provide:Du,useExisting:t}]),Oi]})}return t})();const WS=new B("CdkDropListGroup");let ql=(()=>{class t{element=_(xe);_changeDetectorRef=_(ji);_scrollDispatcher=_(ep);_dir=_(br,{optional:!0});_group=_(WS,{optional:!0,skipSelf:!0});_destroyed=new Y;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=_(mo).getId("cdk-drop-list-");lockAxis;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;dropped=new le;entered=new le;exited=new le;sorted=new le;_unsortedItems=new Set;constructor(){const e=_($S),n=_(aL,{optional:!0});this._dropListRef=e.createDropList(this.element),this._dropListRef.data=this,n&&this._assignDefaults(n),this._dropListRef.enterPredicate=(r,o)=>this.enterPredicate(r.data,o.data),this._dropListRef.sortPredicate=(r,o,a)=>this.sortPredicate(r,o.data,a.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),t._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,n)=>e._dragRef.getVisibleElement().compareDocumentPosition(n._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const e=t._dropLists.indexOf(this);e>-1&&t._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe($i(this._dir.value),at(this._destroyed)).subscribe(n=>e.withDirection(n)),e.beforeStarted.subscribe(()=>{const n=Vd(this.connectedTo).map(r=>"string"==typeof r?t._dropLists.find(a=>a.id===r):r);if(this._group&&this._group._items.forEach(r=>{-1===n.indexOf(r)&&n.push(r)}),!this._scrollableParentsResolved){const r=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(r),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){const r=this.element.nativeElement.querySelector(this.elementContainerSelector);e.withElementContainer(r)}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=Hd(this.autoScrollStep,2),e.connectedTo(n.filter(r=>r&&r!==this).map(r=>r._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(n=>{this.entered.emit({container:this,item:n.item.data,currentIndex:n.currentIndex})}),e.exited.subscribe(n=>{this.exited.emit({container:this,item:n.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(n=>{this.sorted.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,container:this,item:n.item.data})}),e.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,item:n.item.data,isPointerOverContainer:n.isPointerOverContainer,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),Ti(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){const{lockAxis:n,draggingDisabled:r,sortingDisabled:o,listAutoScrollDisabled:a,listOrientation:s}=e;this.disabled=r??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=a??!1,this.orientation=s||"vertical",n&&(this.lockAxis=n)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(n,r){2&n&&(Me("id",r.id),ot("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",Oe],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",Oe],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",Oe],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[qe([{provide:WS,useValue:void 0},{provide:sL,useExisting:t}])]})}return t})(),fne=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({providers:[$S],imports:[Al]})}return t})();function mne(t,i){if(1&t){const e=G();h(0,"div",3)(1,"span")(2,"input",4),x("change",function(r){return M(e),I(S(2).autoSellOldHerbs(r))}),f(),h(3,"label",5),y(4,"Automatically sell lower grade herbs than what current activities produce"),f()()()}if(2&t){const e=S(2);v(2),z("checked",e.inventoryService.autoSellOldHerbsEnabled)}}function pne(t,i){if(1&t){const e=G();h(0,"div",3)(1,"span")(2,"input",6),x("change",function(r){return M(e),I(S(2).autoSellOldWood(r))}),f(),h(3,"label",7),y(4,"Automatically sell lower grade wood than what current activities produce"),f()()()}if(2&t){const e=S(2);v(2),z("checked",e.inventoryService.autoSellOldWoodEnabled)}}function gne(t,i){if(1&t){const e=G();h(0,"div",3)(1,"span")(2,"input",8),x("change",function(r){return M(e),I(S(2).autoSellOldOre(r))}),f(),h(3,"label",9),y(4,"Automatically sell lower grade ore than what current activities produce"),f()()()}if(2&t){const e=S(2);v(2),z("checked",e.inventoryService.autoSellOldOreEnabled)}}function vne(t,i){if(1&t){const e=G();h(0,"div",3)(1,"span")(2,"input",10),x("change",function(r){return M(e),I(S(2).autoSellOldBars(r))}),f(),h(3,"label",11),y(4,"Automatically sell lower grade bars than what current activities produce"),f()()()}if(2&t){const e=S(2);v(2),z("checked",e.inventoryService.autoSellOldBarsEnabled)}}function yne(t,i){if(1&t){const e=G();h(0,"div",3)(1,"span")(2,"input",12),x("change",function(r){return M(e),I(S(2).autoSellOldHides(r))}),f(),h(3,"label",13),y(4,"Automatically sell lower grade hides than what current activities produce"),f()()()}if(2&t){const e=S(2);v(2),z("checked",e.inventoryService.autoSellOldHidesEnabled)}}function _ne(t,i){if(1&t){const e=G();h(0,"div",3)(1,"span")(2,"input",14),x("change",function(r){return M(e),I(S(2).autoSellOldGems(r))}),f(),h(3,"label",15),y(4,"Automatically sell lower grade gems than what current monsters drop"),f()()()}if(2&t){const e=S(2);v(2),z("checked",e.inventoryService.autoSellOldGemsEnabled)}}function bne(t,i){if(1&t){const e=G();h(0,"div")(1,"span"),y(2),O(3,"titlecase"),f(),h(4,"span"),y(5," - Reserve \xa0"),h(6,"input",17),x("change",function(r){const o=M(e).$implicit;return I(S(3).autoSellReserveChange(r,o))}),f(),y(7,"\xa0 "),h(8,"button",18),x("click",function(){const r=M(e).$implicit;return I(S(3).inventoryService.unAutoSell(r.name))}),y(9,"Stop Selling"),f()()()}if(2&t){const e=i.$implicit;v(2),j(" - ",V(3,2,e.name)," "),v(4),re("value",e.reserve)}}function Sne(t,i){if(1&t&&(h(0,"div",3)(1,"span"),y(2," Automatically Sold Items: "),f(),h(3,"div",16),be(4,bne,10,4,"div",null,_t),f()()),2&t){const e=S(2);v(4),Se(e.inventoryService.autoSellEntries)}}function wne(t,i){if(1&t){const e=G();h(0,"div")(1,"span"),y(2),O(3,"titlecase"),f(),h(4,"span"),y(5," - Reserve \xa0"),h(6,"input",17),x("change",function(r){M(e);const o=S().$implicit;return I(S(3).autoUseReserveChange(r,o))}),f(),y(7,"\xa0 "),h(8,"button",18),x("click",function(){M(e);const r=S().$implicit;return I(S(3).inventoryService.unAutoUse(r.name))}),y(9,"Stop Using"),f()()()}if(2&t){const e=S().$implicit;v(2),j(" - ",V(3,2,e.name)," "),v(4),re("value",e.reserve)}}function Cne(t,i){1&t&&H(0,wne,10,4,"div"),2&t&&A("food"!==i.$implicit.type?0:-1)}function kne(t,i){if(1&t&&(h(0,"div",3)(1,"span"),y(2,"Automatically Used Items:"),f(),h(3,"div",16),be(4,Cne,1,1,null,null,_t),f()()),2&t){const e=S(2);v(4),Se(e.inventoryService.autoUseEntries)}}function Dne(t,i){if(1&t){const e=G();h(0,"div")(1,"span"),y(2),O(3,"titlecase"),h(4,"input",17),x("change",function(r){const o=M(e).$implicit;return I(S(3).autoBalanceUseChanged(r,o))}),f(),y(5," then Sell "),h(6,"input",17),x("change",function(r){const o=M(e).$implicit;return I(S(3).autoBalanceSellChanged(r,o))}),f(),h(7,"button",18),x("click",function(){const r=M(e).$implicit;return I(S(3).inventoryService.unAutoBalance(r.name))}),y(8,"Stop Balancing"),f()()()}if(2&t){const e=i.$implicit;v(2),j(" -",V(3,3,e.name)," Use "),v(2),re("value",e.useNumber),v(2),re("value",e.sellNumber)}}function Tne(t,i){if(1&t&&(h(0,"div",3)(1,"span"),y(2,"Automatically Balanced Items:"),f(),h(3,"div",16),be(4,Dne,9,5,"div",null,_t),f()()),2&t){const e=S(2);v(4),Se(e.inventoryService.autoBalanceItems)}}function xne(t,i){if(1&t&&(h(0,"mat-tab",1),H(1,mne,5,1,"div",3)(2,pne,5,1,"div",3)(3,gne,5,1,"div",3)(4,vne,5,1,"div",3)(5,yne,5,1,"div",3)(6,_ne,5,1,"div",3)(7,Sne,6,0,"div",3)(8,kne,6,0,"div",3)(9,Tne,6,0,"div",3),f()),2&t){const e=S();v(),A(e.inventoryService.autoSellOldHerbs?1:-1),v(),A(e.inventoryService.autoSellOldWood?2:-1),v(),A(e.inventoryService.autoSellOldOre?3:-1),v(),A(e.inventoryService.autoSellOldOre?4:-1),v(),A(e.inventoryService.autoSellOldHides?5:-1),v(),A(e.inventoryService.autoSellOldGemsUnlocked?6:-1),v(),A(e.inventoryService.autoSellUnlocked?7:-1),v(),A(e.inventoryService.autoUseUnlocked?8:-1),v(),A(e.inventoryService.autoBalanceUnlocked?9:-1)}}function Ene(t,i){if(1&t){const e=G();h(0,"div")(1,"span"),y(2),O(3,"titlecase"),f(),h(4,"span"),y(5," \xa0 "),h(6,"button",18),x("click",function(){M(e);const r=S().$implicit;return I(S(2).inventoryService.unAutoUse(r.name))}),y(7,"Stop Wisely Eating"),f()()()}if(2&t){const e=S().$implicit;v(2),j(" - ",V(3,1,e.name)," ")}}function Mne(t,i){1&t&&H(0,Ene,8,3,"div"),2&t&&A("food"===i.$implicit.type?0:-1)}function Ine(t,i){if(1&t){const e=G();h(0,"mat-tab",2)(1,"div")(2,"span"),y(3," When wisely eaten food is available: "),f()(),h(4,"div")(5,"span")(6,"input",19),x("change",function(r){return M(e),I(S().autoEatNutritionChanged(r))}),f(),h(7,"label",20),y(8,"Eat until nutrition is full"),f()()(),h(9,"div")(10,"span")(11,"input",21),x("change",function(r){return M(e),I(S().autoEatHealthChanged(r))}),f(),h(12,"label",22),y(13,"Eat until Health is full"),f()()(),h(14,"div")(15,"span")(16,"input",23),x("change",function(r){return M(e),I(S().autoEatStaminaChanged(r))}),f(),h(17,"label",24),y(18,"Eat until Stamina is full"),f()()(),h(19,"div")(20,"span")(21,"input",25),x("change",function(r){return M(e),I(S().autoEatQiChanged(r))}),f(),h(22,"label",26),y(23,"Eat until Qi is full"),f()()(),h(24,"div")(25,"span")(26,"input",27),x("change",function(r){return M(e),I(S().autoEatAllChanged(r))}),f(),h(27,"label",28),y(28),f()()(),h(29,"div",3)(30,"div")(31,"span"),y(32,"Wisely Eaten Foods:"),f(),h(33,"div",16),be(34,Mne,1,1,null,null,_t),f()()()()}if(2&t){const e=S();v(6),z("checked",e.inventoryService.autoEatNutrition),v(5),z("checked",e.inventoryService.autoEatHealth),v(5),z("checked",e.inventoryService.autoEatStamina),v(5),z("checked",e.inventoryService.autoEatQi),v(5),z("checked",e.inventoryService.autoEatAll),v(2),j("Eat all you can! (Your stomach can handle up to ",e.inventoryService.maxFoodPerDay," meals per day)"),v(6),Se(e.inventoryService.autoUseEntries)}}let Ane=(()=>{class t{constructor(e,n,r,o,a,s,l,c,d){this.homeService=e,this.farmService=n,this.characterService=r,this.inventoryService=o,this.gameStateService=a,this.followerService=s,this.mainLoopService=l,this.activityService=c,this.dialog=d}autoSellReserveChange(e,n){e.target instanceof HTMLInputElement&&(n.reserve=Math.floor(parseFloat(e.target.value)),n.reserve||(n.reserve=0))}autoUseReserveChange(e,n){e.target instanceof HTMLInputElement&&(n.reserve=Math.floor(parseFloat(e.target.value)),n.reserve||(n.reserve=0))}autoBalanceUseChanged(e,n){e.target instanceof HTMLInputElement&&(n.useNumber=Math.floor(parseFloat(e.target.value)),n.useNumber||(n.useNumber=0))}autoBalanceSellChanged(e,n){e.target instanceof HTMLInputElement&&(n.sellNumber=Math.floor(parseFloat(e.target.value)),n.sellNumber||(n.sellNumber=0))}autoEatNutritionChanged(e){e.target instanceof HTMLInputElement&&(this.inventoryService.autoEatNutrition=e.target.checked)}autoEatHealthChanged(e){e.target instanceof HTMLInputElement&&(this.inventoryService.autoEatHealth=e.target.checked)}autoEatStaminaChanged(e){e.target instanceof HTMLInputElement&&(this.inventoryService.autoEatStamina=e.target.checked)}autoEatQiChanged(e){e.target instanceof HTMLInputElement&&(this.inventoryService.autoEatQi=e.target.checked)}autoEatAllChanged(e){e.target instanceof HTMLInputElement&&(this.inventoryService.autoEatAll=e.target.checked)}useSpiritGemWeaponsChange(e){e.target instanceof HTMLInputElement&&(this.inventoryService.useSpiritGemWeapons=e.target.checked)}useSpiritGemPotionsChange(e){e.target instanceof HTMLInputElement&&(this.inventoryService.useSpiritGemPotions=e.target.checked)}useCheapestSpiritGemChange(e){e.target instanceof HTMLInputElement&&(this.inventoryService.useCheapestSpiritGem=e.target.checked)}autoSellOldHerbs(e){e.target instanceof HTMLInputElement&&(this.inventoryService.autoSellOldHerbsEnabled=e.target.checked)}autoSellOldWood(e){e.target instanceof HTMLInputElement&&(this.inventoryService.autoSellOldWoodEnabled=e.target.checked)}autoSellOldOre(e){e.target instanceof HTMLInputElement&&(this.inventoryService.autoSellOldOreEnabled=e.target.checked)}autoSellOldBars(e){e.target instanceof HTMLInputElement&&(this.inventoryService.autoSellOldBarsEnabled=e.target.checked)}autoSellOldHides(e){e.target instanceof HTMLInputElement&&(this.inventoryService.autoSellOldHidesEnabled=e.target.checked)}autoSellOldGems(e){e.target instanceof HTMLInputElement&&(this.inventoryService.autoSellOldGemsEnabled=e.target.checked)}autoBuyFoodChange(e){e.target instanceof HTMLInputElement&&(this.inventoryService.autoBuyFood=e.target.checked)}static{this.\u0275fac=function(n){return new(n||t)(T(zt),T(wr),T(Ie),T(he),T(Ut),T(Gt),T(tt),T(bt),T(Ht))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-inventory-options-modal"]],decls:6,vars:2,consts:[[1,"darkMode","optionsDiv"],["label","Sales"],["label","Food"],[1,"optionField"],["type","checkbox","id","autosellOldHerbs",3,"change","checked"],["for","autosellOldHerbs"],["type","checkbox","id","autosellOldWood",3,"change","checked"],["for","autosellOldWood"],["type","checkbox","id","autosellOldOre",3,"change","checked"],["for","autosellOldOre"],["type","checkbox","id","autoSellOldBars",3,"change","checked"],["for","autoSellOldBars"],["type","checkbox","id","autosellOldHides",3,"change","checked"],["for","autosellOldHides"],["type","checkbox","id","autosellOldGems",3,"change","checked"],["for","autosellOldGems"],[1,"scrollingDiv"],["min","0","type","number",1,"inputBox",3,"change","value"],[3,"click"],["type","checkbox","id","autoEatNutrition",3,"change","checked"],["for","autoEatNutrition"],["type","checkbox","id","autoEatHealth",3,"change","checked"],["for","autoEatHealth"],["type","checkbox","id","autoEatStamina",3,"change","checked"],["for","autoEatStamina"],["type","checkbox","id","autoEatQi",3,"change","checked"],["for","autoEatQi"],["type","checkbox","id","autoEatAll",3,"change","checked"],["for","autoEatAll"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"span"),y(2,"Inventory Options"),f(),h(3,"mat-tab-group"),H(4,xne,10,9,"mat-tab",1)(5,Ine,36,6,"mat-tab",2),f()()),2&n&&(v(4),A(r.inventoryService.autoSellOldHerbs||r.inventoryService.autoSellOldWood||r.inventoryService.autoSellOldOre||r.inventoryService.autoSellOldHides||r.inventoryService.autoSellOldGemsUnlocked||r.inventoryService.autoSellUnlocked||r.inventoryService.autoUseUnlocked||r.inventoryService.autoEatUnlocked||r.inventoryService.autoBalanceUnlocked?4:-1),v(),A(r.inventoryService.autoEatUnlocked?5:-1))},dependencies:()=>[Ai,sS,vp],styles:[".optionsDiv[_ngcontent-%COMP%]{overflow-y:auto;max-height:600px;min-height:250px}.inputBox[_ngcontent-%COMP%]{width:70px}.optionField[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{margin-top:2px}.scrollingDiv[_ngcontent-%COMP%]{max-height:200px;overflow:auto}.warning[_ngcontent-%COMP%]{color:red}.priorityTable[_ngcontent-%COMP%]{background:var(--itemSlotColor);border:1px solid var(--panelBorder);border-radius:4px;margin:5px 10px 10px}.priorityTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:x-small;font-weight:400;line-height:1}.priorityTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{text-align:left}.priorityTable[_ngcontent-%COMP%]   .priorityTableNameColumn[_ngcontent-%COMP%]{width:100px;padding-left:5px}.priorityTable[_ngcontent-%COMP%]   .priorityTableCheckboxColumn[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;width:50px}.priorityTable[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none}.priorityTable[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{color:var(--disabledText);cursor:default}#importLayoutFile[_ngcontent-%COMP%], #importGameFile[_ngcontent-%COMP%]{display:none}"]})}}return t})();const Pne=(t,i)=>({highlighted:t,sortHighlight:i}),Rne=(t,i)=>({selectedItem:t,heirloomSlot:i}),Fne=(t,i)=>i.id;function One(t,i){if(1&t){const e=G();h(0,"mat-icon",20),x("click",function(){return M(e),I(S(2).sell(1))}),y(1," attach_money "),f()}if(2&t){const e=S(2);Lo("tooltip","Sell one ",e.inventoryService.selectedItem.item.name," for ",e.inventoryService.selectedItem.item.value," taels.<br>Right-click items to sell.")}}function Lne(t,i){if(1&t){const e=G();h(0,"mat-icon",21),x("click",function(){return M(e),I(S(2).sellStack())}),y(1," paid "),f()}if(2&t){const e=S(2);Lo("tooltip","Sell all the ",e.inventoryService.selectedItem.item.name,"(s) in this inventory slot for ",e.inventoryService.selectedItem.item.value*e.inventoryService.selectedItem.quantity," taels.<br>Shift-right-click items to sell the stack.")}}function Nne(t,i){if(1&t){const e=G();h(0,"mat-icon",22),x("click",function(){return M(e),I(S(2).sellAll())}),y(1," shopping_basket "),f()}2&t&&pt("tooltip","Sell all the ",S(2).inventoryService.selectedItem.item.name,"(s) in the whole inventory.")}function Bne(t,i){if(1&t){const e=G();h(0,"mat-icon",23),x("click",function(){return M(e),I(S(2).autoSell())}),y(1," currency_exchange "),f()}}function Hne(t,i){if(1&t){const e=G();h(0,"mat-icon",24),x("click",function(r){return M(e),I(S(2).use(r))}),y(1," auto_awesome "),f()}if(2&t){const e=S(2);Lo("tooltip","",e.inventoryService.selectedItem.item.useLabel,".<br>",e.inventoryService.selectedItem.item.useDescription,"<br>Shift-click items to use them.<br>Shift-click or Ctrl-click this button to use more of them.")}}function Vne(t,i){if(1&t){const e=G();h(0,"mat-icon",25),x("click",function(){return M(e),I(S(2).autoUse())}),y(1," auto_mode "),f()}if(2&t){const e=S(2);Lo("tooltip","Auto-",e.inventoryService.selectedItem.item.useLabel,".<br>",e.inventoryService.selectedItem.item.useDescription,"<br>You can change this in the options menu later if you change your mind.<br>Ctrl-click items to auto-use.")}}function qne(t,i){if(1&t){const e=G();h(0,"mat-icon",26),x("click",function(){return M(e),I(S(2).autoUse())}),y(1," auto_mode "),f()}2&t&&pt("tooltip","Wisely ",S(2).inventoryService.selectedItem.item.useLabel,".<br>Automatically eat appropriate amounts of this food.<br>You can change settings for this in the options menu.")}function jne(t,i){if(1&t){const e=G();h(0,"mat-icon",27),x("click",function(){return M(e),I(S(2).autoBalance())}),y(1," balance "),f()}}function Une(t,i){if(1&t){const e=G();h(0,"mat-icon",28),x("click",function(){return M(e),I(S(2).equip())}),y(1," shield "),f()}}function zne(t,i){if(1&t){const e=G();h(0,"mat-icon",29),x("click",function(){return M(e),I(S(2).mergeSpiritGem())}),y(1," diamond "),f()}}function $ne(t,i){if(1&t){const e=G();h(0,"mat-icon",30),x("click",function(){return M(e),I(S(2).throwAway())}),y(1," delete "),f()}}function Wne(t,i){if(1&t&&(h(0,"span",5),H(1,One,2,3,"mat-icon",9)(2,Lne,2,3,"mat-icon",10)(3,Nne,2,2,"mat-icon",11)(4,Bne,2,0,"mat-icon",12)(5,Hne,2,3,"mat-icon",13)(6,Vne,2,3,"mat-icon",14)(7,qne,2,2,"mat-icon",15)(8,jne,2,0,"mat-icon",16)(9,Une,2,0,"mat-icon",17)(10,zne,2,0,"mat-icon",18)(11,$ne,2,0,"mat-icon",19),f()),2&t){const e=S();v(),A(e.isFinite(e.inventoryService.selectedItem.item.value)&&!e.hellService.inHell?1:-1),v(),A(e.isFinite(e.inventoryService.selectedItem.item.value)&&!e.hellService.inHell?2:-1),v(),A(e.isFinite(e.inventoryService.selectedItem.item.value)&&!e.hellService.inHell?3:-1),v(),A(e.inventoryService.autoSellUnlocked&&e.isFinite(e.inventoryService.selectedItem.item.value)&&!e.instanceOfEquipment(e.inventoryService.selectedItem.item)&&!e.hellService.inHell?4:-1),v(),A(void 0!==e.inventoryService.selectedItem.item.useLabel?5:-1),v(),A(void 0!==e.inventoryService.selectedItem.item.useLabel&&"food"!==e.inventoryService.selectedItem.item.type&&e.inventoryService.autoUseUnlocked?6:-1),v(),A("food"===e.inventoryService.selectedItem.item.type&&e.inventoryService.autoEatUnlocked?7:-1),v(),A(void 0!==e.inventoryService.selectedItem.item.useLabel&&"food"!==e.inventoryService.selectedItem.item.type&&e.inventoryService.autoBalanceUnlocked&&e.isFinite(e.inventoryService.selectedItem.item.value)&&!e.hellService.inHell?8:-1),v(),A("equipment"===e.inventoryService.selectedItem.item.type||e.inventoryService.selectedItem.item.pouchable?9:-1),v(),A("gem"===e.inventoryService.selectedItem.item.type?10:-1),v(),A(e.isFinite(e.inventoryService.selectedItem.item.value)?11:-1)}}function Gne(t,i){if(1&t&&L(0,"img",36),2&t){const e=S(2);(function hr(t){mr(CE,N4,t,!1)})(e.getStyle(e.inventoryService.selectedItem)),pt("src","assets/images/items/",e.inventoryService.selectedItem.item.imageFile,".png",Bi)}}function Yne(t,i){if(1&t&&(h(0,"div"),H(1,Gne,1,4,"img",31),f(),h(2,"div",32)(3,"div",33)(4,"span"),y(5),O(6,"titlecase"),f()(),h(7,"div",34),L(8,"span",35),f()()),2&t){const e=S();v(),A(e.inventoryService.selectedItem.item.imageFile?1:-1),v(4),j(" ",V(6,3,e.inventoryService.selectedItem.item.name)," "),v(3),z("innerHTML",e.inventoryService.selectedItem.item.description,ff)}}function Kne(t,i){1&t&&(L(0,"div",37),h(1,"div",32)(2,"div",33)(3,"span"),y(4," No item selected "),f()(),h(5,"div",34),L(6,"span"),f()())}function Qne(t,i){if(1&t&&(L(0,"img",43),O(1,"titlecase")),2&t){const e=S().$implicit;Dt("border-color",null!=e&&null!=e.item&&e.item.imageColor?null==e||null==e.item?null:e.item.imageColor:"white"),pt("src","assets/images/items/",null==e||null==e.item?null:e.item.imageFile,".png",Bi),re("alt",V(1,5,null==e||null==e.item?null:e.item.name))}}function Zne(t,i){if(1&t&&(y(0),O(1,"titlecase")),2&t){const e=S().$implicit;j(" ",V(1,1,null==e||null==e.item?null:e.item.name)," ")}}function Xne(t,i){if(1&t&&(h(0,"div",42),y(1),f()),2&t){const e=S().$implicit;v(),j("x",null==e?null:e.quantity,"")}}function Jne(t,i){if(1&t){const e=G();h(0,"div")(1,"div",38)(2,"div",39),O(3,"titlecase"),x("mousedown",function(r){const o=M(e).$implicit;return I(S().slotClicked(o,r))})("cdkDragStarted",function(){return M(e),I(S().dragStart())})("cdkDragEnded",function(){return M(e),I(S().dragEnd())})("cdkDragMoved",function(r){return M(e),I(S().dragMoved(r))})("cdkDragReleased",function(r){return M(e),I(S().dragReleased(r))})("dblclick",function(r){const o=M(e).$implicit;return I(S().slotDoubleClicked(o,r))})("contextmenu",function(r){const o=M(e).$implicit;return I(S().slotRightClicked(o,r))}),h(4,"div",40),H(5,Qne,2,7,"img",41)(6,Zne,2,3),f(),H(7,Xne,2,1,"div",42),f()()()}if(2&t){const e=i.$implicit,n=i.$index,r=i.$index,o=S();v(),pt("id","itemIndex",n,""),v(),re("tooltip",null!=e&&e.item?V(3,9,null==e||null==e.item?null:e.item.name)+".<br>"+(null==e||null==e.item?null:e.item.description):r<o.inventoryService.heirloomSlots?"This slot can preserve an heirloom item for your next reincarnation.":""),z("tabindex",null!=e&&e.item?"0":"-1")("cdkDragData",e)("cdkDragDisabled",!(null!=e&&e.item))("ngClass",Tn(11,Rne,e&&e===o.inventoryService.selectedItem,r<o.inventoryService.heirloomSlots)),v(3),A(null!=e&&null!=e.item&&e.item.imageFile?5:6),v(2),A(((null==e?null:e.quantity)||0)>1?7:-1)}}let lL=(()=>{class t{constructor(e,n,r,o,a,s,l){this.inventoryService=e,this.characterService=n,this.homeService=r,this.hellService=o,this.mainLoopService=a,this.gameStateService=s,this.dialog=l,this.instanceOfEquipment=Pi,this.dragPositionX=0,this.dragPositionY=0,this.equipmentSlots=Object.keys(this.characterService.equipment)}isFinite(e){return Number.isFinite(e)}slotClicked(e,n){if(n.stopPropagation(),n.shiftKey||n.altKey){let r=null;r!==e&&(r=this.inventoryService.selectedItem),this.inventoryService.selectedItem=e,this.use(),this.inventoryService.selectedItem=r}else n.ctrlKey||n.metaKey?(this.inventoryService.selectedItem=e,this.autoUse()):this.inventoryService.selectedItem=this.inventoryService.selectedItem===e?this.inventoryService.getEmptyItemStack():e}slotDoubleClicked(e,n){n.preventDefault(),n.stopPropagation(),this.inventoryService.selectedItem=e,this.inventoryService.selectedItem&&(this.inventoryService.equip(this.inventoryService.selectedItem),this.inventoryService.selectedItem=this.inventoryService.getEmptyItemStack())}slotRightClicked(e,n){n.preventDefault(),n.stopPropagation(),this.inventoryService.selectedItem=e,n.ctrlKey||n.metaKey?this.autoSell():n.shiftKey||n.altKey?this.sellStack():this.sell(1)}sortClicked(e){e.preventDefault(),e.stopPropagation(),e.ctrlKey||e.metaKey?this.inventoryService.descendingSort=!this.inventoryService.descendingSort:e.shiftKey||e.altKey?this.inventoryService.autoSort=!this.inventoryService.autoSort:this.inventoryService.sortInventory()}sellAll(){this.inventoryService.selectedItem?.item&&this.inventoryService.sellAll(this.inventoryService.selectedItem.item)}sellStack(){this.inventoryService.selectedItem&&this.sell(this.inventoryService.selectedItem.quantity)}sell(e){this.inventoryService.selectedItem&&this.inventoryService.sell(this.inventoryService.selectedItem,e)}autoSell(){this.inventoryService.selectedItem?.item&&this.inventoryService.autoSell(this.inventoryService.selectedItem.item)}use(e=null){let n=1;e&&(e.shiftKey&&(n*=10),e.ctrlKey&&(n*=100)),this.inventoryService.selectedItem&&this.inventoryService.useItemStack(this.inventoryService.selectedItem,n)}autoUse(){this.inventoryService.selectedItem?.item&&this.inventoryService.autoUse(this.inventoryService.selectedItem.item)}autoBalance(){this.inventoryService.selectedItem?.item&&this.inventoryService.autoBalance(this.inventoryService.selectedItem.item)}equip(){this.inventoryService.selectedItem&&(this.inventoryService.equip(this.inventoryService.selectedItem),this.inventoryService.selectedItem=this.inventoryService.getEmptyItemStack())}mergeSpiritGem(){this.inventoryService.selectedItem&&(this.inventoryService.autoSellOldGemsEnabled=!1,this.inventoryService.mergeSpiritGem(this.inventoryService.selectedItem),0===this.inventoryService.selectedItem.quantity&&(this.inventoryService.selectedItem=this.inventoryService.getEmptyItemStack()))}dragStart(){this.gameStateService.dragging=!0}dragEnd(){this.gameStateService.dragging=!1}dragMoved(e){this.dragPositionX=e.pointerPosition.x,this.dragPositionY=e.pointerPosition.y}dragReleased(e){let n,r;if(e.event instanceof MouseEvent)n=e.event.clientX,r=e.event.clientY;else{if(!(e.event instanceof TouchEvent))return;n=this.dragPositionX,r=this.dragPositionY}let o=-1;for(let l=0;l<this.inventoryService.itemStacks.length;l++)e.source.data===this.inventoryService.itemStacks[l]&&(o=l);if(-1===o)return;const a=this.inventoryService.itemStacks[o];if(!a.item)return;const s=document.elementsFromPoint(n,r);for(const l of s)if(l.id.startsWith("itemIndex")){const c=parseInt(l.id.substring(9));if(c===o)return;this.mergeOrSwapStacks(o,c),this.inventoryService.selectedItem=this.inventoryService.getEmptyItemStack()}else if(l.id.startsWith("pouchIndex")){const c=parseInt(l.id.substring(10));this.inventoryService.moveToPouch(o,c)}else if(l.id.startsWith("wsInputIndex")){const c=l.id.substring(12).split("_");if(2!==c.length)return;const d=parseInt(c[0]),u=parseInt(c[1]);this.homeService.moveItemToWorkstation(o,d,u)}else if(l.id.startsWith("equipmentSlot")){const d=l.id.substring(13);this.characterService.equipment[d]?(!Pi(a.item)||a.item.slot===d)&&(this.inventoryService.mergeEquippedSlot(d,a.item,o),this.inventoryService.selectedItem=this.inventoryService.getEmptyItemStack()):(this.inventoryService.equip(a),this.inventoryService.selectedItem=this.inventoryService.getEmptyItemStack())}}mergeOrSwapStacks(e,n){if(e>=0&&e<this.inventoryService.itemStacks.length){const r=this.inventoryService.itemStacks[e],o=this.inventoryService.itemStacks[n],a=r?.item,s=o?.item;if(a&&s)if(Pi(a)&&Pi(s)){if(a.slot===s.slot)return this.inventoryService.setItemEmptyStack(n),this.inventoryService.setItemEmptyStack(e),void this.inventoryService.mergeEquipment(s,a,n)}else{if("gem"===a.type&&Pi(s))return void this.inventoryService.gemifyEquipment(e,s);a.name===s.name?this.inventoryService.mergeItemStacks(r,o,e,n):(this.inventoryService.itemStacks[n]=r,this.inventoryService.itemStacks[e]=o,this.inventoryService.fixId(n),this.inventoryService.fixId(e))}else this.inventoryService.itemStacks[n]=r,this.inventoryService.itemStacks[e]=o}}throwAway(){this.inventoryService.selectedItem&&this.inventoryService.removeItemStack(this.inventoryService.selectedItem)}getStyle(e){return e&&e.item&&e.item.imageColor?{"border-color":e.item.imageColor,border:"solid 1px"}:{"border-color":"white",border:"solid 1px"}}optionsClicked(){this.dialog.open(Ane,{width:"700px",data:{someField:"foo"},autoFocus:!1})}static{this.\u0275fac=function(n){return new(n||t)(T(he),T(Ie),T(zt),T(We),T(tt),T(Ut),T(Ht))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-inventory-panel"]],decls:17,vars:6,consts:[[1,"inventoryContainer"],[1,"inventoryHeader"],[1,"inventoryLabelColumn"],["tooltip","Click to sort your inventory.<br>Shift-click to toggle autosort.<br>Ctrl-click to toggle descending.","aria-label","Sort Inventory","aria-hidden","false",1,"iconButton",3,"click","ngClass"],["tooltip","Options","aria-label","Inventory Options","aria-hidden","false",1,"iconButton","floatRight",3,"click"],[1,"inventoryButtons"],[1,"selectedItemBox"],[1,"overflow"],["cdkDropList","","cdkDropListSortingDisabled","",1,"inventoryGrid"],["aria-label","Sell","aria-hidden","false",1,"iconButton",3,"tooltip"],["aria-label","Sell Stack","aria-hidden","false",1,"iconButton",3,"tooltip"],["aria-label","Sell All","aria-hidden","false",1,"iconButton",3,"tooltip"],["tooltip","Automatically sell this kind of item whenever you get one.<br>You can change this in the options menu later if you change your mind.<br>Ctrl-right-click items to autosell.",1,"iconButton"],["aria-label","Use","aria-hidden","false",1,"iconButton",3,"tooltip"],["aria-label","Auto Use","aria-hidden","false",1,"iconButton",3,"tooltip"],["aria-label","Auto Eat","aria-hidden","false",1,"iconButton",3,"tooltip"],["aria-label","Balance","aria-hidden","false","tooltip","Balance between automatically using and selling this item.<br>You can change this in the options menu later if you change your mind.",1,"iconButton"],["aria-label","Equip","aria-hidden","false","tooltip","Equip this.<br>Double-click weapons or armor to equip.",1,"iconButton"],["aria-label","Merge Gem","aria-hidden","false","tooltip","Merge 10 of these into a higher grade gem.",1,"iconButton"],["aria-label","Throw Away","aria-hidden","false","tooltip","Throw this stack of items away.",1,"iconButton"],["aria-label","Sell","aria-hidden","false",1,"iconButton",3,"click","tooltip"],["aria-label","Sell Stack","aria-hidden","false",1,"iconButton",3,"click","tooltip"],["aria-label","Sell All","aria-hidden","false",1,"iconButton",3,"click","tooltip"],["tooltip","Automatically sell this kind of item whenever you get one.<br>You can change this in the options menu later if you change your mind.<br>Ctrl-right-click items to autosell.",1,"iconButton",3,"click"],["aria-label","Use","aria-hidden","false",1,"iconButton",3,"click","tooltip"],["aria-label","Auto Use","aria-hidden","false",1,"iconButton",3,"click","tooltip"],["aria-label","Auto Eat","aria-hidden","false",1,"iconButton",3,"click","tooltip"],["aria-label","Balance","aria-hidden","false","tooltip","Balance between automatically using and selling this item.<br>You can change this in the options menu later if you change your mind.",1,"iconButton",3,"click"],["aria-label","Equip","aria-hidden","false","tooltip","Equip this.<br>Double-click weapons or armor to equip.",1,"iconButton",3,"click"],["aria-label","Merge Gem","aria-hidden","false","tooltip","Merge 10 of these into a higher grade gem.",1,"iconButton",3,"click"],["aria-label","Throw Away","aria-hidden","false","tooltip","Throw this stack of items away.",1,"iconButton",3,"click"],["width","48","height","48",1,"itemImage",3,"src","style"],[1,"selectedItemText"],[1,"selectedItemName"],[1,"selectedItemTextBody"],[3,"innerHTML"],["width","48","height","48",1,"itemImage",3,"src"],[1,"itemImagePlaceholder"],[3,"id"],["cdkDrag","",1,"itemSlot",3,"mousedown","cdkDragStarted","cdkDragEnded","cdkDragMoved","cdkDragReleased","dblclick","contextmenu","tabindex","cdkDragData","cdkDragDisabled","ngClass","tooltip"],[1,"itemName","textOverflow"],["width","48","height","48",1,"itemImage",3,"src","border-color","alt"],[1,"itemQuantity"],["width","48","height","48",1,"itemImage",3,"src","alt"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"h3",1),L(2,"div",2),h(3,"div")(4,"mat-icon",3),x("click",function(a){return r.sortClicked(a)}),y(5," sort "),f(),h(6,"mat-icon",4),x("click",function(){return r.optionsClicked()}),y(7," settings "),f(),H(8,Wne,12,11,"span",5),f()(),h(9,"div",6),H(10,Yne,9,5)(11,Kne,7,0),f(),h(12,"div",7)(13,"div",8),be(14,Jne,8,14,"div",null,Fne),f()(),L(16,"br"),f()),2&n&&(v(4),z("ngClass",Tn(3,Pne,r.inventoryService.autoSort,r.inventoryService.descendingSort)),v(4),A(r.inventoryService.selectedItem.item?8:-1),v(2),A(r.inventoryService.selectedItem.item?10:11),v(4),Se(r.inventoryService.itemStacks))},dependencies:()=>[Lt,fi,ql,Vl,Ai,et],styles:[".inventoryContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:0;overflow-y:auto}.inventoryHeader[_ngcontent-%COMP%]{margin-bottom:4px}.inventoryGrid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:3px 0;justify-content:center;gap:3px;overflow-anchor:none}.itemSlot[_ngcontent-%COMP%]{width:52px;height:52px;overflow:hidden;position:relative;padding:0}.heirloomSlot[_ngcontent-%COMP%]{border:1px solid green!important}.sortHighlight[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--textHighlight) 0%,rgba(0,0,0,0) 100%)}.selectedItem[_ngcontent-%COMP%]{background-color:var(--itemSlotHighlight)}.itemSlot[_ngcontent-%COMP%]   .itemName[_ngcontent-%COMP%]{width:100%;display:inline-block;vertical-align:middle;line-height:12px}.itemQuantity[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;line-height:15px;padding:0 4px;width:fit-content;height:fit-content;background:inherit;filter:brightness(80%);border-radius:3px;z-index:1}.overflow[_ngcontent-%COMP%]{overflow:auto}.inventoryLabelColumn[_ngcontent-%COMP%]{width:100px;white-space:nowrap}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.5}.selectedItemBox[_ngcontent-%COMP%]{display:flex;flex-direction:row;min-height:60px;height:60px;max-height:60px;margin-bottom:4px;margin-left:4px;margin-right:4px;border:1px solid var(--panelBorder)}.selectedItemText[_ngcontent-%COMP%]{margin-left:4px;margin-right:2px;font-size:12px;overflow-y:auto;flex-grow:1}.selectedItemName[_ngcontent-%COMP%]{border-bottom:1px solid var(--panelBorder)}.selectedItemTextBody[_ngcontent-%COMP%]{line-height:14px}.itemImagePlaceholder[_ngcontent-%COMP%]{width:48px;min-width:48px;height:48px;min-height:48px;border:solid 1px white}.itemImage[_ngcontent-%COMP%]{border:1px solid}.floatRight[_ngcontent-%COMP%]{float:right}mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;margin:4px 1px;vertical-align:middle}"]})}}return t})(),ere=(()=>{class t{constructor(){this.carousel1Selection=$(void 0),this.carousel2Selection=$(void 0)}setCarouselSelection(e,n){this.getCarouselFromName(e).set(n)}getCarouselSelection(e){return this.getCarouselFromName(e)()}getCarouselFromName(e){if("carousel1"===e)return this.carousel1Selection;if("carousel2"===e)return this.carousel2Selection;throw new Error(`Unknown carousel specified: ${e}`)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function tre(t,i){1&t&&L(0,"app-mobile-activities",1)}function ire(t,i){1&t&&L(0,"app-mobile-time",1)}function nre(t,i){1&t&&L(0,"app-attributes-panel",1)}function rre(t,i){1&t&&L(0,"app-battle-panel",1)}function ore(t,i){1&t&&L(0,"app-home-panel",1)}function are(t,i){1&t&&L(0,"app-inventory-panel",1)}function sre(t,i){1&t&&L(0,"app-log-panel",1)}let lre=(()=>{class t{constructor(){this.elementRef=_(xe),this.mobileWidgetCarouselService=_(ere),this.carouselName=jv.required(),this.startWidget=jv.required(),this.otherCarouselSelection=gr(()=>{const e=this.carouselName(),n=this.mobileWidgetCarouselService.carousel1Selection(),r=this.mobileWidgetCarouselService.carousel2Selection();if("carousel1"===e)return r;if("carousel2"===e)return n;throw new Error(`Unknown carousel name: ${e}`)})}ngOnInit(){this.emblaCarousel=BS(this.elementRef.nativeElement,{loop:!0}),this.emblaCarousel.on("select",()=>{const r=this.getWidgetAt(this.emblaCarousel?.selectedScrollSnap()??-1);this.mobileWidgetCarouselService.setCarouselSelection(this.carouselName(),r)}),this.emblaCarousel.on("slidesChanged",()=>{const r=this.mobileWidgetCarouselService.getCarouselSelection(this.carouselName());for(let o=0;o<(this.emblaCarousel?.slideNodes().length??0);o++)if(this.getWidgetAt(o)===r)return void this.emblaCarousel?.scrollTo(o,!0)}),window.setTimeout(()=>{const r=this.getIndexOf(this.startWidget());this.mobileWidgetCarouselService.setCarouselSelection(this.carouselName(),this.getWidgetAt(r)),this.emblaCarousel?.scrollTo(r,!0)},50)}getWidgetAt(e){const n=this.emblaCarousel?.slideNodes()[e].tagName;switch(n){case"APP-MOBILE-ACTIVITIES":return"activities";case"APP-MOBILE-TIME":return"time";case"APP-ATTRIBUTES-PANEL":return"attributes";case"APP-BATTLE-PANEL":return"battle";case"APP-HOME-PANEL":return"home";case"APP-INVENTORY-PANEL":return"inventory";case"APP-LOG-PANEL":return"log";default:throw new Error(`Unknown widget: ${n}`)}}getIndexOf(e){for(let n=0;n<(this.emblaCarousel?.slideNodes.length??0);n++)if(e===this.getWidgetAt(n))return n;return 0}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ne({type:t,selectors:[["app-mobile-widget-carousel"]],inputs:{carouselName:[1,"carouselName"],startWidget:[1,"startWidget"]},decls:8,vars:7,consts:[[1,"embla__container"],[1,"embla__slide"]],template:function(n,r){1&n&&(h(0,"div",0),H(1,tre,1,0,"app-mobile-activities",1)(2,ire,1,0,"app-mobile-time",1)(3,nre,1,0,"app-attributes-panel",1)(4,rre,1,0,"app-battle-panel",1)(5,ore,1,0,"app-home-panel",1)(6,are,1,0,"app-inventory-panel",1)(7,sre,1,0,"app-log-panel",1),f()),2&n&&(v(),A("activities"!==r.otherCarouselSelection()?1:-1),v(),A("time"!==r.otherCarouselSelection()?2:-1),v(),A("attributes"!==r.otherCarouselSelection()?3:-1),v(),A("battle"!==r.otherCarouselSelection()?4:-1),v(),A("home"!==r.otherCarouselSelection()?5:-1),v(),A("inventory"!==r.otherCarouselSelection()?6:-1),v(),A("log"!==r.otherCarouselSelection()?7:-1))},dependencies:[tie,die,PO,RO,FO,NO,lL],styles:["[_nghost-%COMP%]{overflow:hidden;display:flex;flex-direction:column;flex-basis:50%}.embla__container[_ngcontent-%COMP%]{display:flex;min-height:0}.embla__slide[_ngcontent-%COMP%]{flex:0 0 100%;min-width:0;overflow-y:auto;display:flex;flex-direction:column}"]})}}return t})(),GS=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ne({type:t,selectors:[["app-mobile-layout"]],decls:17,vars:4,consts:[["drawer",""],[1,"drawer-container"],["mode","over"],[1,"drawer-content"],[1,"app-bar"],["mat-icon-button","",3,"click"],[1,"app-title"],[1,"main-part"],[1,"grow",3,"carouselName","startWidget"]],template:function(n,r){if(1&n){const o=G();h(0,"mat-drawer-container",1)(1,"mat-drawer",2,0),L(3,"app-mobile-drawer"),f(),h(4,"mat-drawer-content",3)(5,"div",4)(6,"button",5),x("click",function(){return M(o),I(Pa(2).toggle())}),h(7,"mat-icon"),y(8,"menu"),f()(),h(9,"div",6),y(10," Immortality Idle "),f()(),L(11,"app-mobile-health"),h(12,"div",7),L(13,"app-mobile-widget-carousel",8)(14,"mat-divider")(15,"app-mobile-widget-carousel",8),f(),L(16,"app-mobile-time-buttons"),f()()}2&n&&(v(13),z("carouselName","carousel1")("startWidget","activities"),v(2),z("carouselName","carousel2")("startWidget","time"))},dependencies:[ote,CO,kO,Pp,ZQ,QQ,ste,ate,$o,Lt,RZ,Zee,dte,lre],styles:["[_nghost-%COMP%]{flex-grow:1;display:flex;flex-direction:column;min-width:0}.app-bar[_ngcontent-%COMP%]{display:flex;gap:4px;align-items:center}.app-title[_ngcontent-%COMP%]{font-size:1.5rem}.main-part[_ngcontent-%COMP%]{overflow-y:auto;flex-grow:1;display:flex;flex-direction:column;gap:8px}.grow[_ngcontent-%COMP%]{flex-grow:1}.drawer-container[_ngcontent-%COMP%]{flex-grow:1;background:radial-gradient(circle at 50% 80%,#aaaaaa 0%,var(--bodyBackground) 25px,#ffffff 60px,var(--bodyBackground) 20%,#ffffff);display:flex;flex-direction:column}.drawer-content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}"]})}}return t})();function Lp(t,i,e){return Fl(()=>t()?i:e)}const Tu=new st(rh);function YS(t,i){return i?e=>e.pipe(YS((n,r)=>un(t(n,r)).pipe(me((o,a)=>i(n,o,r,a))))):Bt((e,n)=>{let r=0,o=null,a=!1;e.subscribe(wt(n,s=>{o||(o=wt(n,void 0,()=>{o=null,a&&n.complete()}),un(t(s,r++)).subscribe(o))},()=>{a=!0,!o&&n.complete()}))})}const cre=["resizeElem"],cL=["*"];function dL(t){const i={w:t.w,h:t.h,x:t.x,y:t.y,id:t.id,moved:!!t.moved,static:!!t.static};return void 0!==t.minW&&(i.minW=t.minW),void 0!==t.maxW&&(i.maxW=t.maxW),void 0!==t.minH&&(i.minH=t.minH),void 0!==t.maxH&&(i.maxH=t.maxH),void 0!==t.isDraggable&&(i.isDraggable=t.isDraggable),void 0!==t.isResizable&&(i.isResizable=t.isResizable),i}function KS(t,i){return!(t.id===i.id||t.x+t.w<=i.x||t.x>=i.x+i.w||t.y+t.h<=i.y||t.y>=i.y+i.h)}function Np(t,i,e){const n=function uL(t){return t.filter(i=>i.static)}(t),r=fL(t,i),o=Array(t.length);for(let a=0,s=r.length;a<s;a++){let l=dL(r[a]);l.static||(l=fre(n,l,i,e,r),n.push(l)),o[t.indexOf(r[a])]=l,l.moved=!1}return o}const hre={x:"w",y:"h"};function QS(t,i,e,n){const r=hre[n];i[n]+=1;const o=t.map(a=>a.id).indexOf(i.id);for(let a=o+1;a<t.length;a++){const s=t[a];if(!s.static){if(s.y>i.y+i.h)break;KS(i,s)&&QS(t,s,e+i[r],n)}}i[n]=e}function fre(t,i,e,n,r){const a="horizontal"===e;if("vertical"===e)for(i.y=Math.min(function ure(t){let e,i=0;for(let n=0,r=t.length;n<r;n++)e=t[n].y+t[n].h,e>i&&(i=e);return i}(t),i.y);i.y>0&&!Ya(t,i);)i.y--;else if(a)for(;i.x>0&&!Ya(t,i);)i.x--;let s;for(;s=Ya(t,i);)if(a?QS(r,i,s.x+s.w,"x"):QS(r,i,s.y+s.h,"y"),a&&i.x+i.w>n)for(i.x=n-i.w,i.y++;i.x>0&&!Ya(t,i);)i.x--;return i.y=Math.max(i.y,0),i.x=Math.max(i.x,0),i}function Ya(t,i){for(let e=0,n=t.length;e<n;e++)if(KS(t[e],i))return t[e];return null}function ZS(t,i,e,n,r,o,a,s){if(i.static&&!0!==i.isDraggable||i.y===n&&i.x===e)return t;String(e),String(n);const l=i.x,c=i.y;"number"==typeof e&&(i.x=e),"number"==typeof n&&(i.y=n),i.moved=!0;let d=fL(t,a);("vertical"===a&&"number"==typeof n?c>=n:"horizontal"===a&&"number"==typeof e&&l>=e)&&(d=d.reverse());const p=function mre(t,i){return t.filter(e=>KS(e,i))}(d,i);if(o&&p.length)return i.x=l,i.y=c,i.moved=!1,t;for(let g=0,m=p.length;g<m;g++){const b=p[g];!b.moved&&(t=b.static?hL(t,b,i,r,a,s):hL(t,i,b,r,a,s))}return t}function hL(t,i,e,n,r,o){const a="horizontal"===r,s="horizontal"!==r,l=i.static;if(n){n=!1;const c={x:a?Math.max(i.x-e.w,0):e.x,y:s?Math.max(i.y-e.h,0):e.y,w:e.w,h:e.h,id:"-1"};if(!Ya(t,c))return ZS(t,e,a?c.x:void 0,s?c.y:void 0,n,l,r,o)}return ZS(t,e,a?e.x+1:void 0,s?e.y+1:void 0,n,l,r,o)}function fL(t,i){return"horizontal"===i?function gre(t){return[].concat(t).sort(function(i,e){return i.x>e.x||i.x===e.x&&i.y>e.y?1:-1})}(t):function pre(t){return[].concat(t).sort(function(i,e){return i.y>e.y||i.y===e.y&&i.x>e.x?1:i.y===e.y&&i.x===e.x?0:-1})}(t)}let xu;function Hp(t){return function vre(){if(null==xu&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>xu=!0}))}finally{xu=xu||!1}return xu}()?t:!!t.capture}const yre=Hp({passive:!0}),Eu=Hp({passive:!1});let Vp=null;function qp(){if(null!=Vp)return Vp;const t=/Android|webOS|BlackBerry|Windows Phone|iPad|iPhone|iPod/i.test(navigator.userAgent),i=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1;return Vp=t||i,Vp}function jp(t){return null!=t.clientX}function Mu(t){return jp(t)?t.clientX:t.touches[0].clientX}function Iu(t){return jp(t)?t.clientY:t.touches[0].clientY}function mL(t){return{clientX:jp(t)?t.clientX:t.touches[0].clientX,clientY:jp(t)?t.clientY:t.touches[0].clientY}}function pL(t){return"mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType}function Up(){return!!window.PointerEvent}function zp(t){return Up()?Zi(t,"pointerdown",Eu).pipe(Qe(i=>i.isPrimary)):function _re(t,i=1){return Lp(()=>qp(),Zi(t,"touchstart",yre).pipe(Qe(e=>e.touches.length===i)),Zi(t,"mousedown",Eu).pipe(Qe(e=>0===e.button)))}(t)}function XS(t){return Up()?Zi(t,"pointerup").pipe(Qe(i=>i.isPrimary)):function wre(t,i=1){return Lp(()=>qp(),function Sre(t,i=1){return Ti(Zi(t,"touchend").pipe(Qe(e=>e.touches.length===i-1)),Zi(t,"touchcancel").pipe(Qe(e=>e.touches.length===i-1)))}(t,i),Zi(t,"mouseup"))}(t)}function $p(t,i,e){const n=t.reduce((a,s)=>Math.max(a,Math.max(s.y+s.h,0)),0);return(i-(n-1)*e)/n}function Cre(t,i,e,n){return Math.round(t/((e-(e-n*(i-1))/i)/(i-1)))}function kre(t,i,e,n){return Math.round(t/(i+n))}function Dre(t,i,e,n){const o=(e-n*(i-1))/i;return Math.round((t-o)/(o+n))+1}function Tre(t,i,e,n){return Math.round((t-i)/(i+n))+1}function xre(t,i,e,n){const{pointerDownEvent:r,pointerDragEvent:o,gridElemClientRect:a,dragElemClientRect:s,scrollDifference:l}=n,c=t.id,d=i.layout.find(ut=>ut.id===c),u=Mu(r),p=Iu(r),g=Mu(o),m=Iu(o),F=g-(a.left+l.left)-(u-s.left),U=m-(a.top+l.top)-(p-s.top),X="fit"===i.rowHeight?$p(i.layout,i.height??a.height,i.gap):i.rowHeight,J={...d,x:Cre(F,i.cols,a.width,i.gap),y:kre(U,X,0,i.gap)};J.x=Math.max(0,J.x),J.y=Math.max(0,J.y),J.x+J.w>i.cols&&(J.x=Math.max(0,i.cols-J.w));const ee=i.layout,se=ee.find(ut=>ut.id===c);let Ee=ZS(ee,se,J.x,J.y,!0,i.preventCollision,e,i.cols);return Ee=Np(Ee,e,i.cols),{layout:Ee,draggedItemPos:{top:U,left:F,width:s.width,height:s.height}}}function Ere(t,i,e,n){const{pointerDownEvent:r,pointerDragEvent:o,gridElemClientRect:a,dragElemClientRect:s,scrollDifference:l}=n,c=t.id,d=Mu(r),u=Iu(r),p=Mu(o),g=Iu(o),m=s.width-(d-s.left),b=s.height-(u-s.top),C=i.layout.find(J=>J.id===c),w=p+m-(s.left+l.left),k=g+b-(s.top+l.top),F="fit"===i.rowHeight?$p(i.layout,i.height??a.height,i.gap):i.rowHeight,U={...C,w:Dre(w,i.cols,a.width,i.gap),h:Tre(k,F,0,i.gap)};if(U.w=gL(U.w,t.minW??U.minW,t.maxW??U.maxW),U.h=gL(U.h,t.minH??U.minH,t.maxH??U.maxH),U.x+U.w>i.cols&&(U.w=Math.max(1,i.cols-U.x)),i.preventCollision){const J=U.w,ee=U.h;let Ee,se=jl(i.layout,U);for(;se;)Ee=Mre(U,Ee),U[Ee]--,se=jl(i.layout,U);if("w"===Ee)for(U.h=ee,se=jl(i.layout,U);se;)U.h--,se=jl(i.layout,U);if("h"===Ee)for(U.w=J,se=jl(i.layout,U);se;)U.w--,se=jl(i.layout,U)}return{layout:Np(i.layout.map(J=>J.id===c?U:J),e,i.cols),draggedItemPos:{top:s.top-a.top,left:s.left-a.left,width:w,height:k}}}function jl(t,i){return!!Ya(t,i)}function Mre(t,i){return t.h<=1?"w":t.w<=1||"w"===i?"h":"w"}function gL(t,i=1,e=1/0){return Math.min(Math.max(t,i<1?1:i),e)}const vL=new B("KtdGridDragHandle");let Are=(()=>{class t{constructor(e){this.element=e}static{this.\u0275fac=function(n){return new(n||t)(T(xe))}}static{this.\u0275dir=ie({type:t,selectors:[["","ktdGridDragHandle",""]],hostAttrs:[1,"ktd-grid-drag-handle"],features:[qe([{provide:vL,useExisting:t}])]})}}return t})();const Pre=new B("KtdGridResizeHandle"),Rre=new B("KtdGridItemPlaceholder");function Wp(t){return null!=t&&"false"!=`${t}`}function Au(t,i=0){return function Fre(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):i}const yL=new B("GRID_ITEM_GET_RENDER_DATA_TOKEN"),JS=Hp({passive:!1,capture:!0});let ew=(()=>{class t{constructor(e){this.ngZone=e,this.touchMoveSubject=new Y,this.touchMove$=this.touchMoveSubject.asObservable(),this.registerTouchMoveSubscription()}ngOnDestroy(){this.touchMoveSubscription.unsubscribe()}mouseOrTouchMove$(e){return Up()?Zi(e,"pointermove",JS):Lp(()=>qp(),this.touchMove$,Zi(e,"mousemove",JS))}registerTouchMoveSubscription(){this.touchMoveSubscription=this.ngZone.runOutsideAngular(()=>Zi(document,"touchmove",JS).pipe(Qe(e=>1===e.touches.length)).subscribe(e=>this.touchMoveSubject.next(e)))}static{this.\u0275fac=function(n){return new(n||t)(P(ce))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),_L=(()=>{class t{get id(){return this._id}set id(e){this._id=e}get dragStartThreshold(){return this._dragStartThreshold}set dragStartThreshold(e){this._dragStartThreshold=Au(e)}get draggable(){return this._draggable}set draggable(e){this._draggable=Wp(e),this._draggable$.next(this._draggable)}get resizable(){return this._resizable}set resizable(e){this._resizable=Wp(e),this._resizable$.next(this._resizable)}constructor(e,n,r,o,a){this.elementRef=e,this.gridService=n,this.renderer=r,this.ngZone=o,this.getItemRenderData=a,this.transition="transform 500ms ease, width 500ms ease, height 500ms ease",this._dragStartThreshold=0,this._draggable=!0,this._draggable$=new Yi(this._draggable),this._manualDragEvents$=new Y,this._resizable=!0,this._resizable$=new Yi(this._resizable),this.dragStartSubject=new Y,this.resizeStartSubject=new Y,this.subscriptions=[],this.dragStart$=this.dragStartSubject.asObservable(),this.resizeStart$=this.resizeStartSubject.asObservable()}ngOnInit(){const e=this.getItemRenderData(this.id);this.setStyles(e)}ngAfterContentInit(){this.subscriptions.push(this._dragStart$().subscribe(this.dragStartSubject),this._resizeStart$().subscribe(this.resizeStartSubject))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}startDragManually(e){this._manualDragEvents$.next(e)}setStyles({top:e,left:n,width:r,height:o}){this.renderer.setStyle(this.elementRef.nativeElement,"transform",`translateX(${n}) translateY(${e})`),this.renderer.setStyle(this.elementRef.nativeElement,"display","block"),this.renderer.setStyle(this.elementRef.nativeElement,"transition",this.transition),null!=r&&this.renderer.setStyle(this.elementRef.nativeElement,"width",r),null!=o&&this.renderer.setStyle(this.elementRef.nativeElement,"height",o)}_dragStart$(){return Ti(this._manualDragEvents$,this._draggable$.pipe(yi(e=>e?this._dragHandles.changes.pipe($i(this._dragHandles),yi(n=>Lp(()=>n.length>0,Ti(...n.toArray().map(r=>zp(r.element.nativeElement))),zp(this.elementRef.nativeElement)))):Tu))).pipe(YS(e=>{pL(e)&&e.preventDefault();const n=mL(e);return this.gridService.mouseOrTouchMove$(document).pipe(at(XS(document)),function Ore(t){return i=>new st(e=>t.runOutsideAngular(()=>i.subscribe(e)))}(this.ngZone),Qe(r=>{r.preventDefault();const o=mL(r);return Math.abs(n.clientX-o.clientX)+Math.abs(n.clientY-o.clientY)>=this.dragStartThreshold}),pi(1),me(()=>e))}))}_resizeStart$(){return this._resizable$.pipe(yi(e=>e?this._resizeHandles.changes.pipe($i(this._resizeHandles),yi(n=>n.length>0?(this.renderer.setStyle(this.resizeElem.nativeElement,"display","none"),Ti(...n.toArray().map(r=>zp(r.element.nativeElement)))):(this.renderer.setStyle(this.resizeElem.nativeElement,"display","block"),zp(this.resizeElem.nativeElement))),ii(n=>{pL(n)&&n.preventDefault()})):(this.renderer.setStyle(this.resizeElem.nativeElement,"display","none"),Tu)))}static{this.\u0275fac=function(n){return new(n||t)(T(xe),T(ew),T(Hi),T(ce),T(yL))}}static{this.\u0275cmp=ne({type:t,selectors:[["ktd-grid-item"]],contentQueries:function(n,r,o){if(1&n&&(ln(o,Rre,5),ln(o,vL,5),ln(o,Pre,5)),2&n){let a;Ye(a=Ke())&&(r.placeholder=a.first),Ye(a=Ke())&&(r._dragHandles=a),Ye(a=Ke())&&(r._resizeHandles=a)}},viewQuery:function(n,r){if(1&n&&ti(cre,7,xe),2&n){let o;Ye(o=Ke())&&(r.resizeElem=o.first)}},inputs:{minW:"minW",minH:"minH",maxW:"maxW",maxH:"maxH",transition:"transition",id:"id",dragStartThreshold:"dragStartThreshold",draggable:"draggable",resizable:"resizable"},ngContentSelectors:cL,decls:3,vars:0,consts:[["resizeElem",""],[1,"grid-item-resize-icon"]],template:function(n,r){1&n&&(Dn(),di(0),L(1,"div",1,0))},styles:['[_nghost-%COMP%]{display:none;position:absolute;z-index:1;overflow:hidden;touch-action:none}[_nghost-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;-webkit-user-select:none;user-select:none;z-index:10}[_nghost-%COMP%]   div.grid-item-resize-icon[_ngcontent-%COMP%]{cursor:se-resize;width:20px;height:20px;bottom:0;right:0;color:inherit}[_nghost-%COMP%]   div.grid-item-resize-icon[_ngcontent-%COMP%]:after{content:"";position:absolute;right:3px;bottom:3px;width:5px;height:5px;border-right:2px solid;border-bottom:2px solid}.display-none[_ngcontent-%COMP%]{display:none!important}'],changeDetection:0})}}return t})();function tw(t){const i=t.getBoundingClientRect();return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height}}function SL(t,i){t===window?t.scrollBy(0,i):t.scrollTop+=i}function wL(t,i){t===window?t.scrollBy(i,0):t.scrollLeft+=i}function Vre(t,i){let e,n,r;if(t===document){e=document.defaultView;const{width:o,height:a}=function CL(){const t=document.defaultView||window;return{width:t.innerWidth,height:t.innerHeight}}();n={width:o,height:a,top:0,right:o,bottom:a,left:0},r=function jre(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)}()}else e=t,n=tw(t),r=t.scrollWidth;return null==(i=i||{}).disableHorizontal&&r<=n.width&&(i.disableHorizontal=!0),o=>o.pipe(me(({pointerX:a,pointerY:s})=>{let l=function Nre(t,i){const{top:e,bottom:n,height:r}=t,o=.05*r;return i>=e-o&&i<=e+o?1:i>=n-o&&i<=n+o?2:0}(n,s),c=function Bre(t,i){const{left:e,right:n,width:r}=t,o=.05*r;return i>=e-o&&i<=e+o?1:i>=n-o&&i<=n+o?2:0}(n,a);return i?.disableVertical&&(l=0),i?.disableHorizontal&&(c=0),{verticalScrollDirection:l,horizontalScrollDirection:c}}),$A((a,s)=>a.verticalScrollDirection===s.verticalScrollDirection&&a.horizontalScrollDirection===s.horizontalScrollDirection),yi(({verticalScrollDirection:a,horizontalScrollDirection:s})=>a||s?function Hre(t,i,e,n=2){return BO(0,B0).pipe(ii(()=>{1===i?SL(t,-n):2===i&&SL(t,n),1===e?wL(t,-n):2===e&&wL(t,n)}),function Lre(){return t=>t.pipe(Qe(()=>!1))}())}(e,a,s,i?.scrollStep):Tu))}function qre(t){let i;return i=t===document?iw():{top:t.scrollTop,left:t.scrollLeft},Zi(t,"scroll",Hp({capture:!0})).pipe(me(()=>{let e,n;if(t===document){const a=iw();e=a.top,n=a.left}else e=t.scrollTop,n=t.scrollLeft;return{top:i.top-e,left:i.left-n}}))}function iw(){const t=document.defaultView||window,i=document.documentElement,e=i.getBoundingClientRect();return{top:-e.top||document.body.scrollTop||t.scrollY||i.scrollTop||0,left:-e.left||document.body.scrollLeft||t.scrollX||i.scrollLeft||0}}function kL(t){const i=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*i}function nw(t,i){return t.getPropertyValue(i).split(",").map(n=>n.trim())}function rw(t,i){return{layout:i,layoutItem:i.find(e=>e.id===t.id),gridItemRef:t}}function DL(t,i){const{rowHeight:e,layout:n,gap:r}=t;return"fit"===e?$p(n,i,r):e}function TL(t,i,e){const{layout:n,gap:r}=t,o=DL(t,e),a=function zre(t,i){const{cols:e,gap:n}=t;return(i-Math.max(n*(e-1),0))/e}(t,i),s={};for(const l of n)s[l.id]={id:l.id,top:l.y*o+r*l.y,left:l.x*a+r*l.x,width:l.w*a+r*Math.max(l.w-1,0),height:l.h*o+r*Math.max(l.h-1,0)};return s}function xL(t,i,e){return t.reduce((n,r)=>Math.max(n,(r.y+r.h)*i+Math.max(r.y+r.h-1,0)*e),0)}function ow(t){return{id:t.id,top:`${t.top}px`,left:`${t.left}px`,width:`${t.width}px`,height:`${t.height}px`}}function Wre(t){return function $re(t){return function(i){return ow(t.getItemRenderData(i))}}(t)}let aw=(()=>{class t{get compactOnPropsChange(){return this._compactOnPropsChange}set compactOnPropsChange(e){this._compactOnPropsChange=Wp(e)}get preventCollision(){return this._preventCollision}set preventCollision(e){this._preventCollision=Wp(e)}get scrollSpeed(){return this._scrollSpeed}set scrollSpeed(e){this._scrollSpeed=Au(e,2)}get compactType(){return this._compactType}set compactType(e){this._compactType=e}get rowHeight(){return this._rowHeight}set rowHeight(e){this._rowHeight="fit"===e?e:Math.max(1,Math.round(Au(e)))}get cols(){return this._cols}set cols(e){this._cols=Math.max(1,Math.round(Au(e)))}get layout(){return this._layout}set layout(e){this._layout=e}get gap(){return this._gap}set gap(e){this._gap=Math.max(Au(e),0)}get height(){return this._height}set height(e){this._height="number"==typeof e?Math.max(e,0):null}get backgroundConfig(){return this._backgroundConfig}set backgroundConfig(e){this._backgroundConfig=e;const n=this.elementRef.nativeElement.classList;null!==this._backgroundConfig?n.add("ktd-grid-background"):n.remove("ktd-grid-background"),this.setGridBackgroundVisible("always"===this._backgroundConfig?.show)}get config(){return{cols:this.cols,rowHeight:this.rowHeight,height:this.height,layout:this.layout,preventCollision:this.preventCollision,gap:this.gap}}constructor(e,n,r,o,a){this.gridService=e,this.elementRef=n,this.viewContainerRef=r,this.renderer=o,this.ngZone=a,this.layoutUpdated=new le,this.dragStarted=new le,this.resizeStarted=new le,this.dragEnded=new le,this.resizeEnded=new le,this.gridItemResize=new le,this.scrollableParent=null,this._compactOnPropsChange=!0,this._preventCollision=!1,this._scrollSpeed=2,this._compactType="vertical",this._rowHeight=100,this._cols=6,this._gap=0,this._height=null,this._backgroundConfig=null,this.subscriptions=[]}ngOnChanges(e){"fit"===this.rowHeight&&null==this.height&&console.warn("KtdGridComponent: The @Input() height should not be null when using rowHeight 'fit'");let n=!1,r=!1;(e.compactType||e.cols||e.layout)&&(n=!0),(n||e.rowHeight||e.height||e.gap||e.backgroundConfig)&&(r=!0),n&&this.compactOnPropsChange&&this.compactLayout(),r&&this.calculateRenderData()}ngAfterContentInit(){this.initSubscriptions()}ngAfterContentChecked(){this.render()}resize(){this.calculateRenderData(),this.render()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}compactLayout(){this.layout=Np(this.layout,this.compactType,this.cols)}getItemsRenderData(){return{...this._gridItemsRenderData}}getItemRenderData(e){return this._gridItemsRenderData[e]}calculateRenderData(){const e=this.elementRef.nativeElement.getBoundingClientRect();this.gridCurrentHeight=this.height??("fit"===this.rowHeight?e.height:xL(this.layout,this.rowHeight,this.gap)),this._gridItemsRenderData=TL(this.config,e.width,this.gridCurrentHeight),this.setBackgroundCssVariables(DL(this.config,this.gridCurrentHeight))}render(){this.renderer.setStyle(this.elementRef.nativeElement,"height",`${this.gridCurrentHeight}px`),this.updateGridItemsStyles()}setBackgroundCssVariables(e){const n=this.elementRef.nativeElement.style;this._backgroundConfig?(n.setProperty("--gap",this.gap+"px"),n.setProperty("--row-height",e+"px"),n.setProperty("--columns",`${this.cols}`),n.setProperty("--border-width",(this._backgroundConfig.borderWidth??1)+"px"),n.setProperty("--border-color",this._backgroundConfig.borderColor??"#ffa72678"),n.setProperty("--gap-color",this._backgroundConfig.gapColor??"transparent"),n.setProperty("--row-color",this._backgroundConfig.rowColor??"transparent"),n.setProperty("--column-color",this._backgroundConfig.columnColor??"transparent")):(n.removeProperty("--gap"),n.removeProperty("--row-height"),n.removeProperty("--columns"),n.removeProperty("--border-width"),n.removeProperty("--border-color"),n.removeProperty("--gap-color"),n.removeProperty("--row-color"),n.removeProperty("--column-color"))}updateGridItemsStyles(){this._gridItems.forEach(e=>{const n=this._gridItemsRenderData[e.id];null==n?console.error(`Couldn't find the specified grid item for the id: ${e.id}`):e.setStyles(ow(n))})}setGridBackgroundVisible(e){const n=this.elementRef.nativeElement.classList;e?n.add("ktd-grid-background-visible"):n.remove("ktd-grid-background-visible")}initSubscriptions(){this.subscriptions=[this._gridItems.changes.pipe($i(this._gridItems),yi(e=>Ti(...e.map(n=>n.dragStart$.pipe(me(r=>({event:r,gridItem:n,type:"drag"})))),...e.map(n=>n.resizeStart$.pipe(me(r=>({event:r,gridItem:n,type:"resize"}))))).pipe(YS(({event:n,gridItem:r,type:o})=>(this.ngZone.run(()=>("drag"===o?this.dragStarted:this.resizeStarted).emit(rw(r,this.layout))),this.setGridBackgroundVisible("whenDragging"===this._backgroundConfig?.show||"always"===this._backgroundConfig?.show),this.performDragSequence$(r,n,o).pipe(me(a=>({layout:a,gridItem:r,type:o})))))))).subscribe(({layout:e,gridItem:n,type:r})=>{this.layout=e,this.calculateRenderData(),("drag"===r?this.dragEnded:this.resizeEnded).emit(rw(n,e)),this.layoutUpdated.emit(e),this.setGridBackgroundVisible("always"===this._backgroundConfig?.show)})]}performDragSequence$(e,n,r){return new st(o=>{const a=tw(this.elementRef.nativeElement),s=tw(e.elementRef.nativeElement),l="string"==typeof this.scrollableParent?document.getElementById(this.scrollableParent):this.scrollableParent;this.renderer.addClass(e.elementRef.nativeElement,"no-transitions"),this.renderer.addClass(e.elementRef.nativeElement,"ktd-grid-item-dragging");const c={...s,left:s.left-a.left,top:s.top-a.top};let d;this.createPlaceholderElement(c,e.placeholder);const u=this.ngZone.runOutsideAngular(()=>(l?this.gridService.mouseOrTouchMove$(document).pipe(me(g=>({pointerX:Mu(g),pointerY:Iu(g)})),Vre(l,{scrollStep:this.scrollSpeed})):Tu).pipe(at(XS(document))).subscribe()),p=this.ngZone.runOutsideAngular(()=>Ti(qd([this.gridService.mouseOrTouchMove$(document),...l?[qre(l).pipe($i({top:0,left:0}))]:[ue({top:0,left:0})]])).pipe(at(XS(document))).subscribe(([g,m])=>{g.preventDefault();const b=d||this.layout,C="drag"===r?xre:Ere,{layout:w,draggedItemPos:k}=C(e,{layout:b,rowHeight:this.rowHeight,height:this.height,cols:this.cols,preventCollision:this.preventCollision,gap:this.gap},this.compactType,{pointerDownEvent:n,pointerDragEvent:g,gridElemClientRect:a,dragElemClientRect:s,scrollDifference:m});d=w,this.gridCurrentHeight=this.height??("fit"===this.rowHeight?a.height:xL(d,this.rowHeight,this.gap)),this._gridItemsRenderData=TL({cols:this.cols,rowHeight:this.rowHeight,height:this.height,layout:d,preventCollision:this.preventCollision,gap:this.gap},a.width,a.height);const F={...this._gridItemsRenderData[e.id]},U=ow(F);this.placeholder.style.width=U.width,this.placeholder.style.height=U.height,this.placeholder.style.transform=`translateX(${U.left}) translateY(${U.top})`,this._gridItemsRenderData[e.id]={...k,id:this._gridItemsRenderData[e.id].id},this.setBackgroundCssVariables("fit"===this.rowHeight?$p(d,a.height,this.gap):this.rowHeight),this.render(),"resize"===r&&(function Ire(t,i){return t.id===i.id&&t.x===i.x&&t.y===i.y&&t.w===i.w&&t.h===i.h}(b.find(ee=>ee.id===e.id),d.find(ee=>ee.id===e.id))||this.gridItemResize.emit({width:F.width,height:F.height,gridItemRef:rw(e,d).gridItemRef}))},g=>o.error(g),()=>{this.ngZone.run(()=>{this.renderer.removeClass(e.elementRef.nativeElement,"no-transitions"),this.renderer.removeClass(e.elementRef.nativeElement,"ktd-grid-item-dragging"),this.addGridItemAnimatingClass(e).subscribe(),this.destroyPlaceholder(),o.next(d?d.map(g=>({id:g.id,x:g.x,y:g.y,w:g.w,h:g.h,minW:g.minW,minH:g.minH,maxW:g.maxW,maxH:g.maxH})):this.layout),o.complete()})}));return()=>{u.unsubscribe(),p.unsubscribe()}})}addGridItemAnimatingClass(e){return new st(n=>{const r=function Ure(t){const i=getComputedStyle(t),e=nw(i,"transition-property"),n=e.find(s=>"transform"===s||"all"===s);if(!n)return 0;const r=e.indexOf(n),o=nw(i,"transition-duration"),a=nw(i,"transition-delay");return kL(o[r])+kL(a[r])}(e.elementRef.nativeElement);if(0===r)return n.next(),void n.complete();this.renderer.addClass(e.elementRef.nativeElement,"ktd-grid-item-animating");const o=l=>{(!l||l.target===e.elementRef.nativeElement&&"transform"===l.propertyName)&&(this.renderer.removeClass(e.elementRef.nativeElement,"ktd-grid-item-animating"),s(),clearTimeout(a),n.next(),n.complete())},a=setTimeout(o,1.5*r),s=this.renderer.listen(e.elementRef.nativeElement,"transitionend",o)})}createPlaceholderElement(e,n){this.placeholder=this.renderer.createElement("div"),this.placeholder.style.width=`${e.width}px`,this.placeholder.style.height=`${e.height}px`,this.placeholder.style.transform=`translateX(${e.left}px) translateY(${e.top}px)`,this.placeholder.classList.add("ktd-grid-item-placeholder"),this.renderer.appendChild(this.elementRef.nativeElement,this.placeholder),n?(this.placeholderRef=this.viewContainerRef.createEmbeddedView(n.templateRef,n.data),this.placeholderRef.rootNodes.forEach(r=>this.placeholder.appendChild(r)),this.placeholderRef.detectChanges()):this.placeholder.classList.add("ktd-grid-item-placeholder-default")}destroyPlaceholder(){this.placeholder?.remove(),this.placeholderRef?.destroy(),this.placeholder=this.placeholderRef=null}static{this.\u0275fac=function(n){return new(n||t)(T(ew),T(xe),T(Vi),T(Hi),T(ce))}}static{this.\u0275cmp=ne({type:t,selectors:[["ktd-grid"]],contentQueries:function(n,r,o){if(1&n&&ln(o,_L,5),2&n){let a;Ye(a=Ke())&&(r._gridItems=a)}},inputs:{scrollableParent:"scrollableParent",compactOnPropsChange:"compactOnPropsChange",preventCollision:"preventCollision",scrollSpeed:"scrollSpeed",compactType:"compactType",rowHeight:"rowHeight",cols:"cols",layout:"layout",gap:"gap",height:"height",backgroundConfig:"backgroundConfig"},outputs:{layoutUpdated:"layoutUpdated",dragStarted:"dragStarted",resizeStarted:"resizeStarted",dragEnded:"dragEnded",resizeEnded:"resizeEnded",gridItemResize:"gridItemResize"},features:[qe([{provide:yL,useFactory:Wre,deps:[t]}]),Oi],ngContentSelectors:cL,decls:1,vars:0,template:function(n,r){1&n&&(Dn(),di(0))},styles:['ktd-grid{display:block;position:relative;width:100%}ktd-grid.ktd-grid-background:before{content:"";border:none;position:absolute;inset:0;z-index:0;transition:opacity .2s;opacity:0;background-image:repeating-linear-gradient(var(--border-color) 0 var(--border-width),var(--row-color) var(--border-width) calc(var(--row-height) - var(--border-width)),var(--border-color) calc(var(--row-height) - var(--border-width)) calc(var(--row-height)),var(--gap-color) calc(var(--row-height)) calc(var(--row-height) + var(--gap))),repeating-linear-gradient(90deg,var(--border-color) 0 var(--border-width),var(--column-color) var(--border-width) calc(100% - (var(--border-width) + var(--gap))),var(--border-color) calc(100% - (var(--border-width) + var(--gap))) calc(100% - var(--gap)),var(--gap-color) calc(100% - var(--gap)) 100%);background-size:calc((100% + var(--gap)) / var(--columns)) calc(var(--row-height) + var(--gap));background-position:0 0}ktd-grid.ktd-grid-background.ktd-grid-background-visible:before{opacity:1}ktd-grid ktd-grid-item.ktd-grid-item-dragging,ktd-grid ktd-grid-item.ktd-grid-item-animating{z-index:1000}ktd-grid ktd-grid-item.no-transitions{transition:none!important}ktd-grid .ktd-grid-item-placeholder{position:absolute;z-index:0;transition-property:transform;transition:all .15s ease}ktd-grid .ktd-grid-item-placeholder-default{background-color:#8b0000;opacity:.6}\n'],encapsulation:2,changeDetection:0})}}return t})(),Gre=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=mt({type:t})}static{this.\u0275inj=lt({providers:[ew]})}}return t})();const Yre=t=>({lockedActivity:t}),Kre=(t,i)=>({projectionOnly:t,lockedActivity:i});function Qre(t,i){if(1&t){const e=G();h(0,"span")(1,"button",5),x("click",function(){return M(e),I(S().activityPanelService.joinTheGodsClick())}),y(2,"Join the Gods"),f()()}}function Zre(t,i){if(1&t){const e=G();h(0,"div",7),x("click",function(){M(e);const r=S().$implicit;return I(S(2).activityPanelService.doActivity(r))}),h(1,"div",8)(2,"span"),y(3),f()(),h(4,"div",9)(5,"span",10)(6,"mat-icon",11),x("click",function(r){M(e);const o=S().$implicit;return I(S(2).activityPanelService.showActivity(r,o))}),y(7," help "),f()()()()}if(2&t){const e=S().$implicit,n=S(2);z("ngClass",dt(4,Yre,!e.unlocked||n.battleService.enemies.length>0))("tabindex",0),v(),re("tooltip",n.activityPanelService.getActivityTooltip(e,!0)),v(2),Fe(e.name[e.level])}}function Xre(t,i){if(1&t&&H(0,Zre,8,6,"div",6),2&t){const e=i.$implicit;A(e.discovered||e.unlocked?0:-1)}}function Jre(t,i){1&t&&be(0,Xre,1,1,null,null,_t),2&t&&Se(S().activityService.portals)}function eoe(t,i){if(1&t){const e=G();h(0,"mat-icon",18),x("click",function(r){M(e);const o=S(2).$implicit;return I(S().scheduleActivity(o,r))})("contextmenu",function(r){M(e);const o=S(2).$implicit;return I(S().rightClick(o,r))}),y(1," event "),f()}if(2&t){const e=S(2).$implicit;re("tooltip",S().activityPanelService.getActivityTooltip(e))}}function toe(t,i){1&t&&(h(0,"mat-icon",15),y(1," model_training "),f())}function ioe(t,i){1&t&&(h(0,"mat-icon",16),y(1," supervisor_account "),f())}function noe(t,i){1&t&&(h(0,"mat-icon",17),O(1,"bigNumber"),y(2," attach_money "),f()),2&t&&pt("tooltip","Exactly how much will you make doing this job?<br>It can depend on your attributes, but the last time you did this job you made<br>",V(1,2,S(2).$implicit.lastIncome)," taels.")}function roe(t,i){if(1&t){const e=G();h(0,"div",13),x("cdkDragStarted",function(){return M(e),I(S(2).dragStart())})("cdkDragEnded",function(){return M(e),I(S(2).dragEnd())})("cdkDragMoved",function(r){return M(e),I(S(2).dragMoved(r))})("cdkDragReleased",function(r){return M(e),I(S(2).dragReleased(r))})("click",function(){M(e);const r=S().$implicit;return I(S().activityPanelService.doActivity(r))}),h(1,"div",8)(2,"span"),y(3),f()(),h(4,"div",9)(5,"span"),H(6,eoe,2,1,"mat-icon",14),f(),h(7,"span",10),H(8,toe,2,0,"mat-icon",15)(9,ioe,2,0,"mat-icon",16)(10,noe,3,4,"mat-icon",17),h(11,"mat-icon",11),x("click",function(r){M(e);const o=S().$implicit;return I(S().activityPanelService.showActivity(r,o))}),y(12," help "),f()()()()}if(2&t){const e=S().$implicit,n=S();z("ngClass",Tn(10,Kre,e.projectionOnly,!e.unlocked||n.battleService.enemies.length>0))("tabindex",0)("cdkDragDisabled",!e.unlocked)("cdkDragData",e.activityType),v(),re("tooltip",n.activityPanelService.getActivityTooltip(e,!0)),v(2),Fe(e.name[e.level]),v(3),A(n.mainLoopService.timeUnlocked?6:-1),v(2),A(e.skipApprenticeshipLevel>0&&!n.activityService.completedApprenticeships.includes(e.activityType)?8:-1),v(),A(n.activityService.familySpecialty===e.activityType?9:-1),v(),A(e.lastIncome&&e.lastIncome>0?10:-1)}}function ooe(t,i){if(1&t&&H(0,roe,13,13,"div",12),2&t){const e=i.$implicit;A(e.discovered||e.unlocked?0:-1)}}let aoe=(()=>{class t{constructor(e,n){this.gameStateService=e,this.dialog=n,this.Math=Math,this.activityService=_(bt),this.activityPanelService=_(IO),this.battleService=_(Vt),this.characterService=_(Ie),this.hellService=_(We),this.mainLoopService=_(tt),this.dragPositionX=0,this.dragPositionY=0}scheduleActivity(e,n){if(n.stopPropagation(),e.projectionOnly)return void(this.activityService.spiritActivity=e.activityType);let r=1;r*=n.shiftKey||n.altKey?10:1,r*=n.ctrlKey||n.metaKey?10:1,n.altKey?this.activityService.activityLoop.unshift({activity:e.activityType,repeatTimes:r}):this.activityService.activityLoop.push({activity:e.activityType,repeatTimes:r})}rightClick(e,n){n.preventDefault(),n.stopPropagation(),this.activityService.spiritActivity=e.activityType}dragStart(){this.gameStateService.dragging=!0}dragEnd(){this.gameStateService.dragging=!1}dragMoved(e){this.dragPositionX=e.pointerPosition.x,this.dragPositionY=e.pointerPosition.y}dragReleased(e){let n,r;if(e.event.preventDefault(),e.event.stopPropagation(),e.event instanceof MouseEvent)n=e.event.clientX,r=e.event.clientY;else{if(!(e.event instanceof TouchEvent))return;n=this.dragPositionX,r=this.dragPositionY}const o=document.elementsFromPoint(n,r);let a=this.activityService.activityLoop.length,s=!1,l=!1;for(const c of o)"activityDropDiv"===c.id?s=!0:c.id.startsWith("activityLoopIndex")?a=parseInt(c.id.substring(18)):"spiritActivity"===c.id&&(l=!0);if(s){const c=e.source.data;if(this.activityService.getActivityByType(c)?.projectionOnly&&(l=!0),l)this.activityService.spiritActivity=c;else{const d={activity:c,repeatTimes:1};a>=this.activityService.activityLoop.length?this.activityService.activityLoop.push(d):this.activityService.activityLoop.splice(a,0,d)}}}static{this.\u0275fac=function(n){return new(n||t)(T(Ut),T(Ht))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-activity-panel"]],decls:10,vars:2,consts:[[1,"activitiesHeader"],[1,"customHeader"],[1,"activitiesContainer"],[1,"overflow"],["cdkDropList","","cdkDropListSortingDisabled","",1,"activityGrid"],[3,"click"],[1,"activitySlot",3,"ngClass","tabindex"],[1,"activitySlot",3,"click","ngClass","tabindex"],[1,"activityLabel",3,"tooltip"],[1,"activityButtons"],[1,"floatRight"],["tooltip","What is this activity?<br>Click to learn all about it!","aria-label","Help","aria-hidden","false",1,"iconButton",3,"click"],["cdkDrag","",1,"activitySlot",3,"ngClass","tabindex","cdkDragDisabled","cdkDragData"],["cdkDrag","",1,"activitySlot",3,"cdkDragStarted","cdkDragEnded","cdkDragMoved","cdkDragReleased","click","ngClass","tabindex","cdkDragDisabled","cdkDragData"],["aria-label","Schedule this activity","aria-hidden","false",1,"iconButton",3,"tooltip"],["tooltip","This activity requires that you go through an apprenticeship.<br>You can only do one apprenticeship in each lifetime, so choose carefully what trade you want to learn.<br>Once you've started, other trades may be closed off until your next life.","aria-label","Requires an apprenticeship","aria-hidden","false"],["tooltip","This activity is a family specialty, and you will do it better than you could if your ancestors hadn't practiced this so much.","aria-label","Family Specialty","aria-hidden","false"],["aria-label","Earns money","aria-hidden","false",3,"tooltip"],["aria-label","Schedule this activity","aria-hidden","false",1,"iconButton",3,"click","contextmenu","tooltip"]],template:function(n,r){1&n&&(h(0,"h3",0)(1,"div",1),H(2,Qre,3,0,"span"),f()(),h(3,"div",2)(4,"div",3)(5,"div",4),H(6,Jre,2,0),be(7,ooe,1,1,null,null,_t),f()()(),L(9,"br")),2&n&&(v(2),A(!r.characterService.immortal||r.hellService.inHell||r.characterService.god?-1:2),v(4),A(r.hellService.inHell?6:-1),v(),Se(r.activityService.activities))},dependencies:()=>[ql,Vl,fi,Lt,It,et],styles:['td[_ngcontent-%COMP%]{font-size:12px;padding-left:6px;padding-right:2px;position:relative;border-bottom:1px solid var(--tableDividerColor)}td[_ngcontent-%COMP%]:not(:last-child):before{content:"";position:absolute;width:1px;background:var(--tableDividerColor);right:0;top:10%;bottom:10%}.activitiesHeader[_ngcontent-%COMP%]{display:flex}.activitiesContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:4px;overflow:auto}.activityGrid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:3px 0;gap:3px;overflow-anchor:none}.activitySlot[_ngcontent-%COMP%]{position:relative;border-radius:4px;border:1px solid var(--panelBorder);padding:2px;border-spacing:0px;cursor:pointer;background-color:var(--itemSlotColor);color:var(--bodyText);box-sizing:border-box;width:160px;height:75px;display:flex;flex-direction:column}button[_ngcontent-%COMP%]{font-size:12px;min-width:130px}.noWrap[_ngcontent-%COMP%]{white-space:nowrap;width:100%}.standardHeader[_ngcontent-%COMP%]{flex:1;white-space:nowrap}.customHeader[_ngcontent-%COMP%]{flex:4;display:inline-block;width:100%;text-align:center}.projectionOnly[_ngcontent-%COMP%]{border:1px solid var(--itemSlotHighlight);background-color:var(--qiColor)}.lockedActivity[_ngcontent-%COMP%]{background-color:var(--disabledActivity)}.activityButton[_ngcontent-%COMP%]{white-space:normal;max-width:150px}.progress-bar[_ngcontent-%COMP%]{height:24px;vertical-align:-.7em;font-size:11px;width:100px}.activityLabel[_ngcontent-%COMP%]{font-size:120%;flex-grow:1}.activityButtons[_ngcontent-%COMP%]{flex-grow:0}.floatRight[_ngcontent-%COMP%]{float:right}mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;margin:4px 1px;vertical-align:middle}']})}}return t})();const soe=(t,i)=>i.id;function loe(t,i){if(1&t){const e=G();h(0,"div")(1,"div",3),x("click",function(){const r=M(e).$implicit;return I(S().slotClicked(r))}),h(2,"div"),y(3),O(4,"titlecase"),f(),h(5,"div"),y(6),O(7,"bigNumber"),f()()()}if(2&t){const e=i.$implicit;v(),re("tooltip",e.description),v(2),Fe(V(4,3,e.id)),v(3),j("$ ",V(7,5,e.setupCost),"")}}let coe=(()=>{class t{constructor(e,n,r,o){this.dialogRef=e,this.homeService=n,this.characterService=r,this.gameStateService=o}slotClicked(e){this.characterService.money>e.setupCost&&(this.characterService.updateMoney(0-e.setupCost),this.homeService.addWorkstation(e.id),this.dialogRef.close())}static{this.\u0275fac=function(n){return new(n||t)(T(ap),T(zt),T(Ie),T(Ut))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-workstation-selection-modal"]],decls:8,vars:0,consts:[[1,"darkMode"],[1,"inventoryContainer"],[1,"inventoryGrid"],["tabindex","0",1,"itemSlot",3,"click","tooltip"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"span"),y(2,"Select Workstation"),f(),L(3,"hr"),h(4,"div",1)(5,"div",2),be(6,loe,8,7,"div",null,soe),f()()()),2&n&&(v(6),Se(r.homeService.availableWorkstationsList))},dependencies:()=>[Ai,It,et],styles:[".inventoryContainer[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto}.inventoryGrid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:3px;justify-content:center}.itemSlot[_ngcontent-%COMP%]{width:90px;height:90px;background-color:var(--storeButtonColor);line-height:12px}"]})}}return t})();function doe(t,i){if(1&t){const e=G();h(0,"div",1)(1,"span")(2,"input",2),x("change",function(r){return M(e),I(S().autoPillChange(r))}),f(),h(3,"label",3),y(4,"Automatically consume all pills"),f()()()}if(2&t){const e=S();v(2),z("checked",e.inventoryService.autoPillEnabled)}}function uoe(t,i){if(1&t){const e=G();h(0,"div",1)(1,"span")(2,"input",4),x("change",function(r){return M(e),I(S().autoequipEnableChange(r))}),f(),h(3,"label",5),y(4,"Automatically equip the best gear you have"),f()()()}if(2&t){const e=S();v(2),z("checked",e.inventoryService.autoequipBestEnabled)}}function hoe(t,i){if(1&t){const e=G();h(0,"div",1)(1,"span")(2,"input",6),x("change",function(r){return M(e),I(S().automergeEquippedChange(r))}),f(),h(3,"label",7),y(4,"Automatically merge onto equipped equipment"),f()()()}if(2&t){const e=S();v(2),z("checked",e.inventoryService.automergeEquipped)}}let foe=(()=>{class t{constructor(e,n,r,o,a,s,l,c){this.homeService=e,this.farmService=n,this.characterService=r,this.inventoryService=o,this.gameStateService=a,this.followerService=s,this.mainLoopService=l,this.dialog=c}autoPillChange(e){e.target instanceof HTMLInputElement&&(this.inventoryService.autoPillEnabled=e.target.checked)}autoequipEnableChange(e){e.target instanceof HTMLInputElement&&(this.inventoryService.autoequipBestEnabled=e.target.checked)}automergeEquippedChange(e){e.target instanceof HTMLInputElement&&(this.inventoryService.automergeEquipped=e.target.checked)}static{this.\u0275fac=function(n){return new(n||t)(T(zt),T(wr),T(Ie),T(he),T(Ut),T(Gt),T(tt),T(Ht))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-crafting-options-modal"]],decls:7,vars:3,consts:[[1,"darkMode","optionsDiv"],[1,"optionField"],["type","checkbox","id","autoPill",3,"change","checked"],["for","autoPill"],["type","checkbox","id","autoequipEnable",3,"change","checked"],["for","autoequipEnable"],["type","checkbox","id","automergeEquipped",3,"change","checked"],["for","automergeEquipped"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"span"),y(2,"Crafting Options"),f(),L(3,"hr"),H(4,doe,5,1,"div",1)(5,uoe,5,1,"div",1)(6,hoe,5,1,"div",1),f()),2&n&&(v(4),A(r.inventoryService.autoPillUnlocked?4:-1),v(),A(r.inventoryService.autoequipBestArmor||r.inventoryService.autoequipBestWeapon?5:-1),v(),A(r.inventoryService.autoequipBestArmor&&r.inventoryService.autoArmorMergeUnlocked||r.inventoryService.autoequipBestWeapon&&r.inventoryService.autoWeaponMergeUnlocked?6:-1))},styles:[".optionsDiv[_ngcontent-%COMP%]{overflow-y:auto;max-height:600px;min-height:250px}.inputBox[_ngcontent-%COMP%]{width:70px}.optionField[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{margin-top:2px}.scrollingDiv[_ngcontent-%COMP%]{max-height:200px;overflow:auto}.warning[_ngcontent-%COMP%]{color:red}.priorityTable[_ngcontent-%COMP%]{background:var(--itemSlotColor);border:1px solid var(--panelBorder);border-radius:4px;margin:5px 10px 10px}.priorityTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:x-small;font-weight:400;line-height:1}.priorityTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{text-align:left}.priorityTable[_ngcontent-%COMP%]   .priorityTableNameColumn[_ngcontent-%COMP%]{width:100px;padding-left:5px}.priorityTable[_ngcontent-%COMP%]   .priorityTableCheckboxColumn[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;width:50px}.priorityTable[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none}.priorityTable[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{color:var(--disabledText);cursor:default}.tab-label[_ngcontent-%COMP%]{color:var(--disabledText)}#importLayoutFile[_ngcontent-%COMP%], #importGameFile[_ngcontent-%COMP%]{display:none}"]})}}return t})();const moe=(t,i)=>i.name,poe=(t,i)=>i.id;function goe(t,i){1&t&&(h(0,"div")(1,"span"),y(2," Your crafting stations are a distant memory, and can't help you here in hell. "),f()())}function voe(t,i){if(1&t){const e=G();h(0,"mat-icon",3),x("click",function(){return M(e),I(S(3).addWorkstation())}),y(1," hardware "),f(),h(2,"span"),y(3),f()}if(2&t){const e=S(3);v(3),j(" You can add ",e.homeService.home.maxWorkstations-e.homeService.workstations.length," more workstations to this home")}}function yoe(t,i){if(1&t&&(L(0,"img",10),O(1,"titlecase")),2&t){const e=S().$implicit;pt("src","assets/images/items/",null==e||null==e.item?null:e.item.imageFile,".png",Bi),re("alt",V(1,3,null==e||null==e.item?null:e.item.name))}}function _oe(t,i){if(1&t&&(y(0),O(1,"titlecase")),2&t){const e=S().$implicit;j(" ",V(1,1,null==e||null==e.item?null:e.item.name)," ")}}function boe(t,i){if(1&t){const e=G();h(0,"div")(1,"div",7)(2,"div",8),O(3,"titlecase"),x("cdkDragStarted",function(){return M(e),I(S(4).dragStart())})("cdkDragEnded",function(){return M(e),I(S(4).dragEnd())})("cdkDragMoved",function(r){return M(e),I(S(4).dragMoved(r))})("cdkDragReleased",function(r){return M(e),I(S(4).dragReleased(r))})("dblclick",function(){const r=M(e).$index,o=S().$implicit;return I(S(3).inputDoubleClicked(o,r))}),h(4,"div",9),H(5,yoe,2,5,"img",10)(6,_oe,2,3),f(),h(7,"div",11),y(8),f()()()()}if(2&t){const e=i.$implicit,n=i.$index,r=S().$index;v(),Lo("id","wsInputIndex",r,"_",n,""),v(),re("tooltip",null!=e&&e.item?V(3,9,null==e||null==e.item?null:e.item.name)+".<br>"+(null==e||null==e.item?null:e.item.description):""),z("tabindex",null!=e&&e.item?"0":"-1")("cdkDragData",e)("cdkDragDisabled",!(null!=e&&e.item)),v(3),A(null!=e&&null!=e.item&&e.item.imageFile?5:6),v(3),j("x",null==e?null:e.quantity,"")}}function Soe(t,i){if(1&t){const e=G();h(0,"div",2)(1,"div")(2,"mat-icon",4),y(3," help "),f(),h(4,"span"),y(5),f(),h(6,"mat-icon",5),x("click",function(){const r=M(e).$implicit;return I(S(3).homeService.removeWorkstation(r))}),y(7," close "),f()(),h(8,"div")(9,"span"),y(10),O(11,"bigNumber"),f()(),h(12,"div")(13,"span"),y(14,"Inputs:"),f()(),h(15,"div",6),be(16,boe,9,11,"div",null,poe),f()()}if(2&t){const e=i.$implicit;v(2),re("tooltip",e.description),v(3),Fe(e.name),v(5),j("Costs ",V(11,3,e.maintenanceCost)," Taels per day to maintain"),v(6),Se(e.inputs)}}function woe(t,i){if(1&t){const e=G();h(0,"div")(1,"span"),y(2,"Your Workstations"),f(),h(3,"mat-icon",1),x("click",function(){return M(e),I(S(2).craftingOptions())}),y(4," settings "),f()(),h(5,"div"),H(6,voe,4,1),f(),be(7,Soe,18,5,"div",2,moe)}if(2&t){const e=S(2);v(6),A(e.homeService.workstations.length<e.homeService.home.maxWorkstations?6:-1),v(),Se(e.homeService.workstations)}}function Coe(t,i){if(1&t&&H(0,woe,9,1),2&t){const e=S();A(!e.homeService.home.maxWorkstations||e.hellService.inHell&&!e.homeService.hellHome?-1:0)}}let koe=(()=>{class t{constructor(e,n,r,o,a){this.homeService=e,this.hellService=n,this.inventoryService=r,this.dialog=o,this.gameStateService=a,this.Math=Math,this.dragPositionX=0,this.dragPositionY=0}craftingOptions(){this.dialog.open(foe,{width:"700px",data:{someField:"foo"},autoFocus:!1})}inputDoubleClicked(e,n){const r=e.inputs[n].item;r&&(e.inputs[n].quantity>0&&this.inventoryService.addItem(r,e.inputs[n].quantity,0,!0),e.inputs[n]=this.inventoryService.getEmptyItemStack())}addWorkstation(){this.dialog.open(coe,{width:"600px",data:{someField:"foo"},autoFocus:!1})}dragStart(){this.gameStateService.dragging=!0}dragEnd(){this.gameStateService.dragging=!1}dragMoved(e){this.dragPositionX=e.pointerPosition.x,this.dragPositionY=e.pointerPosition.y}dragReleased(e){let n,r;if(e.event instanceof MouseEvent)n=e.event.clientX,r=e.event.clientY;else{if(!(e.event instanceof TouchEvent))return;n=this.dragPositionX,r=this.dragPositionY}const o=e.source.data;if(!o)return;let a=null,s=-1;for(const d of this.homeService.workstations)for(let u=0;u<d.inputs.length;u++)d.inputs[u]===o&&(a=d,s=u);if(!a||-1===s)return;if(0===a.inputs[s].quantity)return void(a.inputs[s]=this.inventoryService.getEmptyItemStack());let l=-1;const c=document.elementsFromPoint(n,r);for(const d of c)d.id.startsWith("itemIndex")&&(l=parseInt(d.id.substring(9)));if(-1!==l)for(const d of c)if(d.id.startsWith("itemIndex")){const u=parseInt(d.id.substring(9));if(u>=0&&u<this.inventoryService.itemStacks.length){const p=this.inventoryService.itemStacks[u];p.item?p.item.name===o.item?.name&&(p.quantity+=o.quantity,this.inventoryService.fixId(u),a.inputs[s]=this.inventoryService.getEmptyItemStack()):(this.inventoryService.addItem(o.item,o.quantity,u,!0),a.inputs[s]=this.inventoryService.getEmptyItemStack())}}}static{this.\u0275fac=function(n){return new(n||t)(T(zt),T(We),T(he),T(Ht),T(Ut))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-crafting-panel"]],decls:4,vars:1,consts:[[1,"craftingContainer","overflow"],["tooltip","Options","aria-label","Crafting Options","aria-hidden","false",1,"iconButton","floatRight",3,"click"],[1,"workstationContainer"],["aria-label","Add Workstation","aria-hidden","false","tooltip","Add a new Workstation",1,"iconButton",3,"click"],[3,"tooltip"],["tooltip","Remove this workstation",1,"iconButton","floatRight",3,"click"],["cdkDropList","","cdkDropListSortingDisabled","",1,"inputsContainer"],[3,"id"],["cdkDrag","",1,"inputSlot",3,"cdkDragStarted","cdkDragEnded","cdkDragMoved","cdkDragReleased","dblclick","tabindex","cdkDragData","cdkDragDisabled","tooltip"],[1,"itemName","textOverflow"],["width","48","height","48",1,"itemImage",3,"src","alt"],[1,"itemQuantity"]],template:function(n,r){1&n&&(h(0,"div",0),H(1,goe,3,0,"div")(2,Coe,1,1),f(),L(3,"br")),2&n&&(v(),A(r.hellService.inHell&&!r.homeService.hellHome?1:2))},dependencies:()=>[Lt,ql,Vl,Ai,It,et],styles:[".craftingContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-left:2px;padding-right:2px;flex:auto;overflow:auto;margin:4px}.buttons[_ngcontent-%COMP%]{border-top:1px solid var(--panelBorder);display:flex;justify-content:space-between;white-space:nowrap}.button-group[_ngcontent-%COMP%]{white-space:nowrap}mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;margin:4px 1px;vertical-align:middle;color:var(--bodyText)}.itemSlot[_ngcontent-%COMP%]{line-height:normal;width:50px;height:50px}.overflow[_ngcontent-%COMP%]{overflow:auto}.hellDisabled[_ngcontent-%COMP%]{opacity:.3}.inputsContainer[_ngcontent-%COMP%]{display:flex;flex-direction:row}.inputSlot[_ngcontent-%COMP%]{width:52px;height:52px;display:flex;line-height:normal;flex-direction:row;overflow:hidden;position:relative;border-radius:4px;border:1px solid var(--panelBorder);padding:2px;font-size:x-small;text-align:center;border-spacing:0px;cursor:pointer;background-color:var(--itemSlotColor);color:var(--bodyText);box-sizing:border-box}.itemQuantity[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;line-height:15px;padding:0 4px;width:fit-content;height:fit-content;background:inherit;filter:brightness(80%);border-radius:3px;z-index:1}.itemImagePlaceholder[_ngcontent-%COMP%]{width:48px;min-width:48px;height:48px;min-height:48px;border:solid 1px white}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.5}.workstationContainer[_ngcontent-%COMP%]{margin:2px;border:1px solid var(--panelBorder);padding:2px}.floatRight[_ngcontent-%COMP%]{float:right}"]})}}return t})();const Ul=t=>({highlightSlot:t}),Doe=t=>({highlightSpan:t}),Toe=t=>({cooldown:t}),xoe=(t,i)=>i.id;function Eoe(t,i){if(1&t&&(h(0,"div"),L(1,"img",11),O(2,"titlecase"),f()),2&t){const e=S();v(),pt("src","assets/images/items/",null==e.characterService.equipment.head?null:e.characterService.equipment.head.imageFile,".png",Bi),re("alt",V(2,3,null==e.characterService.equipment.head?null:e.characterService.equipment.head.name))}}function Moe(t,i){if(1&t&&(h(0,"div"),L(1,"img",11),O(2,"titlecase"),f()),2&t){const e=S();v(),pt("src","assets/images/items/",null==e.characterService.equipment.rightHand?null:e.characterService.equipment.rightHand.imageFile,".png",Bi),re("alt",V(2,3,null==e.characterService.equipment.rightHand?null:e.characterService.equipment.rightHand.name))}}function Ioe(t,i){if(1&t&&(h(0,"div"),L(1,"img",11),O(2,"titlecase"),f()),2&t){const e=S();v(),pt("src","assets/images/items/",null==e.characterService.equipment.body?null:e.characterService.equipment.body.imageFile,".png",Bi),re("alt",V(2,3,null==e.characterService.equipment.body?null:e.characterService.equipment.body.name))}}function Aoe(t,i){if(1&t&&(h(0,"div"),L(1,"img",11),O(2,"titlecase"),f()),2&t){const e=S();v(),pt("src","assets/images/items/",null==e.characterService.equipment.leftHand?null:e.characterService.equipment.leftHand.imageFile,".png",Bi),re("alt",V(2,3,null==e.characterService.equipment.leftHand?null:e.characterService.equipment.leftHand.name))}}function Poe(t,i){if(1&t&&(h(0,"div"),L(1,"img",11),O(2,"titlecase"),f()),2&t){const e=S();v(),pt("src","assets/images/items/",null==e.characterService.equipment.legs?null:e.characterService.equipment.legs.imageFile,".png",Bi),re("alt",V(2,3,null==e.characterService.equipment.legs?null:e.characterService.equipment.legs.name))}}function Roe(t,i){if(1&t&&(L(0,"img",11),O(1,"titlecase")),2&t){const e=S().$implicit;pt("src","assets/images/items/",null==e||null==e.item?null:e.item.imageFile,".png",Bi),re("alt",V(1,3,null==e||null==e.item?null:e.item.name))}}function Foe(t,i){if(1&t&&(y(0),O(1,"titlecase")),2&t){const e=S().$implicit;j(" ",V(1,1,null==e||null==e.item?null:e.item.name)," ")}}function Ooe(t,i){if(1&t){const e=G();h(0,"div")(1,"div",12)(2,"div",13),O(3,"titlecase"),x("cdkDragStarted",function(){return M(e),I(S().dragStart())})("cdkDragEnded",function(){return M(e),I(S().dragEnd())})("cdkDragMoved",function(r){return M(e),I(S().dragMoved(r))})("cdkDragReleased",function(r){return M(e),I(S().dragReleased(r))})("dblclick",function(r){const o=M(e).$index;return I(S().pouchDoubleClicked(o,r))}),h(4,"div",14),H(5,Roe,2,5,"img",11)(6,Foe,2,3),f(),h(7,"div",15),y(8),O(9,"bigNumber"),f()()()()}if(2&t){const e=i.$implicit,n=i.$index;v(),pt("id","pouchIndex",n,""),v(),re("tooltip",null!=e&&e.item?V(3,9,null==e||null==e.item?null:e.item.name)+".<br>"+(null==e||null==e.item?null:e.item.description):""),z("ngClass",dt(13,Toe,((null==e||null==e.item?null:e.item.cooldown)||0)>0))("tabindex",null!=e&&e.item?"0":"-1")("cdkDragData",e)("cdkDragDisabled",!(null!=e&&e.item)),v(3),A(null!=e&&null!=e.item&&e.item.imageFile?5:6),v(3),j("x",V(9,11,(null==e?null:e.quantity)||0),"")}}function Loe(t,i){if(1&t&&(h(0,"div"),L(1,"img",11),O(2,"titlecase"),f()),2&t){const e=S();v(),pt("src","assets/images/items/",null==e.characterService.equipment.feet?null:e.characterService.equipment.feet.imageFile,".png",Bi),re("alt",V(2,3,null==e.characterService.equipment.feet?null:e.characterService.equipment.feet.name))}}let Noe=(()=>{class t{constructor(e,n,r){this.characterService=e,this.inventoryService=n,this.gameStateService=r,this.dragPositionX=0,this.dragPositionY=0}slotDoubleClicked(e,n){n.preventDefault(),n.stopPropagation();const r=this.characterService.equipment[e];r&&this.inventoryService.openInventorySlots()>0&&(this.inventoryService.addItem(r),this.characterService.equipment[e]=null,this.inventoryService.selectedItem=this.inventoryService.getEmptyItemStack())}pouchDoubleClicked(e,n){n.preventDefault(),n.stopPropagation();const r=this.characterService.itemPouches[e];r&&r.item&&this.inventoryService.openInventorySlots()>0&&(this.inventoryService.addItem(r.item,r.quantity,0,!0),this.characterService.itemPouches[e]=this.inventoryService.getEmptyItemStack(),this.inventoryService.selectedItem=this.inventoryService.getEmptyItemStack())}getSelectedItemSlot(){const e=this.inventoryService.selectedItem?.item;return e&&Pi(e)?e?.slot:null}dragStart(){this.gameStateService.dragging=!0}dragEnd(){this.gameStateService.dragging=!1}dragMoved(e){this.dragPositionX=e.pointerPosition.x,this.dragPositionY=e.pointerPosition.y}dragReleased(e){let n,r;if(e.event instanceof MouseEvent)n=e.event.clientX,r=e.event.clientY;else{if(!(e.event instanceof TouchEvent))return;n=this.dragPositionX,r=this.dragPositionY}const o=e.source.data;if(!o)return;let a=-1;const s=document.elementsFromPoint(n,r);for(const l of s)l.id.startsWith("itemIndex")&&(a=parseInt(l.id.substring(9)));if(-1!==a)for(const l of s)if(l.id.startsWith("itemIndex")){const c=parseInt(l.id.substring(9));if(c>=0&&c<this.inventoryService.itemStacks.length){const d=this.inventoryService.itemStacks[c];if(d.item){if(Pi(d.item)&&d.item.slot===o.slot)this.inventoryService.setItemEmptyStack(c),this.inventoryService.mergeEquipment(d.item,o,c),this.characterService.equipment[d.item.slot]=null;else if(d.item.name===o.item?.name){const u=this.characterService.itemPouches.indexOf(o);-1!==u&&(d.quantity+=o.quantity,this.inventoryService.fixId(c),this.characterService.itemPouches[u]=this.inventoryService.getEmptyItemStack())}}else if(o.quantity){const u=this.characterService.itemPouches.indexOf(o);-1!==u&&(this.inventoryService.addItem(o.item,o.quantity,c),this.characterService.itemPouches[u]=this.inventoryService.getEmptyItemStack())}else this.inventoryService.addItem(o,1,c),this.characterService.equipment[o.slot]=null}}}getEffectClass(e){let n;return"leftHand"===e||"rightHand"===e?n=this.characterService.equipment[e]?.weaponStats?.effect:("head"===e||"body"===e||"legs"===e||"feet"===e)&&(n=this.characterService.equipment[e]?.armorStats?.effect),n?"effect"+n:""}static{this.\u0275fac=function(n){return new(n||t)(T(Ie),T(he),T(Ut))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-equipment-panel"]],decls:48,vars:86,consts:[["cdkDropList","","cdkDropListSortingDisabled","",1,"equipmentContainer"],["cdkDrag","","tabindex","0","id","equipmentSlothead",1,"itemSlot","textOverflow",2,"grid-area","head",3,"cdkDragStarted","cdkDragEnded","cdkDragMoved","cdkDragReleased","dblclick","ngClass","cdkDragData","cdkDragDisabled","tooltip"],["cdkDrag","","tabindex","0","id","equipmentSlotrightHand",1,"itemSlot","textOverflow",2,"grid-area","right",3,"cdkDragStarted","cdkDragEnded","cdkDragMoved","cdkDragReleased","dblclick","ngClass","cdkDragData","cdkDragDisabled","tooltip"],["cdkDrag","","tabindex","0","id","equipmentSlotbody",1,"itemSlot","textOverflow",2,"grid-area","body",3,"cdkDragStarted","cdkDragEnded","cdkDragMoved","cdkDragReleased","dblclick","ngClass","cdkDragData","cdkDragDisabled","tooltip"],["cdkDrag","","tabindex","0","id","equipmentSlotleftHand",1,"itemSlot","textOverflow",2,"grid-area","left",3,"cdkDragStarted","cdkDragEnded","cdkDragMoved","cdkDragReleased","dblclick","ngClass","cdkDragData","cdkDragDisabled","tooltip"],[2,"grid-area","stats"],["tabindex","0",3,"ngClass","tooltip"],["cdkDrag","","tabindex","0","id","equipmentSlotlegs",1,"itemSlot","textOverflow",2,"grid-area","legs",3,"cdkDragStarted","cdkDragEnded","cdkDragMoved","cdkDragReleased","dblclick","ngClass","cdkDragData","cdkDragDisabled","tooltip"],[2,"grid-area","pouch"],["cdkDropList","","cdkDropListSortingDisabled","",1,"pouchGrid"],["cdkDrag","","tabindex","0","id","equipmentSlotfeet",1,"itemSlot","textOverflow",2,"grid-area","feet",3,"cdkDragStarted","cdkDragEnded","cdkDragMoved","cdkDragReleased","dblclick","ngClass","cdkDragData","cdkDragDisabled","tooltip"],["width","48","height","48",1,"itemImage",3,"src","alt"],[3,"id"],["cdkDrag","",1,"pouchSlot",3,"cdkDragStarted","cdkDragEnded","cdkDragMoved","cdkDragReleased","dblclick","ngClass","tabindex","cdkDragData","cdkDragDisabled","tooltip"],[1,"itemName","textOverflow"],[1,"itemQuantity"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"div",1),O(2,"titlecase"),x("cdkDragStarted",function(){return r.dragStart()})("cdkDragEnded",function(){return r.dragEnd()})("cdkDragMoved",function(a){return r.dragMoved(a)})("cdkDragReleased",function(a){return r.dragReleased(a)})("dblclick",function(a){return r.slotDoubleClicked("head",a)}),H(3,Eoe,3,5,"div"),h(4,"div"),y(5),O(6,"titlecase"),f()(),h(7,"div",2),O(8,"titlecase"),x("cdkDragStarted",function(){return r.dragStart()})("cdkDragEnded",function(){return r.dragEnd()})("cdkDragMoved",function(a){return r.dragMoved(a)})("cdkDragReleased",function(a){return r.dragReleased(a)})("dblclick",function(a){return r.slotDoubleClicked("rightHand",a)}),H(9,Moe,3,5,"div"),h(10,"div"),y(11),O(12,"titlecase"),f()(),h(13,"div",3),O(14,"titlecase"),x("cdkDragStarted",function(){return r.dragStart()})("cdkDragEnded",function(){return r.dragEnd()})("cdkDragMoved",function(a){return r.dragMoved(a)})("cdkDragReleased",function(a){return r.dragReleased(a)})("dblclick",function(a){return r.slotDoubleClicked("body",a)}),H(15,Ioe,3,5,"div"),h(16,"div"),y(17),O(18,"titlecase"),f()(),h(19,"div",4),O(20,"titlecase"),x("cdkDragStarted",function(){return r.dragStart()})("cdkDragEnded",function(){return r.dragEnd()})("cdkDragMoved",function(a){return r.dragMoved(a)})("cdkDragReleased",function(a){return r.dragReleased(a)})("dblclick",function(a){return r.slotDoubleClicked("leftHand",a)}),H(21,Aoe,3,5,"div"),h(22,"div"),y(23),O(24,"titlecase"),f()(),h(25,"div",5)(26,"span",6)(27,"mat-icon"),y(28,"shield"),f(),y(29),O(30,"bigNumber"),f()(),h(31,"div",7),O(32,"titlecase"),x("cdkDragStarted",function(){return r.dragStart()})("cdkDragEnded",function(){return r.dragEnd()})("cdkDragMoved",function(a){return r.dragMoved(a)})("cdkDragReleased",function(a){return r.dragReleased(a)})("dblclick",function(a){return r.slotDoubleClicked("legs",a)}),H(33,Poe,3,5,"div"),h(34,"div"),y(35),O(36,"titlecase"),f()(),h(37,"div",8)(38,"div",9),be(39,Ooe,10,15,"div",null,xoe),f()(),h(41,"div",10),O(42,"titlecase"),x("cdkDragStarted",function(){return r.dragStart()})("cdkDragEnded",function(){return r.dragEnd()})("cdkDragMoved",function(a){return r.dragMoved(a)})("cdkDragReleased",function(a){return r.dragReleased(a)})("dblclick",function(a){return r.slotDoubleClicked("feet",a)}),H(43,Loe,3,5,"div"),h(44,"div"),y(45),O(46,"titlecase"),f()()(),L(47,"br")),2&n&&(v(),re("tooltip",null!==r.characterService.equipment.head?V(2,46,r.characterService.equipment.head.name)+".<br>"+r.characterService.equipment.head.description:""),z("ngClass",dt(72,Ul,"head"===r.getSelectedItemSlot()))("ngClass",r.getEffectClass("head"))("cdkDragData",r.characterService.equipment.head)("cdkDragDisabled",!r.characterService.equipment.head),v(2),A(null!=r.characterService.equipment.head&&r.characterService.equipment.head.imageFile?3:-1),v(2),j(" ",V(6,48,null==r.characterService.equipment.head?null:r.characterService.equipment.head.name)," "),v(2),re("tooltip",null!==r.characterService.equipment.rightHand?V(8,50,r.characterService.equipment.rightHand.name)+".<br>"+r.characterService.equipment.rightHand.description:""),z("ngClass",dt(74,Ul,"rightHand"===r.getSelectedItemSlot()))("ngClass",r.getEffectClass("rightHand"))("cdkDragData",r.characterService.equipment.rightHand)("cdkDragDisabled",!r.characterService.equipment.rightHand),v(2),A(null!=r.characterService.equipment.rightHand&&r.characterService.equipment.rightHand.imageFile?9:-1),v(2),j(" ",V(12,52,null==r.characterService.equipment.rightHand?null:r.characterService.equipment.rightHand.name)," "),v(2),re("tooltip",null!==r.characterService.equipment.body?V(14,54,r.characterService.equipment.body.name)+".<br>"+r.characterService.equipment.body.description:""),z("ngClass",dt(76,Ul,"body"===r.getSelectedItemSlot()))("ngClass",r.getEffectClass("body"))("cdkDragData",r.characterService.equipment.body)("cdkDragDisabled",!r.characterService.equipment.body),v(2),A(null!=r.characterService.equipment.body&&r.characterService.equipment.body.imageFile?15:-1),v(2),j(" ",V(18,56,null==r.characterService.equipment.body?null:r.characterService.equipment.body.name)," "),v(2),re("tooltip",null!==r.characterService.equipment.leftHand?V(20,58,r.characterService.equipment.leftHand.name)+".<br>"+r.characterService.equipment.leftHand.description:""),z("ngClass",dt(78,Ul,"leftHand"===r.getSelectedItemSlot()))("ngClass",r.getEffectClass("leftHand"))("cdkDragData",r.characterService.equipment.leftHand)("cdkDragDisabled",!r.characterService.equipment.leftHand),v(2),A(null!=r.characterService.equipment.leftHand&&r.characterService.equipment.leftHand.imageFile?21:-1),v(2),j(" ",V(24,60,null==r.characterService.equipment.leftHand?null:r.characterService.equipment.leftHand.name)," "),v(3),pt("tooltip","Defense.<br>Reduces damage when a monster hits you.<br>Based on your toughness and armor.",r.characterService.righteousWrathUnlocked?"<br>Doubled by the power of your righteous wrath.":"",""),z("ngClass",dt(80,Doe,r.characterService.righteousWrathUnlocked)),v(3),Fe(V(30,62,r.characterService.defense)),v(2),re("tooltip",null!==r.characterService.equipment.legs?V(32,64,r.characterService.equipment.legs.name)+".<br>"+r.characterService.equipment.legs.description:""),z("ngClass",dt(82,Ul,"legs"===r.getSelectedItemSlot()))("ngClass",r.getEffectClass("legs"))("cdkDragData",r.characterService.equipment.legs)("cdkDragDisabled",!r.characterService.equipment.legs),v(2),A(null!=r.characterService.equipment.legs&&r.characterService.equipment.legs.imageFile?33:-1),v(2),j(" ",V(36,66,null==r.characterService.equipment.legs?null:r.characterService.equipment.legs.name)," "),v(4),Se(r.characterService.itemPouches),v(2),re("tooltip",null!==r.characterService.equipment.feet?V(42,68,r.characterService.equipment.feet.name)+".<br>"+r.characterService.equipment.feet.description:""),z("ngClass",dt(84,Ul,"feet"===r.getSelectedItemSlot()))("ngClass",r.getEffectClass("feet"))("cdkDragData",r.characterService.equipment.feet)("cdkDragDisabled",!r.characterService.equipment.feet),v(2),A(null!=r.characterService.equipment.feet&&r.characterService.equipment.feet.imageFile?43:-1),v(2),j(" ",V(46,70,null==r.characterService.equipment.feet?null:r.characterService.equipment.feet.name)," "))},dependencies:()=>[ql,Vl,fi,Lt,Ai,It,et],styles:['.equipmentContainer[_ngcontent-%COMP%]{margin:2px auto;display:grid;grid-template:". head ." "right body left" "stats legs pouch" "stats feet pouch";grid-template-columns:1fr 1fr 1fr;gap:2px;overflow-y:auto;width:100%;height:100%}.itemSlot[_ngcontent-%COMP%]{width:125px;height:65px;line-height:12px;display:flex;flex-direction:row}.pouchSlot[_ngcontent-%COMP%]{width:52px;height:52px;line-height:12px;display:flex;flex-direction:row;overflow:hidden;position:relative;border-radius:4px;border:1px solid var(--panelBorder);padding:2px;font-size:x-small;text-align:center;border-spacing:0px;cursor:pointer;background-color:var(--itemSlotColor);color:var(--bodyText);box-sizing:border-box}.itemQuantity[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;line-height:15px;padding:0 4px;width:fit-content;height:fit-content;background:inherit;filter:brightness(80%);border-radius:3px;z-index:1}.pouchGrid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:6px;justify-content:center;gap:3px;overflow-anchor:none;max-width:108px;min-width:108px;width:108px}.itemImage[_ngcontent-%COMP%]{border:1px solid}.itemImagePlaceholder[_ngcontent-%COMP%]{width:48px;min-width:48px;height:48px;min-height:48px;border:solid 1px white}.highlightSlot[_ngcontent-%COMP%]{background-color:var(--itemSlotHighlight)}.highlightSpan[_ngcontent-%COMP%]{background-color:var(--qiColor)}.effectlife[_ngcontent-%COMP%]{color:var(--lifeEffectColor)}.effectcorruption[_ngcontent-%COMP%]{color:var(--corruptionEffectColor)}.cooldown[_ngcontent-%COMP%]{background-color:var(--healthColor)}']})}}return t})();function Boe(t,i){1&t&&(h(0,"div")(1,"span"),y(2," Your farm is a distant memory, and can't help you here in hell. "),f()())}function Hoe(t,i){if(1&t){const e=G();h(0,"mat-icon",4),x("click",function(r){return M(e),I(S(2).addFieldClicked(r))}),y(1," add "),f()}}function Voe(t,i){1&t&&L(0,"img",7),2&t&&pt("src","assets/images/items/",S().$implicit.imageFile,".png",Bi)}function qoe(t,i){if(1&t){const e=G();h(0,"mat-icon",13),x("click",function(r){M(e);const o=S().$index;return I(S(2).changeCropClicked(r,o))}),y(1," grass "),f()}}function joe(t,i){if(1&t){const e=G();h(0,"div",3)(1,"div",5)(2,"div")(3,"div"),y(4),O(5,"titlecase"),f(),h(6,"div"),y(7),f(),h(8,"div"),y(9),f(),h(10,"div"),y(11),f(),h(12,"div"),y(13),O(14,"percent"),f(),h(15,"div"),y(16),O(17,"bigNumber"),f()(),h(18,"div",6)(19,"span"),y(20),O(21,"bigNumber"),f()(),H(22,Voe,1,2,"img",7),f(),h(23,"div",8)(24,"mat-icon",9),x("click",function(r){const o=M(e).$index;return I(S(2).removeFieldClicked(r,o))}),y(25," close "),f(),h(26,"mat-icon",10),x("click",function(r){const o=M(e).$index;return I(S(2).addPlotToFieldClicked(r,o))}),y(27," add "),f(),h(28,"mat-icon",11),x("click",function(r){const o=M(e).$index;return I(S(2).removePlotFromFieldClicked(r,o))}),y(29," remove "),f(),H(30,qoe,2,0,"mat-icon",12),f()()}if(2&t){const e=i.$implicit,n=S(2);v(4),j("",V(5,9,e.cropName)," Field"),v(3),j("",e.plots," Plots of Land"),v(2),j("Harvest Quantity: ",e.yield,""),v(2),j("Days Until Next Harvest: ",e.daysToHarvest,""),v(2),j("Progress to next harvest: ",V(14,11,(e.originalDaysToHarvest-e.daysToHarvest)/e.originalDaysToHarvest),""),v(3),j("Upkeep Cost: ",V(17,13,e.upkeepCost),""),v(4),j("Average harvest of ",V(21,15,e.averageYield)," per day."),v(2),A(e.imageFile?22:-1),v(8),A(n.farmService.unlockedCrops.length>1?30:-1)}}function Uoe(t,i){if(1&t&&(h(0,"div")(1,"span"),y(2," You can set up farm fields to grow various foods. Fields need to have plots assigned and regular farming work to be productive. "),f()(),h(3,"div")(4,"span"),y(5),f()(),h(6,"div"),H(7,Hoe,2,0,"mat-icon",1),f(),h(8,"div",2),be(9,joe,31,17,"div",3,_t),f()),2&t){const e=S();v(5),qi(" You have ",e.farmService.fallowPlots," ",1===e.farmService.fallowPlots?"plot":"plots"," of land laying fallow and ready to plant "),v(2),A(e.farmService.fields.length<e.farmService.maxFields?7:-1),v(2),Se(e.farmService.fields)}}let zoe=(()=>{class t{constructor(e,n,r){this.farmService=e,this.homeService=n,this.hellService=r}addFieldClicked(e){e.preventDefault(),e.stopPropagation(),this.farmService.addField()}removeFieldClicked(e,n){this.farmService.removeField(n)}addPlotToFieldClicked(e,n){e.preventDefault(),e.stopPropagation();let r=1;e&&(e.shiftKey&&(r*=10),e.ctrlKey&&(r*=100)),this.farmService.assignFallowPlots(n,r)}removePlotFromFieldClicked(e,n){e.preventDefault(),e.stopPropagation();let r=1;e&&(e.shiftKey&&(r*=10),e.ctrlKey&&(r*=100)),this.farmService.unassignPlots(n,r)}changeCropClicked(e,n){this.farmService.changeCrop(n)}static{this.\u0275fac=function(n){return new(n||t)(T(wr),T(zt),T(We))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-farm-panel"]],decls:4,vars:1,consts:[[1,"farmContainer"],["tooltip","Set up a new field for growing crops.","aria-label","Set up a field","aria-hidden","false",1,"iconButton"],[1,"farmGrid"],[1,"fieldSlot"],["tooltip","Set up a new field for growing crops.","aria-label","Set up a field","aria-hidden","false",1,"iconButton",3,"click"],[1,"flexColumn","flexColumnGrow"],[1,"yieldText"],["width","32","height","32",1,"itemImage",3,"src"],[1,"flexColumn"],["tooltip","Clear this field and let its plots go fallow.","aria-label","Clear the field","aria-hidden","false",1,"iconButton",3,"click"],["tooltip","Assign a fallow plot to this field.","aria-label","Assign plot","aria-hidden","false",1,"iconButton",3,"click"],["tooltip","Remove a plot from this field.","aria-label","Remove plot","aria-hidden","false",1,"iconButton",3,"click"],["tooltip","Change the kind of crop you are growing in this field.","aria-label","Change crop","aria-hidden","false",1,"iconButton"],["tooltip","Change the kind of crop you are growing in this field.","aria-label","Change crop","aria-hidden","false",1,"iconButton",3,"click"]],template:function(n,r){1&n&&(h(0,"div",0),H(1,Boe,3,0,"div")(2,Uoe,11,3),f(),L(3,"br")),2&n&&(v(),A(r.hellService.inHell&&!r.homeService.hellHome?1:2))},dependencies:()=>[Lt,oA,Ai,It,et],styles:[".farmContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:4px;height:100%}.fieldSlot[_ngcontent-%COMP%]{width:200px;height:120px;padding:2px;line-height:12px;display:flex;flex-direction:row;border-radius:4px;border:1px solid var(--panelBorder);font-size:x-small;border-spacing:0px;background-color:var(--itemSlotColor);color:var(--bodyText);box-sizing:border-box}.flexColumn[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2px}.flexColumnGrow[_ngcontent-%COMP%]{flex-grow:1}.farmGrid[_ngcontent-%COMP%]{margin:2px;display:flex;flex-wrap:wrap;gap:2px;overflow-y:auto}.yieldText[_ngcontent-%COMP%]{height:30px}mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;margin:2px;vertical-align:middle;color:var(--bodyText)}"]})}}return t})();function $oe(t,i){if(1&t){const e=G();h(0,"tr")(1,"td"),y(2),O(3,"camelToTitle"),f(),h(4,"td"),y(5),f(),h(6,"td",11),y(7,"Keep up to "),h(8,"input",12),x("change",function(r){M(e);const o=S().$implicit;return I(S().keepValueChanged(r,o.key))}),f()()()}if(2&t){const e=S().$implicit,n=S();v(2),Fe(V(3,6,e.key)),v(3),Fe(e.value.description),v(),Lo("tooltip","This value will only apply to new ",n.followerType,"s.<br>You'll have to dismiss current ",n.followerType,"s yourself."),v(2),re("value",void 0===n.maxFollowerByType[e.key]?1e3:n.maxFollowerByType[e.key])}}function Woe(t,i){if(1&t&&H(0,$oe,9,8,"tr"),2&t){const e=i.$implicit,n=S();A(e.value.hidden||e.value.pet!==n.pets&&(e.value.pet||n.pets)?-1:0)}}let EL=(()=>{class t{constructor(e,n){this.followerService=n,this.changeAll=0,this.pets=!1,this.followerType="Follower",this.pets=e.pets,this.followers=n.followers,this.followerCap=n.followerCap,this.maxFollowerByType=n.maxFollowerByType,this.pets&&(this.followerType="Pet",this.followers=n.pets,this.followerCap=n.petsCap,this.maxFollowerByType=n.maxPetsByType)}getTotalAssingments(){let e=0;for(const n in this.followerService.jobs)!this.followerService.jobs[n].hidden&&(this.followerService.jobs[n].pet===this.pets||!this.followerService.jobs[n].pet&&!this.pets)&&(this.maxFollowerByType[n]?e+=this.maxFollowerByType[n]:0!==this.maxFollowerByType[n]&&(e+=1e3));return e}changeAllChanged(e){e.target instanceof HTMLInputElement&&(this.changeAll=parseInt(e.target.value))}changeAllClicked(){for(const e in this.followerService.jobs)this.pets&&this.followerService.jobs[e].pet?this.followerService.setMaxPets(e,this.changeAll):!this.pets&&!this.followerService.jobs[e].pet&&this.followerService.setMaxFollowers(e,this.changeAll)}keepValueChanged(e,n){e.target instanceof HTMLInputElement&&(this.pets?this.followerService.setMaxPets(n,parseInt(e.target.value)):this.followerService.setMaxFollowers(n,parseInt(e.target.value)))}sortAscSwitch(){this.followerService.sortAscending=!this.followerService.sortAscending}sortOrderChanged(e){e.target instanceof HTMLSelectElement&&(this.followerService.sortField=e.target.value,this.followerService.sortFollowers(this.followerService.sortAscending,this.pets))}dismissAllClicked(){this.followerService.dismissAllFollowers(void 0,this.pets)}static{this.\u0275fac=function(n){return new(n||t)(T(eu),T(Gt))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-follower-management-panel"]],decls:43,vars:15,consts:[[1,"darkMode"],[1,"topInfo"],[3,"click"],["tooltip","Set a number to change all of the limits to."],["min","0","max","1000","value","0","type","number",1,"inputBox",3,"change"],["name","sortOrder","id","sortOrder",3,"change"],[3,"selected"],["value","Job",3,"selected"],["type","checkbox","id","followerSort",3,"change","checked"],["for","followerSort"],[1,"scrollingDiv"],[3,"tooltip"],["min","0","max","1000","type","number",1,"inputBox",3,"change","value"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"h3"),y(2),f(),L(3,"hr"),h(4,"div",1)(5,"span"),y(6),f(),h(7,"span")(8,"button",2),x("click",function(){return r.dismissAllClicked()}),y(9),f()()(),h(10,"div",1)(11,"span",3),y(12,"Set limit on all to "),h(13,"input",4),x("change",function(a){return r.changeAllChanged(a)}),f(),y(14),h(15,"button",2),x("click",function(){return r.changeAllClicked()}),y(16,"Change All"),f()()(),h(17,"div",1)(18,"span"),y(19," Sort followers by "),h(20,"select",5),x("change",function(a){return r.sortOrderChanged(a)}),h(21,"option",6),y(22,"Name"),f(),h(23,"option",7),y(24,"Type"),f(),h(25,"option",6),y(26,"Age"),f(),h(27,"option",6),y(28,"Power"),f(),h(29,"option",6),y(30,"Remaining Life"),f()(),h(31,"span")(32,"input",8),x("change",function(){return r.sortAscSwitch()}),f(),h(33,"label",9),y(34,"Sort Ascending"),f()()()(),h(35,"div",10)(36,"table"),be(37,Woe,1,1,null,null,_t),O(39,"keyvalue"),f()(),L(40,"br"),h(41,"span"),y(42),f()()),2&n&&(v(2),j("Manage ",r.followerType,"s"),v(4),No(" You are currently supporting ",r.followers.length," ",r.followerType,"(s). You can support up to ",r.followerCap,". "),v(3),j("Dismiss All ",r.followerType,"s"),v(5),j(" ",r.followerType,"(s). "),v(7),z("selected","Name"===r.followerService.sortField),v(2),z("selected","Job"===r.followerService.sortField),v(2),z("selected","Age"===r.followerService.sortField),v(2),z("selected","Power"===r.followerService.sortField),v(2),z("selected","Remaining Life"===r.followerService.sortField),v(3),z("checked",r.followerService.sortAscending),v(5),Se(V(39,13,r.followerService.jobs)),v(5),j("Total assignments: ",r.getTotalAssingments(),""))},dependencies:()=>[MS,rO,aO,Cm,Vr,et],styles:[".scrollingDiv[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto}td[_ngcontent-%COMP%]{border-bottom:1px var(--tableDividerColor) solid;vertical-align:top}td[_ngcontent-%COMP%]:last-child{text-align:center}input[type=number][_ngcontent-%COMP%]{width:80px}.topInfo[_ngcontent-%COMP%]{margin-top:4px;padding-bottom:4px;border-bottom:1px var(--tableDividerColor) solid}"]})}}return t})();function Goe(t,i){if(1&t){const e=G();h(0,"mat-icon",5),x("click",function(){return M(e),I(S().followerOptionsClicked())}),y(1," settings "),f()}}function Yoe(t,i){if(1&t){const e=G();h(0,"div",4),O(1,"titlecase"),O(2,"bigNumber"),O(3,"bigNumber"),O(4,"bigNumber"),h(5,"span",6),y(6),O(7,"titlecase"),f(),h(8,"span",7),y(9),O(10,"camelToTitle"),f(),h(11,"span",7),y(12),O(13,"bigNumber"),O(14,"bigNumber"),f(),h(15,"mat-icon",8),x("click",function(r){const o=M(e).$implicit;return I(S().dismissFollower(r,o))}),y(16," cancel "),f()()}if(2&t){const e=i.$implicit,n=S();Xf("tooltip","",e.name,"<br>is a level ",e.power," ",V(1,15,e.job),".<br>",n.followerService.jobs[e.job].description,"<br>\n        ",e.name," has followed you for ",V(2,17,e.age/365)," years and will serve for another ",V(3,19,(e.lifespan-e.age)/365)," more years.<br>Daily cost: ",V(4,21,e.cost),""),v(6),j(" ",V(7,23,e.name)," "),v(3),qi(" lv.",e.power," ",V(10,25,e.job)," "),v(3),qi(" Age: ",V(13,27,e.age/365)," / ",V(14,29,e.lifespan/365)," "),v(3),z("tooltip",n.followerService.autoDismissUnlocked?"Dismiss this follower.<br>\n                Shift-click to automatically dismiss everyone of this job type.<br>\n                Ctrl-click to set the current number as the limit without dismissing.":"Dismiss this follower.")}}let Koe=(()=>{class t{constructor(e,n,r,o){this.characterService=e,this.dialog=n,this.gameStateService=r,this.followerService=o,this.popupCounter=0,this.originalOrder=()=>0}followerOptionsClicked(){this.dialog.open(EL,{width:"700px",data:{pets:!1},autoFocus:!1})}dismissFollower(e,n){e.preventDefault(),e.stopPropagation(),(e.ctrlKey||e.metaKey)&&this.followerService.autoDismissUnlocked?this.followerService.limitFollower(n):e.shiftKey&&this.followerService.autoDismissUnlocked?this.followerService.dismissAllFollowers(n):this.followerService.dismissFollower(n)}static{this.\u0275fac=function(n){return new(n||t)(T(Ie),T(Ht),T(Ut),T(Gt))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-followers-panel"]],decls:9,vars:4,consts:[[3,"ngClass"],["aria-label","Manage Followers","aria-hidden","false","tooltip","Manage your followers.",1,"iconButton","optionsIcon"],[1,"followersContainer"],[1,"followerPanel"],[1,"followerLine",3,"tooltip"],["aria-label","Manage Followers","aria-hidden","false","tooltip","Manage your followers.",1,"iconButton","optionsIcon",3,"click"],[1,"followerName","followerCell"],[1,"followerCell"],["aria-label","Dismiss Follower","aria-hidden","false",1,"smallerIcon",3,"click","tooltip"]],template:function(n,r){1&n&&(h(0,"h3")(1,"span",0),y(2),f(),H(3,Goe,2,0,"mat-icon",1),f(),h(4,"div",2)(5,"div",3),be(6,Yoe,17,31,"div",4,_t),f()(),L(8,"br")),2&n&&(v(),z("ngClass",r.followerService.followersMaxed),v(),qi(" \xa0(",r.followerService.followers.length," / ",r.followerService.followerCap,") "),v(),A(r.followerService.autoDismissUnlocked?3:-1),v(3),Se(r.followerService.followers))},dependencies:()=>[fi,Lt,Ai,Vr,It,et],styles:["mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;margin:2px;vertical-align:middle;color:var(--bodyText)}span[_ngcontent-%COMP%]{font-size:14px}.followersContainer[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto}.followerPanel[_ngcontent-%COMP%]{margin-left:4px;margin-right:4px}.optionsIcon[_ngcontent-%COMP%]{float:right}.UNMAXED[_ngcontent-%COMP%]{color:var(--bodyText)}.MAXED[_ngcontent-%COMP%]{color:var(--textHighlight)}.smallerIcon[_ngcontent-%COMP%]{float:right;height:12px;width:12px;margin-top:1px;margin-bottom:0;vertical-align:top;font-size:12px}.followerName[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:inline-block}.followerCell[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}.followerLine[_ngcontent-%COMP%]{border-bottom:1px var(--tableDividerColor) solid;display:flex;flex-direction:row}.attributeValueCell[_ngcontent-%COMP%]{position:relative}.popupText[_ngcontent-%COMP%]{position:absolute;transform:translateZ(0);color:var(--popupTextColor);z-index:10000;font-size:x-small}"]})}}return t})();const Qoe=(t,i)=>({popupTextColor:t,popupTextNegativeColor:i});function Zoe(t,i){if(1&t&&(h(0,"span"),y(1),O(2,"number"),f()),2&t){const e=S();v(),j(", ",pr(2,1,e.characterService.displayAge()%365,"1.0-0")," days")}}function Xoe(t,i){1&t&&(h(0,"span"),y(1,"You expect to live forever."),f())}function Joe(t,i){if(1&t&&(h(0,"span"),y(1),O(2,"bigNumber"),f()),2&t){const e=S();v(),j("You expect to live ",V(2,1,e.characterService.displayLifespan()/365)," years.")}}function eae(t,i){1&t&&(h(0,"span"),y(1,"+"),f())}function tae(t,i){if(1&t){const e=G();h(0,"span",14),x("@popupText.done",function(){return M(e),I(S().animationDoneEvent())}),H(1,eae,2,0,"span"),y(2),O(3,"bigNumber"),f()}if(2&t){const e=i.$implicit;z("ngClass",Tn(6,Qoe,e>0,e<0))("@popupText",e),v(),A(e>0?1:-1),v(),Fe(V(3,4,e))}}function iae(t,i){if(1&t&&(h(0,"div",15),y(1),O(2,"bigNumber"),f()),2&t){const e=S();v(),j("",V(2,1,e.characterService.hellMoney)," Hell Money")}}function nae(t,i){if(1&t&&(h(0,"span"),y(1),O(2,"bigNumber"),f()),2&t){const e=S();v(),qi("",V(2,2,e.homeService.land)," Empty ",1===e.homeService.land?"Plot":"Plots"," of Land")}}let rae=(()=>{class t{constructor(){this.healthService=_(iS),this.characterService=_(Ie),this.homeService=_(zt),this.Math=Math}animationDoneEvent(){for(;this.healthService.moneyUpdates.length>0;)this.healthService.moneyUpdates.pop()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ne({type:t,selectors:[["app-health-panel"]],decls:63,vars:51,consts:[[1,"healthContainer"],[1,"flexColumn"],[1,"statusRow"],[1,"statusCell"],[3,"tooltip"],[1,"statusCell","health",3,"tooltip"],[1,"progress-bar",3,"ngClass"],[1,"statusCell","stamina",3,"tooltip"],[1,"statusCell","nutrition",3,"tooltip"],[1,"statusCell","qi",3,"tooltip"],[1,"flexColumn","lastColumn"],[1,"moneyLabelColumn"],[1,"moneyContainer"],[1,"moneyColumn"],[1,"popupText",3,"ngClass"],["tooltip","Money accepted as legal tender in hell.",1,"moneyColumn"]],template:function(n,r){1&n&&(h(0,"div",0),L(1,"app-yin-yang"),h(2,"div",1)(3,"div",2)(4,"div",3)(5,"span"),y(6),O(7,"bigNumber"),f(),H(8,Zoe,3,4,"span"),h(9,"span"),y(10," old."),f()(),h(11,"div",3),H(12,Xoe,2,0,"span")(13,Joe,3,3,"span"),h(14,"mat-icon",4),y(15,"timer"),f()()(),h(16,"div",2)(17,"div",5)(18,"div")(19,"span"),y(20,"Health"),f()(),h(21,"div",6),O(22,"bigNumber"),O(23,"bigNumber"),L(24,"span"),f()(),h(25,"div",7)(26,"div")(27,"span"),y(28,"Stamina"),f()(),h(29,"div",6),O(30,"bigNumber"),O(31,"bigNumber"),L(32,"span"),f()(),h(33,"div",8)(34,"div")(35,"span"),y(36,"Nutrition"),f()(),h(37,"div",6),O(38,"bigNumber"),O(39,"bigNumber"),L(40,"span"),f()(),h(41,"div",9)(42,"div")(43,"span"),y(44,"Qi"),f()(),h(45,"div",6),O(46,"bigNumber"),O(47,"bigNumber"),L(48,"span"),f()()()(),h(49,"div",10)(50,"div",11)(51,"span"),y(52,"Wealth:"),f()(),h(53,"div",12)(54,"div",13)(55,"div")(56,"span"),y(57),O(58,"bigNumber"),f(),be(59,tae,4,9,"span",14,_t),f(),H(61,iae,3,3,"div",15)(62,nae,3,4,"span"),f()()()()),2&n&&(v(6),j("You are ",V(7,31,r.characterService.displayAge()/365)," years"),v(2),A(r.characterService.displayAge()<365e4?8:-1),v(4),A(r.characterService.immortal?12:13),v(2),re("tooltip",r.characterService.lifespanTooltip),v(3),re("tooltip",r.characterService.status.health.description),v(4),z("ngClass",r.healthService.flashHealth?"flash":""),Me("value",V(22,33,r.Math.floor(r.characterService.immortal&&r.characterService.status.health.displayValue()<0?0:r.characterService.status.health.displayValue())))("max",V(23,35,r.Math.floor(r.characterService.status.health.displayMax()))),v(3),Dt("width",100*r.Math.floor(r.characterService.immortal&&r.characterService.status.health.displayValue()<0?0:r.characterService.status.health.displayValue())/r.Math.floor(r.characterService.status.health.displayMax()),"%"),v(),re("tooltip",r.characterService.status.stamina.description),v(4),z("ngClass",r.healthService.flashStamina?"flash":""),Me("value",V(30,37,r.Math.floor(r.characterService.immortal&&r.characterService.status.stamina.displayValue()<0?0:r.characterService.status.stamina.displayValue())))("max",V(31,39,r.Math.floor(r.characterService.status.stamina.displayMax()))),v(3),Dt("width",100*r.Math.floor(r.characterService.immortal&&r.characterService.status.stamina.displayValue()<0?0:r.characterService.status.stamina.displayValue())/r.Math.floor(r.characterService.status.stamina.displayMax()),"%"),v(),re("tooltip",r.characterService.status.nutrition.description),v(4),z("ngClass",r.healthService.flashNutrition?"flash":""),Me("value",V(38,41,r.Math.floor(r.characterService.status.nutrition.displayValue())))("max",V(39,43,r.Math.floor(r.characterService.status.nutrition.displayMax()))),v(3),Dt("width",100*r.Math.floor(r.characterService.status.nutrition.displayValue())/r.Math.floor(r.characterService.status.nutrition.displayMax()),"%"),v(),re("tooltip",r.characterService.status.qi.description),v(4),z("ngClass",r.healthService.flashNutrition?"flash":""),Me("value",V(46,45,r.Math.floor(r.characterService.status.qi.displayValue())))("max",V(47,47,r.Math.floor(r.characterService.status.qi.displayMax()))),v(3),Dt("width",100*r.Math.floor(r.characterService.status.qi.displayValue())/r.Math.floor(r.characterService.status.qi.displayMax()),"%"),v(9),j("",V(58,49,r.characterService.displayMoney())," Taels"),v(2),Se(r.healthService.moneyUpdates),v(2),A(r.characterService.hellMoney>0?61:-1),v(),A(r.homeService.land>0?62:-1))},dependencies:()=>[Lt,fi,yl,It,et,aF],styles:[".progress-bar[_ngcontent-%COMP%]{vertical-align:-.4em;margin-left:4px;margin-right:4px}.health[_ngcontent-%COMP%] > .progress-bar[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background-color:var(--healthColor)}.stamina[_ngcontent-%COMP%] > .progress-bar[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background-color:var(--staminaColor)}.nutrition[_ngcontent-%COMP%] > .progress-bar[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background-color:var(--nutritionColor)}.qi[_ngcontent-%COMP%] > .progress-bar[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background-color:var(--qiColor)}.statusRow[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:2px}.flexColumn[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:4px}.lastColumn[_ngcontent-%COMP%]{flex-grow:1}.statusCell[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}td[_ngcontent-%COMP%]{font-size:12px}.flash[_ngcontent-%COMP%]{box-shadow:0 0 5px 5px #48abe0;transition:box-shadow ease-out .5s}.healthContainer[_ngcontent-%COMP%]{min-height:90px;min-width:600px;overflow-y:hidden;width:100%;height:100%;display:flex;flex-direction:row;flex-grow:1}.popupTextColor[_ngcontent-%COMP%]{color:var(--popupTextColor)}.popupTextNegativeColor[_ngcontent-%COMP%]{color:red}.popupText[_ngcontent-%COMP%]{position:absolute;transform:translateZ(0);z-index:10000;font-size:x-small}mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;margin-left:1px;margin-right:1px;vertical-align:middle;color:var(--bodyText)}"],data:{animation:[Em("popupText",[e0("in",jn({position:"fixed"})),Fd(":leave",[Rd(1e3,NA([jn({transform:"translate(0%, 0%)"}),jn({transform:"translate(0%, -150%)"})]))])])]}})}}return t})();function oae(t,i){if(1&t&&(h(0,"div")(1,"span"),y(2),f(),h(3,"span")(4,"div",3),L(5,"span"),f()()(),L(6,"br")),2&t){const e=S();v(2),j("Current Task: ",e.impossibleTaskService.tasks[e.impossibleTaskService.activeTaskIndex].name,""),v(2),Me("value",e.Math.floor(e.impossibleTaskService.taskProgress[e.impossibleTaskService.activeTaskIndex].progress))("max",e.Math.floor(e.impossibleTaskService.tasks[e.impossibleTaskService.activeTaskIndex].progressRequired)),v(),Dt("width",100*e.impossibleTaskService.taskProgress[e.impossibleTaskService.activeTaskIndex].progress/e.impossibleTaskService.tasks[e.impossibleTaskService.activeTaskIndex].progressRequired,"%")}}function aae(t,i){if(1&t&&(h(0,"span")(1,"mat-icon",5),y(2," help "),f(),y(3),f()),2&t){const e=S().$implicit;v(),re("tooltip",e.description),v(2),j(" ",e.name," ")}}function sae(t,i){1&t&&(h(0,"span"),y(1," ???????????? "),f())}function lae(t,i){if(1&t&&(h(0,"div",4),L(1,"span"),f()),2&t){const e=S().$implicit,n=S();Me("value",n.Math.floor(n.impossibleTaskService.taskProgress[e.taskType].progress))("max",n.Math.floor(e.progressRequired)),v(),Dt("width",100*n.impossibleTaskService.taskProgress[e.taskType].progress/e.progressRequired,"%")}}function cae(t,i){1&t&&(h(0,"span")(1,"mat-icon"),y(2," done "),f()())}function dae(t,i){if(1&t){const e=G();h(0,"span")(1,"button",6),x("click",function(){return M(e),I(S(2).impossibleTaskService.stopTask())}),y(2,"Stop"),f()()}}function uae(t,i){if(1&t){const e=G();h(0,"span")(1,"button",6),x("click",function(){return M(e),I(S(2).impossibleTaskService.startTask())}),y(2,"Start"),f()()}}function hae(t,i){if(1&t&&(h(0,"tr")(1,"td"),H(2,aae,4,2,"span")(3,sae,2,0,"span"),f(),h(4,"td"),H(5,lae,2,4,"div",4),f(),h(6,"td"),H(7,cae,3,0,"span")(8,dae,3,0,"span")(9,uae,3,0,"span"),f()()),2&t){const e=i.$implicit,n=S();v(2),A(n.impossibleTaskService.nextTask>=e.taskType?2:-1),v(),A(n.impossibleTaskService.nextTask<e.taskType?3:-1),v(2),A(n.impossibleTaskService.nextTask>=e.taskType?5:-1),v(2),A(n.impossibleTaskService.taskProgress[e.taskType].complete?7:-1),v(),A(n.impossibleTaskService.activeTaskIndex===e.taskType?8:-1),v(),A(-1===n.impossibleTaskService.activeTaskIndex&&n.impossibleTaskService.nextTask===e.taskType?9:-1)}}let fae=(()=>{class t{constructor(e,n,r){this.impossibleTaskService=e,this.gameStateService=n,this.activityService=r,this.Math=Math}pauseOnImpossibleFailChange(e){e.target instanceof HTMLInputElement&&(this.activityService.pauseOnImpossibleFail=e.target.checked)}static{this.\u0275fac=function(n){return new(n||t)(T(ja),T(Ut),T(bt))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-impossible-task-panel"]],decls:12,vars:2,consts:[[1,"impossibleTasksContainer"],["type","checkbox","id","pauseOnImpossibleFail",3,"change","checked"],["for","pauseOnImpossibleFail"],[1,"progress-bar"],[1,"progress-bar",2,"height","20px"],[3,"tooltip"],[3,"click"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"span")(2,"input",1),x("change",function(a){return r.pauseOnImpossibleFailChange(a)}),f(),h(3,"label",2),y(4,"Automatically pause if task related activity fails"),f()(),L(5,"hr"),H(6,oae,7,5),h(7,"div")(8,"table"),be(9,hae,10,6,"tr",null,_t),f()()(),L(11,"br")),2&n&&(v(2),z("checked",r.activityService.pauseOnImpossibleFail),v(4),A(r.impossibleTaskService.activeTaskIndex>=0?6:-1),v(3),Se(r.impossibleTaskService.tasks))},dependencies:()=>[Lt,et],styles:[".progress-bar[_ngcontent-%COMP%]{vertical-align:middle;margin-left:8px}.impossibleTasksContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-y:auto}mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;margin:2px;vertical-align:middle;color:var(--bodyText)}"]})}}return t})();function mae(t,i){1&t&&(h(0,"mat-icon",3),y(1," crisis_alert "),f())}function pae(t,i){if(1&t){const e=G();h(0,"div",2),x("click",function(){M(e);const r=S().$implicit;return I(S().locationClicked(r))}),H(1,mae,2,0,"mat-icon",3),h(2,"div"),y(3),f(),h(4,"div"),y(5),f()()}if(2&t){const e=S().$implicit,n=S();v(),A(n.locationService.troubleTarget===e?1:-1),v(2),Fe(n.locationService.locationMap[e].name),v(2),Fe(n.locationService.locationMap[e].description)}}function gae(t,i){1&t&&H(0,pae,6,3,"div",1),2&t&&A(i.$implicit!==S().locationTypeSelf?0:-1)}let vae=(()=>{class t{constructor(e){this.locationService=e,this.locationTypeSelf=E.Self}locationClicked(e){this.locationService.setTroubleLocation(this.locationService.troubleTarget===e?null:e)}static{this.\u0275fac=function(n){return new(n||t)(T(Ml))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-location-panel"]],decls:8,vars:0,consts:[[1,"locationsContainer"],[1,"itemSlot","locationEntry"],[1,"itemSlot","locationEntry",3,"click"],["tooltip","When you look for trouble or herbs, you will look for them here."]],template:function(n,r){1&n&&(h(0,"div",0)(1,"span"),y(2,"Available Locations"),f(),L(3,"br"),h(4,"div"),be(5,gae,1,1,null,null,_t),f()(),L(7,"br")),2&n&&(v(5),Se(r.locationService.unlockedLocations))},dependencies:()=>[Lt,et],styles:[".locationsContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:0;overflow-y:auto}.locationEntry[_ngcontent-%COMP%]{overflow:hidden;position:relative;margin:4px;padding:4px}"]})}}return t})();function yae(t,i){if(1&t){const e=G();h(0,"mat-icon",5),x("click",function(){return M(e),I(S().followerOptionsClicked())}),y(1," settings "),f()}}function _ae(t,i){if(1&t){const e=G();h(0,"div",4)(1,"span",6),O(2,"titlecase"),O(3,"bigNumber"),O(4,"bigNumber"),O(5,"bigNumber"),y(6),O(7,"titlecase"),O(8,"camelToTitle"),f(),h(9,"mat-icon",7),x("click",function(r){const o=M(e).$implicit;return I(S().dismissFollower(r,o))}),y(10," cancel "),f()()}if(2&t){const e=i.$implicit,n=S();v(),Xf("tooltip","",e.name," is a level ",e.power," ",V(2,13,e.job),".<br>",n.followerService.jobs[e.job].description,"<br>\n                ",e.name," has followed you for ",V(3,15,e.age/365)," years and will serve for another ",V(4,17,(e.lifespan-e.age)/365)," more years.<br>Daily cost: ",V(5,19,e.cost),""),v(5),No(" ",V(7,21,e.name)," (lv.",e.power," ",V(8,23,e.job),") "),v(3),z("tooltip",n.followerService.autoDismissUnlocked?"Dismiss this pet.<br>\n                Shift-click to automatically dismiss every pet of this type.<br>\n                Ctrl-click to set the current number as the limit without dismissing.":"Dismiss this pet.")}}let bae=(()=>{class t{constructor(e,n){this.dialog=e,this.followerService=n}followerOptionsClicked(){this.dialog.open(EL,{width:"700px",data:{pets:!0},autoFocus:!1})}dismissFollower(e,n){e.preventDefault(),e.stopPropagation(),(e.ctrlKey||e.metaKey)&&this.followerService.autoDismissUnlocked?this.followerService.limitFollower(n):e.shiftKey&&this.followerService.autoDismissUnlocked?this.followerService.dismissAllFollowers(n,!0):this.followerService.dismissFollower(n)}static{this.\u0275fac=function(n){return new(n||t)(T(Ht),T(Gt))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-pets-panel"]],decls:9,vars:4,consts:[[3,"ngClass"],["aria-label","Manage Pets","aria-hidden","false","tooltip","Manage your pets.",1,"iconButton","optionsIcon"],[1,"followersContainer"],[1,"followerPanel"],[1,"attributeLine"],["aria-label","Manage Pets","aria-hidden","false","tooltip","Manage your pets.",1,"iconButton","optionsIcon",3,"click"],[1,"followerName",3,"tooltip"],["aria-label","Dismiss Pet","aria-hidden","false",1,"smallerIcon",3,"click","tooltip"]],template:function(n,r){1&n&&(h(0,"h3")(1,"span",0),y(2),f(),H(3,yae,2,0,"mat-icon",1),f(),h(4,"div",2)(5,"div",3),be(6,_ae,11,25,"div",4,_t),f()(),L(8,"br")),2&n&&(v(),z("ngClass",r.followerService.followersMaxed),v(),qi(" \xa0(",r.followerService.pets.length," / ",r.followerService.petsCap,") "),v(),A(r.followerService.autoDismissUnlocked?3:-1),v(3),Se(r.followerService.pets))},dependencies:()=>[fi,Lt,Ai,Vr,It,et],styles:["mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;margin:2px;vertical-align:middle}span[_ngcontent-%COMP%]{font-size:14px}.followersContainer[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto}.followerPanel[_ngcontent-%COMP%]{margin-left:4px;margin-right:4px}.optionsIcon[_ngcontent-%COMP%]{float:right}.UNMAXED[_ngcontent-%COMP%]{color:var(--bodyText)}.MAXED[_ngcontent-%COMP%]{color:var(--textHighlight)}.smallerIcon[_ngcontent-%COMP%]{float:right;height:12px;width:12px;margin-top:1px;margin-bottom:0;vertical-align:top;font-size:12px}.followerName[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:inline-block}.attributeLine[_ngcontent-%COMP%]{border-bottom:1px var(--tableDividerColor) solid}.attributeValueCell[_ngcontent-%COMP%]{position:relative}.popupText[_ngcontent-%COMP%]{position:absolute;transform:translateZ(0);color:var(--popupTextColor);z-index:10000;font-size:x-small}"]})}}return t})();const Sae=t=>({lockedActivity:t}),wae=(t,i)=>i.name+""+i.level;function Cae(t,i){}function kae(t,i){if(1&t){const e=G();h(0,"div",5),x("click",function(){M(e);const r=S().$implicit;return I(S().doActivity(r))}),h(1,"div",6)(2,"span"),y(3),f()(),h(4,"div",7)(5,"span",8)(6,"mat-icon",9),x("click",function(r){M(e);const o=S().$implicit;return I(S().showActivity(r,o))}),y(7," help "),f()()()()}if(2&t){const e=S().$implicit;z("ngClass",dt(3,Sae,!e.unlocked))("tabindex",0),v(3),Fe(e.name[e.level])}}function Dae(t,i){if(1&t&&H(0,kae,8,5,"div",4),2&t){const e=i.$implicit;A(e.discovered||e.unlocked?0:-1)}}let Tae=(()=>{class t{constructor(e,n,r,o,a,s,l){this.gameStateService=e,this.activityService=n,this.characterService=r,this.hellService=o,this.impossibleTaskService=a,this.dialog=s,this.mainLoopService=l,this.dragPositionX=0,this.dragPositionY=0,this.Math=Math}doActivity(e){e.consequence[e.level]()}showActivity(e,n){e.stopPropagation();const o={titleText:n.name[n.level],bodyText:n.description[n.level]+"\n\n"+n.consequenceDescription[n.level],imageFile:""};n.imageBaseName&&(o.imageFile="assets/images/activities/"+n.imageBaseName+n.level+".png"),this.dialog.open(bu,{width:"400px",data:o,autoFocus:!1})}static{this.\u0275fac=function(n){return new(n||t)(T(Ut),T(bt),T(Ie),T(We),T(ja),T(Ht),T(tt))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-portal-panel"]],decls:8,vars:1,consts:[[1,"portalsHeader"],[1,"portalsContainer"],[1,"overflow"],[1,"activityGrid"],[1,"activitySlot",3,"ngClass","tabindex"],[1,"activitySlot",3,"click","ngClass","tabindex"],["tooltip","Take this portal",1,"activityLabel"],[1,"activityButtons"],[1,"floatRight"],["tooltip","What is this activity?<br>Click to learn all about it!","aria-label","Help","aria-hidden","false",1,"iconButton",3,"click"]],template:function(n,r){1&n&&(h(0,"h3",0),H(1,Cae,0,0),f(),h(2,"div",1)(3,"div",2)(4,"div",3),be(5,Dae,1,1,null,null,wae),f()()(),L(7,"br")),2&n&&(v(),A(r.hellService.inHell?1:-1),v(4),Se(r.activityService.portals))},dependencies:()=>[fi,Lt,et],styles:['td[_ngcontent-%COMP%]{font-size:12px;padding-left:6px;padding-right:2px;position:relative;border-bottom:1px solid var(--tableDividerColor)}td[_ngcontent-%COMP%]:not(:last-child):before{content:"";position:absolute;width:1px;background:var(--tableDividerColor);right:0;top:10%;bottom:10%}.portalsHeader[_ngcontent-%COMP%]{display:flex}.portalsContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:4px;overflow:auto;width:100%;height:100%}.activityGrid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:3px 0;gap:3px;overflow-anchor:none}.activitySlot[_ngcontent-%COMP%]{position:relative;border-radius:4px;border:1px solid var(--panelBorder);padding:2px;border-spacing:0px;cursor:pointer;background-color:var(--itemSlotColor);color:var(--bodyText);box-sizing:border-box;width:160px;height:75px;display:flex;flex-direction:column}button[_ngcontent-%COMP%]{font-size:12px;min-width:130px}.noWrap[_ngcontent-%COMP%]{white-space:nowrap;width:100%}.standardHeader[_ngcontent-%COMP%]{flex:1;white-space:nowrap}.customHeader[_ngcontent-%COMP%]{flex:4;display:inline-block;width:100%;text-align:center}.projectionOnly[_ngcontent-%COMP%]{border:1px solid var(--itemSlotHighlight);background-color:var(--qiColor)}.lockedActivity[_ngcontent-%COMP%]{background-color:var(--disabledActivity)}.activityButton[_ngcontent-%COMP%]{white-space:normal;max-width:150px}.progress-bar[_ngcontent-%COMP%]{height:24px;vertical-align:-.7em;font-size:11px;width:100px}.activityLabel[_ngcontent-%COMP%]{font-size:120%;flex-grow:1}.activityButtons[_ngcontent-%COMP%]{flex-grow:0}.floatRight[_ngcontent-%COMP%]{float:right}']})}}return t})();function xae(t,i){if(1&t&&(h(0,"div"),y(1),O(2,"camelToTitle"),f()),2&t){const e=S(2).$implicit;v(),j("Damage increases with ",V(2,1,e.attribute),"")}}function Eae(t,i){if(1&t&&(h(0,"div"),y(1),f()),2&t){const e=S(2).$implicit;v(),j("Damage multiplier: ",e.extraMultiplier,"")}}function Mae(t,i){if(1&t&&(h(0,"div"),y(1),f()),2&t){const e=S(2).$implicit;v(),j("Uses ",e.staminaCost," stamina")}}function Iae(t,i){if(1&t&&(h(0,"div"),y(1),f()),2&t){const e=S(2).$implicit;v(),j("Uses ",e.qiCost," Qi")}}function Aae(t,i){if(1&t&&(h(0,"div"),y(1),f()),2&t){const e=S(2).$implicit;v(),j("Uses ",e.healthCost," health")}}function Pae(t,i){if(1&t){const e=G();h(0,"button",4),x("click",function(){M(e);const r=S(2).$implicit;return I(S().battleService.forsakeTechnique(r))}),y(1," Forsake This Technique "),f()}}function Rae(t,i){if(1&t&&(h(0,"div",1)(1,"div",2),y(2),f(),h(3,"div"),y(4),f(),h(5,"div"),y(6),f(),H(7,xae,3,3,"div")(8,Eae,2,1,"div"),h(9,"div"),y(10),f(),H(11,Mae,2,1,"div")(12,Iae,2,1,"div")(13,Aae,2,1,"div"),h(14,"div"),H(15,Pae,2,0,"button",3),f()()),2&t){const e=S().$implicit;v(2),Fe(e.name),v(2),Fe(e.description),v(2),j("Base Damage: ",e.baseDamage,""),v(),A(e.attribute?7:-1),v(),A(e.extraMultiplier?8:-1),v(2),j("Activates every ",e.ticksRequired," combat ticks"),v(),A(e.staminaCost?11:-1),v(),A(e.qiCost?12:-1),v(),A(e.healthCost?13:-1),v(2),A(e.familyTechnique?15:-1)}}function Fae(t,i){1&t&&H(0,Rae,16,10,"div",1),2&t&&A(i.$implicit.unlocked?0:-1)}let Oae=(()=>{class t{constructor(e){this.battleService=e}static{this.\u0275fac=function(n){return new(n||t)(T(Vt))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-technique-panel"]],decls:5,vars:0,consts:[[1,"techniqueContainer"],[1,"itemSlot","techniqueEntry"],[1,"techniqueName"],["tooltip","Forsake this technique to make room in your heart to develop another."],["tooltip","Forsake this technique to make room in your heart to develop another.",3,"click"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"div"),be(2,Fae,1,1,null,null,_t),f()(),L(4,"br")),2&n&&(v(2),Se(r.battleService.techniques))},dependencies:()=>[et,Vr],styles:[".techniqueContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:0;overflow-y:auto}.techniqueEntry[_ngcontent-%COMP%]{overflow:hidden;position:relative;margin:4px;padding:4px}.techniqueName[_ngcontent-%COMP%]{font-size:large}"]})}}return t})();const zl=t=>({iconActive:t});function Lae(t,i){if(1&t){const e=G();h(0,"mat-icon",10),x("click",function(){return M(e),I(S().fastClick())}),y(1," fast_forward "),f()}if(2&t){const e=S();z("ngClass",dt(1,zl,5===e.mainLoopService.tickDivider&&!e.mainLoopService.pause))}}function Nae(t,i){if(1&t){const e=G();h(0,"mat-icon",11),x("click",function(){return M(e),I(S().fasterClick())}),y(1," skip_next "),f()}if(2&t){const e=S();z("ngClass",dt(1,zl,2===e.mainLoopService.tickDivider&&!e.mainLoopService.pause))}}function Bae(t,i){if(1&t){const e=G();h(0,"mat-icon",12),x("click",function(){return M(e),I(S().fastestClick())}),y(1," bolt "),f()}if(2&t){const e=S();z("ngClass",dt(1,zl,1===e.mainLoopService.tickDivider&&!e.mainLoopService.pause))}}let Hae=(()=>{class t{constructor(e,n){this.gameStateService=e,this.dialog=n,this.activityService=_(bt),this.battleService=_(Vt),this.characterService=_(Ie),this.mainLoopService=_(tt),this.unlockFastSpeed=!1,this.unlockFasterSpeed=!1,this.unlockFastestSpeed=!1,this.dragPositionX=0,this.dragPositionY=0}pauseClick(){this.mainLoopService.pause?this.mainLoopService.tick():this.mainLoopService.pause=!0}slowClick(){this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=40}standardClick(){this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=10}fastClick(){this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=5}fasterClick(){this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=2}fastestClick(){this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=1}timeOptions(){this.dialog.open(PS,{width:"700px",data:{someField:"foo"},autoFocus:!1})}useSavedTicks(e){e.target instanceof HTMLInputElement&&(this.mainLoopService.useBankedTicks=e.target.checked)}static{this.\u0275fac=function(n){return new(n||t)(T(Ut),T(Ht))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-time-panel"]],decls:16,vars:16,consts:[[1,"timeContainer"],["tooltip","Pause the game.<br>\n      Hotkey: Alt-0 to pause or spacebar to toggle.<br>\n      Clicking this again while paused will step time forward a single day.<br>\n      When paused, you can also advance one day by pressing the Enter key.","aria-label","Pause","aria-hidden","false",1,"iconButton",3,"click","ngClass"],["tooltip","Slow Game Speed (1 day/sec).<br>\n      Hotkey: Alt-1","aria-label","Slow Speed","aria-hidden","false",1,"iconButton",3,"click","ngClass"],["tooltip","Standard Game Speed.<br>\n      Hotkey: Alt-2","aria-label","Standard Speed","aria-hidden","false",1,"iconButton",3,"click","ngClass"],["tooltip","Fast Game Speed.<br>\n      Hotkey: Alt-3","aria-label","Fast Speed","aria-hidden","false",1,"iconButton",3,"ngClass"],["tooltip","Faster Game Speed.<br>\n      Hotkey: Alt-4","aria-label","Faster Speed","aria-hidden","false",1,"iconButton",3,"ngClass"],["tooltip","Fastest Game Speed.<br>\n      Hotkey: Alt-5","aria-label","Fastest Speed","aria-hidden","false",1,"iconButton",3,"ngClass"],["tooltip","Banked time accrues slowly as you play or more quickly when you pause or take a break.<br>You can use banked time to make each moment feel as though ten have passed."],["type","checkbox","id","useSavedTicks",3,"change","checked"],["for","useSavedTicks"],["tooltip","Fast Game Speed.<br>\n      Hotkey: Alt-3","aria-label","Fast Speed","aria-hidden","false",1,"iconButton",3,"click","ngClass"],["tooltip","Faster Game Speed.<br>\n      Hotkey: Alt-4","aria-label","Faster Speed","aria-hidden","false",1,"iconButton",3,"click","ngClass"],["tooltip","Fastest Game Speed.<br>\n      Hotkey: Alt-5","aria-label","Fastest Speed","aria-hidden","false",1,"iconButton",3,"click","ngClass"]],template:function(n,r){1&n&&(h(0,"div",0)(1,"div")(2,"mat-icon",1),x("click",function(){return r.pauseClick()}),y(3," pause "),f(),h(4,"mat-icon",2),x("click",function(){return r.slowClick()}),y(5," slow_motion_video "),f(),h(6,"mat-icon",3),x("click",function(){return r.standardClick()}),y(7," play_arrow "),f(),H(8,Lae,2,3,"mat-icon",4)(9,Nae,2,3,"mat-icon",5)(10,Bae,2,3,"mat-icon",6),f(),h(11,"div",7)(12,"input",8),x("change",function(a){return r.useSavedTicks(a)}),f(),h(13,"label",9),y(14),O(15,"bigNumber"),f()()()),2&n&&(v(2),z("ngClass",dt(10,zl,r.mainLoopService.pause)),v(2),z("ngClass",dt(12,zl,40===r.mainLoopService.tickDivider&&!r.mainLoopService.pause)),v(2),z("ngClass",dt(14,zl,10===r.mainLoopService.tickDivider&&!r.mainLoopService.pause)),v(2),A(r.mainLoopService.unlockFastSpeed?8:-1),v(),A(r.mainLoopService.unlockFasterSpeed?9:-1),v(),A(r.mainLoopService.unlockFastestSpeed?10:-1),v(2),z("checked",r.mainLoopService.useBankedTicks),v(2),j("Use banked time to accelerate reality. ",V(15,8,r.mainLoopService.bankedTicks)," banked moments left."))},dependencies:()=>[Lt,fi,It,et],styles:[".timeContainer[_ngcontent-%COMP%]{color:var(--bodyText)}mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;margin:4px 1px;vertical-align:middle}.iconActive[_ngcontent-%COMP%]{color:var(--panelBackground);background:var(--bodyText)}.disabled[_ngcontent-%COMP%]{background-color:var(--disabledActivity)}input[_ngcontent-%COMP%]{vertical-align:middle}.spaceLeft[_ngcontent-%COMP%]{margin-left:16px}.floatRight[_ngcontent-%COMP%]{float:right}label[_ngcontent-%COMP%]{font-size:small;vertical-align:text-top}"]})}}return t})();const Vae=(t,i)=>i.name+i.progress;function qae(t,i){1&t&&(h(0,"div")(1,"span"),y(2," You are not in hell. "),f()())}function jae(t,i){if(1&t&&(h(0,"span")(1,"div",1),L(2,"span"),f()()),2&t){const e=S(2);v(),Me("value",e.Math.floor(e.hellService.hells[e.hellService.currentHell].progress()))("max",e.Math.floor(e.hellService.hells[e.hellService.currentHell].progressMax())),v(),Dt("width",100*e.hellService.hells[e.hellService.currentHell].progress()/e.hellService.hells[e.hellService.currentHell].progressMax(),"%")}}function Uae(t,i){if(1&t){const e=G();h(0,"span")(1,"button",2),x("click",function(){return M(e),I(S(2).hellBoss())}),y(2),f()()}if(2&t){const e=S(2);v(2),Fe(e.hellService.completedHellBosses.includes(e.hellService.currentHell)?"Beat On The Hell Lord Some More":"Challenge the Hell Lord")}}function zae(t,i){if(1&t&&(h(0,"div")(1,"span"),y(2),f()(),H(3,jae,3,4,"span")(4,Uae,3,1,"span")),2&t){const e=S();v(2),j(" You are in the ",e.hellService.hells[e.hellService.currentHell].name," "),v(),A(e.hellService.currentHell>0&&!e.hellService.completedHellTasks.includes(e.hellService.currentHell)?3:-1),v(),A(e.hellService.currentHell>0&&e.hellService.completedHellTasks.includes(e.hellService.currentHell)?4:-1)}}function $ae(t,i){if(1&t&&(h(0,"tr")(1,"td")(2,"span")(3,"mat-icon",3),y(4," help "),f(),y(5),f()(),h(6,"td")(7,"div",4),L(8,"span"),f()()()),2&t){const e=i.$implicit,n=S();v(3),re("tooltip",e.description),v(2),j(" ",e.name," "),v(2),Me("value",n.Math.floor(e.progressCache))("max",n.Math.floor(e.progressMaxCache)),v(),Dt("width",100*e.progressCache/e.progressMaxCache,"%")}}let Wae=(()=>{class t{constructor(e){this.hellService=e,this.Math=Math}hellBoss(){this.hellService.fightHellBoss()}static{this.\u0275fac=function(n){return new(n||t)(T(We))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-hell-status-panel"]],decls:7,vars:1,consts:[[1,"hellStatusContainer"],[1,"progress-bar"],[3,"click"],[3,"tooltip"],[1,"progress-bar",2,"height","20px"]],template:function(n,r){1&n&&(h(0,"div",0),H(1,qae,3,0,"div")(2,zae,5,3),h(3,"div")(4,"table"),be(5,$ae,9,6,"tr",null,Vae),f()()()),2&n&&(v(),A(r.hellService.inHell?2:1),v(4),Se(r.hellService.hells))},dependencies:()=>[Lt,et],styles:[".progress-bar[_ngcontent-%COMP%]{vertical-align:middle;margin-left:8px}.hellStatusContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-y:auto}mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;margin:2px;vertical-align:middle;color:var(--bodyText)}"]})}}return t})();const Gae=t=>({indeterminate:t}),sw=(t,i)=>({currentRow:t,disabled:i});function Yae(t,i){if(1&t){const e=G();h(0,"div")(1,"span",2),y(2,"BATTLING!!!"),f()(),h(3,"div")(4,"span"),y(5,"Your schedule will resume when the battle is over."),f()(),h(6,"div")(7,"span"),y(8,"Days will not pass, but your perception of time will decide the speed of the battle."),f()(),h(9,"div")(10,"button",3),x("click",function(){return M(e),I(S().battleService.battleMessageDismissed=!0)}),y(11,"Got it. Now let me see my schedule anyway during battles."),f()()}}function Kae(t,i){if(1&t){const e=G();h(0,"button",7),x("click",function(){return M(e),I(S(2).enableAllClick())}),y(1,"Enable All Activities"),f(),h(2,"button",7),x("click",function(){return M(e),I(S(2).disableAllClick())}),y(3,"Disable All Activities"),f()}}function Qae(t,i){if(1&t){const e=G();h(0,"tr")(1,"td"),y(2),f(),h(3,"td")(4,"div",10),L(5,"span"),f()(),h(6,"td")(7,"mat-icon",11),x("click",function(){return M(e),I(S(3).removeSpiritActivity())}),y(8,"clear"),f()()()}if(2&t){const e=S(3);v(2),Fe(e.activityService.getActivityName(e.activityService.spiritActivity)),v(2),z("ngClass",dt(2,Gae,e.activityService.spiritActivityProgress&&!e.mainLoopService.pause))}}function Zae(t,i){if(1&t){const e=G();h(0,"table",8),x("drop",function(r){return M(e),I(S(2).spiritActivityDrop(r))}),h(1,"tr")(2,"td",9),y(3," Spiritual Projection "),f()(),H(4,Qae,9,4,"tr"),f()}if(2&t){const e=S(2);v(4),A(null!==e.activityService.spiritActivity?4:-1)}}function Xae(t,i){1&t&&(h(0,"tr")(1,"td"),y(2," Add activities from the Activities panel or drag them here "),f()())}function Jae(t,i){if(1&t){const e=G();h(0,"tr",13),x("cdkDragStarted",function(){return M(e),I(S(4).dragStart())})("cdkDragEnded",function(){return M(e),I(S(4).dragEnd())})("cdkDragMoved",function(r){return M(e),I(S(4).dragMoved(r))})("cdkDragReleased",function(r){return M(e),I(S(4).dragReleased(r))}),h(1,"td",14)(2,"mat-icon",15),x("click",function(r){M(e);const o=S().$implicit;return I(S(3).showActivity(r,o.activity))}),y(3," help "),f(),y(4),f(),h(5,"td",14)(6,"div",16),L(7,"span"),f()(),h(8,"td",14)(9,"mat-icon",17),x("click",function(r){M(e);const o=S().$implicit;return I(S(3).onMinusClick(o,r))}),y(10,"remove"),f(),h(11,"mat-icon",18),x("click",function(r){M(e);const o=S().$implicit;return I(S(3).onPlusClick(o,r))}),y(12,"add"),f(),h(13,"mat-icon",19),x("click",function(){M(e);const r=S().$implicit;return I(S(3).onDisableClick(r))}),y(14,"cancel"),f(),h(15,"mat-icon",11),x("click",function(){M(e);const r=S().$implicit;return I(S(3).onRemoveClick(r))}),y(16,"clear"),f()()()}if(2&t){const e=S(),n=e.$implicit,r=e.$index,o=S(3);pt("id","activityLoopIndex",r,""),z("cdkDragData",r),v(),pt("id","activityLoopIndex0",r,""),z("ngClass",Tn(17,sw,r===o.activityService.currentIndex,n.disabled||n.userDisabled||o.battleService.enemies.length>0)),v(3),No(" ",o.activityService.getActivityName(n.activity)," (",n.repeatTimes," ",1===n.repeatTimes?"day":"days",") "),v(),pt("id","activityLoopIndex1",r,""),z("ngClass",Tn(20,sw,r===o.activityService.currentIndex,n.disabled||n.userDisabled||o.battleService.enemies.length>0)),v(2),Dt("width",100*(r!==o.activityService.currentIndex||n.disabled||n.userDisabled?n.repeatTimes:o.activityService.currentTickCount)/n.repeatTimes,"%"),v(),pt("id","activityLoopIndex2",r,""),z("ngClass",Tn(23,sw,r===o.activityService.currentIndex,n.disabled||n.userDisabled||o.battleService.enemies.length>0))}}function ese(t,i){if(1&t&&H(0,Jae,17,26,"tr",12),2&t){const e=i.$implicit;A(""!==S(3).activityService.getActivityName(e.activity)?0:-1)}}function tse(t,i){1&t&&be(0,ese,1,1,null,null,_t),2&t&&Se(S(2).activityService.activityLoop)}function ise(t,i){if(1&t){const e=G();h(0,"div",1)(1,"div",4),H(2,Kae,4,0),h(3,"mat-icon",5),x("click",function(){return M(e),I(S().scheduleOptions())}),y(4," settings "),f()(),H(5,Zae,5,1,"table",6),h(6,"table"),H(7,Xae,3,0,"tr")(8,tse,2,0),f()()}if(2&t){const e=S();v(2),A(0!==e.activityService.activityLoop.length?2:-1),v(3),A(e.characterService.qiUnlocked?5:-1),v(2),A(0===e.activityService.activityLoop.length?7:8)}}let nse=(()=>{class t{constructor(e,n){this.gameStateService=e,this.dialog=n,this.activityService=_(bt),this.battleService=_(Vt),this.characterService=_(Ie),this.mainLoopService=_(tt),this.unlockFastSpeed=!1,this.unlockFasterSpeed=!1,this.unlockFastestSpeed=!1,this.dragPositionX=0,this.dragPositionY=0}pauseClick(){this.mainLoopService.pause?this.mainLoopService.tick():this.mainLoopService.pause=!0}slowClick(){this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=40}standardClick(){this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=10}fastClick(){this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=5}fasterClick(){this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=2}fastestClick(){this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=1}scheduleOptions(){this.dialog.open(PS,{width:"700px",data:{someField:"foo"},autoFocus:!1})}onPlusClick(e,n){n.preventDefault(),n.stopPropagation();let r=1;r*=n.shiftKey||n.altKey?10:1,r*=n.ctrlKey||n.metaKey?10:1,e.repeatTimes+=r}onMinusClick(e,n){n.preventDefault(),n.stopPropagation();let r=1;r*=n.shiftKey||n.altKey?10:1,r*=n.ctrlKey||n.metaKey?10:1,e.repeatTimes-=r,e.repeatTimes<0&&(e.repeatTimes=0)}onRemoveClick(e){const n=this.activityService.activityLoop.indexOf(e);this.activityService.currentIndex>=this.activityService.activityLoop.length-1&&(this.activityService.currentIndex=0),this.activityService.activityLoop.splice(n,1)}onDisableClick(e){e.userDisabled=!e.userDisabled,e.userDisabled||this.activityService.checkRequirements(!0)}disableAllClick(){for(const e of this.activityService.activityLoop)e.userDisabled=!0}enableAllClick(){for(const e of this.activityService.activityLoop)e.userDisabled=!1}removeSpiritActivity(){this.activityService.spiritActivity=null}dragStart(){this.gameStateService.dragging=!0}dragEnd(){this.gameStateService.dragging=!1}dragMoved(e){this.dragPositionX=e.pointerPosition.x,this.dragPositionY=e.pointerPosition.y}dragReleased(e){let n,r;if(e.event instanceof MouseEvent)n=e.event.clientX,r=e.event.clientY;else{if(!(e.event instanceof TouchEvent))return;n=this.dragPositionX,r=this.dragPositionY}const o=e.source.data,a=document.elementsFromPoint(n,r);let s=this.activityService.activityLoop.length,l=!1,c=!1;for(const d of a)"activityDropDiv"===d.id?l=!0:d.id.startsWith("activityLoopIndex")?s=parseInt(d.id.substring(18)):"spiritActivity"===d.id&&(c=!0);if(l&&o>=0&&o<this.activityService.activityLoop.length)if(c)this.activityService.spiritActivity=this.activityService.activityLoop[o].activity;else{const d=this.activityService.activityLoop.splice(o,1);s>=this.activityService.activityLoop.length?this.activityService.activityLoop.push(d[0]):this.activityService.activityLoop.splice(s,0,d[0])}}spiritActivityDrop(e){e.preventDefault(),e.stopPropagation();let n=e.dataTransfer?.getData("activityloop")+"";if(""===n){if(n=e.dataTransfer?.getData("activity")+"",""===n)return;const r=parseInt(n);this.activityService.spiritActivity=r}else{const r=parseInt(n);r>=0&&r<this.activityService.activityLoop.length&&(this.activityService.spiritActivity=this.activityService.activityLoop[r].activity)}}showActivity(e,n){e.stopPropagation();const r=this.activityService.getActivityByType(n);if(null===r)return;let o=r.description[r.level]+"\n\n"+r.consequenceDescription[r.level];o+=this.activityService.getYinYangDescription(r.yinYangEffect[r.level]),r.projectionOnly&&(o+="\n\nThis activity can only be performed by a spiritual projection of yourself back in the mortal realm.");const a={titleText:r.name[r.level],bodyText:o,imageFile:""};r.imageBaseName&&(a.imageFile="assets/images/activities/"+r.imageBaseName+r.level+".png"),this.dialog.open(bu,{width:"400px",data:a,autoFocus:!1})}static{this.\u0275fac=function(n){return new(n||t)(T(Ut),T(Ht))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-schedule-panel"]],decls:4,vars:1,consts:[["id","activityDropDiv",1,"dropAccepter"],["cdkDropList","","cdkDropListSortingDisabled","",1,"overflow"],[1,"battleWarning"],[3,"click"],[1,"headerDiv"],["tooltip","Schedule Options","aria-label","Schedule Options","aria-hidden","false",1,"iconButton","floatRight",3,"click"],["id","spiritActivity",1,"spiritActivityPanel"],[1,"headerButton",3,"click"],["id","spiritActivity",1,"spiritActivityPanel",3,"drop"],["tooltip","You can project your spiritual self to take on a second activity while your physical body continues its work.<br>Whatever activity you drop here will be completed each day as long as you have enough Qi to support the effort.<br>Requires 5 Qi per day in addition to the regular requirements of the activity.",1,"spiritProjectionLabel"],[1,"progress-bar",3,"ngClass"],["tooltip","Remove this activity from the schedule.","aria-label","Remove Activity","aria-hidden","false",1,"iconButton",3,"click"],["cdkDrag","","cdkDragPreviewClass","currentRow",3,"id","cdkDragData"],["cdkDrag","","cdkDragPreviewClass","currentRow",3,"cdkDragStarted","cdkDragEnded","cdkDragMoved","cdkDragReleased","id","cdkDragData"],[3,"ngClass","id"],["tooltip","What is this activity?<br>Click to learn all about it!","aria-label","Help","aria-hidden","false",3,"click"],[1,"progress-bar"],["tooltip","Spend fewer days on this.<br>Shift- or Ctrl-click to remove 10x<br>Shift-Ctrl-click to remove 100x","aria-label","Remove Days","aria-hidden","false",1,"iconButton",3,"click"],["tooltip","Spend more days on this.<br>Shift- or Ctrl-click to add 10x<br>Shift-Ctrl-click to add 100x","aria-label","Add Days","aria-hidden","false",1,"iconButton",3,"click"],["tooltip","Disable this activity on the schedule.","aria-label","Disable Activity","aria-hidden","false",1,"iconButton",3,"click"]],template:function(n,r){1&n&&(h(0,"div",0),H(1,Yae,12,0)(2,ise,9,3,"div",1),f(),L(3,"br")),2&n&&(v(),A(r.battleService.enemies.length>0&&!r.battleService.battleMessageDismissed?1:2))},dependencies:()=>[Lt,fi,ql,Vl,et],styles:[".headerDiv[_ngcontent-%COMP%]{color:var(--bodyText)}.dropAccepter[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;overflow-y:auto}table[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%]{border-bottom:1px var(--tableDividerColor) solid;white-space:nowrap;font-size:12px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){text-align:end}mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;margin:4px 1px;vertical-align:middle}.progress-bar[_ngcontent-%COMP%]{width:60px}label[_ngcontent-%COMP%]{font-size:10px;vertical-align:top}.iconActive[_ngcontent-%COMP%]{color:var(--panelBackground);background:var(--bodyText)}.spiritActivityPanel[_ngcontent-%COMP%]{border:1px solid var(--itemSlotHighlight);width:100%;background-color:var(--qiColor)}.spiritProjectionLabel[_ngcontent-%COMP%]{font-size:x-small;border-bottom:none}.currentRow[_ngcontent-%COMP%]{background-color:var(--itemSlotColor)}.disabled[_ngcontent-%COMP%]{background-color:var(--disabledActivity)}input[_ngcontent-%COMP%]{vertical-align:middle}.overflow[_ngcontent-%COMP%]{overflow:auto}.spaceLeft[_ngcontent-%COMP%]{margin-left:16px}.disabledSchedule[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{background-color:var(--disabledActivity)}.battleWarning[_ngcontent-%COMP%]{color:var(--healthColor);font-size:x-large}.floatRight[_ngcontent-%COMP%]{float:right}.headerButton[_ngcontent-%COMP%]{margin-top:2px;margin-left:2px}"]})}}return t})();const rse=t=>({darkMode:t}),ose=t=>({highlighted:t}),ML=()=>[],ase=t=>({grabCursor:t}),sse=(t,i)=>i.id;function lse(t,i){if(1&t){const e=G();h(0,"mat-icon",22),x("click",function(){return M(e),I(S().commonButtonsService.ascensionStoreClicked())}),y(1," keyboard_double_arrow_up "),f()}}function cse(t,i){if(1&t){const e=G();h(0,"span",16)(1,"button",23),x("click",function(){return M(e),I(S().gameStateService.addLayoutPanel())}),y(2,"Add New Panel"),f()()}}function dse(t,i){if(1&t){const e=G();h(0,"mat-icon",27),x("click",function(){M(e);const r=S().$index;return I(S().previousPanelClick(r))}),y(1," arrow_back "),f(),h(2,"mat-icon",27),x("click",function(){M(e);const r=S().$index;return I(S().nextPanelClick(r))}),y(3," arrow_forward "),f()}}function use(t,i){1&t&&L(0,"app-time-panel",29)}function hse(t,i){1&t&&L(0,"app-schedule-panel",29)}function fse(t,i){1&t&&L(0,"app-attributes-panel",29)}function mse(t,i){1&t&&L(0,"app-health-panel",29)}function pse(t,i){1&t&&L(0,"app-activity-panel",29)}function gse(t,i){1&t&&L(0,"app-battle-panel",29)}function vse(t,i){1&t&&L(0,"app-equipment-panel",29)}function yse(t,i){1&t&&L(0,"app-home-panel",29)}function _se(t,i){1&t&&L(0,"app-inventory-panel",29)}function bse(t,i){1&t&&L(0,"app-log-panel",29)}function Sse(t,i){1&t&&L(0,"app-portal-panel",29)}function wse(t,i){1&t&&L(0,"app-followers-panel",29)}function Cse(t,i){1&t&&L(0,"app-pets-panel",29)}function kse(t,i){1&t&&L(0,"app-farm-panel",29)}function Dse(t,i){1&t&&L(0,"app-location-panel",29)}function Tse(t,i){1&t&&L(0,"app-impossible-task-panel",29)}function xse(t,i){1&t&&L(0,"app-technique-panel",29)}function Ese(t,i){1&t&&L(0,"app-crafting-panel",29)}function Mse(t,i){1&t&&L(0,"app-hell-status-panel",29)}function Ise(t,i){if(1&t){const e=G();h(0,"ktd-grid-item",21)(1,"div",24)(2,"div",25)(3,"mat-icon"),y(4),f(),h(5,"span"),y(6),f(),h(7,"span",16)(8,"mat-icon",26),y(9," help "),f(),H(10,dse,4,0),h(11,"mat-icon",27),x("click",function(){const r=M(e).$index;return I(S().closePanelClick(r))}),y(12," close "),f()()(),h(13,"div",28),H(14,use,1,0,"app-time-panel",29)(15,hse,1,0,"app-schedule-panel",29)(16,fse,1,0,"app-attributes-panel",29)(17,mse,1,0,"app-health-panel",29)(18,pse,1,0,"app-activity-panel",29)(19,gse,1,0,"app-battle-panel",29)(20,vse,1,0,"app-equipment-panel",29)(21,yse,1,0,"app-home-panel",29)(22,_se,1,0,"app-inventory-panel",29)(23,bse,1,0,"app-log-panel",29)(24,Sse,1,0,"app-portal-panel",29)(25,wse,1,0,"app-followers-panel",29)(26,Cse,1,0,"app-pets-panel",29)(27,kse,1,0,"app-farm-panel",29)(28,Dse,1,0,"app-location-panel",29)(29,Tse,1,0,"app-impossible-task-panel",29)(30,xse,1,0,"app-technique-panel",29)(31,Ese,1,0,"app-crafting-panel",29)(32,Mse,1,0,"app-hell-status-panel",29),f()()()}if(2&t){const e=i.$implicit,n=S();z("draggable",!n.gameStateService.lockPanels)("resizable",!n.gameStateService.lockPanels)("id",n.getPanel(e).id),v(2),z("ngClass",dt(9,ase,!n.gameStateService.lockPanels)),v(2),j(" ",n.getPanel(e).icon," "),v(2),Fe(n.getPanel(e).name),v(2),z("tooltip",n.getPanel(e).panelHelp),v(2),A(n.gameStateService.allPanelsUsed?-1:10),v(4),A("timePanel"===e.id?14:"schedulePanel"===e.id?15:"attributesPanel"===e.id?16:"healthPanel"===e.id?17:"activityPanel"===e.id?18:"battlePanel"===e.id?19:"equipmentPanel"===e.id?20:"homePanel"===e.id?21:"inventoryPanel"===e.id?22:"logPanel"===e.id?23:"portalPanel"===e.id?24:"followersPanel"===e.id?25:"petsPanel"===e.id?26:"farmPanel"===e.id?27:"locationPanel"===e.id?28:"impossibleTasksPanel"===e.id?29:"techniquePanel"===e.id?30:"craftingPanel"===e.id?31:"hellStatusPanel"===e.id?32:-1)}}let lw=(()=>{class t{constructor(){this.commonButtonsService=_(IS),this.gameStateService=_(Ut),this.storeService=_(jr),this.characterService=_(Ie),this.document=_(Ge),this.grid=b_.required(aw),this.applicationVersion=um.appVersion,this.compactType="vertical",this.gridGap=4}lockPanelsToggle(){this.gameStateService.lockPanels=!this.gameStateService.lockPanels}onLayoutUpdated(e){this.gameStateService.layout.set(e),this.gameStateService.savetoLocalStorage()}getPanel(e){for(const n of this.gameStateService.panels)if(n.id===e.id)return n;return{id:"undefinedPanel",name:"",icon:"",panelHelp:""}}nextPanelClick(e){this.gameStateService.changeLayoutPanel(e)}previousPanelClick(e){this.gameStateService.changeLayoutPanel(e,!0)}closePanelClick(e){this.gameStateService.removeLayoutPanel(e)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ne({type:t,selectors:[["app-standard-layout"]],viewQuery:function(n,r){1&n&&Jf(r.grid,aw,5),2&n&&J_()},decls:37,vars:16,consts:[[1,"wrapper",3,"ngClass"],[1,"mainContainer"],[1,"top-line"],[1,"gameTitle"],[1,"versionNumber",3,"click"],["tooltip","Confused?<br>Click here for a tutorial.","aria-label","Tutorial","aria-hidden","false",1,"iconButton",3,"click"],["tooltip","Statistics!",1,"iconButton",3,"click"],["tooltip","Regular People Shop<br>A store that sells regular stuff for regular mortals.<br>You are destined for immortality, but you might want some stuff from here anyway.","aria-label","Store","aria-hidden","false",1,"iconButton",3,"click"],["tooltip","Manuals Shop<br>A store that sells special manuals for aspiring immortals.","aria-label","Manual Store","aria-hidden","false",1,"iconButton",3,"click","ngClass"],["tooltip","Game Options","aria-label","Options","aria-hidden","false",1,"iconButton",3,"click"],["tooltip","Achievements!","aria-label","Achievements","aria-hidden","false",1,"iconButton",3,"click"],["tooltip","Ascension Techniques.","aria-label","Ascension","aria-hidden","false",1,"iconButton"],["tooltip","Save<br>The game autosaves every few minutes, but click here if you want to manually save the game right now.","aria-label","Save","aria-hidden","false",1,"iconButton",3,"click"],["tooltip","Who made this awesome free game?","aria-label","Save","aria-hidden","false",1,"iconButton",3,"click"],[1,"discordLink"],["href","https://discord.gg/Na7Qmwy3XK","target","_blank","rel","noopener noreferrer","tooltip","Have questions?<br>Try the Immortality Idle Discord."],[1,"floatRight"],["type","checkbox","id","lockPanels",3,"change","checked"],["for","lockPanels"],[1,"grid-container"],["cols","100","rowHeight","10","compactOnPropsChange","true","preventCollision","false",3,"layoutUpdated","compactType","gap","layout","scrollableParent"],["dragStartThreshold","0",3,"draggable","resizable","id"],["tooltip","Ascension Techniques.","aria-label","Ascension","aria-hidden","false",1,"iconButton",3,"click"],[3,"click"],[1,"panel"],["ktdGridDragHandle","",1,"panelHeader",3,"ngClass"],[3,"tooltip"],[1,"iconButton",3,"click"],[1,"grid-item-content"],[1,"panelComponent"]],template:function(n,r){if(1&n&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),y(4," Immortality Idle 2 "),h(5,"span",4),x("click",function(){return r.commonButtonsService.changelogClicked()}),y(6),f()(),h(7,"span")(8,"mat-icon",5),x("click",function(){return r.commonButtonsService.tutorialClicked()}),y(9," help "),f(),h(10,"mat-icon",6),x("click",function(){return r.commonButtonsService.statisticsClicked()}),y(11," format_list_numbered_rtl "),f(),h(12,"mat-icon",7),x("click",function(){return r.commonButtonsService.storeClicked()}),y(13," store "),f(),h(14,"mat-icon",8),x("click",function(){return r.commonButtonsService.manualStoreClicked()}),y(15," local_library "),f(),h(16,"mat-icon",9),x("click",function(){return r.commonButtonsService.optionsClicked()}),y(17," settings "),f(),h(18,"mat-icon",10),x("click",function(){return r.commonButtonsService.achievementsClicked()}),y(19," military_tech "),f(),H(20,lse,2,0,"mat-icon",11),h(21,"mat-icon",12),x("click",function(){return r.commonButtonsService.saveClicked()}),y(22," save "),f(),h(23,"mat-icon",13),x("click",function(){return r.commonButtonsService.creditsClicked()}),y(24," contact_page "),f()(),h(25,"span",14)(26,"a",15),y(27,"Discord"),f()(),h(28,"span",16)(29,"input",17),x("change",function(){return r.lockPanelsToggle()}),f(),h(30,"label",18),y(31,"Lock panels in place"),f()(),H(32,cse,3,0,"span",16),f(),h(33,"div",19)(34,"ktd-grid",20),x("layoutUpdated",function(a){return r.onLayoutUpdated(a)}),be(35,Ise,33,11,"ktd-grid-item",21,sse),f()()()()),2&n){let o,a;z("ngClass",dt(10,rse,r.gameStateService.isDarkMode)),v(6),Fe(r.gameStateService.isExperimental?"Experimental":"v"+r.applicationVersion),v(8),z("ngClass",dt(12,ose,r.storeService.isManualAvailable())),v(6),A(r.characterService.ascensionUnlocked?20:-1),v(9),z("checked",r.gameStateService.lockPanels),v(3),A(r.gameStateService.allPanelsUsed?-1:32),v(2),z("compactType",r.compactType)("gap",r.gridGap)("layout",null!==(o=r.gameStateService.layout())&&void 0!==o?o:sb(14,ML))("scrollableParent",r.document),v(),Se(null!==(a=r.gameStateService.layout())&&void 0!==a?a:sb(15,ML))}},dependencies:()=>[Vo,fi,$o,Lt,aw,_L,Are,Hae,nse,PO,rae,aoe,NO,Noe,RO,lL,FO,Tae,Koe,bae,zoe,vae,fae,Oae,koe,Wae,et],styles:["[_nghost-%COMP%]{flex-grow:1;display:flex}[_nghost-%COMP%]     .ktd-grid-item-placeholder{background-color:#ffa726}ktd-grid[_ngcontent-%COMP%]{transition:height .5s ease;background-color:var(--bodyBackground);width:100%}.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-grow:1;min-height:0;width:100%;min-width:100%;max-width:100%;overflow:auto}.top-line[_ngcontent-%COMP%]{margin-top:10px;margin-left:10px;margin-right:10px}.gameTitle[_ngcontent-%COMP%]{font-size:x-large;margin:4px}.discordLink[_ngcontent-%COMP%]{font-size:large;margin-top:4px;margin-left:8px}.mainContainer[_ngcontent-%COMP%]{background-color:var(--bodyBackground);min-height:0;display:flex;flex-direction:column;width:100%;height:100%}.bodyContainer[_ngcontent-%COMP%]{width:100%;height:100%;flex:auto;overflow:hidden}.panel[_ngcontent-%COMP%]{background-color:var(--panelBackground);display:flex;flex-direction:column;top:0;left:0;width:100%;height:100%;border:2px solid var(--panelBorder);border-radius:3px;box-sizing:border-box;flex:auto}.panelHeader[_ngcontent-%COMP%]{top:0;left:0;width:100%;background-color:var(--panelHeader);border-bottom:1px solid var(--panelBorder);color:var(--bodyText);font-size:14px;font-weight:400;margin:0;z-index:10}.floatRight[_ngcontent-%COMP%]{float:right}.panelComponent[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;margin:4px 1px;vertical-align:middle;color:var(--bodyText)}.versionNumber[_ngcontent-%COMP%]{font-size:x-small;text-decoration:underline;cursor:pointer}.highlighted[_ngcontent-%COMP%]{background-color:var(--buttonHighlightBg)}.grid-container[_ngcontent-%COMP%]{padding:4px;box-sizing:border-box;border-radius:2px;border:1px solid var(--ktd-border-color);background-color:var(--ktd-background-color);width:100%}.grid-item-content[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;height:100%;min-height:0;-webkit-user-select:none;user-select:none;display:flex;align-items:center;justify-content:center}ktd-grid-item[_ngcontent-%COMP%]   .resizeHandle[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:16px;height:16px;border:1px solid var(--panelBorder);color:var(--panelBorder);transform:rotate(90deg)}.resizeCursor[_ngcontent-%COMP%]{cursor:se-resize}.grabCursor[_ngcontent-%COMP%]{cursor:grabbing}"]})}}return t})();function Ase(t,i){1&t&&L(0,"app-mobile-layout")}function Pse(t,i){1&t&&L(0,"app-standard-layout")}let Fse=(()=>{class t{handleKeyboardEvent(e){"Space"===e.code?(this.mainLoopService.pause=!this.mainLoopService.pause,e.preventDefault()):"Enter"!==e.code&&"NumpadEnter"!==e.code||!this.mainLoopService.pause?!e.altKey&&!e.metaKey||"Digit0"!==e.code&&"Numpad0"!==e.code?!e.altKey&&!e.metaKey||"Digit1"!==e.code&&"Numpad1"!==e.code?!e.altKey&&!e.metaKey||"Digit2"!==e.code&&"Numpad2"!==e.code?!e.altKey&&!e.metaKey||"Digit3"!==e.code&&"Numpad3"!==e.code||!this.mainLoopService.unlockFastSpeed?!e.altKey&&!e.metaKey||"Digit4"!==e.code&&"Numpad4"!==e.code||!this.mainLoopService.unlockFasterSpeed?(e.altKey||e.metaKey)&&("Digit5"===e.code||"Numpad5"===e.code)&&this.mainLoopService.unlockFastestSpeed&&(this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=1):(this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=2):(this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=5):(this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=10):(this.mainLoopService.pause=!1,this.mainLoopService.tickDivider=40):this.mainLoopService.pause=!0:(this.mainLoopService.tick(),e.preventDefault())}constructor(e,n,r,o,a,s,l){this.mainLoopService=e,this.gameStateService=n,this.statisticsService=r,this.characterService=o,this.inventoryService=a,this.homeService=s,this.farmService=l,this.standardLayout=b_(lw),this.mobileLayout=b_(GS),this.isMobile=$(!1)}isMobileWidth(){return window.innerWidth<500}ngOnInit(){this.gameStateService.loadFromLocalStorage(),this.mainLoopService.start(),this.resizeSubscription=Ti(Zi(window,"resize"),Zi(window,"orientationchange")).pipe(wl(50)).subscribe(()=>{const e=this.standardLayout();e&&e.grid().resize(),this.isMobileWidth()?this.isMobile.set(!0):this.isMobile.set(!1)}),this.isMobile.set(this.isMobileWidth())}ngOnDestroy(){this.resizeSubscription?.unsubscribe()}static{this.\u0275fac=function(n){return new(n||t)(T(tt),T(Ut),T(gO),T(Ie),T(he),T(zt),T(wr))}}static{this.\u0275cmp=ne({type:t,selectors:[["app-root"]],viewQuery:function(n,r){1&n&&(Jf(r.standardLayout,lw,5),Jf(r.mobileLayout,GS,5)),2&n&&J_(2)},hostBindings:function(n,r){1&n&&x("keydown",function(a){return r.handleKeyboardEvent(a)},0,FD)},decls:2,vars:1,template:function(n,r){1&n&&H(0,Ase,1,0,"app-mobile-layout")(1,Pse,1,0,"app-standard-layout"),2&n&&A(r.isMobile()?0:1)},dependencies:[GS,lw],encapsulation:2})}}return t})();const Gp=Pg(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function cw(){return Bt((t,i)=>{let e=null;t._refCount++;const n=wt(i,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const r=t._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),i.unsubscribe()});t.subscribe(n),n.closed||(e=t.connect())})}class IL extends st{constructor(i,e){super(),this.source=i,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,RC(i)&&(this.lift=i.lift)}_subscribe(i){return this.getSubject().subscribe(i)}getSubject(){const i=this._subject;return(!i||i.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:i}=this;this._subject=this._connection=null,i?.unsubscribe()}connect(){let i=this._connection;if(!i){i=this._connection=new je;const e=this.getSubject();i.add(this.source.subscribe(wt(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),i.closed&&(this._connection=null,i=je.EMPTY)}return i}refCount(){return cw()(this)}}function Yp(t){return Bt((i,e)=>{let n=!1;i.subscribe(wt(e,r=>{n=!0,e.next(r)},()=>{n||e.next(t),e.complete()}))})}function AL(t=Ose){return Bt((i,e)=>{let n=!1;i.subscribe(wt(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(t())))})}function Ose(){return new Gp}function Ka(t,i){const e=arguments.length>=2;return n=>n.pipe(t?Qe((r,o)=>t(r,o,n)):wo,pi(1),e?Yp(i):AL(()=>new Gp))}function dw(t){return t<=0?()=>qn:Bt((i,e)=>{let n=[];i.subscribe(wt(e,r=>{n.push(r),t<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}const He="primary",Ru=Symbol("RouteTitle");class Hse{params;constructor(i){this.params=i||{}}has(i){return Object.prototype.hasOwnProperty.call(this.params,i)}get(i){if(this.has(i)){const e=this.params[i];return Array.isArray(e)?e[0]:e}return null}getAll(i){if(this.has(i)){const e=this.params[i];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function $l(t){return new Hse(t)}function Vse(t,i,e){const n=e.path.split("/");if(n.length>t.length||"full"===e.pathMatch&&(i.hasChildren()||n.length<t.length))return null;const r={};for(let o=0;o<n.length;o++){const a=n[o],s=t[o];if(":"===a[0])r[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,n.length),posParams:r}}function zr(t,i){const e=t?uw(t):void 0,n=i?uw(i):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!PL(t[r],i[r]))return!1;return!0}function uw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function PL(t,i){if(Array.isArray(t)&&Array.isArray(i)){if(t.length!==i.length)return!1;const e=[...t].sort(),n=[...i].sort();return e.every((r,o)=>n[o]===r)}return t===i}function RL(t){return t.length>0?t[t.length-1]:null}function Ko(t){return function Rm(t){return!!t&&(t instanceof st||nt(t.lift)&&nt(t.subscribe))}(t)?t:dd(t)?mi(Promise.resolve(t)):ue(t)}const jse={exact:function LL(t,i,e){if(!Za(t.segments,i.segments)||!Kp(t.segments,i.segments,e)||t.numberOfChildren!==i.numberOfChildren)return!1;for(const n in i.children)if(!t.children[n]||!LL(t.children[n],i.children[n],e))return!1;return!0},subset:NL},FL={exact:function Use(t,i){return zr(t,i)},subset:function zse(t,i){return Object.keys(i).length<=Object.keys(t).length&&Object.keys(i).every(e=>PL(t[e],i[e]))},ignored:()=>!0};function OL(t,i,e){return jse[e.paths](t.root,i.root,e.matrixParams)&&FL[e.queryParams](t.queryParams,i.queryParams)&&!("exact"===e.fragment&&t.fragment!==i.fragment)}function NL(t,i,e){return BL(t,i,i.segments,e)}function BL(t,i,e,n){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!Za(r,e)||i.hasChildren()||!Kp(r,e,n))}if(t.segments.length===e.length){if(!Za(t.segments,e)||!Kp(t.segments,e,n))return!1;for(const r in i.children)if(!t.children[r]||!NL(t.children[r],i.children[r],n))return!1;return!0}{const r=e.slice(0,t.segments.length),o=e.slice(t.segments.length);return!!(Za(t.segments,r)&&Kp(t.segments,r,n)&&t.children[He])&&BL(t.children[He],i,o,n)}}function Kp(t,i,e){return i.every((n,r)=>FL[e](t[r].parameters,n.parameters))}class Qa{root;queryParams;fragment;_queryParamMap;constructor(i=new Tt([],{}),e={},n=null){this.root=i,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap??=$l(this.queryParams),this._queryParamMap}toString(){return Gse.serialize(this)}}class Tt{segments;children;parent=null;constructor(i,e){this.segments=i,this.children=e,Object.values(e).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zp(this)}}class Fu{path;parameters;_parameterMap;constructor(i,e){this.path=i,this.parameters=e}get parameterMap(){return this._parameterMap??=$l(this.parameters),this._parameterMap}toString(){return qL(this)}}function Za(t,i){return t.length===i.length&&t.every((e,n)=>e.path===i[n].path)}let Wl=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:()=>new Qp,providedIn:"root"})}return t})();class Qp{parse(i){const e=new rle(i);return new Qa(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(i){const e=`/${Ou(i.root,!0)}`,n=function Qse(t){const i=Object.entries(t).map(([e,n])=>Array.isArray(n)?n.map(r=>`${Xp(e)}=${Xp(r)}`).join("&"):`${Xp(e)}=${Xp(n)}`).filter(e=>e);return i.length?`?${i.join("&")}`:""}(i.queryParams);return`${e}${n}${"string"==typeof i.fragment?`#${function Yse(t){return encodeURI(t)}(i.fragment)}`:""}`}}const Gse=new Qp;function Zp(t){return t.segments.map(i=>qL(i)).join("/")}function Ou(t,i){if(!t.hasChildren())return Zp(t);if(i){const e=t.children[He]?Ou(t.children[He],!1):"",n=[];return Object.entries(t.children).forEach(([r,o])=>{r!==He&&n.push(`${r}:${Ou(o,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function Wse(t,i){let e=[];return Object.entries(t.children).forEach(([n,r])=>{n===He&&(e=e.concat(i(r,n)))}),Object.entries(t.children).forEach(([n,r])=>{n!==He&&(e=e.concat(i(r,n)))}),e}(t,(n,r)=>r===He?[Ou(t.children[He],!1)]:[`${r}:${Ou(n,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[He]?`${Zp(t)}/${e[0]}`:`${Zp(t)}/(${e.join("//")})`}}function HL(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xp(t){return HL(t).replace(/%3B/gi,";")}function hw(t){return HL(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jp(t){return decodeURIComponent(t)}function VL(t){return Jp(t.replace(/\+/g,"%20"))}function qL(t){return`${hw(t.path)}${function Kse(t){return Object.entries(t).map(([i,e])=>`;${hw(i)}=${hw(e)}`).join("")}(t.parameters)}`}const Zse=/^[^\/()?;#]+/;function fw(t){const i=t.match(Zse);return i?i[0]:""}const Xse=/^[^\/()?;=#]+/,ele=/^[^=?&#]+/,ile=/^[^&#]+/;class rle{url;remaining;constructor(i){this.url=i,this.remaining=i}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tt([],{}):new Tt([],this.parseChildren())}parseQueryParams(){const i={};if(this.consumeOptional("?"))do{this.parseQueryParam(i)}while(this.consumeOptional("&"));return i}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const i=[];for(this.peekStartsWith("(")||i.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),i.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(i.length>0||Object.keys(e).length>0)&&(n[He]=new Tt(i,e)),n}parseSegment(){const i=fw(this.remaining);if(""===i&&this.peekStartsWith(";"))throw new N(4009,!1);return this.capture(i),new Fu(Jp(i),this.parseMatrixParams())}parseMatrixParams(){const i={};for(;this.consumeOptional(";");)this.parseParam(i);return i}parseParam(i){const e=function Jse(t){const i=t.match(Xse);return i?i[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=fw(this.remaining);r&&(n=r,this.capture(n))}i[Jp(e)]=Jp(n)}parseQueryParam(i){const e=function tle(t){const i=t.match(ele);return i?i[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const a=function nle(t){const i=t.match(ile);return i?i[0]:""}(this.remaining);a&&(n=a,this.capture(n))}const r=VL(e),o=VL(n);if(i.hasOwnProperty(r)){let a=i[r];Array.isArray(a)||(a=[a],i[r]=a),a.push(o)}else i[r]=o}parseParens(i){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=fw(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new N(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):i&&(o=He);const a=this.parseChildren();e[o]=1===Object.keys(a).length?a[He]:new Tt([],a),this.consumeOptional("//")}return e}peekStartsWith(i){return this.remaining.startsWith(i)}consumeOptional(i){return!!this.peekStartsWith(i)&&(this.remaining=this.remaining.substring(i.length),!0)}capture(i){if(!this.consumeOptional(i))throw new N(4011,!1)}}function jL(t){return t.segments.length>0?new Tt([],{[He]:t}):t}function UL(t){const i={};for(const[n,r]of Object.entries(t.children)){const o=UL(r);if(n===He&&0===o.segments.length&&o.hasChildren())for(const[a,s]of Object.entries(o.children))i[a]=s;else(o.segments.length>0||o.hasChildren())&&(i[n]=o)}return function ole(t){if(1===t.numberOfChildren&&t.children[He]){const i=t.children[He];return new Tt(t.segments.concat(i.segments),i.children)}return t}(new Tt(t.segments,i))}function Xa(t){return t instanceof Qa}function zL(t){let i;const r=jL(function e(o){const a={};for(const l of o.children){const c=e(l);a[l.outlet]=c}const s=new Tt(o.url,a);return o===t&&(i=s),s}(t.root));return i??r}function $L(t,i,e,n){let r=t;for(;r.parent;)r=r.parent;if(0===i.length)return mw(r,r,r,e,n);const o=function sle(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new GL(!0,0,t);let i=0,e=!1;const n=t.reduce((r,o,a)=>{if("object"==typeof o&&null!=o){if(o.outlets){const s={};return Object.entries(o.outlets).forEach(([l,c])=>{s[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:s}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===a?(o.split("/").forEach((s,l)=>{0==l&&"."===s||(0==l&&""===s?e=!0:".."===s?i++:""!=s&&r.push(s))}),r):[...r,o]},[]);return new GL(e,i,n)}(i);if(o.toRoot())return mw(r,r,new Tt([],{}),e,n);const a=function lle(t,i,e){if(t.isAbsolute)return new tg(i,!0,0);if(!e)return new tg(i,!1,NaN);if(null===e.parent)return new tg(e,!0,0);const n=eg(t.commands[0])?0:1;return function cle(t,i,e){let n=t,r=i,o=e;for(;o>r;){if(o-=r,n=n.parent,!n)throw new N(4005,!1);r=n.segments.length}return new tg(n,!1,r-o)}(e,e.segments.length-1+n,t.numberOfDoubleDots)}(o,r,t),s=a.processChildren?Nu(a.segmentGroup,a.index,o.commands):YL(a.segmentGroup,a.index,o.commands);return mw(r,a.segmentGroup,s,e,n)}function eg(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Lu(t){return"object"==typeof t&&null!=t&&t.outlets}function mw(t,i,e,n,r){let a,o={};n&&Object.entries(n).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`}),a=t===i?e:WL(t,i,e);const s=jL(UL(a));return new Qa(s,o,r)}function WL(t,i,e){const n={};return Object.entries(t.children).forEach(([r,o])=>{n[r]=o===i?e:WL(o,i,e)}),new Tt(t.segments,n)}class GL{isAbsolute;numberOfDoubleDots;commands;constructor(i,e,n){if(this.isAbsolute=i,this.numberOfDoubleDots=e,this.commands=n,i&&n.length>0&&eg(n[0]))throw new N(4003,!1);const r=n.find(Lu);if(r&&r!==RL(n))throw new N(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tg{segmentGroup;processChildren;index;constructor(i,e,n){this.segmentGroup=i,this.processChildren=e,this.index=n}}function YL(t,i,e){if(t??=new Tt([],{}),0===t.segments.length&&t.hasChildren())return Nu(t,i,e);const n=function ule(t,i,e){let n=0,r=i;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(n>=e.length)return o;const a=t.segments[r],s=e[n];if(Lu(s))break;const l=`${s}`,c=n<e.length-1?e[n+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!QL(l,c,a))return o;n+=2}else{if(!QL(l,{},a))return o;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(t,i,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<t.segments.length){const o=new Tt(t.segments.slice(0,n.pathIndex),{});return o.children[He]=new Tt(t.segments.slice(n.pathIndex),t.children),Nu(o,0,r)}return n.match&&0===r.length?new Tt(t.segments,{}):n.match&&!t.hasChildren()?pw(t,i,e):n.match?Nu(t,0,r):pw(t,i,e)}function Nu(t,i,e){if(0===e.length)return new Tt(t.segments,{});{const n=function dle(t){return Lu(t[0])?t[0].outlets:{[He]:t}}(e),r={};if(Object.keys(n).some(o=>o!==He)&&t.children[He]&&1===t.numberOfChildren&&0===t.children[He].segments.length){const o=Nu(t.children[He],i,e);return new Tt(t.segments,o.children)}return Object.entries(n).forEach(([o,a])=>{"string"==typeof a&&(a=[a]),null!==a&&(r[o]=YL(t.children[o],i,a))}),Object.entries(t.children).forEach(([o,a])=>{void 0===n[o]&&(r[o]=a)}),new Tt(t.segments,r)}}function pw(t,i,e){const n=t.segments.slice(0,i);let r=0;for(;r<e.length;){const o=e[r];if(Lu(o)){const l=hle(o.outlets);return new Tt(n,l)}if(0===r&&eg(e[0])){n.push(new Fu(t.segments[i].path,KL(e[0]))),r++;continue}const a=Lu(o)?o.outlets[He]:`${o}`,s=r<e.length-1?e[r+1]:null;a&&s&&eg(s)?(n.push(new Fu(a,KL(s))),r+=2):(n.push(new Fu(a,{})),r++)}return new Tt(n,{})}function hle(t){const i={};return Object.entries(t).forEach(([e,n])=>{"string"==typeof n&&(n=[n]),null!==n&&(i[e]=pw(new Tt([],{}),0,n))}),i}function KL(t){const i={};return Object.entries(t).forEach(([e,n])=>i[e]=`${n}`),i}function QL(t,i,e){return t==e.path&&zr(i,e.parameters)}const Bu="imperative";var Ze=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ze||{});class $r{id;url;constructor(i,e){this.id=i,this.url=e}}class ig extends $r{type=Ze.NavigationStart;navigationTrigger;restoredState;constructor(i,e,n="imperative",r=null){super(i,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class go extends $r{urlAfterRedirects;type=Ze.NavigationEnd;constructor(i,e,n){super(i,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var zn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(zn||{}),ng=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ng||{});class Ja extends $r{reason;code;type=Ze.NavigationCancel;constructor(i,e,n,r){super(i,e),this.reason=n,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Gl extends $r{reason;code;type=Ze.NavigationSkipped;constructor(i,e,n,r){super(i,e),this.reason=n,this.code=r}}class gw extends $r{error;target;type=Ze.NavigationError;constructor(i,e,n,r){super(i,e),this.error=n,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ZL extends $r{urlAfterRedirects;state;type=Ze.RoutesRecognized;constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fle extends $r{urlAfterRedirects;state;type=Ze.GuardsCheckStart;constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mle extends $r{urlAfterRedirects;state;shouldActivate;type=Ze.GuardsCheckEnd;constructor(i,e,n,r,o){super(i,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ple extends $r{urlAfterRedirects;state;type=Ze.ResolveStart;constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gle extends $r{urlAfterRedirects;state;type=Ze.ResolveEnd;constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vle{route;type=Ze.RouteConfigLoadStart;constructor(i){this.route=i}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class yle{route;type=Ze.RouteConfigLoadEnd;constructor(i){this.route=i}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _le{snapshot;type=Ze.ChildActivationStart;constructor(i){this.snapshot=i}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ble{snapshot;type=Ze.ChildActivationEnd;constructor(i){this.snapshot=i}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sle{snapshot;type=Ze.ActivationStart;constructor(i){this.snapshot=i}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wle{snapshot;type=Ze.ActivationEnd;constructor(i){this.snapshot=i}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XL{routerEvent;position;anchor;type=Ze.Scroll;constructor(i,e,n){this.routerEvent=i,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class vw{}class rg{url;navigationBehaviorOptions;constructor(i,e){this.url=i,this.navigationBehaviorOptions=e}}function kr(t){return t.outlet||He}function Hu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let i=t.parent;i;i=i.parent){const e=i.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Ele{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Hu(this.route?.snapshot)??this.rootInjector}constructor(i){this.rootInjector=i,this.children=new Vu(this.rootInjector)}}let Vu=(()=>{class t{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new Ele(this.rootInjector),this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(n){return new(n||t)(P(Fi))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class JL{_root;constructor(i){this._root=i}get root(){return this._root.value}parent(i){const e=this.pathFromRoot(i);return e.length>1?e[e.length-2]:null}children(i){const e=yw(i,this._root);return e?e.children.map(n=>n.value):[]}firstChild(i){const e=yw(i,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(i){const e=_w(i,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==i)}pathFromRoot(i){return _w(i,this._root).map(e=>e.value)}}function yw(t,i){if(t===i.value)return i;for(const e of i.children){const n=yw(t,e);if(n)return n}return null}function _w(t,i){if(t===i.value)return[i];for(const e of i.children){const n=_w(t,e);if(n.length)return n.unshift(i),n}return[]}class Dr{value;children;constructor(i,e){this.value=i,this.children=e}toString(){return`TreeNode(${this.value})`}}function Yl(t){const i={};return t&&t.children.forEach(e=>i[e.value.outlet]=e),i}class eN extends JL{snapshot;constructor(i,e){super(i),this.snapshot=e,bw(this,i)}toString(){return this.snapshot.toString()}}function tN(t){const i=function Mle(t){const o=new ag([],{},{},"",{},He,t,null,{});return new iN("",new Dr(o,[]))}(t),e=new Yi([new Fu("",{})]),n=new Yi({}),r=new Yi({}),o=new Yi({}),a=new Yi(""),s=new Kl(e,n,o,a,r,He,t,i.root);return s.snapshot=i.root,new eN(new Dr(s,[]),i)}class Kl{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(i,e,n,r,o,a,s,l){this.urlSubject=i,this.paramsSubject=e,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(me(c=>c[Ru]))??ue(void 0),this.url=i,this.params=e,this.queryParams=n,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(me(i=>$l(i))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(me(i=>$l(i))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function og(t,i,e="emptyOnly"){let n;const{routeConfig:r}=t;return n=null===i||"always"!==e&&""!==r?.path&&(i.component||i.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...i.params,...t.params},data:{...i.data,...t.data},resolve:{...t.data,...i.data,...r?.data,...t._resolvedData}},r&&rN(r)&&(n.resolve[Ru]=r.title),n}class ag{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ru]}constructor(i,e,n,r,o,a,s,l,c){this.url=i,this.params=e,this.queryParams=n,this.fragment=r,this.data=o,this.outlet=a,this.component=s,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=$l(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=$l(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class iN extends JL{url;constructor(i,e){super(e),this.url=i,bw(this,e)}toString(){return nN(this._root)}}function bw(t,i){i.value._routerState=t,i.children.forEach(e=>bw(t,e))}function nN(t){const i=t.children.length>0?` { ${t.children.map(nN).join(", ")} } `:"";return`${t.value}${i}`}function Sw(t){if(t.snapshot){const i=t.snapshot,e=t._futureSnapshot;t.snapshot=e,zr(i.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),i.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),zr(i.params,e.params)||t.paramsSubject.next(e.params),function qse(t,i){if(t.length!==i.length)return!1;for(let e=0;e<t.length;++e)if(!zr(t[e],i[e]))return!1;return!0}(i.url,e.url)||t.urlSubject.next(e.url),zr(i.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function ww(t,i){const e=zr(t.params,i.params)&&function $se(t,i){return Za(t,i)&&t.every((e,n)=>zr(e.parameters,i[n].parameters))}(t.url,i.url);return e&&!(!t.parent!=!i.parent)&&(!t.parent||ww(t.parent,i.parent))}function rN(t){return"string"==typeof t.title||null===t.title}const Ile=new B("");let oN=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=He;activateEvents=new le;deactivateEvents=new le;attachEvents=new le;detachEvents=new le;routerOutletData=jv(void 0);parentContexts=_(Vu);location=_(Vi);changeDetector=_(ji);inputBinder=_(sg,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){const{firstChange:n,previousValue:r}=e.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new N(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new N(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new N(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new N(4013,!1);this._activatedRoute=e;const r=this.location,a=e.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,l=new Cw(e,s,r.injector,this.routerOutletData);this.activated=r.createComponent(a,{index:r.length,injector:l,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=ie({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Oi]})}return t})();class Cw{route;childContexts;parent;outletData;__ngOutletInjector(i){return new Cw(this.route,this.childContexts,i,this.outletData)}constructor(i,e,n,r){this.route=i,this.childContexts=e,this.parent=n,this.outletData=r}get(i,e){return i===Kl?this.route:i===Vu?this.childContexts:i===Ile?this.outletData:this.parent.get(i,e)}}const sg=new B("");let aN=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:n}=e,r=qd([n.queryParams,n.params,n.data]).pipe(yi(([o,a,s],l)=>(s={...o,...a,...s},0===l?ue(s):Promise.resolve(s)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==n||null===n.component)return void this.unsubscribeFromRouteData(e);const a=function A6(t){const i=ze(t);if(!i)return null;const e=new od(i);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return i.standalone},get isSignal(){return i.signals}}}(n.component);if(a)for(const{templateName:s}of a.inputs)e.activatedComponentRef.setInput(s,o[s]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,r)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})();function qu(t,i,e){if(e&&t.shouldReuseRoute(i.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=i.value;const r=function Ple(t,i,e){return i.children.map(n=>{for(const r of e.children)if(t.shouldReuseRoute(n.value,r.value.snapshot))return qu(t,n,r);return qu(t,n)})}(t,i,e);return new Dr(n,r)}{if(t.shouldAttach(i.value)){const o=t.retrieve(i.value);if(null!==o){const a=o.route;return a.value._futureSnapshot=i.value,a.children=i.children.map(s=>qu(t,s)),a}}const n=function Rle(t){return new Kl(new Yi(t.url),new Yi(t.params),new Yi(t.queryParams),new Yi(t.fragment),new Yi(t.data),t.outlet,t.component,t)}(i.value),r=i.children.map(o=>qu(t,o));return new Dr(n,r)}}class kw{redirectTo;navigationBehaviorOptions;constructor(i,e){this.redirectTo=i,this.navigationBehaviorOptions=e}}const sN="ngNavigationCancelingError";function lg(t,i){const{redirectTo:e,navigationBehaviorOptions:n}=Xa(i)?{redirectTo:i,navigationBehaviorOptions:void 0}:i,r=lN(!1,zn.Redirect);return r.url=e,r.navigationBehaviorOptions=n,r}function lN(t,i){const e=new Error(`NavigationCancelingError: ${t||""}`);return e[sN]=!0,e.cancellationCode=i,e}function cN(t){return!!t&&t[sN]}class Lle{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(i,e,n,r,o){this.routeReuseStrategy=i,this.futureState=e,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=o}activate(i){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,i),Sw(this.futureState.root),this.activateChildRoutes(e,n,i)}deactivateChildRoutes(i,e,n){const r=Yl(e);i.children.forEach(o=>{const a=o.value.outlet;this.deactivateRoutes(o,r[a],n),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(i,e,n){const r=i.value,o=e?e.value:null;if(r===o)if(r.component){const a=n.getContext(r.outlet);a&&this.deactivateChildRoutes(i,e,a.children)}else this.deactivateChildRoutes(i,e,n);else o&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(i,e){i.value.component&&this.routeReuseStrategy.shouldDetach(i.value.snapshot)?this.detachAndStoreRouteSubtree(i,e):this.deactivateRouteAndOutlet(i,e)}detachAndStoreRouteSubtree(i,e){const n=e.getContext(i.value.outlet),r=n&&i.value.component?n.children:e,o=Yl(i);for(const a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(n&&n.outlet){const a=n.outlet.detach(),s=n.children.onOutletDeactivated();this.routeReuseStrategy.store(i.value.snapshot,{componentRef:a,route:i,contexts:s})}}deactivateRouteAndOutlet(i,e){const n=e.getContext(i.value.outlet),r=n&&i.value.component?n.children:e,o=Yl(i);for(const a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(i,e,n){const r=Yl(e);i.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],n),this.forwardEvent(new wle(o.value.snapshot))}),i.children.length&&this.forwardEvent(new ble(i.value.snapshot))}activateRoutes(i,e,n){const r=i.value,o=e?e.value:null;if(Sw(r),r===o)if(r.component){const a=n.getOrCreateContext(r.outlet);this.activateChildRoutes(i,e,a.children)}else this.activateChildRoutes(i,e,n);else if(r.component){const a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),Sw(s.route.value),this.activateChildRoutes(i,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(i,null,a.children)}else this.activateChildRoutes(i,null,n)}}class dN{path;route;constructor(i){this.path=i,this.route=this.path[this.path.length-1]}}class cg{component;route;constructor(i,e){this.component=i,this.route=e}}function Nle(t,i,e){const n=t._root;return ju(n,i?i._root:null,e,[n.value])}function Ql(t,i){const e=Symbol(),n=i.get(t,e);return n===e?"function"!=typeof t||function Q2(t){return null!==dh(t)}(t)?i.get(t):t:n}function ju(t,i,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=Yl(i);return t.children.forEach(a=>{(function Hle(t,i,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,a=i?i.value:null,s=e?e.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const l=function Vle(t,i,e){if("function"==typeof e)return e(t,i);switch(e){case"pathParamsChange":return!Za(t.url,i.url);case"pathParamsOrQueryParamsChange":return!Za(t.url,i.url)||!zr(t.queryParams,i.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ww(t,i)||!zr(t.queryParams,i.queryParams);default:return!ww(t,i)}}(a,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new dN(n)):(o.data=a.data,o._resolvedData=a._resolvedData),ju(t,i,o.component?s?s.children:null:e,n,r),l&&s&&s.outlet&&s.outlet.isActivated&&r.canDeactivateChecks.push(new cg(s.outlet.component,a))}else a&&Uu(i,s,r),r.canActivateChecks.push(new dN(n)),ju(t,null,o.component?s?s.children:null:e,n,r)})(a,o[a.value.outlet],e,n.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>Uu(s,e.getContext(a),r)),r}function Uu(t,i,e){const n=Yl(t),r=t.value;Object.entries(n).forEach(([o,a])=>{Uu(a,r.component?i?i.children.getContext(o):null:i,e)}),e.canDeactivateChecks.push(new cg(r.component&&i&&i.outlet&&i.outlet.isActivated?i.outlet.component:null,r))}function zu(t){return"function"==typeof t}function uN(t){return t instanceof Gp||"EmptyError"===t?.name}const dg=Symbol("INITIAL_VALUE");function Zl(){return yi(t=>qd(t.map(i=>i.pipe(pi(1),$i(dg)))).pipe(me(i=>{for(const e of i)if(!0!==e){if(e===dg)return dg;if(!1===e||Gle(e))return e}return!0}),Qe(i=>i!==dg),pi(1)))}function Gle(t){return Xa(t)||t instanceof kw}function hN(t){return function V2(...t){return IC(t)}(ii(i=>{if("boolean"!=typeof i)throw lg(0,i)}),me(i=>!0===i))}class Dw{segmentGroup;constructor(i){this.segmentGroup=i||null}}class Tw extends Error{urlTree;constructor(i){super(),this.urlTree=i}}function Xl(t){return $d(new Dw(t))}class ace{urlSerializer;urlTree;constructor(i,e){this.urlSerializer=i,this.urlTree=e}lineralizeSegments(i,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return ue(n);if(r.numberOfChildren>1||!r.children[He])return $d(new N(4e3,!1));r=r.children[He]}}applyRedirectCommands(i,e,n,r,o){if("string"!=typeof e){const s=e,{queryParams:l,fragment:c,routeConfig:d,url:u,outlet:p,params:g,data:m,title:b}=r,C=sr(o,()=>s({params:g,data:m,queryParams:l,fragment:c,routeConfig:d,url:u,outlet:p,title:b}));if(C instanceof Qa)throw new Tw(C);e=C}const a=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),i,n);if("/"===e[0])throw new Tw(a);return a}applyRedirectCreateUrlTree(i,e,n,r){const o=this.createSegmentGroup(i,e.root,n,r);return new Qa(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(i,e){const n={};return Object.entries(i).forEach(([r,o])=>{if("string"==typeof o&&":"===o[0]){const s=o.substring(1);n[r]=e[s]}else n[r]=o}),n}createSegmentGroup(i,e,n,r){const o=this.createSegments(i,e.segments,n,r);let a={};return Object.entries(e.children).forEach(([s,l])=>{a[s]=this.createSegmentGroup(i,l,n,r)}),new Tt(o,a)}createSegments(i,e,n,r){return e.map(o=>":"===o.path[0]?this.findPosParam(i,o,r):this.findOrReturn(o,n))}findPosParam(i,e,n){const r=n[e.path.substring(1)];if(!r)throw new N(4001,!1);return r}findOrReturn(i,e){let n=0;for(const r of e){if(r.path===i.path)return e.splice(n),r;n++}return i}}const xw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sce(t,i,e,n,r){const o=fN(t,i,e);return o.matched?(n=function Cle(t,i){return t.providers&&!t._injector&&(t._injector=Ff(t.providers,i,`Route: ${t.path}`)),t._injector??i}(i,n),function nce(t,i,e,n){const r=i.canMatch;return r&&0!==r.length?ue(r.map(a=>{const s=Ql(a,t);return Ko(function Wle(t){return t&&zu(t.canMatch)}(s)?s.canMatch(i,e):sr(t,()=>s(i,e)))})).pipe(Zl(),hN()):ue(!0)}(n,i,e).pipe(me(a=>!0===a?o:{...xw}))):ue(o)}function fN(t,i,e){if("**"===i.path)return function lce(t){return{matched:!0,parameters:t.length>0?RL(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(e);if(""===i.path)return"full"===i.pathMatch&&(t.hasChildren()||e.length>0)?{...xw}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(i.matcher||Vse)(e,t,i);if(!r)return{...xw};const o={};Object.entries(r.posParams??{}).forEach(([s,l])=>{o[s]=l.path});const a=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function mN(t,i,e,n){return e.length>0&&function uce(t,i,e){return e.some(n=>ug(t,i,n)&&kr(n)!==He)}(t,e,n)?{segmentGroup:new Tt(i,dce(n,new Tt(e,t.children))),slicedSegments:[]}:0===e.length&&function hce(t,i,e){return e.some(n=>ug(t,i,n))}(t,e,n)?{segmentGroup:new Tt(t.segments,cce(t,e,n,t.children)),slicedSegments:e}:{segmentGroup:new Tt(t.segments,t.children),slicedSegments:e}}function cce(t,i,e,n){const r={};for(const o of e)if(ug(t,i,o)&&!n[kr(o)]){const a=new Tt([],{});r[kr(o)]=a}return{...n,...r}}function dce(t,i){const e={};e[He]=i;for(const n of t)if(""===n.path&&kr(n)!==He){const r=new Tt([],{});e[kr(n)]=r}return e}function ug(t,i,e){return(!(t.hasChildren()||i.length>0)||"full"!==e.pathMatch)&&""===e.path}class mce{}class vce{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(i,e,n,r,o,a,s){this.injector=i,this.configLoader=e,this.rootComponentType=n,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new ace(this.urlSerializer,this.urlTree)}noMatchError(i){return new N(4002,`'${i.segmentGroup}'`)}recognize(){const i=mN(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(i).pipe(me(({children:e,rootSnapshot:n})=>{const r=new Dr(n,e),o=new iN("",r),a=function ale(t,i,e=null,n=null){return $L(zL(t),i,e,n)}(n,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(i){const e=new ag([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),He,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,i,He,e).pipe(me(n=>({children:n,rootSnapshot:e})),Ha(n=>{if(n instanceof Tw)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Dw?this.noMatchError(n):n}))}processSegmentGroup(i,e,n,r,o){return 0===n.segments.length&&n.hasChildren()?this.processChildren(i,e,n,o):this.processSegment(i,e,n,n.segments,r,!0,o).pipe(me(a=>a instanceof Dr?[a]:[]))}processChildren(i,e,n,r){const o=[];for(const a of Object.keys(n.children))"primary"===a?o.unshift(a):o.push(a);return mi(o).pipe(Dl(a=>{const s=n.children[a],l=function xle(t,i){const e=t.filter(n=>kr(n)===i);return e.push(...t.filter(n=>kr(n)!==i)),e}(e,a);return this.processSegmentGroup(i,l,s,a,r)}),function Nse(t,i){return Bt(function Lse(t,i,e,n,r){return(o,a)=>{let s=e,l=i,c=0;o.subscribe(wt(a,d=>{const u=c++;l=s?t(l,d,u):(s=!0,d),n&&a.next(l)},r&&(()=>{s&&a.next(l),a.complete()})))}}(t,i,arguments.length>=2,!0))}((a,s)=>(a.push(...s),a)),Yp(null),function Bse(t,i){const e=arguments.length>=2;return n=>n.pipe(t?Qe((r,o)=>t(r,o,n)):wo,dw(1),e?Yp(i):AL(()=>new Gp))}(),Ui(a=>{if(null===a)return Xl(n);const s=pN(a);return function yce(t){t.sort((i,e)=>i.value.outlet===He?-1:e.value.outlet===He?1:i.value.outlet.localeCompare(e.value.outlet))}(s),ue(s)}))}processSegment(i,e,n,r,o,a,s){return mi(e).pipe(Dl(l=>this.processSegmentAgainstRoute(l._injector??i,e,l,n,r,o,a,s).pipe(Ha(c=>{if(c instanceof Dw)return ue(null);throw c}))),Ka(l=>!!l),Ha(l=>{if(uN(l))return function fce(t,i,e){return 0===i.length&&!t.children[e]}(n,r,o)?ue(new mce):Xl(n);throw l}))}processSegmentAgainstRoute(i,e,n,r,o,a,s,l){return kr(n)===a||a!==He&&ug(r,o,n)?void 0===n.redirectTo?this.matchSegmentAgainstRoute(i,r,n,o,a,l):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(i,r,e,n,o,a,l):Xl(r):Xl(r)}expandSegmentAgainstRouteUsingRedirect(i,e,n,r,o,a,s){const{matched:l,parameters:c,consumedSegments:d,positionalParamSegments:u,remainingSegments:p}=fN(e,r,o);if(!l)return Xl(e);"string"==typeof r.redirectTo&&"/"===r.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const g=new ag(o,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,gN(r),kr(r),r.component??r._loadedComponent??null,r,vN(r)),m=og(g,s,this.paramsInheritanceStrategy);g.params=Object.freeze(m.params),g.data=Object.freeze(m.data);const b=this.applyRedirects.applyRedirectCommands(d,r.redirectTo,u,g,i);return this.applyRedirects.lineralizeSegments(r,b).pipe(Ui(C=>this.processSegment(i,n,e,C.concat(p),a,!1,s)))}matchSegmentAgainstRoute(i,e,n,r,o,a){const s=sce(e,n,r,i);return"**"===n.path&&(e.children={}),s.pipe(yi(l=>l.matched?this.getChildConfig(i=n._injector??i,n,r).pipe(yi(({routes:c})=>{const d=n._loadedInjector??i,{parameters:u,consumedSegments:p,remainingSegments:g}=l,m=new ag(p,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,gN(n),kr(n),n.component??n._loadedComponent??null,n,vN(n)),b=og(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(b.params),m.data=Object.freeze(b.data);const{segmentGroup:C,slicedSegments:w}=mN(e,p,g,c);if(0===w.length&&C.hasChildren())return this.processChildren(d,c,C,m).pipe(me(F=>new Dr(m,F)));if(0===c.length&&0===w.length)return ue(new Dr(m,[]));const k=kr(n)===o;return this.processSegment(d,c,C,w,k?He:o,!0,m).pipe(me(F=>new Dr(m,F instanceof Dr?[F]:[])))})):Xl(e)))}getChildConfig(i,e,n){return e.children?ue({routes:e.children,injector:i}):e.loadChildren?void 0!==e._loadedRoutes?ue({routes:e._loadedRoutes,injector:e._loadedInjector}):function ice(t,i,e,n){const r=i.canLoad;return void 0===r||0===r.length?ue(!0):ue(r.map(a=>{const s=Ql(a,t);return Ko(function jle(t){return t&&zu(t.canLoad)}(s)?s.canLoad(i,e):sr(t,()=>s(i,e)))})).pipe(Zl(),hN())}(i,e,n).pipe(Ui(r=>r?this.configLoader.loadChildren(i,e).pipe(ii(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):function oce(){return $d(lN(!1,zn.GuardRejected))}())):ue({routes:[],injector:i})}}function _ce(t){const i=t.value.routeConfig;return i&&""===i.path}function pN(t){const i=[],e=new Set;for(const n of t){if(!_ce(n)){i.push(n);continue}const r=i.find(o=>n.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):i.push(n)}for(const n of e){const r=pN(n.children);i.push(new Dr(n.value,r))}return i.filter(n=>!e.has(n))}function gN(t){return t.data||{}}function vN(t){return t.resolve||{}}function yN(t){const i=t.children.map(e=>yN(e)).flat();return[t,...i]}function Ew(t){return yi(i=>{const e=t(i);return e?mi(e).pipe(me(()=>i)):ue(i)})}let _N=(()=>{class t{buildTitle(e){let n,r=e.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(o=>o.outlet===He);return n}getResolvedTitleForRoute(e){return e.data[Ru]}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:()=>_(Dce),providedIn:"root"})}return t})(),Dce=(()=>{class t extends _N{title;constructor(e){super(),this.title=e}updateTitle(e){const n=this.buildTitle(e);void 0!==n&&this.title.setTitle(n)}static \u0275fac=function(n){return new(n||t)(P(DK))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Jl=new B("",{providedIn:"root",factory:()=>({})});let bN=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(n,r){1&n&&L(0,"router-outlet")},dependencies:[oN],encapsulation:2})}return t})();function Mw(t){const i=t.children&&t.children.map(Mw),e=i?{...t,children:i}:{...t};return!e.component&&!e.loadComponent&&(i||e.loadChildren)&&e.outlet&&e.outlet!==He&&(e.component=bN),e}const ec=new B("");let Iw=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=_(tI);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ue(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const n=Ko(e.loadComponent()).pipe(me(SN),ii(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),qm(()=>{this.componentLoaders.delete(e)})),r=new IL(n,()=>new Y).pipe(cw());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return ue({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const o=function Tce(t,i,e,n){return Ko(t.loadChildren()).pipe(me(SN),Ui(r=>r instanceof wx||Array.isArray(r)?ue(r):mi(i.compileModuleAsync(r))),me(r=>{n&&n(t);let o,a,s=!1;return Array.isArray(r)?(a=r,!0):(o=r.create(e).injector,a=o.get(ec,[],{optional:!0,self:!0}).flat()),{routes:a.map(Mw),injector:o}}))}(n,this.compiler,e,this.onLoadEndListener).pipe(qm(()=>{this.childrenLoaders.delete(n)})),a=new IL(o,()=>new Y).pipe(cw());return this.childrenLoaders.set(n,a),a}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function SN(t){return function xce(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Aw=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:()=>_(Ece),providedIn:"root"})}return t})(),Ece=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const wN=new B(""),CN=new B("");function Mce(t,i,e){const n=t.get(CN),r=t.get(Ge);return t.get(ce).runOutsideAngular(()=>{if(!r.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,new Promise(c=>setTimeout(c));let o;const a=new Promise(c=>{o=c}),s=r.startViewTransition(()=>(o(),function Ice(t){return new Promise(i=>{Xn({read:()=>setTimeout(i)},{injector:t})})}(t))),{onViewTransitionCreated:l}=n;return l&&sr(t,()=>l({transition:s,from:i,to:e})),a})}const Pw=new B("");let hg=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Y;transitionAbortSubject=new Y;configLoader=_(Iw);environmentInjector=_(Fi);destroyRef=_(io);urlSerializer=_(Wl);rootContexts=_(Vu);location=_(gl);inputBindingEnabled=null!==_(sg,{optional:!0});titleStrategy=_(_N);options=_(Jl,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=_(Aw);createViewTransition=_(wN,{optional:!0});navigationErrorHandler=_(Pw,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>ue(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=r=>this.events.next(new yle(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new vle(r)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){const n=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:n})}setupNavigations(e,n,r){return this.transitions=new Yi({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Bu,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Qe(o=>0!==o.id),me(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),yi(o=>{let a=!1,s=!1;return ue(o).pipe(yi(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",zn.SupersededByNewNavigation),qn;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:"string"==typeof l.extras.browserUrl?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!c&&"reload"!==(l.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const u="";return this.events.next(new Gl(l.id,this.urlSerializer.serialize(l.rawUrl),u,ng.IgnoredSameUrlNavigation)),l.resolve(!1),qn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ue(l).pipe(yi(u=>{const p=this.transitions?.getValue();return this.events.next(new ig(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),p!==this.transitions?.getValue()?qn:Promise.resolve(u)}),function bce(t,i,e,n,r,o){return Ui(a=>function pce(t,i,e,n,r,o,a="emptyOnly"){return new vce(t,i,e,n,r,a,o).recognize()}(t,i,e,n,a.extractedUrl,r,o).pipe(me(({state:s,tree:l})=>({...a,targetSnapshot:s,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),ii(u=>{o.targetSnapshot=u.targetSnapshot,o.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects};const p=new ZL(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(p)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:u,extractedUrl:p,source:g,restoredState:m,extras:b}=l,C=new ig(u,this.urlSerializer.serialize(p),g,m);this.events.next(C);const w=tN(this.rootComponentType).snapshot;return this.currentTransition=o={...l,targetSnapshot:w,urlAfterRedirects:p,extras:{...b,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=p,ue(o)}{const u="";return this.events.next(new Gl(l.id,this.urlSerializer.serialize(l.extractedUrl),u,ng.IgnoredByUrlHandlingStrategy)),l.resolve(!1),qn}}),ii(l=>{const c=new fle(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),me(l=>(this.currentTransition=o={...l,guards:Nle(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},o)),function Yle(t,i){return Ui(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=e;return 0===a.length&&0===o.length?ue({...e,guardsResult:!0}):function Kle(t,i,e,n){return mi(t).pipe(Ui(r=>function tce(t,i,e,n,r){const o=i&&i.routeConfig?i.routeConfig.canDeactivate:null;return o&&0!==o.length?ue(o.map(s=>{const l=Hu(i)??r,c=Ql(s,l);return Ko(function $le(t){return t&&zu(t.canDeactivate)}(c)?c.canDeactivate(t,i,e,n):sr(l,()=>c(t,i,e,n))).pipe(Ka())})).pipe(Zl()):ue(!0)}(r.component,r.route,e,i,n)),Ka(r=>!0!==r,!0))}(a,n,r,t).pipe(Ui(s=>s&&function qle(t){return"boolean"==typeof t}(s)?function Qle(t,i,e,n){return mi(i).pipe(Dl(r=>Fm(function Xle(t,i){return null!==t&&i&&i(new _le(t)),ue(!0)}(r.route.parent,n),function Zle(t,i){return null!==t&&i&&i(new Sle(t)),ue(!0)}(r.route,n),function ece(t,i,e){const n=i[i.length-1],o=i.slice(0,i.length-1).reverse().map(a=>function Ble(t){const i=t.routeConfig?t.routeConfig.canActivateChild:null;return i&&0!==i.length?{node:t,guards:i}:null}(a)).filter(a=>null!==a).map(a=>Fl(()=>ue(a.guards.map(l=>{const c=Hu(a.node)??e,d=Ql(l,c);return Ko(function zle(t){return t&&zu(t.canActivateChild)}(d)?d.canActivateChild(n,t):sr(c,()=>d(n,t))).pipe(Ka())})).pipe(Zl())));return ue(o).pipe(Zl())}(t,r.path,e),function Jle(t,i,e){const n=i.routeConfig?i.routeConfig.canActivate:null;if(!n||0===n.length)return ue(!0);const r=n.map(o=>Fl(()=>{const a=Hu(i)??e,s=Ql(o,a);return Ko(function Ule(t){return t&&zu(t.canActivate)}(s)?s.canActivate(i,t):sr(a,()=>s(i,t))).pipe(Ka())}));return ue(r).pipe(Zl())}(t,r.route,e))),Ka(r=>!0!==r,!0))}(n,o,t,i):ue(s)),me(s=>({...e,guardsResult:s})))})}(this.environmentInjector,l=>this.events.next(l)),ii(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&"boolean"!=typeof l.guardsResult)throw lg(0,l.guardsResult);const c=new mle(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),Qe(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",zn.GuardRejected),!1)),Ew(l=>{if(l.guards.canActivateChecks.length)return ue(l).pipe(ii(c=>{const d=new ple(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),yi(c=>{let d=!1;return ue(c).pipe(function Sce(t,i){return Ui(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return ue(e);const o=new Set(r.map(l=>l.route)),a=new Set;for(const l of o)if(!a.has(l))for(const c of yN(l))a.add(c);let s=0;return mi(a).pipe(Dl(l=>o.has(l)?function wce(t,i,e,n){const r=t.routeConfig,o=t._resolve;return void 0!==r?.title&&!rN(r)&&(o[Ru]=r.title),function Cce(t,i,e,n){const r=uw(t);if(0===r.length)return ue({});const o={};return mi(r).pipe(Ui(a=>function kce(t,i,e,n){const r=Hu(i)??n,o=Ql(t,r);return Ko(o.resolve?o.resolve(i,e):sr(r,()=>o(i,e)))}(t[a],i,e,n).pipe(Ka(),ii(s=>{if(s instanceof kw)throw lg(new Qp,s);o[a]=s}))),dw(1),me(()=>o),Ha(a=>uN(a)?qn:$d(a)))}(o,t,i,n).pipe(me(a=>(t._resolvedData=a,t.data=og(t,t.parent,e).resolve,null)))}(l,n,t,i):(l.data=og(l,l.parent,t).resolve,ue(void 0))),ii(()=>s++),dw(1),Ui(l=>s===a.size?ue(e):qn))})}(this.paramsInheritanceStrategy,this.environmentInjector),ii({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(c,"",zn.NoDataFromResolver)}}))}),ii(c=>{const d=new gle(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),Ew(l=>{const c=d=>{const u=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(d.routeConfig).pipe(ii(p=>{d.component=p}),me(()=>{})));for(const p of d.children)u.push(...c(p));return u};return qd(c(l.targetSnapshot.root)).pipe(Yp(null),pi(1))}),Ew(()=>this.afterPreactivation()),yi(()=>{const{currentSnapshot:l,targetSnapshot:c}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return d?mi(d).pipe(me(()=>o)):ue(o)}),me(l=>{const c=function Ale(t,i,e){const n=qu(t,i._root,e?e._root:void 0);return new eN(n,i)}(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o={...l,targetRouterState:c},this.currentNavigation.targetRouterState=c,o}),ii(()=>{this.events.next(new vw)}),((t,i,e,n)=>me(r=>(new Lle(i,r.targetRouterState,r.currentRouterState,e,n).activate(t),r)))(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),pi(1),ii({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new go(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),at(this.transitionAbortSubject.pipe(ii(l=>{throw l}))),qm(()=>{!a&&!s&&this.cancelNavigationTransition(o,"",zn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ha(l=>{if(this.destroyed)return o.resolve(!1),qn;if(s=!0,cN(l))this.events.next(new Ja(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),function Fle(t){return cN(t)&&Xa(t.url)}(l)?this.events.next(new rg(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{const c=new gw(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{const d=sr(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(!(d instanceof kw))throw this.events.next(c),l;{const{message:u,cancellationCode:p}=lg(0,d);this.events.next(new Ja(o.id,this.urlSerializer.serialize(o.extractedUrl),u,p)),this.events.next(new rg(d.redirectTo,d.navigationBehaviorOptions))}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return qn}))}))}cancelNavigationTransition(e,n,r){const o=new Ja(e.id,this.urlSerializer.serialize(e.extractedUrl),n,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ace(t){return t!==Bu}let Pce=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:()=>_(Fce),providedIn:"root"})}return t})();class Rce{shouldDetach(i){return!1}store(i,e){}shouldAttach(i){return!1}retrieve(i){return null}shouldReuseRoute(i,e){return i.routeConfig===e.routeConfig}}let Fce=(()=>{class t extends Rce{static \u0275fac=(()=>{let e;return function(r){return(e||(e=xt(t)))(r||t)}})();static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kN=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:()=>_(Oce),providedIn:"root"})}return t})(),Oce=(()=>{class t extends kN{location=_(gl);urlSerializer=_(Wl);options=_(Jl,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=_(Aw);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Qa;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=tN(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(n=>{"popstate"===n.type&&e(n.url,n.state)})}handleRouterEvent(e,n){if(e instanceof ig)this.stateMemento=this.createStateMemento();else if(e instanceof Gl)this.rawUrlTree=n.initialUrl;else if(e instanceof ZL){if("eager"===this.urlUpdateStrategy&&!n.extras.skipLocationChange){const r=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(n.targetBrowserUrl??r,n)}}else e instanceof vw?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,"deferred"===this.urlUpdateStrategy&&!n.extras.skipLocationChange&&this.setBrowserUrl(n.targetBrowserUrl??this.rawUrlTree,n)):e instanceof Ja&&(e.code===zn.GuardRejected||e.code===zn.NoDataFromResolver)?this.restoreHistory(n):e instanceof gw?this.restoreHistory(n,!0):e instanceof go&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,n){const r=e instanceof Qa?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl){const a={...n.extras.state,...this.generateNgRouterState(n.id,this.browserPageId)};this.location.replaceState(r,"",a)}else{const o={...n.extras.state,...this.generateNgRouterState(n.id,this.browserPageId+1)};this.location.go(r,"",o)}}restoreHistory(e,n=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&0===o&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=xt(t)))(r||t)}})();static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function DN(t,i){t.events.pipe(Qe(e=>e instanceof go||e instanceof Ja||e instanceof gw||e instanceof Gl),me(e=>e instanceof go||e instanceof Gl?0:e instanceof Ja&&(e.code===zn.Redirect||e.code===zn.SupersededByNewNavigation)?2:1),Qe(e=>2!==e),pi(1)).subscribe(()=>{i()})}const Lce={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Nce={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let vo=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=_(Vx);stateManager=_(kN);options=_(Jl,{optional:!0})||{};pendingTasks=_(xo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=_(hg);urlSerializer=_(Wl);location=_(gl);urlHandlingStrategy=_(Aw);_events=new Y;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=_(Pce);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=_(ec,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!_(sg,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new je;subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(n=>{try{const r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(null!==r&&null!==o)if(this.stateManager.handleRouterEvent(n,o),n instanceof Ja&&n.code!==zn.Redirect&&n.code!==zn.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof go)this.navigated=!0;else if(n instanceof rg){const a=n.navigationBehaviorOptions,s=this.urlHandlingStrategy.merge(n.url,r.currentRawUrl),l={browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||"eager"===this.urlUpdateStrategy||Ace(r.source),...a};this.scheduleNavigation(s,Bu,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}(function Hce(t){return!(t instanceof vw||t instanceof rg)})(n)&&this._events.next(n)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Bu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",n)},0)})}navigateToSyncWithBrowser(e,n,r){const o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(o.state=l)}const s=this.parseUrl(e);this.scheduleNavigation(s,n,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Mw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,n={}){const{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:l}=n,c=l?this.currentUrlTree.fragment:a;let u,d=null;switch(s??this.options.defaultQueryParamsHandling){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}null!==d&&(d=this.removeEmptyProps(d));try{u=zL(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||"/"!==e[0][0])&&(e=[]),u=this.currentUrlTree.root}return $L(u,e,d,c??null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=Xa(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Bu,null,n)}navigate(e,n={skipLocationChange:!1}){return function Bce(t){for(let i=0;i<t.length;i++)if(null==t[i])throw new N(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,n){let r;if(r=!0===n?{...Lce}:!1===n?{...Nce}:n,Xa(e))return OL(this.currentUrlTree,e,r);const o=this.parseUrl(e);return OL(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((n,[r,o])=>(null!=o&&(n[r]=o),n),{})}scheduleNavigation(e,n,r,o,a){if(this.disposed)return Promise.resolve(!1);let s,l,c;a?(s=a.resolve,l=a.reject,c=a.promise):c=new Promise((u,p)=>{s=u,l=p});const d=this.pendingTasks.add();return DN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:s,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(u=>Promise.reject(u))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class TN{}let jce=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(e,n,r,o,a){this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Qe(e=>e instanceof go),Dl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const o of n){o.providers&&!o._injector&&(o._injector=Ff(o.providers,e,`Route: ${o.path}`));const a=o._injector??e,s=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(s,o.children??o._loadedRoutes))}return mi(r).pipe(_l())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(e,n):ue(null);const o=r.pipe(Ui(a=>null===a?ue(void 0):(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,this.processRoutes(a.injector??e,a.routes))));return n.loadComponent&&!n._loadedComponent?mi([o,this.loader.loadComponent(n)]).pipe(_l()):o})}static \u0275fac=function(n){return new(n||t)(P(vo),P(tI),P(Fi),P(TN),P(Iw))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Fw=new B("");let xN=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,n,r,o,a={}){this.urlSerializer=e,this.transitions=n,this.viewportScroller=r,this.zone=o,this.options=a,a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof ig?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof go?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Gl&&e.code===ng.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof XL&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new XL(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(n){!function zT(){throw new Error("invalid")}()};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})();function Wr(t,i){return{\u0275kind:t,\u0275providers:i}}function MN(){const t=_(we);return i=>{const e=t.get(an);if(i!==e.components[0])return;const n=t.get(vo),r=t.get(IN);1===t.get(Ow)&&n.initialNavigation(),t.get(AN,null,Ue.Optional)?.setUpPreloading(),t.get(Fw,null,Ue.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const IN=new B("",{factory:()=>new Y}),Ow=new B("",{providedIn:"root",factory:()=>1}),AN=new B("");function Wce(t){return Wr(0,[{provide:AN,useExisting:jce},{provide:TN,useExisting:t}])}function Yce(t){return Wr(9,[{provide:wN,useValue:Mce},{provide:CN,useValue:{skipNextTransition:!!t?.skipInitialTransition,...t}}])}const Kce=[gl,{provide:Wl,useClass:Qp},vo,Vu,{provide:Kl,useFactory:function EN(t){return t.routerState.root},deps:[vo]},Iw,[]];let PN=(()=>{class t{constructor(){}static forRoot(e,n){return{ngModule:t,providers:[Kce,[],{provide:ec,multi:!0,useValue:e},[],n?.errorHandler?{provide:Pw,useValue:n.errorHandler}:[],{provide:Jl,useValue:n||{}},n?.useHash?{provide:Fa,useClass:L6}:{provide:Fa,useClass:UI},{provide:Fw,useFactory:()=>{const t=_(ZW),i=_(ce),e=_(Jl),n=_(hg),r=_(Wl);return e.scrollOffset&&t.setOffset(e.scrollOffset),new xN(r,n,t,i,e)}},n?.preloadingStrategy?Wce(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?Jce(n):[],n?.bindToComponentInputs?Wr(8,[aN,{provide:sg,useExisting:aN}]).\u0275providers:[],n?.enableViewTransitions?Yce().\u0275providers:[],[{provide:RN,useFactory:MN},{provide:ud,multi:!0,useExisting:RN}]]}}static forChild(e){return{ngModule:t,providers:[{provide:ec,multi:!0,useValue:e}]}}static \u0275fac=function(n){return new(n||t)};static \u0275mod=mt({type:t});static \u0275inj=lt({})}return t})();function Jce(t){return["disabled"===t.initialNavigation?Wr(3,[{provide:jf,multi:!0,useFactory:()=>{const i=_(vo);return()=>{i.setUpLocationChangeListener()}}},{provide:Ow,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Wr(2,[{provide:Ow,useValue:0},{provide:jf,multi:!0,deps:[we],useFactory:i=>{const e=i.get(F6,Promise.resolve());return()=>e.then(()=>new Promise(n=>{const r=i.get(vo),o=i.get(IN);DN(r,()=>{n(!0)}),i.get(hg).afterPreactivation=()=>(n(!0),o.closed?ue(void 0):o),r.initialNavigation()}))}}]).\u0275providers:[]]}const RN=new B(""),tde=[];let ide=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=mt({type:t})}static{this.\u0275inj=lt({imports:[PN.forRoot(tde),PN]})}}return t})();function FN(t){return new N(3e3,!1)}function Qo(t){switch(t.length){case 0:return new Od;case 1:return t[0];default:return new BA(t)}}function ON(t,i,e=new Map,n=new Map){const r=[],o=[];let a=-1,s=null;if(i.forEach(l=>{const c=l.get("offset"),d=c==a,u=d&&s||new Map;l.forEach((p,g)=>{let m=g,b=p;if("offset"!==g)switch(m=t.normalizePropertyName(m,r),b){case"!":b=e.get(g);break;case fo:b=n.get(g);break;default:b=t.normalizeStyleValue(g,m,b,r)}u.set(m,b)}),d||o.push(u),s=u,a=c}),r.length)throw function Dde(){return new N(3502,!1)}();return o}function Lw(t,i,e,n){switch(i){case"start":t.onStart(()=>n(e&&Nw(e,"start",t)));break;case"done":t.onDone(()=>n(e&&Nw(e,"done",t)));break;case"destroy":t.onDestroy(()=>n(e&&Nw(e,"destroy",t)))}}function Nw(t,i,e){const o=Bw(t.element,t.triggerName,t.fromState,t.toState,i||t.phaseName,e.totalTime??t.totalTime,!!e.disabled),a=t._data;return null!=a&&(o._data=a),o}function Bw(t,i,e,n,r="",o=0,a){return{element:t,triggerName:i,fromState:e,toState:n,phaseName:r,totalTime:o,disabled:!!a}}function $n(t,i,e){let n=t.get(i);return n||t.set(i,n=e),n}function LN(t){const i=t.indexOf(":");return[t.substring(1,i),t.slice(i+1)]}const Nde=typeof document>"u"?null:document.documentElement;function Hw(t){const i=t.parentNode||t.host||null;return i===Nde?null:i}let es=null,NN=!1;function BN(t,i){for(;i;){if(i===t)return!0;i=Hw(i)}return!1}function HN(t,i,e){if(e)return Array.from(t.querySelectorAll(i));const n=t.querySelector(i);return n?[n]:[]}let Vw=(()=>{class t{validateStyleProperty(e){return function Hde(t){es||(es=function Vde(){return typeof document<"u"?document.body:null}()||{},NN=!!es.style&&"WebkitAppearance"in es.style);let i=!0;return es.style&&!function Bde(t){return"ebkit"==t.substring(1,6)}(t)&&(i=t in es.style,!i&&NN&&(i="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in es.style)),i}(e)}containsElement(e,n){return BN(e,n)}getParentElement(e){return Hw(e)}query(e,n,r){return HN(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,o,a,s=[],l){return new Od(r,o)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})();class qw{static NOOP=new Vw}class jw{}const Uw="ng-enter",fg="ng-leave",mg="ng-trigger",pg=".ng-trigger",qN="ng-animating",zw=".ng-animating";function yo(t){if("number"==typeof t)return t;const i=t.match(/^(-?[\.\d]+)(m?s)/);return!i||i.length<2?0:$w(parseFloat(i[1]),i[2])}function $w(t,i){return"s"===i?1e3*t:t}function gg(t,i,e){return t.hasOwnProperty("duration")?t:function zde(t,i,e){let r,o=0,a="";if("string"==typeof t){const s=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===s)return i.push(FN()),{duration:0,delay:0,easing:""};r=$w(parseFloat(s[1]),s[2]);const l=s[3];null!=l&&(o=$w(parseFloat(l),s[4]));const c=s[5];c&&(a=c)}else r=t;if(!e){let s=!1,l=i.length;r<0&&(i.push(function nde(){return new N(3100,!1)}()),s=!0),o<0&&(i.push(function rde(){return new N(3101,!1)}()),s=!0),s&&i.splice(l,0,FN())}return{duration:r,delay:o,easing:a}}(t,i,e)}function Gr(t,i,e){i.forEach((n,r)=>{const o=Gw(r);e&&!e.has(r)&&e.set(r,t.style[o]),t.style[o]=n})}function ts(t,i){i.forEach((e,n)=>{const r=Gw(n);t.style[r]=""})}function $u(t){return Array.isArray(t)?1==t.length?t[0]:function TY(t,i=null){return{type:ke.Sequence,steps:t,options:i}}(t):t}const Ww=new RegExp("{{\\s*(.+?)\\s*}}","g");function UN(t){let i=[];if("string"==typeof t){let e;for(;e=Ww.exec(t);)i.push(e[1]);Ww.lastIndex=0}return i}function Wu(t,i,e){const n=`${t}`,r=n.replace(Ww,(o,a)=>{let s=i[a];return null==s&&(e.push(function ade(){return new N(3003,!1)}()),s=""),s.toString()});return r==n?t:r}const Gde=/-+([a-z0-9])/g;function Gw(t){return t.replace(Gde,(...i)=>i[1].toUpperCase())}function Wn(t,i,e){switch(i.type){case ke.Trigger:return t.visitTrigger(i,e);case ke.State:return t.visitState(i,e);case ke.Transition:return t.visitTransition(i,e);case ke.Sequence:return t.visitSequence(i,e);case ke.Group:return t.visitGroup(i,e);case ke.Animate:return t.visitAnimate(i,e);case ke.Keyframes:return t.visitKeyframes(i,e);case ke.Style:return t.visitStyle(i,e);case ke.Reference:return t.visitReference(i,e);case ke.AnimateChild:return t.visitAnimateChild(i,e);case ke.AnimateRef:return t.visitAnimateRef(i,e);case ke.Query:return t.visitQuery(i,e);case ke.Stagger:return t.visitStagger(i,e);default:throw function sde(){return new N(3004,!1)}()}}function Yw(t,i){return window.getComputedStyle(t)[i]}const Qde=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class zN extends jw{normalizePropertyName(i,e){return Gw(i)}normalizeStyleValue(i,e,n,r){let o="";const a=n.toString().trim();if(Qde.has(e)&&0!==n&&"0"!==n)if("number"==typeof n)o="px";else{const s=n.match(/^[+-]?[\d\.]+([a-z]*)$/);s&&0==s[1].length&&r.push(function lde(){return new N(3005,!1)}())}return a+o}}const yg=new Set(["true","1"]),_g=new Set(["false","0"]);function $N(t,i){const e=yg.has(t)||_g.has(t),n=yg.has(i)||_g.has(i);return(r,o)=>{let a="*"==t||t==r,s="*"==i||i==o;return!a&&e&&"boolean"==typeof r&&(a=r?yg.has(t):_g.has(t)),!s&&n&&"boolean"==typeof o&&(s=o?yg.has(i):_g.has(i)),a&&s}}const eue=new RegExp("s*:selfs*,?","g");function Qw(t,i,e,n){return new tue(t).build(i,e,n)}class tue{_driver;constructor(i){this._driver=i}build(i,e,n){const r=new rue(e);return this._resetContextStyleTimingState(r),Wn(this,$u(i),r)}_resetContextStyleTimingState(i){i.currentQuerySelector="",i.collectedStyles=new Map,i.collectedStyles.set("",new Map),i.currentTime=0}visitTrigger(i,e){let n=e.queryCount=0,r=e.depCount=0;const o=[],a=[];return"@"==i.name.charAt(0)&&e.errors.push(function cde(){return new N(3006,!1)}()),i.definitions.forEach(s=>{if(this._resetContextStyleTimingState(e),s.type==ke.State){const l=s,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,o.push(this.visitState(l,e))}),l.name=c}else if(s.type==ke.Transition){const l=this.visitTransition(s,e);n+=l.queryCount,r+=l.depCount,a.push(l)}else e.errors.push(function dde(){return new N(3007,!1)}())}),{type:ke.Trigger,name:i.name,states:o,transitions:a,queryCount:n,depCount:r,options:null}}visitState(i,e){const n=this.visitStyle(i.styles,e),r=i.options&&i.options.params||null;if(n.containsDynamicStyles){const o=new Set,a=r||{};n.styles.forEach(s=>{s instanceof Map&&s.forEach(l=>{UN(l).forEach(c=>{a.hasOwnProperty(c)||o.add(c)})})}),o.size&&e.errors.push(function ude(){return new N(3008,!1)}(0,o.values()))}return{type:ke.State,name:i.name,style:n,options:r?{params:r}:null}}visitTransition(i,e){e.queryCount=0,e.depCount=0;const n=Wn(this,$u(i.animation),e),r=function Zde(t,i){const e=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(n=>function Xde(t,i,e){if(":"==t[0]){const l=function Jde(t,i){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return i.push(function Sde(){return new N(3016,!1)}()),"* => *"}}(t,e);if("function"==typeof l)return void i.push(l);t=l}const n=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(function bde(){return new N(3015,!1)}()),i;const r=n[1],o=n[2],a=n[3];i.push($N(r,a)),"<"==o[0]&&("*"!=r||"*"!=a)&&i.push($N(a,r))}(n,e,i)):e.push(t),e}(i.expr,e.errors);return{type:ke.Transition,matchers:r,animation:n,queryCount:e.queryCount,depCount:e.depCount,options:is(i.options)}}visitSequence(i,e){return{type:ke.Sequence,steps:i.steps.map(n=>Wn(this,n,e)),options:is(i.options)}}visitGroup(i,e){const n=e.currentTime;let r=0;const o=i.steps.map(a=>{e.currentTime=n;const s=Wn(this,a,e);return r=Math.max(r,e.currentTime),s});return e.currentTime=r,{type:ke.Group,steps:o,options:is(i.options)}}visitAnimate(i,e){const n=function aue(t,i){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return Zw(gg(t,i).duration,0,"");const e=t;if(e.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=Zw(0,0,"");return o.dynamic=!0,o.strValue=e,o}const r=gg(e,i);return Zw(r.duration,r.delay,r.easing)}(i.timings,e.errors);e.currentAnimateTimings=n;let r,o=i.styles?i.styles:jn({});if(o.type==ke.Keyframes)r=this.visitKeyframes(o,e);else{let a=i.styles,s=!1;if(!a){s=!0;const c={};n.easing&&(c.easing=n.easing),a=jn(c)}e.currentTime+=n.duration+n.delay;const l=this.visitStyle(a,e);l.isEmptyStep=s,r=l}return e.currentAnimateTimings=null,{type:ke.Animate,timings:n,style:r,options:null}}visitStyle(i,e){const n=this._makeStyleAst(i,e);return this._validateStyleAst(n,e),n}_makeStyleAst(i,e){const n=[],r=Array.isArray(i.styles)?i.styles:[i.styles];for(let s of r)"string"==typeof s?s===fo?n.push(s):e.errors.push(new N(3002,!1)):n.push(new Map(Object.entries(s)));let o=!1,a=null;return n.forEach(s=>{if(s instanceof Map&&(s.has("easing")&&(a=s.get("easing"),s.delete("easing")),!o))for(let l of s.values())if(l.toString().indexOf("{{")>=0){o=!0;break}}),{type:ke.Style,styles:n,easing:a,offset:i.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(i,e){const n=e.currentAnimateTimings;let r=e.currentTime,o=e.currentTime;n&&o>0&&(o-=n.duration+n.delay),i.styles.forEach(a=>{"string"!=typeof a&&a.forEach((s,l)=>{const c=e.collectedStyles.get(e.currentQuerySelector),d=c.get(l);let u=!0;d&&(o!=r&&o>=d.startTime&&r<=d.endTime&&(e.errors.push(function fde(){return new N(3010,!1)}()),u=!1),o=d.startTime),u&&c.set(l,{startTime:o,endTime:r}),e.options&&function Wde(t,i,e){const n=i.params||{},r=UN(t);r.length&&r.forEach(o=>{n.hasOwnProperty(o)||e.push(function ode(){return new N(3001,!1)}())})}(s,e.options,e.errors)})})}visitKeyframes(i,e){const n={type:ke.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function mde(){return new N(3011,!1)}()),n;let o=0;const a=[];let s=!1,l=!1,c=0;const d=i.steps.map(w=>{const k=this._makeStyleAst(w,e);let F=null!=k.offset?k.offset:function oue(t){if("string"==typeof t)return null;let i=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){const n=e;i=parseFloat(n.get("offset")),n.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const e=t;i=parseFloat(e.get("offset")),e.delete("offset")}return i}(k.styles),U=0;return null!=F&&(o++,U=k.offset=F),l=l||U<0||U>1,s=s||U<c,c=U,a.push(U),k});l&&e.errors.push(function pde(){return new N(3012,!1)}()),s&&e.errors.push(function gde(){return new N(3200,!1)}());const u=i.steps.length;let p=0;o>0&&o<u?e.errors.push(function vde(){return new N(3202,!1)}()):0==o&&(p=1/(u-1));const g=u-1,m=e.currentTime,b=e.currentAnimateTimings,C=b.duration;return d.forEach((w,k)=>{const F=p>0?k==g?1:p*k:a[k],U=F*C;e.currentTime=m+b.delay+U,b.duration=U,this._validateStyleAst(w,e),w.offset=F,n.styles.push(w)}),n}visitReference(i,e){return{type:ke.Reference,animation:Wn(this,$u(i.animation),e),options:is(i.options)}}visitAnimateChild(i,e){return e.depCount++,{type:ke.AnimateChild,options:is(i.options)}}visitAnimateRef(i,e){return{type:ke.AnimateRef,animation:this.visitReference(i.animation,e),options:is(i.options)}}visitQuery(i,e){const n=e.currentQuerySelector,r=i.options||{};e.queryCount++,e.currentQuery=i;const[o,a]=function iue(t){const i=!!t.split(/\s*,\s*/).find(e=>":self"==e);return i&&(t=t.replace(eue,"")),t=t.replace(/@\*/g,pg).replace(/@\w+/g,e=>pg+"-"+e.slice(1)).replace(/:animating/g,zw),[t,i]}(i.selector);e.currentQuerySelector=n.length?n+" "+o:o,$n(e.collectedStyles,e.currentQuerySelector,new Map);const s=Wn(this,$u(i.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:ke.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:s,originalSelector:i.selector,options:is(i.options)}}visitStagger(i,e){e.currentQuery||e.errors.push(function yde(){return new N(3013,!1)}());const n="full"===i.timings?{duration:0,delay:0,easing:"full"}:gg(i.timings,e.errors,!0);return{type:ke.Stagger,animation:Wn(this,$u(i.animation),e),timings:n,options:null}}}class rue{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(i){this.errors=i}}function is(t){return t?(t={...t}).params&&(t.params=function nue(t){return t?{...t}:null}(t.params)):t={},t}function Zw(t,i,e){return{duration:t,delay:i,easing:e}}function Xw(t,i,e,n,r,o,a=null,s=!1){return{type:1,element:t,keyframes:i,preStyleProps:e,postStyleProps:n,duration:r,delay:o,totalTime:r+o,easing:a,subTimeline:s}}class bg{_map=new Map;get(i){return this._map.get(i)||[]}append(i,e){let n=this._map.get(i);n||this._map.set(i,n=[]),n.push(...e)}has(i){return this._map.has(i)}clear(){this._map.clear()}}const cue=new RegExp(":enter","g"),uue=new RegExp(":leave","g");function Jw(t,i,e,n,r,o=new Map,a=new Map,s,l,c=[]){return(new hue).buildKeyframes(t,i,e,n,r,o,a,s,l,c)}class hue{buildKeyframes(i,e,n,r,o,a,s,l,c,d=[]){c=c||new bg;const u=new eC(i,e,c,r,o,d,[]);u.options=l;const p=l.delay?yo(l.delay):0;u.currentTimeline.delayNextStep(p),u.currentTimeline.setStyles([a],null,u.errors,l),Wn(this,n,u);const g=u.timelines.filter(m=>m.containsAnimation());if(g.length&&s.size){let m;for(let b=g.length-1;b>=0;b--){const C=g[b];if(C.element===e){m=C;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([s],null,u.errors,l)}return g.length?g.map(m=>m.buildKeyframes()):[Xw(e,[],[],[],0,p,"",!1)]}visitTrigger(i,e){}visitState(i,e){}visitTransition(i,e){}visitAnimateChild(i,e){const n=e.subInstructions.get(e.element);if(n){const r=e.createSubContext(i.options),o=e.currentTimeline.currentTime,a=this._visitSubInstructions(n,r,r.options);o!=a&&e.transformIntoNewTimeline(a)}e.previousNode=i}visitAnimateRef(i,e){const n=e.createSubContext(i.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([i.options,i.animation.options],e,n),this.visitReference(i.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=i}_applyAnimationRefDelays(i,e,n){for(const r of i){const o=r?.delay;if(o){const a="number"==typeof o?o:yo(Wu(o,r?.params??{},e.errors));n.delayNextStep(a)}}}_visitSubInstructions(i,e,n){let o=e.currentTimeline.currentTime;const a=null!=n.duration?yo(n.duration):null,s=null!=n.delay?yo(n.delay):null;return 0!==a&&i.forEach(l=>{const c=e.appendInstructionToTimeline(l,a,s);o=Math.max(o,c.duration+c.delay)}),o}visitReference(i,e){e.updateOptions(i.options,!0),Wn(this,i.animation,e),e.previousNode=i}visitSequence(i,e){const n=e.subContextCount;let r=e;const o=i.options;if(o&&(o.params||o.delay)&&(r=e.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){r.previousNode.type==ke.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Sg);const a=yo(o.delay);r.delayNextStep(a)}i.steps.length&&(i.steps.forEach(a=>Wn(this,a,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=i}visitGroup(i,e){const n=[];let r=e.currentTimeline.currentTime;const o=i.options&&i.options.delay?yo(i.options.delay):0;i.steps.forEach(a=>{const s=e.createSubContext(i.options);o&&s.delayNextStep(o),Wn(this,a,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(a=>e.currentTimeline.mergeTimelineCollectedStyles(a)),e.transformIntoNewTimeline(r),e.previousNode=i}_visitTiming(i,e){if(i.dynamic){const n=i.strValue;return gg(e.params?Wu(n,e.params,e.errors):n,e.errors)}return{duration:i.duration,delay:i.delay,easing:i.easing}}visitAnimate(i,e){const n=e.currentAnimateTimings=this._visitTiming(i.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const o=i.style;o.type==ke.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(n.duration),this.visitStyle(o,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=i}visitStyle(i,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const o=r&&r.easing||i.easing;i.isEmptyStep?n.applyEmptyStep(o):n.setStyles(i.styles,o,e.errors,e.options),e.previousNode=i}visitKeyframes(i,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,o=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,i.styles.forEach(l=>{s.forwardTime((l.offset||0)*o),s.setStyles(l.styles,l.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+o),e.previousNode=i}visitQuery(i,e){const n=e.currentTimeline.currentTime,r=i.options||{},o=r.delay?yo(r.delay):0;o&&(e.previousNode.type===ke.Style||0==n&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Sg);let a=n;const s=e.invokeQuery(i.selector,i.originalSelector,i.limit,i.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let l=null;s.forEach((c,d)=>{e.currentQueryIndex=d;const u=e.createSubContext(i.options,c);o&&u.delayNextStep(o),c===e.element&&(l=u.currentTimeline),Wn(this,i.animation,u),u.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,u.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=i}visitStagger(i,e){const n=e.parentContext,r=e.currentTimeline,o=i.timings,a=Math.abs(o.duration),s=a*(e.currentQueryTotal-1);let l=a*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=s-l;break;case"full":l=n.currentStaggerTime}const d=e.currentTimeline;l&&d.delayNextStep(l);const u=d.currentTime;Wn(this,i.animation,e),e.previousNode=i,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const Sg={};class eC{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Sg;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(i,e,n,r,o,a,s,l){this._driver=i,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=o,this.errors=a,this.timelines=s,this.currentTimeline=l||new wg(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(i,e){if(!i)return;const n=i;let r=this.options;null!=n.duration&&(r.duration=yo(n.duration)),null!=n.delay&&(r.delay=yo(n.delay));const o=n.params;if(o){let a=r.params;a||(a=this.options.params={}),Object.keys(o).forEach(s=>{(!e||!a.hasOwnProperty(s))&&(a[s]=Wu(o[s],a,this.errors))})}}_copyOptions(){const i={};if(this.options){const e=this.options.params;if(e){const n=i.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return i}createSubContext(i=null,e,n){const r=e||this.element,o=new eC(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(i),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(i){return this.previousNode=Sg,this.currentTimeline=this.currentTimeline.fork(this.element,i),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(i,e,n){const r={duration:e??i.duration,delay:this.currentTimeline.currentTime+(n??0)+i.delay,easing:""},o=new fue(this._driver,i.element,i.keyframes,i.preStyleProps,i.postStyleProps,r,i.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(i){this.currentTimeline.forwardTime(this.currentTimeline.duration+i)}delayNextStep(i){i>0&&this.currentTimeline.delayNextStep(i)}invokeQuery(i,e,n,r,o,a){let s=[];if(r&&s.push(this.element),i.length>0){i=(i=i.replace(cue,"."+this._enterClassName)).replace(uue,"."+this._leaveClassName);let c=this._driver.query(this.element,i,1!=n);0!==n&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),s.push(...c)}return!o&&0==s.length&&a.push(function _de(){return new N(3014,!1)}()),s}}class wg{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(i,e,n,r){this._driver=i,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(i){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+i),e&&this.snapshotCurrentStyles()):this.startTime+=i}fork(i,e){return this.applyStylesToKeyframe(),new wg(this._driver,i,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(i){this.applyStylesToKeyframe(),this.duration=i,this._loadKeyframe()}_updateStyle(i,e){this._localTimelineStyles.set(i,e),this._globalTimelineStyles.set(i,e),this._styleSummary.set(i,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(i){i&&this._previousKeyframe.set("easing",i);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||fo),this._currentKeyframe.set(e,fo);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(i,e,n,r){e&&this._previousKeyframe.set("easing",e);const o=r&&r.params||{},a=function mue(t,i){const e=new Map;let n;return t.forEach(r=>{if("*"===r){n??=i.keys();for(let o of n)e.set(o,fo)}else for(let[o,a]of r)e.set(o,a)}),e}(i,this._globalTimelineStyles);for(let[s,l]of a){const c=Wu(l,o,n);this._pendingStyles.set(s,c),this._localTimelineStyles.has(s)||this._backFill.set(s,this._globalTimelineStyles.get(s)??fo),this._updateStyle(s,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((i,e)=>{this._currentKeyframe.set(e,i)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((i,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,i)}))}snapshotCurrentStyles(){for(let[i,e]of this._localTimelineStyles)this._pendingStyles.set(i,e),this._updateStyle(i,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const i=[];for(let e in this._currentKeyframe)i.push(e);return i}mergeTimelineCollectedStyles(i){i._styleSummary.forEach((e,n)=>{const r=this._styleSummary.get(n);(!r||e.time>r.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const i=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((s,l)=>{const c=new Map([...this._backFill,...s]);c.forEach((d,u)=>{"!"===d?i.add(u):d===fo&&e.add(u)}),n||c.set("offset",l/this.duration),r.push(c)});const o=[...i.values()],a=[...e.values()];if(n){const s=r[0],l=new Map(s);s.set("offset",0),l.set("offset",1),r=[s,l]}return Xw(this.element,r,o,a,this.duration,this.startTime,this.easing,!1)}}class fue extends wg{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(i,e,n,r,o,a,s=!1){super(i,e,a.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=s,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let i=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],a=n+e,s=e/a,l=new Map(i[0]);l.set("offset",0),o.push(l);const c=new Map(i[0]);c.set("offset",YN(s)),o.push(c);const d=i.length-1;for(let u=1;u<=d;u++){let p=new Map(i[u]);const g=p.get("offset");p.set("offset",YN((e+g*n)/a)),o.push(p)}n=a,e=0,r="",i=o}return Xw(this.element,i,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function YN(t,i=3){const e=Math.pow(10,i-1);return Math.round(t*e)/e}function KN(t,i,e,n,r,o,a,s,l,c,d,u,p){return{type:0,element:t,triggerName:i,isRemovalTransition:r,fromState:e,fromStyles:o,toState:n,toStyles:a,timelines:s,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:u,errors:p}}const tC={};class QN{_triggerName;ast;_stateStyles;constructor(i,e,n){this._triggerName=i,this.ast=e,this._stateStyles=n}match(i,e,n,r){return function pue(t,i,e,n,r){return t.some(o=>o(i,e,n,r))}(this.ast.matchers,i,e,n,r)}buildStyles(i,e,n){let r=this._stateStyles.get("*");return void 0!==i&&(r=this._stateStyles.get(i?.toString())||r),r?r.buildStyles(e,n):new Map}build(i,e,n,r,o,a,s,l,c,d){const u=[],p=this.ast.options&&this.ast.options.params||tC,m=this.buildStyles(n,s&&s.params||tC,u),b=l&&l.params||tC,C=this.buildStyles(r,b,u),w=new Set,k=new Map,F=new Map,U="void"===r,X={params:ZN(b,p),delay:this.ast.options?.delay},J=d?[]:Jw(i,e,this.ast.animation,o,a,m,C,X,c,u);let ee=0;return J.forEach(se=>{ee=Math.max(se.duration+se.delay,ee)}),u.length?KN(e,this._triggerName,n,r,U,m,C,[],[],k,F,ee,u):(J.forEach(se=>{const Ee=se.element,ut=$n(k,Ee,new Set);se.preStyleProps.forEach(ni=>ut.add(ni));const St=$n(F,Ee,new Set);se.postStyleProps.forEach(ni=>St.add(ni)),Ee!==e&&w.add(Ee)}),KN(e,this._triggerName,n,r,U,m,C,J,[...w.values()],k,F,ee))}}function ZN(t,i){const e={...i};return Object.entries(t).forEach(([n,r])=>{null!=r&&(e[n]=r)}),e}class gue{styles;defaultParams;normalizer;constructor(i,e,n){this.styles=i,this.defaultParams=e,this.normalizer=n}buildStyles(i,e){const n=new Map,r=ZN(i,this.defaultParams);return this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,s)=>{a&&(a=Wu(a,r,e));const l=this.normalizer.normalizePropertyName(s,e);a=this.normalizer.normalizeStyleValue(s,l,a,e),n.set(s,a)})}),n}}class yue{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(i,e,n){this.name=i,this.ast=e,this._normalizer=n,e.states.forEach(r=>{this.states.set(r.name,new gue(r.style,r.options&&r.options.params||{},n))}),XN(this.states,"true","1"),XN(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new QN(i,r,this.states))}),this.fallbackTransition=function _ue(t,i){return new QN(t,{type:ke.Transition,animation:{type:ke.Sequence,steps:[],options:null},matchers:[(a,s)=>!0],options:null,queryCount:0,depCount:0},i)}(i,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(i,e,n,r){return this.transitionFactories.find(a=>a.match(i,e,n,r))||null}matchStyles(i,e,n){return this.fallbackTransition.buildStyles(i,e,n)}}function XN(t,i,e){t.has(i)?t.has(e)||t.set(e,t.get(i)):t.has(e)&&t.set(i,t.get(e))}const bue=new bg;class Sue{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(i,e,n){this.bodyNode=i,this._driver=e,this._normalizer=n}register(i,e){const n=[],o=Qw(this._driver,e,n,[]);if(n.length)throw function Tde(){return new N(3503,!1)}();this._animations.set(i,o)}_buildPlayer(i,e,n){const r=i.element,o=ON(this._normalizer,i.keyframes,e,n);return this._driver.animate(r,o,i.duration,i.delay,i.easing,[],!0)}create(i,e,n={}){const r=[],o=this._animations.get(i);let a;const s=new Map;if(o?(a=Jw(this._driver,e,o,Uw,fg,new Map,new Map,n,bue,r),a.forEach(d=>{const u=$n(s,d.element,new Map);d.postStyleProps.forEach(p=>u.set(p,null))})):(r.push(function xde(){return new N(3300,!1)}()),a=[]),r.length)throw function Ede(){return new N(3504,!1)}();s.forEach((d,u)=>{d.forEach((p,g)=>{d.set(g,this._driver.computeStyle(u,g,fo))})});const c=Qo(a.map(d=>{const u=s.get(d.element);return this._buildPlayer(d,new Map,u)}));return this._playersById.set(i,c),c.onDestroy(()=>this.destroy(i)),this.players.push(c),c}destroy(i){const e=this._getPlayer(i);e.destroy(),this._playersById.delete(i);const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(i){const e=this._playersById.get(i);if(!e)throw function Mde(){return new N(3301,!1)}();return e}listen(i,e,n,r){const o=Bw(e,"","","");return Lw(this._getPlayer(i),n,o,r),()=>{}}command(i,e,n,r){if("register"==n)return void this.register(i,r[0]);if("create"==n)return void this.create(i,e,r[0]||{});const o=this._getPlayer(i);switch(n){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(i)}}}const JN="ng-animate-queued",iC="ng-animate-disabled",Tue=[],e2={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},xue={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Tr="__ng_removed";class nC{namespaceId;value;options;get params(){return this.options.params}constructor(i,e=""){this.namespaceId=e;const n=i&&i.hasOwnProperty("value");if(this.value=function Aue(t){return t??null}(n?i.value:i),n){const{value:o,...a}=i;this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(i){const e=i.params;if(e){const n=this.options.params;Object.keys(e).forEach(r=>{null==n[r]&&(n[r]=e[r])})}}}const Gu="void",rC=new nC(Gu);class Eue{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(i,e,n){this.id=i,this.hostElement=e,this._engine=n,this._hostClassName="ng-tns-"+i,or(e,this._hostClassName)}listen(i,e,n,r){if(!this._triggers.has(e))throw function Ide(){return new N(3302,!1)}();if(null==n||0==n.length)throw function Ade(){return new N(3303,!1)}();if(!function Pue(t){return"start"==t||"done"==t}(n))throw function Pde(){return new N(3400,!1)}();const o=$n(this._elementListeners,i,[]),a={name:e,phase:n,callback:r};o.push(a);const s=$n(this._engine.statesByElement,i,new Map);return s.has(e)||(or(i,mg),or(i,mg+"-"+e),s.set(e,rC)),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(a);l>=0&&o.splice(l,1),this._triggers.has(e)||s.delete(e)})}}register(i,e){return!this._triggers.has(i)&&(this._triggers.set(i,e),!0)}_getTrigger(i){const e=this._triggers.get(i);if(!e)throw function Rde(){return new N(3401,!1)}();return e}trigger(i,e,n,r=!0){const o=this._getTrigger(e),a=new oC(this.id,e,i);let s=this._engine.statesByElement.get(i);s||(or(i,mg),or(i,mg+"-"+e),this._engine.statesByElement.set(i,s=new Map));let l=s.get(e);const c=new nC(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),s.set(e,c),l||(l=rC),c.value!==Gu&&l.value===c.value){if(!function Oue(t,i){const e=Object.keys(t),n=Object.keys(i);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){const o=e[r];if(!i.hasOwnProperty(o)||t[o]!==i[o])return!1}return!0}(l.params,c.params)){const b=[],C=o.matchStyles(l.value,l.params,b),w=o.matchStyles(c.value,c.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{ts(i,C),Gr(i,w)})}return}const p=$n(this._engine.playersByElement,i,[]);p.forEach(b=>{b.namespaceId==this.id&&b.triggerName==e&&b.queued&&b.destroy()});let g=o.matchTransition(l.value,c.value,i,c.params),m=!1;if(!g){if(!r)return;g=o.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:e,transition:g,fromState:l,toState:c,player:a,isFallbackTransition:m}),m||(or(i,JN),a.onStart(()=>{tc(i,JN)})),a.onDone(()=>{let b=this.players.indexOf(a);b>=0&&this.players.splice(b,1);const C=this._engine.playersByElement.get(i);if(C){let w=C.indexOf(a);w>=0&&C.splice(w,1)}}),this.players.push(a),p.push(a),a}deregister(i){this._triggers.delete(i),this._engine.statesByElement.forEach(e=>e.delete(i)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=i))})}clearElementCache(i){this._engine.statesByElement.delete(i),this._elementListeners.delete(i);const e=this._engine.playersByElement.get(i);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(i))}_signalRemovalForInnerTriggers(i,e){const n=this._engine.driver.query(i,pg,!0);n.forEach(r=>{if(r[Tr])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(a=>a.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(i,e,n,r){const o=this._engine.statesByElement.get(i),a=new Map;if(o){const s=[];if(o.forEach((l,c)=>{if(a.set(c,l.value),this._triggers.has(c)){const d=this.trigger(i,c,Gu,r);d&&s.push(d)}}),s.length)return this._engine.markElementAsRemoved(this.id,i,!0,e,a),n&&Qo(s).onDone(()=>this._engine.processLeaveNode(i)),!0}return!1}prepareLeaveAnimationListeners(i){const e=this._elementListeners.get(i),n=this._engine.statesByElement.get(i);if(e&&n){const r=new Set;e.forEach(o=>{const a=o.name;if(r.has(a))return;r.add(a);const l=this._triggers.get(a).fallbackTransition,c=n.get(a)||rC,d=new nC(Gu),u=new oC(this.id,a,i);this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:a,transition:l,fromState:c,toState:d,player:u,isFallbackTransition:!0})})}}removeNode(i,e){const n=this._engine;if(i.childElementCount&&this._signalRemovalForInnerTriggers(i,e),this.triggerLeaveAnimation(i,e,!0))return;let r=!1;if(n.totalAnimations){const o=n.players.length?n.playersByQueriedElement.get(i):[];if(o&&o.length)r=!0;else{let a=i;for(;a=a.parentNode;)if(n.statesByElement.get(a)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(i),r)n.markElementAsRemoved(this.id,i,!1,e);else{const o=i[Tr];(!o||o===e2)&&(n.afterFlush(()=>this.clearElementCache(i)),n.destroyInnerAnimations(i),n._onRemovalComplete(i,e))}}insertNode(i,e){or(i,this._hostClassName)}drainQueuedTransitions(i){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const o=n.element,a=this._elementListeners.get(o);a&&a.forEach(s=>{if(s.name==n.triggerName){const l=Bw(o,n.triggerName,n.fromState.value,n.toState.value);l._data=i,Lw(n.player,s.phase,l,s.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{const o=n.transition.ast.depCount,a=r.transition.ast.depCount;return 0==o||0==a?o-a:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(i){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,i)}}class Mue{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(i,e)=>{};_onRemovalComplete(i,e){this.onRemovalComplete(i,e)}constructor(i,e,n){this.bodyNode=i,this.driver=e,this._normalizer=n}get queuedPlayers(){const i=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&i.push(n)})}),i}createNamespace(i,e){const n=new Eue(i,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[i]=n}_balanceNamespaceList(i,e){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let a=!1,s=this.driver.getParentElement(e);for(;s;){const l=r.get(s);if(l){const c=n.indexOf(l);n.splice(c+1,0,i),a=!0;break}s=this.driver.getParentElement(s)}a||n.unshift(i)}else n.push(i);return r.set(e,i),i}register(i,e){let n=this._namespaceLookup[i];return n||(n=this.createNamespace(i,e)),n}registerTrigger(i,e,n){let r=this._namespaceLookup[i];r&&r.register(e,n)&&this.totalAnimations++}destroy(i,e){i&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const n=this._fetchNamespace(i);this.namespacesByHostElement.delete(n.hostElement);const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1),n.destroy(e),delete this._namespaceLookup[i]}))}_fetchNamespace(i){return this._namespaceLookup[i]}fetchNamespacesByElement(i){const e=new Set,n=this.statesByElement.get(i);if(n)for(let r of n.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&e.add(o)}return e}trigger(i,e,n,r){if(Cg(e)){const o=this._fetchNamespace(i);if(o)return o.trigger(e,n,r),!0}return!1}insertNode(i,e,n,r){if(!Cg(e))return;const o=e[Tr];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const a=this.collectedLeaveElements.indexOf(e);a>=0&&this.collectedLeaveElements.splice(a,1)}if(i){const a=this._fetchNamespace(i);a&&a.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(i){this.collectedEnterElements.push(i)}markElementAsDisabled(i,e){e?this.disabledNodes.has(i)||(this.disabledNodes.add(i),or(i,iC)):this.disabledNodes.has(i)&&(this.disabledNodes.delete(i),tc(i,iC))}removeNode(i,e,n){if(Cg(e)){const r=i?this._fetchNamespace(i):null;r?r.removeNode(e,n):this.markElementAsRemoved(i,e,!1,n);const o=this.namespacesByHostElement.get(e);o&&o.id!==i&&o.removeNode(e,n)}else this._onRemovalComplete(e,n)}markElementAsRemoved(i,e,n,r,o){this.collectedLeaveElements.push(e),e[Tr]={namespaceId:i,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:o}}listen(i,e,n,r,o){return Cg(e)?this._fetchNamespace(i).listen(e,n,r,o):()=>{}}_buildInstruction(i,e,n,r,o){return i.transition.build(this.driver,i.element,i.fromState.value,i.toState.value,n,r,i.fromState.options,i.toState.options,e,o)}destroyInnerAnimations(i){let e=this.driver.query(i,pg,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(i,zw,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(i){const e=this.playersByElement.get(i);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(i){const e=this.playersByQueriedElement.get(i);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(i=>{if(this.players.length)return Qo(this.players).onDone(()=>i());i()})}processLeaveNode(i){const e=i[Tr];if(e&&e.setForRemoval){if(i[Tr]=e2,e.namespaceId){this.destroyInnerAnimations(i);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(i)}this._onRemovalComplete(i,e.setForRemoval)}i.classList?.contains(iC)&&this.markElementAsDisabled(i,!1),this.driver.query(i,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(i=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)or(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,i)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?Qo(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(i){throw function Fde(){return new N(3402,!1)}()}_flushAnimations(i,e){const n=new bg,r=[],o=new Map,a=[],s=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(oe=>{d.add(oe);const de=this.driver.query(oe,".ng-animate-queued",!0);for(let pe=0;pe<de.length;pe++)d.add(de[pe])});const u=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=n2(p,this.collectedEnterElements),m=new Map;let b=0;g.forEach((oe,de)=>{const pe=Uw+b++;m.set(de,pe),oe.forEach(Ne=>or(Ne,pe))});const C=[],w=new Set,k=new Set;for(let oe=0;oe<this.collectedLeaveElements.length;oe++){const de=this.collectedLeaveElements[oe],pe=de[Tr];pe&&pe.setForRemoval&&(C.push(de),w.add(de),pe.hasAnimation?this.driver.query(de,".ng-star-inserted",!0).forEach(Ne=>w.add(Ne)):k.add(de))}const F=new Map,U=n2(p,Array.from(w));U.forEach((oe,de)=>{const pe=fg+b++;F.set(de,pe),oe.forEach(Ne=>or(Ne,pe))}),i.push(()=>{g.forEach((oe,de)=>{const pe=m.get(de);oe.forEach(Ne=>tc(Ne,pe))}),U.forEach((oe,de)=>{const pe=F.get(de);oe.forEach(Ne=>tc(Ne,pe))}),C.forEach(oe=>{this.processLeaveNode(oe)})});const X=[],J=[];for(let oe=this._namespaceList.length-1;oe>=0;oe--)this._namespaceList[oe].drainQueuedTransitions(e).forEach(pe=>{const Ne=pe.player,$t=pe.element;if(X.push(Ne),this.collectedEnterElements.length){const gt=$t[Tr];if(gt&&gt.setForMove){if(gt.previousTriggersValues&&gt.previousTriggersValues.has(pe.triggerName)){const Kt=gt.previousTriggersValues.get(pe.triggerName),ri=this.statesByElement.get(pe.element);if(ri&&ri.has(pe.triggerName)){const Gi=ri.get(pe.triggerName);Gi.value=Kt,ri.set(pe.triggerName,Gi)}}return void Ne.destroy()}}const li=!u||!this.driver.containsElement(u,$t),_i=F.get($t),mn=m.get($t),it=this._buildInstruction(pe,n,mn,_i,li);if(it.errors&&it.errors.length)return void J.push(it);if(li)return Ne.onStart(()=>ts($t,it.fromStyles)),Ne.onDestroy(()=>Gr($t,it.toStyles)),void r.push(Ne);if(pe.isFallbackTransition)return Ne.onStart(()=>ts($t,it.fromStyles)),Ne.onDestroy(()=>Gr($t,it.toStyles)),void r.push(Ne);const Zo=[];it.timelines.forEach(gt=>{gt.stretchStartingKeyframe=!0,this.disabledNodes.has(gt.element)||Zo.push(gt)}),it.timelines=Zo,n.append($t,it.timelines),a.push({instruction:it,player:Ne,element:$t}),it.queriedElements.forEach(gt=>$n(s,gt,[]).push(Ne)),it.preStyleProps.forEach((gt,Kt)=>{if(gt.size){let ri=l.get(Kt);ri||l.set(Kt,ri=new Set),gt.forEach((Gi,At)=>ri.add(At))}}),it.postStyleProps.forEach((gt,Kt)=>{let ri=c.get(Kt);ri||c.set(Kt,ri=new Set),gt.forEach((Gi,At)=>ri.add(At))})});if(J.length){const oe=[];J.forEach(de=>{oe.push(function Ode(){return new N(3505,!1)}())}),X.forEach(de=>de.destroy()),this.reportError(oe)}const ee=new Map,se=new Map;a.forEach(oe=>{const de=oe.element;n.has(de)&&(se.set(de,de),this._beforeAnimationBuild(oe.player.namespaceId,oe.instruction,ee))}),r.forEach(oe=>{const de=oe.element;this._getPreviousPlayers(de,!1,oe.namespaceId,oe.triggerName,null).forEach(Ne=>{$n(ee,de,[]).push(Ne),Ne.destroy()})});const Ee=C.filter(oe=>o2(oe,l,c)),ut=new Map;i2(ut,this.driver,k,c,fo).forEach(oe=>{o2(oe,l,c)&&Ee.push(oe)});const ni=new Map;g.forEach((oe,de)=>{i2(ni,this.driver,new Set(oe),l,"!")}),Ee.forEach(oe=>{const de=ut.get(oe),pe=ni.get(oe);ut.set(oe,new Map([...de?.entries()??[],...pe?.entries()??[]]))});const In=[],Gn=[],Yn={};a.forEach(oe=>{const{element:de,player:pe,instruction:Ne}=oe;if(n.has(de)){if(d.has(de))return pe.onDestroy(()=>Gr(de,Ne.toStyles)),pe.disabled=!0,pe.overrideTotalTime(Ne.totalTime),void r.push(pe);let $t=Yn;if(se.size>1){let _i=de;const mn=[];for(;_i=_i.parentNode;){const it=se.get(_i);if(it){$t=it;break}mn.push(_i)}mn.forEach(it=>se.set(it,$t))}const li=this._buildAnimation(pe.namespaceId,Ne,ee,o,ni,ut);if(pe.setRealPlayer(li),$t===Yn)In.push(pe);else{const _i=this.playersByElement.get($t);_i&&_i.length&&(pe.parentPlayer=Qo(_i)),r.push(pe)}}else ts(de,Ne.fromStyles),pe.onDestroy(()=>Gr(de,Ne.toStyles)),Gn.push(pe),d.has(de)&&r.push(pe)}),Gn.forEach(oe=>{const de=o.get(oe.element);if(de&&de.length){const pe=Qo(de);oe.setRealPlayer(pe)}}),r.forEach(oe=>{oe.parentPlayer?oe.syncPlayerEvents(oe.parentPlayer):oe.destroy()});for(let oe=0;oe<C.length;oe++){const de=C[oe],pe=de[Tr];if(tc(de,fg),pe&&pe.hasAnimation)continue;let Ne=[];if(s.size){let li=s.get(de);li&&li.length&&Ne.push(...li);let _i=this.driver.query(de,zw,!0);for(let mn=0;mn<_i.length;mn++){let it=s.get(_i[mn]);it&&it.length&&Ne.push(...it)}}const $t=Ne.filter(li=>!li.destroyed);$t.length?Rue(this,de,$t):this.processLeaveNode(de)}return C.length=0,In.forEach(oe=>{this.players.push(oe),oe.onDone(()=>{oe.destroy();const de=this.players.indexOf(oe);this.players.splice(de,1)}),oe.play()}),In}afterFlush(i){this._flushFns.push(i)}afterFlushAnimationsDone(i){this._whenQuietFns.push(i)}_getPreviousPlayers(i,e,n,r,o){let a=[];if(e){const s=this.playersByQueriedElement.get(i);s&&(a=s)}else{const s=this.playersByElement.get(i);if(s){const l=!o||o==Gu;s.forEach(c=>{c.queued||!l&&c.triggerName!=r||a.push(c)})}}return(n||r)&&(a=a.filter(s=>!(n&&n!=s.namespaceId||r&&r!=s.triggerName))),a}_beforeAnimationBuild(i,e,n){const o=e.element,a=e.isRemovalTransition?void 0:i,s=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,d=c!==o,u=$n(n,c,[]);this._getPreviousPlayers(c,d,a,s,e.toState).forEach(g=>{const m=g.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),g.destroy(),u.push(g)})}ts(o,e.fromStyles)}_buildAnimation(i,e,n,r,o,a){const s=e.triggerName,l=e.element,c=[],d=new Set,u=new Set,p=e.timelines.map(m=>{const b=m.element;d.add(b);const C=b[Tr];if(C&&C.removedBeforeQueried)return new Od(m.duration,m.delay);const w=b!==l,k=function Fue(t){const i=[];return r2(t,i),i}((n.get(b)||Tue).map(ee=>ee.getRealPlayer())).filter(ee=>!!ee.element&&ee.element===b),F=o.get(b),U=a.get(b),X=ON(this._normalizer,m.keyframes,F,U),J=this._buildPlayer(m,X,k);if(m.subTimeline&&r&&u.add(b),w){const ee=new oC(i,s,b);ee.setRealPlayer(J),c.push(ee)}return J});c.forEach(m=>{$n(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>function Iue(t,i,e){let n=t.get(i);if(n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&t.delete(i)}return n}(this.playersByQueriedElement,m.element,m))}),d.forEach(m=>or(m,qN));const g=Qo(p);return g.onDestroy(()=>{d.forEach(m=>tc(m,qN)),Gr(l,e.toStyles)}),u.forEach(m=>{$n(r,m,[]).push(g)}),g}_buildPlayer(i,e,n){return e.length>0?this.driver.animate(i.element,e,i.duration,i.delay,i.easing,n):new Od(i.duration,i.delay)}}class oC{namespaceId;triggerName;element;_player=new Od;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(i,e,n){this.namespaceId=i,this.triggerName=e,this.element=n}setRealPlayer(i){this._containsRealPlayer||(this._player=i,this._queuedCallbacks.forEach((e,n)=>{e.forEach(r=>Lw(i,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(i.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(i){this.totalTime=i}syncPlayerEvents(i){const e=this._player;e.triggerCallback&&i.onStart(()=>e.triggerCallback("start")),i.onDone(()=>this.finish()),i.onDestroy(()=>this.destroy())}_queueEvent(i,e){$n(this._queuedCallbacks,i,[]).push(e)}onDone(i){this.queued&&this._queueEvent("done",i),this._player.onDone(i)}onStart(i){this.queued&&this._queueEvent("start",i),this._player.onStart(i)}onDestroy(i){this.queued&&this._queueEvent("destroy",i),this._player.onDestroy(i)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(i){this.queued||this._player.setPosition(i)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(i){const e=this._player;e.triggerCallback&&e.triggerCallback(i)}}function Cg(t){return t&&1===t.nodeType}function t2(t,i){const e=t.style.display;return t.style.display=i??"none",e}function i2(t,i,e,n,r){const o=[];e.forEach(l=>o.push(t2(l)));const a=[];n.forEach((l,c)=>{const d=new Map;l.forEach(u=>{const p=i.computeStyle(c,u,r);d.set(u,p),(!p||0==p.length)&&(c[Tr]=xue,a.push(c))}),t.set(c,d)});let s=0;return e.forEach(l=>t2(l,o[s++])),a}function n2(t,i){const e=new Map;if(t.forEach(s=>e.set(s,[])),0==i.length)return e;const r=new Set(i),o=new Map;function a(s){if(!s)return 1;let l=o.get(s);if(l)return l;const c=s.parentNode;return l=e.has(c)?c:r.has(c)?1:a(c),o.set(s,l),l}return i.forEach(s=>{const l=a(s);1!==l&&e.get(l).push(s)}),e}function or(t,i){t.classList?.add(i)}function tc(t,i){t.classList?.remove(i)}function Rue(t,i,e){Qo(e).onDone(()=>t.processLeaveNode(i))}function r2(t,i){for(let e=0;e<t.length;e++){const n=t[e];n instanceof BA?r2(n.players,i):i.push(n)}}function o2(t,i,e){const n=e.get(t);if(!n)return!1;let r=i.get(t);return r?n.forEach(o=>r.add(o)):i.set(t,n),e.delete(t),!0}class Yu{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(i,e)=>{};constructor(i,e,n){this._driver=e,this._normalizer=n,this._transitionEngine=new Mue(i.body,e,n),this._timelineEngine=new Sue(i.body,e,n),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(i,e,n,r,o){const a=i+"-"+r;let s=this._triggerCache[a];if(!s){const l=[],d=Qw(this._driver,o,l,[]);if(l.length)throw function kde(){return new N(3404,!1)}();s=function vue(t,i,e){return new yue(t,i,e)}(r,d,this._normalizer),this._triggerCache[a]=s}this._transitionEngine.registerTrigger(e,r,s)}register(i,e){this._transitionEngine.register(i,e)}destroy(i,e){this._transitionEngine.destroy(i,e)}onInsert(i,e,n,r){this._transitionEngine.insertNode(i,e,n,r)}onRemove(i,e,n){this._transitionEngine.removeNode(i,e,n)}disableAnimations(i,e){this._transitionEngine.markElementAsDisabled(i,e)}process(i,e,n,r){if("@"==n.charAt(0)){const[o,a]=LN(n);this._timelineEngine.command(o,e,a,r)}else this._transitionEngine.trigger(i,e,n,r)}listen(i,e,n,r,o){if("@"==n.charAt(0)){const[a,s]=LN(n);return this._timelineEngine.listen(a,e,s,o)}return this._transitionEngine.listen(i,e,n,r,o)}flush(i=-1){this._transitionEngine.flush(i)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(i){this._transitionEngine.afterFlushAnimationsDone(i)}}let Nue=(()=>{class t{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r;let o=t.initialStylesByElement.get(e);o||t.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Gr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Gr(this._element,this._initialStyles),this._endStyles&&(Gr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(ts(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ts(this._element,this._endStyles),this._endStyles=null),Gr(this._element,this._initialStyles),this._state=3)}}return t})();function aC(t){let i=null;return t.forEach((e,n)=>{(function Bue(t){return"display"===t||"position"===t})(n)&&(i=i||new Map,i.set(n,e))}),i}class a2{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(i,e,n,r){this.element=i,this.keyframes=e,this.options=n,this._specialStyles=r,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const i=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,i,this.options),this._finalKeyframe=i.length?i[i.length-1]:new Map;const e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(i){const e=[];return i.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(i,e,n){return i.animate(this._convertKeyframesToObject(e),n)}onStart(i){this._originalOnStartFns.push(i),this._onStartFns.push(i)}onDone(i){this._originalOnDoneFns.push(i),this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(i=>i()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}setPosition(i){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=i*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const i=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&i.set(r,this._finished?n:Yw(this.element,r))}),this.currentSnapshot=i}triggerCallback(i){const e="start"===i?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class s2{validateStyleProperty(i){return!0}validateAnimatableStyleProperty(i){return!0}containsElement(i,e){return BN(i,e)}getParentElement(i){return Hw(i)}query(i,e,n){return HN(i,e,n)}computeStyle(i,e,n){return Yw(i,e)}animate(i,e,n,r,o,a=[]){const l={duration:n,delay:r,fill:0==r?"both":"forwards"};o&&(l.easing=o);const c=new Map,d=a.filter(g=>g instanceof a2);(function Yde(t,i){return 0===t||0===i})(n,r)&&d.forEach(g=>{g.currentSnapshot.forEach((m,b)=>c.set(b,m))});let u=function $de(t){return t.length?t[0]instanceof Map?t:t.map(i=>new Map(Object.entries(i))):[]}(e).map(g=>new Map(g));u=function Kde(t,i,e){if(e.size&&i.length){let n=i[0],r=[];if(e.forEach((o,a)=>{n.has(a)||r.push(a),n.set(a,o)}),r.length)for(let o=1;o<i.length;o++){let a=i[o];r.forEach(s=>a.set(s,Yw(t,s)))}}return i}(i,u,c);const p=function Lue(t,i){let e=null,n=null;return Array.isArray(i)&&i.length?(e=aC(i[0]),i.length>1&&(n=aC(i[i.length-1]))):i instanceof Map&&(e=aC(i)),e||n?new Nue(t,e,n):null}(i,u);return new a2(i,u,l,p)}}const l2="@.disabled";class c2{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(i,e,n,r){this.namespaceId=i,this.delegate=e,this.engine=n,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(i){this.delegate.destroyNode?.(i)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(i,e){return this.delegate.createElement(i,e)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}appendChild(i,e){this.delegate.appendChild(i,e),this.engine.onInsert(this.namespaceId,e,i,!1)}insertBefore(i,e,n,r=!0){this.delegate.insertBefore(i,e,n),this.engine.onInsert(this.namespaceId,e,i,r)}removeChild(i,e,n){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(i,e){return this.delegate.selectRootElement(i,e)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,e,n,r){this.delegate.setAttribute(i,e,n,r)}removeAttribute(i,e,n){this.delegate.removeAttribute(i,e,n)}addClass(i,e){this.delegate.addClass(i,e)}removeClass(i,e){this.delegate.removeClass(i,e)}setStyle(i,e,n,r){this.delegate.setStyle(i,e,n,r)}removeStyle(i,e,n){this.delegate.removeStyle(i,e,n)}setProperty(i,e,n){"@"==e.charAt(0)&&e==l2?this.disableAnimations(i,!!n):this.delegate.setProperty(i,e,n)}setValue(i,e){this.delegate.setValue(i,e)}listen(i,e,n,r){return this.delegate.listen(i,e,n,r)}disableAnimations(i,e){this.engine.disableAnimations(i,e)}}class Hue extends c2{factory;constructor(i,e,n,r,o){super(e,n,r,o),this.factory=i,this.namespaceId=e}setProperty(i,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==l2?this.disableAnimations(i,n=void 0===n||!!n):this.engine.process(this.namespaceId,i,e.slice(1),n):this.delegate.setProperty(i,e,n)}listen(i,e,n,r){if("@"==e.charAt(0)){const o=function Vue(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(i);let a=e.slice(1),s="";return"@"!=a.charAt(0)&&([a,s]=function que(t){const i=t.indexOf(".");return[t.substring(0,i),t.slice(i+1)]}(a)),this.engine.listen(this.namespaceId,o,a,s,l=>{this.factory.scheduleListenerCallback(l._data||-1,n,l)})}return this.delegate.listen(i,e,n,r)}}class jue{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(i,e,n){this.delegate=i,this.engine=e,this._zone=n,e.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(i,e){const r=this.delegate.createRenderer(i,e);if(!i||!e?.data?.animation){const c=this._rendererCache;let d=c.get(r);return d||(d=new c2("",r,this.engine,()=>c.delete(r)),c.set(r,d)),d}const o=e.id,a=e.id+"-"+this._currentId;this._currentId++,this.engine.register(a,i);const s=c=>{Array.isArray(c)?c.forEach(s):this.engine.registerTrigger(o,a,i,c.name,c)};return e.data.animation.forEach(s),new Hue(this,a,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(i,e,n){if(i>=0&&i<this._microtaskId)return void this._zone.run(()=>e(n));const r=this._animationCallbacksBuffer;0==r.length&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{const[a,s]=o;a(s)}),this._animationCallbacksBuffer=[]})}),r.push([e,n])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(i){this.engine.flush(),this.delegate.componentReplaced?.(i)}}const Gue=[{provide:qw,useFactory:()=>new s2},{provide:Sn,useFactory:()=>"BrowserAnimations"},...[{provide:jw,useFactory:function zue(){return new zN}},{provide:Yu,useClass:(()=>{class t extends Yu{constructor(e,n,r){super(e,n,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(n){return new(n||t)(P(Ge),P(qw),P(jw))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})()},{provide:Hn,useFactory:function $ue(t,i,e){return new jue(t,i,e)},deps:[F0,Yu,ce]}]];(function _K(t,i){return U$({rootComponent:t,...tR(i)})})(Fse,{providers:[JC(kK,ide,MS,Vo,fne,Gre,NQ,$o,fX),Ai,It,rF,function Yue(){return wn("NgEagerAnimations"),[...Gue]}()]}).catch(t=>console.error(t))}},nc=>{nc(nc.s=502)}]);